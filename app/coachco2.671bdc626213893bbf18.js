!function(e){function t(t){for(var a,i,c=t[0],l=t[1],u=t[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(s&&s(t);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=l;o.push([0,1]),n()}({"+Vcn":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("6t5v"),i=n("TSYQ"),c=n.n(i),l=n("R/WZ"),u=n("WVRf"),s=n("1aYg"),d=n("lEaz"),f=n("y6ex"),p=n("QaI8"),m=n("N1rN"),b=Object(l.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2]}}})),v=function(e){var t=e.className,n=b();return r.a.createElement(u.a,{display:"flex",className:t},r.a.createElement(s.a,{className:n.paper,elevation:2}),r.a.createElement(u.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(d.a,{className:n.iconButton,disabled:!0},r.a.createElement(f.a,{icon:m.a})),r.a.createElement(d.a,{className:c()(n.iconButton,"u-ml-half"),disabled:!0},r.a.createElement(f.a,{icon:p.a}))))},j=n("17x9"),O=n.n(j),y=n("MSWZ"),h=n("buk/"),g=n("RIqP"),C=n.n(g),x=n("44Ds"),_=n.n(x),E=function(e){return Array(12).fill().map((function(t,n){return new Intl.DateTimeFormat("".concat(e,"-").concat(e.toUpperCase()),{month:"long"}).format(new Date(0,n))}))},w=function(e){return new Date(Math.min.apply(null,e))},L=function(e){return new Date(Math.max.apply(null,e))},D=function(e,t){return e.map((function(e,n){return t.includes(e)?null:n})).filter((function(e){return null!==e}))},M=function(e,t){var n=function(e){var t=L(e).getFullYear(),n=w(e).getFullYear(),a=Number(n);return Array(t-n+1).fill().map((function(){return a++})).sort().reverse()}(e),a=function(e){return C()(new Set(e.map((function(e){return e.getFullYear()}))))}(e),r=n.indexOf(t.getFullYear());return{years:n,yearSelectedIndex:r,disabledYearsIndexes:D(n,a)}},k=_()((function(e){var t=e.dates,n=e.selectedDate,a=e.lang,r=E(a),o=w(t),i=L(t),c=n.getFullYear(),l=c===i.getFullYear(),u=c===o.getFullYear(),s=12;l?s=i.getMonth()+1:u&&(s=12-o.getMonth());var d,f=function(e){var t=e.monthCount,n=e.allMonthsName,a=e.endToStart;return n.slice(a?n.length-t:0,a?n.length:t)}({monthCount:s,allMonthsName:r,endToStart:u}),p=f.indexOf(r[n.getMonth()]);-1===p&&(l?d=i:u&&(d=o),p=f.indexOf(r[d.getMonth()]));var m=function(e){var t=e.dates,n=e.year,a=e.allMonthsName;return C()(new Set(t.map((function(e){return e.getFullYear()===n?a[e.getMonth()]:null})).filter((function(e){return null!==e}))))}({dates:t,year:c,allMonthsName:r});return{months:f,monthSelectedIndex:p,disabledMonthsIndexes:D(f,m)}})),S=_()((function(e){var t=e.oldDate,n=e.lang,a=e.value,r=e.type,o=e.dates,i=E(n);if("year"===r){var c=new Date(new Date(t).setFullYear(a)),l=k({dates:o,selectedDate:c,lang:n}),u=l.months,s=l.monthSelectedIndex,d=i.indexOf(u[s]);return new Date(new Date(c).setMonth(d))}if("month"===r){var f=i.indexOf(a);return new Date(new Date(t).setMonth(f))}return t})),N=n("pVnL"),I=n.n(N),P=n("J4zp"),A=n.n(P),B=n("QILm"),T=n.n(B),R=n("gd/W"),z=n("jjAL"),F=n("Z3vd"),H=n("c8ah"),V=n("oCl1"),q=["children","className","spaceBetween"],Z=Object(l.a)((function(){return{button:{padding:"0 1rem",justifyContent:function(e){return e.spaceBetween?"space-between":"left"}},typography:{textTransform:"capitalize"}}})),Q=function(e){var t=e.children,n=e.className,a=e.spaceBetween,o=T()(e,q),i=Z({spaceBetween:a});return r.a.createElement(F.a,I()({className:c()(i.button,n),endIcon:r.a.createElement(f.a,{icon:V.a,size:10})},o),r.a.createElement(H.a,{className:i.typography,variant:"body1"},t))},U=["className","type","options","selectedIndex","disabledIndexes","onclick"],W=Object(l.a)((function(){return{paper:{textTransform:"capitalize",width:function(e){var t=e.anchorEl;return t?window.getComputedStyle(t).width:void 0},marginTop:2}}})),Y=function(e){var t=e.className,n=e.type,o=e.options,i=e.selectedIndex,c=e.disabledIndexes,l=e.onclick,u=T()(e,U),s=Object(a.useState)(null),d=A()(s,2),f=d[0],p=d[1],m=Object(a.useState)(i||0),b=A()(m,2),v=b[0],j=b[1],O=W({anchorEl:f}).paper,y=function(e){return function(){p(null),j(e),l&&l(n,o[e])}};return Object(a.useEffect)((function(){void 0!==i&&j(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,I()({"data-testid":"dropdown-button",className:t,onClick:function(e){p(e.currentTarget)}},u),o[v]),r.a.createElement(R.a,{"data-testid":"dropdown-menu",classes:{paper:O},anchorEl:f,getContentAnchorEl:null,keepMounted:!0,open:Boolean(f),onClose:function(){p(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},elevation:2},o.map((function(e,t){return r.a.createElement(z.a,{"data-testid":"dropdown-menuItem-".concat(t),key:t,onClick:y(t),selected:t===v,disabled:c&&c.includes(t)},e)}))))};Y.proptypes={className:O.a.string,type:O.a.oneOfType([O.a.string,O.a.number]),options:O.a.array.isRequired,selectedIndex:O.a.number,disabledIndexes:O.a.array,onclick:O.a.func};var G=Y,K=Object(l.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},leftDropdownButton:{borderTopLeftRadius:1e3,borderBottomLeftRadius:1e3},rightDropdownButton:{borderTopRightRadius:1e3,borderBottomRightRadius:1e3,paddingRight:"1.2rem"},divider:{margin:"0.6rem 0"},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2]}}})),J=function(e){var t=e.className,n=e.options,o=e.selectedDate,i=e.setSelectedDate,l=K(),b=Object(h.e)().lang,v=Object(a.useCallback)(k({dates:n,selectedDate:o,lang:b}),[n,o,b]),j=v.months,O=v.monthSelectedIndex,g=v.disabledMonthsIndexes,C=Object(a.useCallback)(M(n,o),[n,o]),x=C.years,_=C.yearSelectedIndex,E=C.disabledYearsIndexes,D=function(e,t){var a=S({oldDate:o,lang:b,value:t,type:e,dates:n});i(a)},N=function(e){return function(){i((function(t){return new Date(t.setMonth(t.getMonth()+e))}))}},I=function(e){return function(e){var t=e.type,n=e.selectedDate,a=e.options,r=new Date(n.getFullYear(),n.getMonth());if("previous"===t){var o=w(a);return new Date(o.getFullYear(),o.getMonth()).getTime()===r.getTime()}if("next"===t){var i=L(a);return new Date(i.getFullYear(),i.getMonth()).getTime()===r.getTime()}return!1}({type:e,selectedDate:o,options:n})};return r.a.createElement(u.a,{display:"flex",className:t},r.a.createElement(s.a,{className:l.paper,elevation:2},r.a.createElement(G,{"data-testid":"dropdown-button-year",type:"year",className:l.leftDropdownButton,options:x,onclick:D,selectedIndex:_,disabledIndexes:E}),r.a.createElement(y.a,{className:l.divider,orientation:"vertical",flexItem:!0}),r.a.createElement(G,{"data-testid":"dropdown-button-month",type:"month",className:l.rightDropdownButton,fullWidth:!0,spaceBetween:!0,options:j,onclick:D,selectedIndex:O,disabledIndexes:g})),r.a.createElement(u.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(d.a,{"data-testid":"previous-button",className:l.iconButton,onClick:N(-1),disabled:I("previous")},r.a.createElement(f.a,{icon:m.a})),r.a.createElement(d.a,{"data-testid":"next-button",className:c()(l.iconButton,"u-ml-half"),onClick:N(1),disabled:I("next")},r.a.createElement(f.a,{icon:p.a}))))};J.proptypes={className:O.a.string,options:O.a.array.isRequired,selectedDate:O.a.number.isRequired,setSelectedDate:O.a.func.isRequired};var X=J,$=function(e){var t=e.className,n=e.options,a=e.isLoading,o=e.selectedDate,i=e.setSelectedDate;return a?r.a.createElement(v,{className:t}):r.a.createElement(X,{className:t,options:n,selectedDate:o,setSelectedDate:i})},ee=n("lSNA"),te=n.n(ee),ne=n("SH7X"),ae=n("6QpA"),re=n("dN3h"),oe=["data"],ie=["data"];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){te()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=function(){var e=Object(a.useContext)(ae.a).selectedAccount,t=Object(re.a)(),n=Object(ne.useQuery)(t.definition,t.options),r=n.data,o=T()(n,oe),i=Object(ne.isQueryLoading)(o),c=i?null:e||r[0],l=Object(re.d)(null==c?void 0:c._id),u=Object(ne.useQuery)(l.definition,le(le({},l.options),{},{enabled:!i})),s=u.data,d=T()(u,ie);return{timeseries:s,isLoading:i||Object(ne.isQueryLoading)(d)}};t.a=function(){var e=Object(o.b)(),t=e.selectedDate,n=e.setSelectedDate,i=ue(),c=i.timeseries,l=i.isLoading,u=Object(a.useCallback)(function(e,t){return e?null:t.map((function(e){return new Date(e.startDate)}))}(l,c),[l,c]);return Object(a.useEffect)((function(){u&&null===t&&n(L(u))}),[u,t,n]),Object(a.useEffect)((function(){return function(){n(null)}}),[]),r.a.createElement($,{className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2",isLoading:l||null===t,options:u,selectedDate:t,setSelectedDate:n})}},"/KVF":function(e,t,n){var a={"./en":"7dT6","./en.json":"7dT6","./fr":"9pOX","./fr.json":"9pOX"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="/KVF"},"/kYV":function(e,t,n){},0:function(e,t,n){n("55Il"),n("7NIr"),e.exports=n("LiWt")},1:function(e,t){},"2E0U":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("qxfp"),r="io.cozy.apps";t.b={todos:{doctype:a.j,attributes:{},relationships:{}},files:{doctype:"io.cozy.files",attributes:{},relationships:{}}}},"3zCr":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("J4zp"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("k4gI"),l=n("q54A"),u=n("iFCN"),s=n("uPPc"),d=n("IAR5"),f={mediumHeightRatio:.66},p=function(e){var t=e.titleRef,n=Object(o.useState)(0),a=r()(n,2),p=a[0],m=a[1],b=Object(o.useMemo)((function(){return{height:p}}),[p]),v=Object(o.useMemo)((function(){return function(e){var t=e.toolbarHeight;return{mapContainer:{height:"calc(100vh - ".concat(t,"px - var(--sidebarHeight) - env(safe-area-inset-bottom))")}}}({toolbarHeight:p})}),[p]);return Object(o.useEffect)((function(){null!=t&&t.current&&m(t.current.offsetHeight)}),[t]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"u-w-100 u-pos-fixed",style:v.mapContainer},i.a.createElement(d.a,null)),i.a.createElement(c.a,{settings:f,toolbarProps:b},i.a.createElement(l.a,{className:"u-h-3 u-pb-half"},i.a.createElement(u.a,null)),i.a.createElement(s.a,null)))};t.b=i.a.memo(p)},"6QpA":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("J4zp"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=Object(o.createContext)();t.b=function(e){var t=e.children,n=Object(o.useState)(null),a=r()(n,2),l=a[0],u=a[1];return i.a.createElement(c.Provider,{value:{selectedAccount:l,setSelectedAccount:u}},t)}},"6ibL":function(e,t,n){"use strict";n.d(t,"d",(function(){return _})),n.d(t,"l",(function(){return E})),n.d(t,"p",(function(){return w})),n.d(t,"h",(function(){return L})),n.d(t,"i",(function(){return D})),n.d(t,"j",(function(){return k})),n.d(t,"k",(function(){return A})),n.d(t,"n",(function(){return T})),n.d(t,"m",(function(){return R})),n.d(t,"o",(function(){return z})),n.d(t,"g",(function(){return F})),n.d(t,"f",(function(){return H})),n.d(t,"c",(function(){return q})),n.d(t,"e",(function(){return Z})),n.d(t,"a",(function(){return Q})),n.d(t,"b",(function(){return U}));var a=n("lSNA"),r=n.n(a),o=n("J4zp"),i=n.n(o),c=n("mwIZ"),l=n.n(c),u=n("TYy9"),s=n.n(u),d=n("7tbW"),f=n.n(d),p=n("44Ds"),m=n.n(p),b=n("NmtT"),v=n.n(b),j=n("jxQj"),O=n.n(j),y=n("qxfp"),h=n("zyvo"),g=n("6k9G");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e,t){if(0===t)return"0%";var n=(100*e/t).toFixed(2).split("."),a=i()(n,2),r=a[0],o=a[1];return"00"===o?"".concat(r,"%"):"".concat(r,".").concat(o,"%")},E=function(e){return l()(e,"properties.manual_purpose")},w=function(e){return l()(e,"properties.start_place.data.properties.display_name")},L=function(e){return l()(e,"properties.end_place.data.properties.display_name")},D=function(e){var t=new Date(e.properties.start_fmt_time),n=new Date(e.properties.end_fmt_time);return v()(n,t)},M=function(e){var t="m",n=e;return e>1e3&&(t="km",n=e/1e3),"".concat(Math.round(n)," ").concat(t)},k=function(e){return M(e.properties.distance)},S=function(e){var t=l()(e,"properties.manual_mode"),n=l()(e,"properties.sensed_mode"),a=n&&n.split("PredictedModeTypes.")[1],r=g.b.includes(a);return t||r&&a||y.Q},N=function(e){return e.features.map((function(e){return S(e)}))},I=function(e){return l()(e,"features[0].properties.distance")},P=function(e,t){return I(e)>I(t)?-1:1},A=function(e){return f()(s()(e.features.filter((function(e){return"FeatureCollection"===e.type})).sort(P).map(N)).filter(Boolean))},B=function(e){return e.features.map((function(e){var t=l()(e,"properties.start_fmt_time"),n=l()(e,"properties.end_fmt_time"),a=l()(e,"properties.speeds");return{id:e.id,mode:S(e),coordinates:l()(e,"geometry.coordinates"),timestamps:l()(e,"properties.timestamps"),distance:l()(e,"properties.distance"),distances:l()(e,"properties.distances"),duration:l()(e,"properties.duration"),startDate:t?new Date(t):t,endDate:n?new Date(n):n,speeds:a,averageSpeed:a?V(a):void 0}}))},T=m()((function(e){return e.features.filter((function(e){return"FeatureCollection"===e.type})).flatMap(B)})),R=function(e,t){var n=T(e),a=["fr","en"].includes(t)?t:"en";return n.map((function(e){return x(x({},e),{},{distance:"".concat(M(e.distance)),duration:"".concat(O()(1e3*e.duration,{delimiter:" ",largest:2,round:!0,units:["h","m"],language:a,languages:{fr:{d:function(){return"j"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}},en:{d:function(){return"d"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}}}})),averageSpeed:"".concat(Math.round(e.averageSpeed)," km/h")})}))},z=function(e){return new Date(e.properties.start_fmt_time)},F=function(e){return new Date(e.properties.end_fmt_time)},H=function(e){var t=e.f,n=e.lang,a=e.date;return t(a,"fr"===n?"HH[h]mm":"HH:mm")},V=function(e){return 3.6*(e.reduce((function(e,t){return e+t}),0)/e.length)},q=function(e){var t,n=Object(h.d)(e);return t=n,"".concat(Math.round(t)," kcal")},Z=function(e){return"".concat(Math.round(100*e)/100," kg")},Q=function(e){var t=Object(h.b)(e);return Z(t)},U=function(e,t){var n=Object(h.c)(e,t);return Z(n)}},"6k9G":function(e,t,n){"use strict";n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return q})),n.d(t,"a",(function(){return Z})),n.d(t,"f",(function(){return Q})),n.d(t,"d",(function(){return U})),n.d(t,"e",(function(){return W}));var a=n("lSNA"),r=n.n(a),o=n("4BeY"),i=n.n(o),c=n("IaFt"),l=n.n(c),u=new i.a({id:"icon-bike_65d46ca584727420e1c29afb24e1e3b9",use:"icon-bike_65d46ca584727420e1c29afb24e1e3b9-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-bike_65d46ca584727420e1c29afb24e1e3b9">\n<path d="M12.5 3C12.5 4.10457 11.6046 5 10.5 5C9.39543 5 8.5 4.10457 8.5 3C8.5 1.89543 9.39543 1 10.5 1C11.6046 1 12.5 1.89543 12.5 3Z" />\n<path d="M8.45697 7.54303C8.63931 7.69896 8.83598 7.85182 9.04516 7.9962C9.81647 8.52854 10.8381 9 12 9C12.5523 9 13 8.55228 13 8C13 7.44772 12.5523 7 12 7C11.3793 7 10.7507 6.74323 10.1812 6.35018C9.61222 5.95746 9.1823 5.48301 8.97738 5.18643C8.72314 4.81846 8.27236 4.5 7.70064 4.5C7.30696 4.5 6.9294 4.65639 6.65102 4.93476L4.44715 7.13864C4.16084 7.42494 4 7.81325 4 8.21815C4 8.72859 4.2551 9.20525 4.67982 9.48839L7 11.0352V14C7 14.5523 7.44772 15 8 15C8.55228 15 9 14.5523 9 14V10.5C9 10.1656 8.8329 9.85342 8.5547 9.66795L7.22111 8.77889L8.45697 7.54303Z" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16 13C16 14.6569 14.6569 16 13 16C11.3431 16 10 14.6569 10 13C10 11.3431 11.3431 10 13 10C14.6569 10 16 11.3431 16 13ZM14.5 13C14.5 13.8284 13.8284 14.5 13 14.5C12.1716 14.5 11.5 13.8284 11.5 13C11.5 12.1716 12.1716 11.5 13 11.5C13.8284 11.5 14.5 12.1716 14.5 13Z" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16C4.65685 16 6 14.6569 6 13C6 11.3431 4.65685 10 3 10C1.34315 10 0 11.3431 0 13C0 14.6569 1.34315 16 3 16ZM3 14.5C3.82843 14.5 4.5 13.8284 4.5 13C4.5 12.1716 3.82843 11.5 3 11.5C2.17157 11.5 1.5 12.1716 1.5 13C1.5 13.8284 2.17157 14.5 3 14.5Z" />\n</symbol>'}),s=(l.a.add(u),u),d=new i.a({id:"icon-bus_415f853847fd170ca8b598425515dddb",use:"icon-bus_415f853847fd170ca8b598425515dddb-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-bus_415f853847fd170ca8b598425515dddb">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1 11C1 11.88 1.39 12.67 2 13.22V14.5C2 15.33 2.67 16 3.5 16C4.33 16 5 15.33 5 14.5V14H11V14.5C11 15.32 11.67 16 12.5 16C13.32 16 14 15.33 14 14.5V13.22C14.61 12.67 15 11.88 15 11V4C15 1 12 0 8 0C4 0 1 1 1 4V11ZM4.5 12C3.67 12 3 11.33 3 10.5C3 9.67 3.67 9 4.5 9C5.33 9 6 9.67 6 10.5C6 11.33 5.33 12 4.5 12ZM11.5 12C10.67 12 10 11.33 10 10.5C10 9.67 10.67 9 11.5 9C12.33 9 13 9.67 13 10.5C13 11.33 12.33 12 11.5 12ZM13 7H3V3H13V7Z" />\n</symbol>'}),f=(l.a.add(d),d),p=n("cStB"),m=new i.a({id:"icon-plane_22e9ed98beea0170553db3e03775b4b4",use:"icon-plane_22e9ed98beea0170553db3e03775b4b4-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-plane_22e9ed98beea0170553db3e03775b4b4">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5388 0.461149C14.915 -0.162685 13.9003 -0.15226 13.2895 0.484295L9.87894 4.08068L2.02506 1.13549C1.83777 1.06526 1.62671 1.11097 1.48527 1.25241L0.149401 2.58828C-0.0498005 2.78748 -0.0498005 3.11045 0.149401 3.30965C0.18146 3.34171 0.217649 3.36935 0.257014 3.39184L6.81841 7.14119L3.24779 10.7118L1.50892 10.2771C1.32376 10.2308 1.12825 10.2917 1.00219 10.435L0.140789 11.4144C-0.0452691 11.6259 -0.0246203 11.9482 0.18691 12.1343C0.227083 12.1696 0.272564 12.1984 0.321687 12.2196L2.7377 13.2622L3.78034 15.6782C3.89196 15.9369 4.19213 16.0561 4.45079 15.9444C4.49991 15.9232 4.54539 15.8945 4.58557 15.8591L5.56489 14.9977C5.7082 14.8717 5.76915 14.6762 5.72286 14.491L5.28814 12.7521L8.85876 9.18153L12.6081 15.7429C12.7479 15.9875 13.0595 16.0725 13.3041 15.9327C13.3434 15.9102 13.3796 15.8826 13.4117 15.8505L14.7476 14.5146C14.889 14.3732 14.9347 14.1621 14.8645 13.9749L11.9193 6.12102L15.5157 2.71053C16.1523 2.09964 16.1627 1.08502 15.5388 0.461149Z" />\n</symbol>'}),b=(l.a.add(m),m),v=new i.a({id:"icon-subway_33456d57d4027cd371ae5a4f7d484e6b",use:"icon-subway_33456d57d4027cd371ae5a4f7d484e6b-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-subway_33456d57d4027cd371ae5a4f7d484e6b">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.64 0.64C11.2 0.072 9.488 0 8 0C6.512 0 4.8 0.072 3.36 0.64C1.224 1.472 0 3.24 0 5.488V16H16V5.488C16 3.24 14.776 1.472 12.64 0.64ZM13 5.85714V10.8571C13 11.9278 12.2148 12.8151 11.1888 12.9745L12.2857 14.0714V14.4286H10.8571L9.42857 13H6.57143L5.14286 14.4286H3.71429V14.0714L4.81122 12.9745C3.78523 12.8151 3 11.9278 3 10.8571V5.85714C3 3.71429 5.14286 3 8 3C10.8571 3 13 3.71429 13 5.85714ZM4.42857 5.14286V8H11.5714V5.14286H4.42857ZM6.57143 10.5C6.57143 11.0917 6.09173 11.5714 5.5 11.5714C4.90827 11.5714 4.42857 11.0917 4.42857 10.5C4.42857 9.90827 4.90827 9.42857 5.5 9.42857C6.09173 9.42857 6.57143 9.90827 6.57143 10.5ZM10.5 11.5714C11.0917 11.5714 11.5714 11.0917 11.5714 10.5C11.5714 9.90827 11.0917 9.42857 10.5 9.42857C9.90827 9.42857 9.42857 9.90827 9.42857 10.5C9.42857 11.0917 9.90827 11.5714 10.5 11.5714Z" />\n</symbol>'}),j=(l.a.add(v),v),O=new i.a({id:"icon-train_70170486ca87a512b7204fe36c85d93a",use:"icon-train_70170486ca87a512b7204fe36c85d93a-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-train_70170486ca87a512b7204fe36c85d93a">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15 4V11C15 12.4989 13.9007 13.7411 12.4643 13.9643L14 15.5V16H12L10 14H6L4 16H2V15.5L3.53571 13.9643C2.09932 13.7411 1 12.4989 1 11V4C1 1 4 0 8 0C12 0 15 1 15 4ZM3 7H7V3H3V7ZM9 3V7H13V3H9ZM6 10.5C6 11.3284 5.32843 12 4.5 12C3.67157 12 3 11.3284 3 10.5C3 9.67157 3.67157 9 4.5 9C5.32843 9 6 9.67157 6 10.5ZM11.5 12C12.3284 12 13 11.3284 13 10.5C13 9.67157 12.3284 9 11.5 9C10.6716 9 10 9.67157 10 10.5C10 11.3284 10.6716 12 11.5 12Z" />\n</symbol>'}),y=(l.a.add(O),O),h=new i.a({id:"icon-walk_3412ebb9703de376be3ce0e1998574bd",use:"icon-walk_3412ebb9703de376be3ce0e1998574bd-usage",viewBox:"0 0 16 17",content:'<symbol viewBox="0 0 16 17" xmlns="http://www.w3.org/2000/svg" id="icon-walk_3412ebb9703de376be3ce0e1998574bd">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.602 3.66294C10.2731 3.8827 9.88647 4 9.49091 4C8.96047 4 8.45177 3.78929 8.07669 3.41421C7.70162 3.03914 7.49091 2.53043 7.49091 2C7.49091 1.60444 7.6082 1.21776 7.82797 0.88886C8.04773 0.559962 8.36009 0.303617 8.72554 0.152242C9.09099 0.000866563 9.49312 -0.0387401 9.88109 0.0384303C10.269 0.115601 10.6254 0.306082 10.9051 0.585787C11.1848 0.865492 11.3753 1.22186 11.4525 1.60982C11.5296 1.99778 11.49 2.39992 11.3387 2.76537C11.1873 3.13082 10.9309 3.44318 10.602 3.66294ZM10.4807 7.39386C10.9048 7.75478 11.435 7.96757 11.9909 7.99998C12.2561 7.99998 12.5105 8.10533 12.698 8.29287C12.8855 8.48041 12.9909 8.73476 12.9909 8.99998C12.9909 9.26519 12.8855 9.51955 12.698 9.70708C12.5105 9.89462 12.2561 9.99998 11.9909 9.99998C11.4289 10.0037 10.8722 9.89107 10.3558 9.66905C9.83953 9.44703 9.37478 9.12048 8.9909 8.70998L8.3009 10.29L10.6309 12.23C10.7438 12.324 10.8346 12.4417 10.8968 12.5748C10.959 12.7079 10.9911 12.8531 10.9909 13V15C10.9909 15.2652 10.8855 15.5195 10.698 15.7071C10.5105 15.8946 10.2561 16 9.9909 16C9.72568 16 9.47133 15.8946 9.28379 15.7071C9.09626 15.5195 8.9909 15.2652 8.9909 15V13.47L6.4109 11.35L4.9309 15.35C4.83807 15.5993 4.65001 15.8015 4.40809 15.9121C4.16617 16.0228 3.8902 16.0328 3.6409 15.94C3.3916 15.8471 3.18938 15.6591 3.07873 15.4172C2.96809 15.1752 2.95807 14.8993 3.0509 14.65L5.8709 6.99998L4.7509 7.31998L3.9309 9.31998C3.83277 9.56663 3.64068 9.7642 3.39688 9.86922C3.15308 9.97424 2.87755 9.97811 2.6309 9.87998C2.38425 9.78185 2.18668 9.58975 2.08166 9.34596C1.97664 9.10216 1.97277 8.82663 2.0709 8.57998L3.0709 6.07998C3.12824 5.93757 3.2176 5.81028 3.33206 5.70796C3.44651 5.60565 3.58298 5.53106 3.7309 5.48998L7.0909 4.48998H7.2109C7.32042 4.47551 7.43138 4.47551 7.5409 4.48998H7.6409C8.08988 4.50248 8.5238 4.65464 8.88227 4.92529C9.24073 5.19593 9.50591 5.57158 9.6409 5.99998C9.76177 6.54357 10.0566 7.03293 10.4807 7.39386Z" />\n</symbol>'}),g=(l.a.add(h),h),C=new i.a({id:"icon-unknow_94cf41154b7a0fc55376c4d86e0f7d4b",use:"icon-unknow_94cf41154b7a0fc55376c4d86e0f7d4b-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-unknow_94cf41154b7a0fc55376c4d86e0f7d4b">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 12C8.82845 12 9.50002 12.6716 9.50002 13.5C9.50002 14.3284 8.82845 15 8.00002 15C7.1716 15 6.50002 14.3284 6.50002 13.5C6.50002 12.6716 7.1716 12 8.00002 12ZM8.96812 1.10088C10.7451 1.47188 12.1501 2.95788 12.4401 4.74988C12.7991 6.98088 11.5181 8.97188 9.61212 9.70288L9.50012 9.74188V10.9999H6.50012V8.49988C6.50012 7.72059 7.09539 7.07948 7.85573 7.00675L8.00012 6.99988C8.82812 6.99988 9.50012 6.32888 9.50012 5.49988C9.50012 4.67188 8.82812 3.99988 8.00012 3.99988C7.22012 3.99988 6.57912 4.59488 6.50712 5.35488L6.50012 5.49988H3.50012C3.50012 2.69888 6.06012 0.494882 8.96812 1.10088Z" />\n</symbol>'}),x=(l.a.add(C),C),_=n("5YfE"),E=new i.a({id:"icon-fitness_ae3c064360611de9597b4de211955fa5",use:"icon-fitness_ae3c064360611de9597b4de211955fa5-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-fitness_ae3c064360611de9597b4de211955fa5">\n<path d="M14.9825 9.2725L15.7025 8.5525C16.0925 8.1625 16.0925 7.5325 15.7025 7.1425L15.6825 7.1225C15.2925 6.7325 14.6625 6.7325 14.2725 7.1225L11.4125 9.9825L6.0125 4.5825L8.8725 1.7225C9.2625 1.3325 9.2625 0.7025 8.8725 0.3125L8.8525 0.2925C8.4625 -0.0975 7.8325 -0.0975 7.4425 0.2925L6.7225 1.0125L6.0025 0.2925C5.6125 -0.0975 4.9725 -0.0975 4.5825 0.2925L3.1525 1.7225L2.4325 1.0025C2.0425 0.6125 1.3925 0.6125 1.0025 1.0025C0.6125 1.3925 0.6125 2.0425 1.0025 2.4325L1.7225 3.1525L0.2925 4.5825C-0.0975 4.9725 -0.0975 5.6025 0.2925 5.9925L1.0125 6.7125L0.2925 7.4425C-0.0975 7.8325 -0.0975 8.4625 0.2925 8.8525L0.3125 8.8725C0.7025 9.2625 1.3325 9.2625 1.7225 8.8725L4.5825 6.0125L9.9825 11.4125L7.1225 14.2725C6.7325 14.6625 6.7325 15.2925 7.1225 15.6825L7.1425 15.7025C7.5325 16.0925 8.1625 16.0925 8.5525 15.7025L9.2725 14.9825L9.9925 15.7025C10.3825 16.0925 11.0125 16.0925 11.4025 15.7025L12.8325 14.2725L13.5525 14.9925C13.9425 15.3825 14.5925 15.3825 14.9825 14.9925C15.3725 14.6025 15.3725 13.9525 14.9825 13.5625L14.2625 12.8425L15.7025 11.4125C16.0925 11.0225 16.0925 10.3925 15.7025 10.0025L14.9825 9.2725Z" />\n</symbol>'}),w=(l.a.add(E),E),L=n("7aXT"),D=new i.a({id:"icon-mountain_c950b1445e1a5a610bbf83a694f50951",use:"icon-mountain_c950b1445e1a5a610bbf83a694f50951-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-mountain_c950b1445e1a5a610bbf83a694f50951">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.06484 7.65952L6.06157 7.66504L4.87157 5.54949C4.48927 4.86983 3.51073 4.86983 3.12842 5.54949L0.33827 10.5098C-0.0366953 11.1764 0.445019 12 1.20985 12H5.25245H6.79015H14.7475C15.5218 12 16.0024 11.1579 15.6085 10.4913L10.8609 2.45697C10.4739 1.80194 9.52613 1.80194 9.13907 2.45697L6.94654 6.1674L8.47368 8.88231C8.67676 9.24333 8.54872 9.70062 8.1877 9.90369C7.82668 10.1068 7.36939 9.97872 7.16632 9.61771L6.06484 7.65952Z" />\n</symbol>'}),M=(l.a.add(D),D),k=new i.a({id:"icon-movement_fbb1e0f518e951b9c4a8b059b9234d1f",use:"icon-movement_fbb1e0f518e951b9c4a8b059b9234d1f-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-movement_fbb1e0f518e951b9c4a8b059b9234d1f">\n<path d="M12.585 7.002H1.00087C0.448104 7.002 0 7.4501 0 8.00287C0 8.55573 0.448265 9.00388 1.00113 9.00374L12.583 9.002L11.2929 10.2929C10.9024 10.6834 10.9024 11.3166 11.2929 11.7071C11.6834 12.0976 12.3166 12.0976 12.7071 11.7071L15.7071 8.70711C16.0976 8.31658 16.0976 7.68342 15.7071 7.29289L12.7071 4.29289C12.3166 3.90237 11.6834 3.90237 11.2929 4.29289C10.9024 4.68342 10.9024 5.31658 11.2929 5.70711L12.5858 7L12.585 7.002Z" />\n</symbol>'}),S=(l.a.add(k),k),N=n("kJHp"),I=new i.a({id:"icon-restaurant_ee0665fcc223592f963a8c2e7a7a3f0d",use:"icon-restaurant_ee0665fcc223592f963a8c2e7a7a3f0d-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-restaurant_ee0665fcc223592f963a8c2e7a7a3f0d">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 0C13.1422 0 14.8911 1.68397 14.9951 3.80036L15 4V9C15 9.51284 14.614 9.93551 14.1166 9.99327L14 10H12.5V14.75C12.5 15.4404 11.9404 16 11.25 16C10.5596 16 10 15.4404 10 14.75V1C10 0.487164 10.386 0.0644928 10.8834 0.00672773L11 0ZM7 0C7.51284 0 7.93551 0.38604 7.99327 0.883379L8 1V5C8 6.57237 6.79034 7.86221 5.25087 7.98966L5.25 14.75C5.25 15.4404 4.69036 16 4 16C3.30964 16 2.75 15.4404 2.75 14.75L2.75013 7.98974C1.26813 7.86755 0.0915336 6.66814 0.00509269 5.17627L0 5V1C0 0.447715 0.447715 0 1 0C1.51284 0 1.93551 0.38604 1.99327 0.883379L2 1V5H3V1C3 0.447715 3.44772 0 4 0C4.51284 0 4.93551 0.38604 4.99327 0.883379L5 1V5H6V1C6 0.447715 6.44772 0 7 0Z" />\n</symbol>'}),P=(l.a.add(I),I),A=new i.a({id:"icon-restore_ecfa30b3f5b20551a9355968977efa9c",use:"icon-restore_ecfa30b3f5b20551a9355968977efa9c-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-restore_ecfa30b3f5b20551a9355968977efa9c">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 5C12.6569 5 14 6.34315 14 8C14 9.65685 12.6569 11 11 11H3C2.44771 11 2 11.4477 2 12C2 12.5523 2.44771 13 3 13H11C13.7614 13 16 10.7614 16 8C16 5.23858 13.7614 3 11 3H3.41421L4.70711 1.70711C5.09763 1.31658 5.09763 0.683417 4.70711 0.292893C4.31658 -0.0976311 3.68342 -0.0976311 3.29289 0.292893L0.292893 3.29289C-0.0976315 3.68342 -0.0976315 4.31658 0.292893 4.70711L3.29289 7.70711C3.68342 8.09763 4.31658 8.09763 4.70711 7.70711C5.09763 7.31658 5.09763 6.68342 4.70711 6.29289L3.41421 5H11Z" />\n</symbol>'}),B=(l.a.add(A),A),T=new i.a({id:"icon-school_203a4d6b33c17472cb6881d9b05a14fb",use:"icon-school_203a4d6b33c17472cb6881d9b05a14fb-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-school_203a4d6b33c17472cb6881d9b05a14fb">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.9993 9.102L13 11.9446C13 12.1252 12.9026 12.2918 12.7452 12.3804L8.24516 14.9121C8.09294 14.9977 7.90706 14.9977 7.75484 14.9121L3.25484 12.3804C3.09742 12.2918 3 12.1252 3 11.9446L2.9993 9.102L7.03054 11.2575C7.63525 11.5808 8.36475 11.5808 8.96946 11.2575L12.9993 9.102ZM8.16075 1.0235L8.26216 1.06528L15.7273 5.05696C15.8127 5.1026 15.8832 5.16965 15.9312 5.25079C16.0599 5.46829 16.0021 5.73734 15.8069 5.89111L15.7273 5.94304L8.26216 9.93472C8.13194 10.0044 7.97868 10.0183 7.83925 9.9765L7.73784 9.93472L2 6.867V11C2 11.5523 1.55228 12 1 12C0.447715 12 1.52471e-09 11.5523 1.52471e-09 11V5.5C-1.17714e-05 5.35234 0.0681539 5.20792 0.191876 5.10987L0.272674 5.05696L7.73784 1.06528C7.84202 1.00957 7.96093 0.98952 8.07573 1.00512L8.16075 1.0235Z" />\n</symbol>'}),R=(l.a.add(T),T),z=new i.a({id:"icon-shop_e47217e21158c920d44711e55007f73a",use:"icon-shop_e47217e21158c920d44711e55007f73a-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-shop_e47217e21158c920d44711e55007f73a">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 13C5.32843 13 6 13.6716 6 14.5C6 15.3284 5.32843 16 4.5 16C3.67157 16 3 15.3284 3 14.5C3 13.6716 3.67157 13 4.5 13ZM12.5 13C13.3284 13 14 13.6716 14 14.5C14 15.3284 13.3284 16 12.5 16C11.6716 16 11 15.3284 11 14.5C11 13.6716 11.6716 13 12.5 13ZM2.49996 1C2.98882 1 3.40602 1.35344 3.48637 1.83564L3.847 4H14C14.5523 4 15 4.44772 15 5C15 5.05508 14.9954 5.11007 14.9864 5.1644L14.1257 10.3288C13.9649 11.2932 13.1306 12 12.1529 12H4.84696C3.86936 12 3.03502 11.2933 2.87421 10.329L1.652 3H1C0.487164 3 0.0644928 2.61396 0.00672773 2.11662L0 2C0 1.48716 0.38604 1.06449 0.883379 1.00673L1 1H2.49996Z" />\n</symbol>'}),F=(l.a.add(z),z),H=n("qxfp"),V=[H.a,H.b,H.d,H.f,H.M,H.P,H.R,H.Q],q=function(e){switch(e){case H.a:return b;case H.b:return s;case H.f:return p.a;case H.d:return f;case H.M:return j;case H.P:return y;case H.R:return g;case H.Q:default:return x}},Z=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.Q,n=(e={},r()(e,H.a,"#F05759"),r()(e,H.b,"#15CACD"),r()(e,H.d,"#BA5AE8"),r()(e,H.f,"#FF7B5E"),r()(e,H.M,"#8978FF"),r()(e,H.P,"#F1B61E"),r()(e,H.R,"#21B930"),r()(e,H.Q,"#A4A7AC"),e);return n[t]},Q=[H.n,H.S,H.F,H.G,H.o,H.A,H.l,H.k,H.B,H.z],U=function(e){switch(e){case H.n:return L.a;case H.S:return _.a;case H.F:return R;case H.G:return F;case H.o:return P;case H.A:return N.a;case H.l:return w;case H.k:return M;case H.B:return B;case H.z:default:return S}},W=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.z,n=(e={},r()(e,H.n,"#F1B61E"),r()(e,H.S,"#BA5AE8"),r()(e,H.F,"#8978FF"),r()(e,H.G,"#FF7B5E"),r()(e,H.o,"#15CACD"),r()(e,H.A,"#1CAAE8"),r()(e,H.l,"#21B930"),r()(e,H.k,"#F85AA8"),r()(e,H.B,"#C78542"),r()(e,H.z,"#A4A7AC"),e);return n[t]}},"6t5v":function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var a=n("J4zp"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=Object(o.createContext)(),l=function(){return Object(o.useContext)(c)};t.a=function(e){var t=e.children,n=Object(o.useState)(null),a=r()(n,2),l=a[0],u=a[1],s=Object(o.useMemo)((function(){return{selectedDate:l,setSelectedDate:u}}),[l]);return i.a.createElement(c.Provider,{value:s},t)}},"7dT6":function(e){e.exports=JSON.parse('{"nav":{"trips":"Trips","analysis":"Analysis","modes":"Mode of transport","purposes":"Purpose of travel","settings":"Settings"},"account":{"notFound":"No account found"},"folder":{"administrative":"Administrative","coachco2":"Coach CO2"},"devices":{"select":"Select a device","label":"Data source"},"trips":{"from":"Trips from","modes":{"AIR_OR_HSR":"Plane","BICYCLING":"Bike","CAR":"Car","SUBWAY":"Subway","TRAIN":"Train","UNKNOWN":"Unknown","WALKING":"Walking","BUS":"Bus"},"purposes":{"HOME":"Home","WORK":"Work","SCHOOL":"School","SHOPPING":"Shopping","MEAL":"Meal","PERSONAL_MED":"Personal","EXERCISE":"Sport","ENTERTAINMENT":"Entertainment","PICK_DROP":"Pick & drop","OTHER_PURPOSE":"Unknown"},"duration":"Duration","distance":"Distance","calories":"Calories","co2":"CO2"},"loadMore":"Load more trips","tripEdit":{"selectMode":"Modify the transportation mode","selectPurpose":"Modify the travel purpose"},"purpose":"Reason for travel","analysis":{"mode":"CO2 emission","purpose":"CO2 emission","travels":"%{smart_count} travel |||| %{smart_count} travel","emittedCO2":"emitted CO2"},"export":{"label":"Export","filename":"%{today} - Trips %{accountLabel}.csv","button":"Export trips in CSV","modal":{"button":{"close":"Close","viewInDrive":"View in Drive"},"title":"Exporting","content":{"done":"The \\"%{filename}\\" file was created in the \\"Drive%{pathAppDir}\\" folder of your Cozy.","progress":"The export of your trips is in progress, please wait..."}}}}')},"9muV":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("xjMU"),i=n("w7SU"),c=n("buk/"),l=n("SH7X"),u=n("6QpA"),s=n("dN3h"),d=n("YB/B"),f=n("yXPU"),p=n.n(f),m=n("J4zp"),b=n.n(m),v=n("o0o1"),j=n.n(v),O=n("aR52"),y=n("c8ah"),h=n("e5eR"),g=function(e){var t=e.onClose,n=e.appDir,a=e.fileCreated,o=e.linkToAppFolder,i=Object(c.e)().t;return r.a.createElement(h.a,{open:!0,onClose:n?t:void 0,title:i("export.modal.title"),content:n?r.a.createElement(y.a,{variant:"body1",color:"textPrimary"},i("export.modal.content.done",{filename:a.name,pathAppDir:n.path})):r.a.createElement(y.a,{variant:"body1",color:"textPrimary"},i("export.modal.content.progress")),actions:n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{variant:"secondary",onClick:t,label:i("export.modal.button.close")}),r.a.createElement(O.a,{href:o,target:"_blank",label:i("export.modal.button.viewInDrive")}))})},C=n("lSNA"),x=n.n(C),_=n("RIqP"),E=n.n(_),w=n("xweI"),L=n.n(w),D=n("cPJV"),M=n.n(D),k=n("6ibL"),S=n("qxfp"),N=n("iThD"),I=n("2E0U"),P=l.models.folder,A=P.MAGIC_FOLDERS,B=P.ensureMagicFolder,T=P.getReferencedFolder,R="".concat(I.a,"/coachco2"),z=function(){var e=p()(j.a.mark((function e(t,n){var a,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t,{_id:R,_type:I.a});case 2:if(!(a=e.sent)){e.next=7;break}return e.abrupt("return",a);case 7:return e.next=9,B(t,A.ADMINISTRATIVE,"/".concat(n("folder.administrative")));case 9:return r=e.sent,o=r.path,e.next=13,B(t,A.COACH_CO2,"".concat(o,"/").concat(n("folder.coachco2")));case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=l.models.file.uploadFileWithConflictStrategy,q=function(e,t){return t("export.filename",{today:M()(new Date,"YYYY MM DD"),accountLabel:e})},Z=function(e){return[Object.keys(e[0])].concat(E()(e)).map((function(e){return Object.values(e).map((function(e){return e?'"'.concat(e,'"'):" "})).toString()})).join("\n")},Q=function(e){var t=e.flatMap((function(e){return Object(k.n)(e).map((function(t){var n,a,r=(n={},x()(n,S.g.sectionStartDate,t.startDate),x()(n,S.g.sectionEndDate,t.endDate),x()(n,S.g.sectionDuration,t.duration),x()(n,S.g.sectionDistance,t.distance),x()(n,S.g.sectionMode,t.mode),x()(n,S.g.sectionCoordinates,t.coordinates),x()(n,S.g.sectionDistances,t.distances),x()(n,S.g.sectionTimestamps,t.timestamps),x()(n,S.g.sectionSpeeds,t.speeds),n);return H(H({},(a={},x()(a,S.g.tripId,e.id),x()(a,S.g.tripStartDate,Object(k.o)(e)),x()(a,S.g.tripEndDate,Object(k.g)(e)),x()(a,S.g.tripStartDisplayName,Object(k.p)(e)),x()(a,S.g.tripArrivalDisplayName,Object(k.h)(e)),x()(a,S.g.tripPurpose,Object(k.l)(e)),a)),r)}))}));return L()(t,S.g.tripId)},U=function(){var e=p()(j.a.mark((function e(t,n,a){var r,o,i,c,l,u,d,f,p,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.f)(),e.next=3,t.query(r.definition);case 3:if(o=e.sent,i=o.data,c=Object(N.e)(i),!((l=Q(c)).length>0)){e.next=18;break}return u=Z(l),d=q(a,n),e.next=12,z(t,n);case 12:return f=e.sent,e.next=15,V(t,u,{name:d,contentType:"text/csv",dirId:f._id,conflictStrategy:"rename"});case 15:return p=e.sent,m=p.data,e.abrupt("return",{appFolder:f,file:m});case 18:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),W=function(e){var t=e.accountName,n=Object(c.e)().t,o=Object(l.useClient)(),i=Object(a.useState)(!1),u=b()(i,2),s=u[0],d=u[1],f=Object(a.useState)(null),m=b()(f,2),v=m[0],y=m[1],h=Object(a.useState)(null),C=b()(h,2),x=C[0],_=C[1],E=Object(a.useState)(""),w=b()(E,2),L=w[0],D=w[1];Object(a.useEffect)((function(){if(v&&!L){var e=Object(l.generateWebLink)({slug:"drive",cozyUrl:o.getStackClient().uri,subDomainType:o.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(v._id)});D(e)}}),[v,o,L]);var M=Object(a.useCallback)(p()(j.a.mark((function e(){var a,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,U(o,n,t);case 3:a=e.sent,r=a.appFolder,i=a.file,_(i),y(r);case 8:case"end":return e.stop()}}),e)}))),[t,o,n]),k=Object(a.useCallback)((function(){d(!1),y(null),_(null)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"u-mb-1-half"},r.a.createElement(O.a,{busy:!1,variant:"secondary",label:n("export.button"),onClick:M})),s&&r.a.createElement(g,{onClose:k,appDir:v,fileCreated:x,linkToAppFolder:L}))},Y=Object(a.memo)(W);t.a=function(){var e,t,n=Object(c.e)().t,f=Object(a.useContext)(u.a),p=f.selectedAccount,m=f.setSelectedAccount,b=Object(s.a)(),v=Object(l.useQuery)(b.definition,b.options).data,j=Object(a.useMemo)((function(){return!v||v.length<1?[]:v.map((function(e){return{label:e.auth.login,_id:e._id}}))}),[v]),O=(null===(e=j[0])||void 0===e?void 0:e.label)||"",y=(null===(t=j[0])||void 0===t?void 0:t._id)||"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement("div",{className:"u-mh-1 u-mv-1-half"},r.a.createElement("div",{className:"u-mb-1-half"},r.a.createElement(i.a,null,n("devices.label")),r.a.createElement(o.a,{options:j,value:{value:(null==p?void 0:p._id)||y,label:(null==p?void 0:p.label)||O},label:n("devices.label"),placeholder:n("devices.select"),onChange:m})),r.a.createElement(i.a,null,n("export.label")),r.a.createElement(Y,{accountName:O})))}},"9pOX":function(e){e.exports=JSON.parse('{"nav":{"trips":"Déplacements","analysis":"Analyse","modes":"Mode de transport","purposes":"Motif de déplacement","settings":"Paramètres"},"account":{"notFound":"Aucun compte trouvé"},"folder":{"administrative":"Administratif","coachco2":"Coach CO2"},"devices":{"select":"Sélectionnez un appareil","label":"Source des données"},"trips":{"from":"Déplacements de","modes":{"AIR_OR_HSR":"Avion","BICYCLING":"Vélo","CAR":"Voiture","SUBWAY":"Métro","TRAIN":"Train","UNKNOWN":"Non reconnu","WALKING":"Marche","BUS":"Bus"},"purposes":{"HOME":"Domicile","WORK":"Travail","SCHOOL":"École","SHOPPING":"Achats","MEAL":"Repas","PERSONAL_MED":"Personnel","EXERCISE":"Sport","ENTERTAINMENT":"Loisir","PICK_DROP":"Dépose","OTHER_PURPOSE":"Indéfini"},"duration":"Durée","distance":"Distance","calories":"Calories","co2":"CO2"},"loadMore":"Charger plus de trajets","tripEdit":{"selectMode":"Modifier le mode de transport","selectPurpose":"Modifier le motif du déplacement"},"purpose":"Motif du déplacement","analysis":{"mode":"Émission de CO2","purpose":"Émission de CO2","travels":"%{smart_count} déplacement |||| %{smart_count} déplacements","emittedCO2":"CO2 émis"},"export":{"label":"Export","filename":"%{today} - Déplacements %{accountLabel}.csv","button":"Exporter les déplacements en CSV","modal":{"button":{"close":"Fermer","viewInDrive":"Voir dans Drive"},"title":"Exportation","content":{"done":"Le fichier \\"%{filename}\\" a été créé dans le dossier \\"Drive%{pathAppDir}\\" de votre Cozy.","progress":"L’export de vos déplacements est en cours, merci de patienter..."}}}}')},"B/ud":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("Ty5D"),i=n("1I/2"),c=n("buk/"),l=n("6t5v"),u=n("YB/B"),s=n("QILm"),d=n.n(s),f=n("SH7X"),p=n("V2U0"),m=n("dN3h"),b=n("TSYQ"),v=n.n(b),j=n("cbAs"),O=n("iThD"),y=n("6ibL"),h=n("UI5b"),g=n("nIm6"),C=n("Kw70"),x=n("FZFE"),_=function(e){var t=e.timeseries,n=Object(o.i)().mode,l=Object(c.e)().t,u=Object(i.b)().isMobile,s=Object(a.useCallback)(Object(O.a)(t),[t]),d=Object(a.useCallback)(Object(O.c)(s),[s]),f=Object(a.useCallback)(Object(O.b)(s),[s]),p=Object(a.useCallback)(Object(h.a)(d,"modes",l),[l,d]),m=p.data,b=p.options,_=Object(a.useMemo)((function(){return n?Object(O.e)(d[n].timeseries).sort((function(e,t){return e.properties.start_fmt_time.localeCompare(t.properties.start_fmt_time)})):[]}),[n,d]);return n?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(x.a,{trips:_,timeseries:d[n].timeseries})):r.a.createElement("div",{className:"u-mt-2"},r.a.createElement("div",{className:v()("u-flex",{"u-flex-justify-end u-mr-2":!u,"u-flex-justify-center":u})},r.a.createElement(C.a,{data:m,options:b,total:Object(y.e)(f),label:l("analysis.emittedCO2")})),r.a.createElement(j.a,null,Object.entries(d).map((function(e,t){return r.a.createElement(g.a,{key:t,type:"modes",totalCO2:f,sortedTimeserie:e})}))))},E=["data"],w=function(){var e=Object(l.b)().selectedDate,t=Object(m.e)(e),n=Object(f.useQuery)(t.definition,t.options),a=n.data,o=d()(n,E);return Object(f.isQueryLoading)(o)?r.a.createElement(p.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(_,{timeseries:a})},L=n("VaFe"),D=n("+Vcn");t.a=function(){var e=Object(c.e)().t,t=Object(o.g)(),n=Object(o.i)().mode,a=Object(i.b)().isMobile,s=n?e("trips.modes.".concat(n)):"",d=n?t.goBack:void 0;return r.a.createElement(l.a,null,r.a.createElement(u.a,{label:s,onBack:d}),a&&r.a.createElement(L.a,null),r.a.createElement(D.a,null),r.a.createElement(w,null))}},BdYW:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("Ty5D"),i=n("1I/2"),c=n("buk/"),l=n("YB/B"),u=n("VaFe"),s=n("6t5v"),d=n("QILm"),f=n.n(d),p=n("SH7X"),m=n("V2U0"),b=n("dN3h"),v=n("TSYQ"),j=n.n(v),O=n("cbAs"),y=n("iThD"),h=n("6ibL"),g=n("UI5b"),C=n("nIm6"),x=n("Kw70"),_=n("FZFE"),E=function(e){var t=e.timeseries,n=Object(o.i)().purpose,l=Object(c.e)().t,u=Object(i.b)().isMobile,s=Object(a.useMemo)((function(){return Object(y.a)(t)}),[t]),d=Object(a.useMemo)((function(){return Object(y.d)(s)}),[s]),f=Object(a.useMemo)((function(){return Object(y.b)(s)}),[s]),p=Object(a.useMemo)((function(){return Object(g.a)(d,"purposes",l)}),[l,d]),m=p.data,b=p.options,v=Object(a.useMemo)((function(){return n?Object(y.e)(d[n].timeseries).sort((function(e,t){return e.properties.start_fmt_time.localeCompare(t.properties.start_fmt_time)})):[]}),[n,d]);return n?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(_.a,{trips:v,timeseries:d[n].timeseries})):r.a.createElement("div",{className:"u-mt-2"},r.a.createElement("div",{className:j()("u-flex",{"u-flex-justify-end u-mr-2":!u,"u-flex-justify-center":u})},r.a.createElement(x.a,{data:m,options:b,total:Object(h.e)(f),label:l("analysis.emittedCO2")})),r.a.createElement(O.a,null,Object.entries(d).map((function(e,t){return r.a.createElement(C.a,{key:t,type:"purposes",sortedTimeserie:e,totalCO2:f})}))))},w=["data"],L=function(){var e=Object(s.b)().selectedDate,t=Object(b.e)(e),n=Object(p.useQuery)(t.definition,t.options),a=n.data,o=f()(n,w);return Object(p.isQueryLoading)(o)?r.a.createElement(m.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(E,{timeseries:a})},D=n("+Vcn");t.a=function(){var e=Object(c.e)().t,t=Object(o.g)(),n=Object(o.i)().purpose,a=Object(i.b)().isMobile,d=n?e("trips.purposes.".concat(n)):"",f=n?t.goBack:void 0;return r.a.createElement(s.a,null,r.a.createElement(l.a,{label:d,onBack:f}),a&&r.a.createElement(u.a,null),r.a.createElement(D.a,null),r.a.createElement(L,null))}},FZFE:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),i=n.n(o),c=n("/Tkk"),l=n.n(c),u=n("cbAs"),s=n("J4zp"),d=n.n(s),f=n("Ty5D"),p=n("mwIZ"),m=n.n(p),b=n("vEVt"),v=n("gPjO"),j=n("MSWZ"),O=n("aN1g"),y=n("eBdR"),h=n("QaI8"),g=n("buk/"),C=n("y6ex"),x=n("c8ah"),_=n("1I/2"),E=n("P5cT"),w=n("6ibL"),L=n("6k9G"),D=n("qFRD"),M=n("IAR5"),k=n("iFCN"),S=n("uPPc"),N=n("I4yF"),I={map:{height:"400px",margin:"-24px -32px 0"},divider:{margin:"10px -32px 25px"}},P=function(e){var t=e.geojson,n=e.trip,o=e.setShowTripDialog,i=Object(a.useMemo)((function(){return Object(w.h)(n)}),[n]),c=Object(a.useCallback)((function(){return o(!1)}),[o]);return r.a.createElement(N.a,{geojson:t,trip:n},r.a.createElement(D.a,{open:!0,onClose:c,title:i,size:"large",content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:I.map},r.a.createElement(M.a,null)),r.a.createElement("div",{className:"u-mt-1 u-h-3 u-flex u-flex-items-center u-pb-half"},r.a.createElement(k.a,null)),r.a.createElement(j.a,{style:I.divider}),r.a.createElement(S.a,null))}))},A=r.a.memo(P),B=n("qxfp"),T={co2:{fontWeight:700},tripIcon:{marginRight:"4px"}},R=function(e){var t=e.tripModeIcons,n=e.duration,a=e.distance;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(C.a,{key:t,icon:e,size:10,style:T.tripIcon})})),"· ".concat(n," · ").concat(a))},z=function(e){var t=e.geojson,n=e.trip,o=e.hasDateHeader,i=Object(g.e)().f,c=Object(f.g)(),l=Object(f.i)().mode,u=Object(_.b)().isMobile,s=Object(a.useState)(!1),p=d()(s,2),D=p[0],M=p[1],k=m()(n,"properties.manual_purpose",B.z),S=Object(a.useMemo)((function(){return Object(w.h)(n)}),[n]),N=Object(a.useMemo)((function(){return Object(w.i)(n)}),[n]),I=Object(a.useMemo)((function(){return Object(w.k)(n)}),[n]),P=Object(a.useMemo)((function(){return Object(w.j)(n)}),[n]),z=Object(a.useMemo)((function(){return i(Object(w.o)(n),"dddd DD MMMM")}),[i,n]),F=Object(a.useMemo)((function(){return l?Object(w.b)(n,l):Object(w.a)(n)}),[l,n]),H=Object(a.useMemo)((function(){return I.map((function(e){return Object(L.c)(e)}))}),[I]),V=Object(a.useCallback)((function(){if(u)return c.push("/trip/".concat(n.timeserieId));M(!0)}),[c,u,n.timeserieId]);return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(y.a,null,z),r.a.createElement(v.a,{className:"u-pl-1-s u-pl-2",button:!0,onClick:V},r.a.createElement(O.a,null,r.a.createElement(E.b,{attribute:k})),r.a.createElement(b.a,{primary:S,secondary:r.a.createElement(R,{tripModeIcons:H,duration:N,distance:P})}),r.a.createElement(x.a,{className:"u-mh-half",style:T.co2,variant:"body2"},F),r.a.createElement(C.a,{icon:h.a,color:"var(--secondaryTextColor)"})),r.a.createElement(j.a,null),D&&r.a.createElement(A,{geojson:t,trip:n,setShowTripDialog:M}))};z.propTypes={trip:i.a.object.isRequired,hasDateHeader:i.a.bool.isRequired};var F=z,H=function(e){var t=e.trips,n=e.timeseries,o=Object(a.useCallback)((function(e,n){return 0===n||!l()(Object(w.o)(e),Object(w.o)(t[n-1]))}),[t]),i=Object(a.useCallback)((function(e){return n.find((function(t){return t._id===e.timeserieId}))}),[n]);return r.a.createElement(u.a,null,t.map((function(e,t){return r.a.createElement(F,{key:"".concat(e.id).concat(t),geojson:i(e),trip:e,hasDateHeader:o(e,t)})})))};H.propTypes={trips:i.a.arrayOf(i.a.object).isRequired,timeseries:i.a.arrayOf(i.a.object)};t.a=H},"G0/2":function(e,t,n){var a={"./en.json":"6wRk","./fr.json":"wNxD"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="G0/2"},I4yF:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var a=n("q1tI"),r=n.n(a),o=r.a.createContext(),i=function(){return Object(a.useContext)(o)},c=function(e){var t=e.geojson,n=e.trip,i=e.children,c=Object(a.useMemo)((function(){return{geojson:t,trip:n}}),[t,n]);return r.a.createElement(o.Provider,{value:c},i)};t.a=r.a.memo(c)},IAR5:function(e,t,n){"use strict";var a=n("J4zp"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("r1Ps"),l=n("qnQ4"),u=n("fX4H"),s=n("tr08"),d=n("4R65"),f=n.n(d),p=(n("bMVF"),n("1I/2")),m=n("I4yF"),b=n("3zCr"),v=(n("zer9"),[51.505,-.09]);t.a=function(){var e=Object(p.b)().isMobile,t=Object(m.b)().trip,n=Object(s.a)(),a=Object(o.useRef)(),d=Object(o.useRef)(),j=Object(o.useState)(null),O=r()(j,2),y=O[0],h=O[1],g=Object(o.useMemo)((function(){return function(e){return{style:function(t){return{weight:"section"===t.properties.feature_type?5:2,color:e.palette.primary.main}},pointToLayer:function(e,t){return f.a.marker(t,{icon:f.a.divIcon({html:"<div></div>",iconSize:[12,12],className:"cozy-leaflet-markers ".concat("end_place"===e.properties.feature_type?"cozy-leaflet-markers-end":"cozy-leaflet-markers-start")})})}}}(n)}),[n]),C=g.pointToLayer,x=g.style,_=Object(o.useMemo)((function(){return e?b.a.mediumHeightRatio/2:0}),[e]);return Object(o.useEffect)((function(){h(a.current.leafletElement)}),[]),Object(o.useEffect)((function(){if(d.current){var e=d.current.leafletElement;y.fitBounds(e.getBounds()),y.panBy([0,y.getSize().y*_])}}),[y,_]),i.a.createElement(c.a,{className:"u-h-100",ref:a,center:v,zoom:13},i.a.createElement(l.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),i.a.createElement(u.a,{ref:d,data:t,pointToLayer:C,style:x}))}},Kw70:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("m0r1"),i=n("ymym"),c=n("c8ah"),l=n("WVRf");o.d.register(o.a,o.k);var u={position:"relative",zIndex:"1",width:"192px",height:"192px"},s={position:"absolute",boxSizing:"border-box",top:0,bottom:0,left:0,right:0,border:"24px solid var(--actionColorGhost)",borderRadius:"100%",zIndex:-1},d={display:"flex",flexDirection:"column",position:"absolute",alignItems:"center",top:"25px",left:"25px",right:"25px",bottom:"25px",justifyContent:"center",borderRadius:"50%",zIndex:"-1"};t.a=function(e){var t=e.data,n=e.options,a=e.total,o=e.label;return r.a.createElement(l.a,u,r.a.createElement(l.a,s),r.a.createElement(i.a,{data:t,options:n,width:192,height:192}),r.a.createElement(l.a,d,r.a.createElement(c.a,{variant:"h3"},a),r.a.createElement(c.a,{variant:"body2"},o)))}},LiWt:function(e,t,n){"use strict";n.r(t);n("/8/d"),n("llna"),n("/kYV");var a=n("q1tI"),r=n.n(a),o=n("i8i4"),i=n("PRV4"),c=n("o8Rm"),l=n("SH7X"),u=n.n(l),s=n("buk/"),d=n("xIbs"),f=n("1I/2"),p=n("qvEe"),m=n("44Ds"),b=n.n(m),v=n("QCzH"),j=n("pZg0"),O=n.n(j),y=n("2E0U"),h=function(e,t){return/^\{\{\..*\}\}$/.test(e)?t:e},g=function(e){var t=e.app,a=e.locale,r={appIconDefault:n("ZAKO"),appNamePrefixDefault:O.a.name_prefix,appNameDefault:O.a.name,appLocaleDefault:"en"};return{appName:h(t.name,r.appNameDefault),appNamePrefix:h(t.prefix,r.appNamePrefixDefault),iconPath:h(t.icon,r.appIconDefault),lang:h(a,r.appLocaleDefault)}},C=b()((function(){var e=document.querySelector("[role=application]"),t=g(JSON.parse(e.dataset.cozy)),a=t.lang,r=t.appName,o=Object(v.a)(a,(function(e){return n("/KVF")("./".concat(e))})),i=function(){var e=document.querySelector("[role=application]"),t=JSON.parse(e.dataset.cozy),n=window.location.protocol,a="".concat(n,"//").concat(t.domain);return new u.a({uri:a,token:t.token,appMetadata:{slug:O.a.name,version:O.a.version},schema:y.b,store:!1})}();return function(e){var t=e.client,n=e.root,a=e.lang,r=e.appName,o=g(JSON.parse(n.dataset.cozy)),i=o.appNamePrefix,c=o.iconPath;cozy.bar.init({appName:r,appNamePrefix:i,cozyClient:t,iconPath:c,lang:a,replaceTitleOnMobile:!1})}({client:i,root:e,lang:a,appName:r}),{root:e,client:i,lang:a,polyglot:o}})),x=n("ZsYx"),_=n("xYwX"),E=n("6QpA"),w=Object(i.a)({disableGlobal:!0});Object(x.a)(),document.addEventListener("DOMContentLoaded",(function(){var e,t,n,a,i;e=C(),t=e.root,n=e.client,a=e.lang,i=e.polyglot,Object(o.render)(r.a.createElement(p.WebviewIntentProvider,null,r.a.createElement(c.b,{generateClassName:w},r.a.createElement(l.CozyProvider,{client:n},r.a.createElement(E.b,null,r.a.createElement(s.b,{lang:a,polyglot:i},r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(_.a,null)))))))),t)}))},P5cT:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),o=n("BuRe"),i=n("6k9G"),c=n("qxfp"),l=function(e){var t=e.icon,n=e.color,a=e.faded,i=e.ghost,c=function(e){var t=e.faded,n=e.color;return t?{color:n||"var(--primaryColor)",backgroundColor:"var(--paperBackgroundColor)",border:"1px solid var(--borderMainColor)"}:{backgroundColor:n}}({faded:a,color:n});return r.a.createElement(o.a,{style:c,icon:t,size:32,ghost:i})},u=function(e){var t=e.attribute;return r.a.createElement(l,{icon:Object(i.d)(t),color:Object(i.e)(t),ghost:t===c.z})},s=function(e){var t=e.attribute;return r.a.createElement(l,{icon:Object(i.c)(t),color:Object(i.a)(t),faded:!0})}},UI5b:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("6k9G"),r=n("6ibL"),o=function(e,t,n){var o=Object.keys(e),i=Object.values(e),c="modes"===t?a.a:a.e,l=i.map((function(e){return e.totalCO2})),u=o.map((function(e){return c(e)}));return{data:{labels:o.map((function(e){return n("trips.".concat(t,".").concat(e))})),datasets:[{id:1,data:l,backgroundColor:u}]},options:{cutout:"75%",elements:{arc:{borderWidth:0}},plugins:{tooltip:{callbacks:{label:function(e){return"".concat(e.label," ").concat(Object(r.e)(e.raw))}}}}}}}},VaFe:function(e,t,n){"use strict";var a=n("pVnL"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("Ty5D"),l=n("1aYg"),u=n("A52f"),s=n("JrkS"),d=n("buk/"),f=["/analysis/modes","/analysis/purposes"],p=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}};t.a=function(){var e=Object(c.g)(),t=Object(c.h)().pathname,n=Object(d.e)().t,a=f.indexOf(f.find((function(e){return t.includes(e)})));return i.a.createElement(l.a,null,i.a.createElement(u.a,{value:a,onChange:function(t,n){e.push(f[n])}},i.a.createElement(s.a,r()({label:n("nav.modes")},p(0))),i.a.createElement(s.a,r()({label:n("nav.purposes")},p(1)))))}},"YB/B":function(e,t,n){"use strict";var a=n("lSNA"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("Ty5D"),l=n("TSYQ"),u=n.n(l),s=n("buk/"),d=n("xIbs"),f=n("c8ah"),p=n("wvTK"),m=n("1I/2"),b=n("y6ex"),v=n("lEaz"),j=n("SjAl"),O={"/trips":"nav.trips","/analysis/modes":"analysis.mode","/analysis/purposes":"analysis.purpose","/settings":"nav.settings"};t.a=function(e){var t=e.label,n=e.onBack,a=Object(s.e)().t,o=Object(m.b)().isMobile,l=Object(c.h)().pathname,y=cozy.bar,h=y.BarCenter,g=y.BarLeft,C=t||a(O[l]),x="function"==typeof n?n:void 0;return o?i.a.createElement(i.a.Fragment,null,x&&i.a.createElement(g,null,i.a.createElement(v.a,{className:"u-mr-half",onClick:x},i.a.createElement(b.a,{icon:j.a,size:16}))),i.a.createElement(h,null,i.a.createElement(d.a,null,i.a.createElement(p.a,null,C)))):i.a.createElement("div",{className:u()(r()({},"u-flex u-flex-items-center u-ml-2",x))},x&&i.a.createElement(v.a,{className:"u-mr-half",onClick:x},i.a.createElement(b.a,{icon:j.a,size:16})),i.a.createElement(f.a,{variant:"h3",className:u()("u-mv-1-half-s u-ml-1-s u-mv-2",r()({},"u-ml-2",!x))},C))}},ZAKO:function(e,t){e.exports="/img/icon.de735c8eb065de53f8bdf08c03103cf9.svg"},ZsYx:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var a=Boolean(window.location.hostname.endsWith("cozy.localhost")||window.location.hostname.endsWith("cozy.tools"));function r(t){if("serviceWorker"in navigator){if(new URL(e.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="/service-worker.js";a?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(e,t)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,n("8oxB"))},dN3h:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return b}));var a=n("1vin"),r=n.n(a),o=n("lCuP"),i=n.n(o),c=n("SH7X"),l=n.n(c),u=n("qxfp"),s=function(e){return{definition:Object(c.Q)(u.j).where({"cozyMetadata.sourceAccount":e}).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(50),options:{as:"".concat(u.j,"/sourceAccount/").concat(e),fetchPolicy:l.a.fetchPolicies.olderThan(3e4)}}},d=function(e){return{definition:Object(c.Q)(u.j).where({"cozyMetadata.sourceAccount":e}).indexFields(["cozyMetadata.sourceAccount"]).UNSAFE_noLimit(),options:{as:"".concat(u.j,"/all/sourceAccount/").concat(e),fetchPolicy:l.a.fetchPolicies.olderThan(3e4)}}},f=function(){return{definition:Object(c.Q)(u.i).where({account_type:"tracemob"}).select(["auth.login"]).indexFields(["account_type"]).limitBy(100),options:{as:"".concat(u.i,"/account_type"),fetchPolicy:l.a.fetchPolicies.olderThan(3e4)}}},p=function(e){return{definition:Object(c.Q)(u.j).getById(e),options:{as:"".concat(u.j,"/").concat(e),fetchPolicy:l.a.fetchPolicies.olderThan(3e4)}}},m=function(){return{definition:Object(c.Q)(u.j).UNSAFE_noLimit(),options:{as:u.j,fetchPolicy:l.a.fetchPolicies.olderThan(3e4)}}},b=function(e){var t=i()(e),n=r()(e),a=null===e;return{definition:Object(c.Q)(u.j).UNSAFE_noLimit().where({startDate:{$gt:t,$lt:n}}).indexFields(["startDate"]),options:{as:"".concat(u.j,"/date/").concat(a?"noDate":e.toISOString()),enabled:!a}}}},dawk:function(e,t,n){"use strict";var a=n("QILm"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("Ty5D"),l=n("SH7X"),u=n("V2U0"),s=n("qFRD"),d=n("6ibL"),f=n("I4yF"),p=n("3zCr"),m=function(){var e=Object(f.b)().trip,t=Object(c.g)(),n=Object(o.useRef)(null),a=Object(o.useMemo)((function(){return Object(d.h)(e)}),[e]),r=Object(o.useCallback)((function(){return t.goBack()}),[t]);return i.a.createElement(s.a,{open:!0,transitionDuration:0,disableGutters:!0,onBack:r,title:a,titleRef:n,content:i.a.createElement(p.b,{titleRef:n})})},b=i.a.memo(m),v=n("dN3h"),j=n("iThD"),O=["data"],y=function(){var e=Object(c.h)().pathname,t=Object(o.useMemo)((function(){return e.split("/").pop()}),[e]),n=Object(v.b)(t),a=Object(l.useQuery)(n.definition,n.options),s=a.data,d=r()(a,O),p=Object(o.useMemo)((function(){return s&&s.length?Object(j.e)(s)[0]:null}),[s]);return Object(l.isQueryLoading)(d)?i.a.createElement(u.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):i.a.createElement(f.a,{geojson:s[0],trip:p},i.a.createElement(b,null))};t.a=i.a.memo(y)},fH6n:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("55Ip"),i=n("buk/"),c=n("9VR2"),l=n("fSd/"),u=n("rDu+"),s=n("Ratv"),d=n("HAAP"),f=n("WVRf"),p=Object(l.e)(o.b);t.a=function(){var e=Object(i.e)().t;return r.a.createElement(c.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,null,r.a.createElement(p,{to:"/trips"},r.a.createElement(l.a,{icon:u.a}),r.a.createElement(l.c,null,e("nav.trips")))),r.a.createElement(l.b,null,r.a.createElement(p,{to:"/analysis"},r.a.createElement(l.a,{icon:d.a}),r.a.createElement(l.c,null,e("nav.analysis")))),r.a.createElement(l.b,{secondary:!0},r.a.createElement(p,{to:"/analysis/modes"},r.a.createElement(l.c,null,e("nav.modes")))),r.a.createElement(l.b,{secondary:!0},r.a.createElement(p,{to:"/analysis/purposes"},r.a.createElement(l.c,null,r.a.createElement(f.a,{whiteSpace:"nowrap"},e("nav.purposes"))))),r.a.createElement(l.b,null,r.a.createElement(p,{to:"/settings"},r.a.createElement(l.a,{icon:s.a}),r.a.createElement(l.c,null,e("nav.settings"))))))}},iFCN:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("buk/"),i=n("lSNA"),c=n.n(i),l=n("c8ah");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.title,n=e.value,o=e.highlighted,i=Object(a.useMemo)((function(){return function(e){var t=e.highlighted;return{infoBlock:{backgroundColor:t?"var(--primaryColor)":"none",margin:"0.5rem"},typography:s({},t&&{color:"var(--primaryContrastTextColor)"})}}({highlighted:o})}),[o]);return r.a.createElement("div",{style:i.infoBlock,className:"u-h-100 u-flex u-flex-column u-flex-items-center u-flex-justify-center u-flex-grow-1  u-bdrs-4"},r.a.createElement(l.a,{style:i.typography,variant:"caption"},t),r.a.createElement(l.a,{style:i.typography,variant:o?"h6":"body1"},n))},f=r.a.memo(d),p=n("6ibL"),m=n("I4yF"),b=function(){var e=Object(m.b)().trip,t=Object(o.e)().t,n=Object(a.useMemo)((function(){return Object(p.i)(e)}),[e]),i=Object(a.useMemo)((function(){return Object(p.j)(e)}),[e]),c=Object(a.useMemo)((function(){return Object(p.c)(e)}),[e]),l=Object(a.useMemo)((function(){return Object(p.a)(e)}),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{title:t("trips.duration"),value:n}),r.a.createElement(f,{title:t("trips.distance"),value:i}),r.a.createElement(f,{title:t("trips.calories"),value:c}),r.a.createElement(f,{title:t("trips.co2"),value:l,highlighted:!0}))};t.a=r.a.memo(b)},iThD:function(e,t,n){"use strict";n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return L}));var a=n("lSNA"),r=n.n(a),o=n("QkVN"),i=n.n(o),c=n("QVEU"),l=n.n(c),u=n("xweI"),s=n.n(u),d=n("O7iK"),f=n.n(d),p=n("9UKM"),m=n.n(p),b=n("zyvo"),v=n("6ibL"),j=n("6k9G"),O=n("qxfp");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){return e.flatMap((function(t,n){return t.series.map((function(t){return function(e){var t=e.features,n=e.properties,a=l()(t,(function(e){return e.id}));return i()({},e,{properties:{start_place:{data:a[n.start_place.$oid]},end_place:{data:a[n.end_place.$oid]}}})}(h(h({},t),{},{timeserieId:e[n]._id}))}))}))},C=function(e){return e.map((function(e){var t=e.series[0],n=0,a=0,r=0,o=Object(v.n)(t).map((function(e){var t=Object(b.a)(e);return n+=t,a+=e.distance,r+=e.duration,h(h({},e),{},{totalCO2:t})}));return h(h({},e),{},{aggregation:{totalCO2:n,totalDistance:a,totalDuration:r,sections:o}})}))},x=function(e){var t=0;return e.forEach((function(e){t+=e.aggregation.totalCO2})),t},_=function(e,t){var n=m()(e),a=e[t],o=0===a.timeseries.length&&0===a.totalCO2,i=s()(n.filter((function(e){return o?e[0]!==t&&e[1].totalCO2>0:e[1].totalCO2>0})),(function(e){return e[1].totalCO2})).reverse(),c=s()(n.filter((function(e){return o?e[0]!==t&&0===e[1].totalCO2:0===e[1].totalCO2})),(function(e){return e[1].timeseries.length})).reverse();return h(h(h({},f()(i)),f()(c)),o&&r()({},t,a))},E=function(e){var t=function(e){var t=j.b.reduce((function(e,t){return h(h({},e),{},r()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){e.aggregation.sections.forEach((function(n){var a=t[n.mode].timeseries;a.some((function(t){return t.id===e.id}))||a.push(e),t[n.mode].totalCO2+=n.totalCO2}))})),t}(e);return _(t,O.Q)},w=function(e){var t=j.f.reduce((function(e,t){return h(h({},e),{},r()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){var n,a=(n=e.series[0].properties.manual_purpose)&&n.toUpperCase()||O.z,r=t[a].timeseries;r.some((function(t){return t.id===e.id}))||r.push(e),t[a].totalCO2+=e.aggregation.totalCO2})),t},L=function(e){var t=w(e);return _(t,O.z)}},jEK9:function(e,t,n){"use strict";var a=n("lSNA"),r=n.n(a),o=n("QILm"),i=n.n(o),c=n("q1tI"),l=n.n(c),u=n("SH7X"),s=n("buk/"),d=n("V2U0"),f=n("ZLzk"),p=n("dN3h"),m=n("FZFE"),b=n("iThD"),v=n("YB/B"),j=["data"],O=["data"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(){var e,t,n=Object(s.e)().t,a=Object(p.a)(),r=Object(u.useQuery)(a.definition,a.options),o=r.data,y=i()(r,j),g=Object(u.isQueryLoading)(y)&&!Object(u.hasQueryBeenLoaded)(y),C=Object(c.useMemo)((function(){return Array.isArray(o)?o.map((function(e){return{label:e.auth.login,_id:e._id}})):[]}),[o]),x=Object(p.c)(null==C||null===(e=C[0])||void 0===e?void 0:e._id),_=Object(u.useQuery)(x.definition,h(h({},x.options),{},{enabled:C&&C.length>0})),E=_.data,w=i()(_,O),L=Object(u.isQueryLoading)(w)&&!Object(u.hasQueryBeenLoaded)(w),D=Object(c.useMemo)((function(){return Array.isArray(E)?Object(b.e)(E):[]}),[E]);return g||0!==C.length?g||L?l.a.createElement(d.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{label:n("trips.from")+" "+(null==C||null===(t=C[0])||void 0===t?void 0:t.label)}),l.a.createElement(m.a,{trips:D,timeseries:E}),w.hasMore&&l.a.createElement(f.a,{label:n("loadMore"),fetchMore:w.fetchMore})):l.a.createElement("p",null,n("account.notFound"))}},nIm6:function(e,t,n){"use strict";var a=n("J4zp"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("Ty5D"),l=n("vEVt"),u=n("gPjO"),s=n("MSWZ"),d=n("aN1g"),f=n("buk/"),p=n("c8ah"),m=n("QaI8"),b=n("y6ex"),v=n("P5cT"),j=n("6ibL"),O={co2:{fontWeight:700}},y={modes:v.a,purposes:v.b},h=function(e){var t=e.type,n=e.sortedTimeserieKey,a=y[t];return i.a.createElement(a,{attribute:n})};t.a=function(e){var t=e.sortedTimeserie,n=e.totalCO2,a=e.type,o=Object(f.e)().t,v=Object(c.g)(),y=r()(t,2),g=y[0],C=y[1],x=C.timeseries.length,_=C.totalCO2,E=Object(j.d)(_,n),w=0===x&&0===_;return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{"data-testid":"ListItem",className:"u-pl-1-s u-pl-2",disabled:w,onClick:w?void 0:function(){return v.push("/analysis/".concat(a,"/").concat(g))},button:!0},i.a.createElement(d.a,null,i.a.createElement(h,{type:a,sortedTimeserieKey:g})),i.a.createElement(l.a,{primary:o("trips.".concat(a,".").concat(g)),secondary:"".concat(E," · ").concat(o("analysis.travels",x))}),i.a.createElement(p.a,{className:"u-mh-half",style:O.co2,variant:"body2"},Object(j.e)(_)),!w&&i.a.createElement(b.a,{icon:m.a,color:"var(--secondaryTextColor)"})),i.a.createElement(s.a,null))}},nw0P:function(e,t,n){var a={"./_lib/build_formatting_tokens_reg_exp/index.js":"kOWh","./ar/build_distance_in_words_locale/index.js":"XxX6","./ar/build_format_locale/index.js":"alis","./ar/index.js":"EDRf","./be/build_distance_in_words_locale/index.js":"LQ09","./be/build_format_locale/index.js":"kj7F","./be/index.js":"YEhR","./bg/build_distance_in_words_locale/index.js":"7K3h","./bg/build_format_locale/index.js":"RrdL","./bg/index.js":"isx8","./ca/build_distance_in_words_locale/index.js":"wqqj","./ca/build_format_locale/index.js":"qcV0","./ca/index.js":"Vwa+","./cs/build_distance_in_words_locale/index.js":"ZKDM","./cs/build_format_locale/index.js":"ipyF","./cs/index.js":"dvhP","./da/build_distance_in_words_locale/index.js":"2Mgc","./da/build_format_locale/index.js":"Gned","./da/index.js":"7ur/","./de/build_distance_in_words_locale/index.js":"5IWf","./de/build_format_locale/index.js":"THCn","./de/index.js":"bgw5","./el/build_distance_in_words_locale/index.js":"o/GB","./el/build_format_locale/index.js":"8T9h","./el/index.js":"dH0v","./en/build_distance_in_words_locale/index.js":"LZbM","./en/build_format_locale/index.js":"6DAA","./en/index.js":"Us+F","./eo/build_distance_in_words_locale/index.js":"qrnn","./eo/build_format_locale/index.js":"Bl15","./eo/index.js":"UB7v","./es/build_distance_in_words_locale/index.js":"GEfZ","./es/build_format_locale/index.js":"O+zC","./es/index.js":"/S0t","./fi/build_distance_in_words_locale/index.js":"VHtQ","./fi/build_format_locale/index.js":"Oydx","./fi/index.js":"ndVD","./fil/build_distance_in_words_locale/index.js":"uq4p","./fil/build_format_locale/index.js":"d7hw","./fil/index.js":"pNfm","./fr/build_distance_in_words_locale/index.js":"IzMR","./fr/build_format_locale/index.js":"I3Zg","./fr/index.js":"LKA2","./hr/build_distance_in_words_locale/index.js":"DPvn","./hr/build_format_locale/index.js":"puw3","./hr/index.js":"L9Jq","./hu/build_distance_in_words_locale/index.js":"w2RQ","./hu/build_format_locale/index.js":"/0iD","./hu/index.js":"Nm+E","./id/build_distance_in_words_locale/index.js":"JbvB","./id/build_format_locale/index.js":"0wlw","./id/index.js":"A6C3","./is/build_distance_in_words_locale/index.js":"qzMC","./is/build_format_locale/index.js":"S3yD","./is/index.js":"N4bE","./it/build_distance_in_words_locale/index.js":"MDEp","./it/build_format_locale/index.js":"aUJd","./it/index.js":"hmb4","./ja/build_distance_in_words_locale/index.js":"nNvt","./ja/build_format_locale/index.js":"buui","./ja/index.js":"uAXs","./ko/build_distance_in_words_locale/index.js":"oEw+","./ko/build_format_locale/index.js":"9SQf","./ko/index.js":"iW8+","./mk/build_distance_in_words_locale/index.js":"nmwZ","./mk/build_format_locale/index.js":"htxJ","./mk/index.js":"GzBU","./nb/build_distance_in_words_locale/index.js":"SL1f","./nb/build_format_locale/index.js":"CJ5F","./nb/index.js":"73vv","./nl/build_distance_in_words_locale/index.js":"Uyu0","./nl/build_format_locale/index.js":"doCD","./nl/index.js":"hCQt","./pl/build_distance_in_words_locale/index.js":"FUBD","./pl/build_format_locale/index.js":"nOYf","./pl/index.js":"B6yL","./pt/build_distance_in_words_locale/index.js":"aTPA","./pt/build_format_locale/index.js":"TTT0","./pt/index.js":"gdks","./ro/build_distance_in_words_locale/index.js":"gI+A","./ro/build_format_locale/index.js":"njjO","./ro/index.js":"r2yp","./ru/build_distance_in_words_locale/index.js":"KmPx","./ru/build_format_locale/index.js":"UUBw","./ru/index.js":"nz/o","./sk/build_distance_in_words_locale/index.js":"q2Bs","./sk/build_format_locale/index.js":"9sxn","./sk/index.js":"Wqan","./sl/build_distance_in_words_locale/index.js":"mlv2","./sl/build_format_locale/index.js":"vHkZ","./sl/index.js":"KYSo","./sr/build_distance_in_words_locale/index.js":"LlkS","./sr/build_format_locale/index.js":"RhjJ","./sr/index.js":"7mU3","./sv/build_distance_in_words_locale/index.js":"UNBN","./sv/build_format_locale/index.js":"zTNB","./sv/index.js":"hxgj","./th/build_distance_in_words_locale/index.js":"XAGa","./th/build_format_locale/index.js":"We2s","./th/index.js":"Pk+z","./tr/build_distance_in_words_locale/index.js":"aFZF","./tr/build_format_locale/index.js":"jh7A","./tr/index.js":"3ZWG","./zh_cn/build_distance_in_words_locale/index.js":"KdB7","./zh_cn/build_format_locale/index.js":"l4EP","./zh_cn/index.js":"8tMq","./zh_tw/build_distance_in_words_locale/index.js":"vyyr","./zh_tw/build_format_locale/index.js":"uYH7","./zh_tw/index.js":"QPlQ"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="nw0P"},pZg0:function(e,t){e.exports={name:"Coach CO2",slug:"coachco2",icon:"icon.svg",categories:[],version:"0.4.0",licence:"AGPL-3.0",editor:"Cozy Cloud",source:"https://github.com/cozy/coachCO2.git@build",developer:{name:"cozy",url:""},routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},settings:{description:"Required by the cozy-bar to display Claudy and know which applications are coming soon",type:"io.cozy.settings",verbs:["GET"]},accounts:{description:"Required to get konnector account",type:"io.cozy.accounts",verbs:["GET"]},files:{description:"Required to access the files for saved your export of trips",type:"io.cozy.files",verbs:["ALL"]},"geojson-timeseries":{description:"Required to display geojson timeseries",type:"io.cozy.timeseries.geojson"}}}},qxfp:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"i",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"M",(function(){return l})),n.d(t,"P",(function(){return u})),n.d(t,"R",(function(){return s})),n.d(t,"Q",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"S",(function(){return m})),n.d(t,"F",(function(){return b})),n.d(t,"G",(function(){return v})),n.d(t,"o",(function(){return j})),n.d(t,"A",(function(){return O})),n.d(t,"l",(function(){return y})),n.d(t,"k",(function(){return h})),n.d(t,"B",(function(){return g})),n.d(t,"z",(function(){return C})),n.d(t,"E",(function(){return x})),n.d(t,"D",(function(){return _})),n.d(t,"C",(function(){return E})),n.d(t,"H",(function(){return w})),n.d(t,"p",(function(){return L})),n.d(t,"O",(function(){return D})),n.d(t,"N",(function(){return M})),n.d(t,"c",(function(){return k})),n.d(t,"e",(function(){return S})),n.d(t,"h",(function(){return N})),n.d(t,"x",(function(){return I})),n.d(t,"w",(function(){return P})),n.d(t,"v",(function(){return A})),n.d(t,"y",(function(){return B})),n.d(t,"L",(function(){return T})),n.d(t,"q",(function(){return R})),n.d(t,"m",(function(){return z})),n.d(t,"t",(function(){return F})),n.d(t,"s",(function(){return H})),n.d(t,"r",(function(){return V})),n.d(t,"u",(function(){return q})),n.d(t,"K",(function(){return Z})),n.d(t,"J",(function(){return Q})),n.d(t,"I",(function(){return U})),n.d(t,"g",(function(){return W}));var a="io.cozy.timeseries.geojson",r="io.cozy.accounts",o="AIR_OR_HSR",i="BICYCLING",c="CAR",l="SUBWAY",u="TRAIN",s="WALKING",d="UNKNOWN",f="BUS",p="HOME",m="WORK",b="SCHOOL",v="SHOPPING",j="MEAL",O="PERSONAL_MED",y="EXERCISE",h="ENTERTAINMENT",g="PICK_DROP",C="OTHER_PURPOSE",x=.258,_=.187,E=.152,w=1e3,L=3500,D=.00529,M=.00472,k=.137,S=.192,N=74.25,I=2,P=3.5,A=5,B=7,T=3,R=5,z=6.5,F=5.8,H=8,V=10,q=15.8,Z=15,Q=22.4,U=25.6,W={tripId:"Trip_Id",tripStartDisplayName:"Trip_Start_Display_Name",tripArrivalDisplayName:"Trip_Arrival_Display_Name",tripPurpose:"Trip_Purpose",tripStartDate:"Trip_Start_Date",tripEndDate:"Trip_End_Date",sectionStartDate:"Section_Start_Date",sectionEndDate:"Section_End_Date",sectionDuration:"Section_Duration",sectionDistance:"Section_Distance",sectionMode:"Section_Mode",sectionCoordinates:"Section_Coordinates",sectionDistances:"Section_Distances",sectionTimestamps:"Section_Timestamps",sectionSpeeds:"Section_Speeds"}},uPPc:function(e,t,n){"use strict";var a=n("J4zp"),r=n.n(a),o=n("q1tI"),i=n.n(o),c=n("PsJY"),l=n("buk/"),u=n("MSWZ"),s=n("1I/2"),d=n("9xVj"),f=n("lSNA"),p=n.n(f),m=n("TSYQ"),b=n.n(m),v=n("R/WZ"),j=n("OvNQ"),O=n("djpt"),y=n("8aGg"),h=n("CKDk"),g=n("mPFD"),C=n("c8ah"),x=Object(v.a)((function(e){return{dotStart:{marginTop:"9px"},dot:{marginBottom:"-1px"},connector:{width:"6px",backgroundColor:e.palette.primary.main},item:{marginTop:"-9px",paddingLeft:"11px","&::before":{padding:0,flexGrow:0}},contentWrapper:{display:"flex",marginLeft:"11px"},endLabel:{fontWeight:700}}})),_=function(e){var t,n=e.label,a=e.endLabel,r=e.type,c=x(),l=Object(o.useMemo)((function(){return"end"!==r}),[r]),u=Object(o.useMemo)((function(){return"start"===r}),[r]);return i.a.createElement(j.a,{className:c.item},i.a.createElement(O.a,null,i.a.createElement(g.a,{className:b()((t={},p()(t,c.dot,l),p()(t,c.dotStart,u),t)),color:"primary",variant:"outlined"}),l&&i.a.createElement(y.a,{className:c.connector})),i.a.createElement(h.a,null,i.a.createElement("div",{className:c.contentWrapper},i.a.createElement(C.a,{className:"u-flex-grow-1",variant:"body1"},n),i.a.createElement(C.a,{className:c.endLabel,variant:"body2",component:"div"},a))))},E=i.a.memo(_),w=n("BuRe"),L=Object(v.a)((function(e){return{iconItem:{marginTop:"-14px",cursor:"pointer","&::before":{padding:0,flexGrow:0}},iconDot:{backgroundColor:e.palette.background.paper,borderWidth:"1px",borderColor:e.palette.border.main,margin:0,padding:0,boxShadow:"none"},icon:{color:e.palette.primary.main,backgroundColor:e.palette.background.paper},connector:{width:"6px",backgroundColor:e.palette.primary.main}}})),D=function(e){var t=e.icon,n=e.label,a=e.endLabel,r=e.onClick,o=L();return i.a.createElement(j.a,{className:o.iconItem,onClick:r},i.a.createElement(O.a,null,i.a.createElement(g.a,{className:o.iconDot},i.a.createElement(w.a,{icon:t,className:o.icon,size:32})),i.a.createElement(y.a,{className:o.connector})),i.a.createElement(h.a,{className:"u-flex"},i.a.createElement(C.a,{className:"u-flex-grow-1",variant:"body2",color:"textSecondary"},n),i.a.createElement(C.a,{className:o.endLabel,variant:"body2",component:"div"},a)))},M=i.a.memo(D),k=n("6ibL"),S=n("6k9G"),N=n("yXPU"),I=n.n(N),P=n("o0o1"),A=n.n(P),B=n("SH7X"),T=n("c6Mf"),R=n("D1y2"),z=n.n(R),F=n("BkRI"),H=n.n(F),V=function(e){var t=e.geojson,n=e.sectionId,a=e.mode,r=t.series.flatMap((function(e,t){return e.features.flatMap((function(e,a){if(e.features)return e.features.flatMap((function(e,r){if(e.id===n)return{feature:e,serieIndex:t,firstIndex:a,secondIndex:r}}))}))})).find((function(e){return e}));if(r){var o=r.feature,i=r.serieIndex,c=r.firstIndex,l=r.secondIndex,u=z()(H()(o),"properties.manual_mode",a);return z()(H()(t),"series[".concat(i,"].features[").concat(c,"].features[").concat(l,"]"),u)}return t},q=n("P5cT"),Z=n("I4yF"),Q=function(e){return{children:S.b.map((function(t){return{id:t,title:e("trips.modes.".concat(t)),icon:i.a.createElement(q.a,{attribute:t})}}))}},U=function(e){var t=e.section,n=e.onClose,a=Object(l.e)().t,r=Object(B.useClient)(),c=Object(Z.b)().geojson,u=Object(o.useCallback)(function(){var e=I()(A.a.mark((function e(a){var o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=V({geojson:c,sectionId:t.id,mode:a.id}),e.next=3,r.save(o);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,c,n,t.id]),s=Object(o.useMemo)((function(){return function(e){return e.id===t.mode}}),[t.mode]);return i.a.createElement(T.a,{title:a("tripEdit.selectMode"),onClose:n,onSelect:u,isSelected:s,options:Q(a)})},W=i.a.memo(U),Y=function(){var e=Object(Z.b)().trip,t=Object(l.e)(),n=t.t,a=t.f,c=t.lang,u=Object(o.useState)(!1),s=r()(u,2),d=s[0],f=s[1],p=Object(o.useState)(null),m=r()(p,2),b=m[0],v=m[1],j=Object(o.useMemo)((function(){return Object(k.m)(e,c)}),[c,e]),O=Object(o.useCallback)((function(e){return function(){v(e),f(!0)}}),[]),y=Object(o.useCallback)((function(){return f(!1)}),[]);return i.a.createElement(i.a.Fragment,null,j.map((function(e,t){return i.a.createElement(M,{key:t,label:"".concat(n("trips.modes.".concat(e.mode))," - ").concat(e.duration," - ").concat(e.distance," - ").concat(e.averageSpeed),endLabel:Object(k.f)({f:a,lang:c,date:new Date(e.endDate)}),icon:Object(S.c)(e.mode),onClick:O(e)})})),d&&i.a.createElement(W,{section:b,onClose:y}))},G=i.a.memo(Y),K=n("cbAs"),J=n("vEVt"),X=n("gPjO"),$=n("4XKp"),ee=n("qxfp"),te=Object(v.a)((function(){return{root:{minWidth:"48px"}}})),ne=function(e){var t=e.purpose,n=e.onClick,a=Object(l.e)().t,r=te();return i.a.createElement(K.a,null,i.a.createElement(X.a,{className:"u-c-pointer",onClick:n},i.a.createElement($.a,{classes:{root:r.root}},i.a.createElement(q.b,{attribute:t})),i.a.createElement(J.a,{primary:a("purpose"),primaryTypographyProps:{variant:"caption"},secondary:a("trips.purposes.".concat(t)),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}})))};ne.defaultProps={purpose:ee.z};var ae=i.a.memo(ne),re=function(e){var t=e.geojson,n=e.tripId,a=e.purpose,r=t.series.findIndex((function(e){return e.id===n}));if(r>-1){var o=t.series[r],i=z()(H()(o),"properties.manual_purpose",a.toUpperCase());return z()(H()(t),"series[".concat(r,"]"),i)}return t},oe=function(e){return{children:S.f.map((function(t){return{id:t,title:e("trips.purposes.".concat(t)),icon:i.a.createElement(q.b,{attribute:t})}}))}},ie=function(e){var t=e.onClose,n=Object(l.e)().t,a=Object(B.useClient)(),r=Object(Z.b)(),c=r.geojson,u=r.trip,s=Object(o.useCallback)(function(){var e=I()(A.a.mark((function e(n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re({geojson:c,tripId:u.id,purpose:n.id}),e.next=3,a.save(r);case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,c,t,u.id]),d=Object(o.useMemo)((function(){return function(e){var t=u.properties.manual_purpose;return t?e.id===t:e.id===ee.z}}),[u.properties.manual_purpose]);return i.a.createElement(T.a,{title:n("tripEdit.selectPurpose"),onClose:t,onSelect:s,isSelected:d,options:oe(n)})},ce=i.a.memo(ie),le={divider:{margin:"-10px -32px 10px"}},ue=function(){var e=Object(l.e)(),t=e.f,n=e.lang,a=Object(Z.b)().trip,f=Object(s.b)().isDesktop,p=Object(o.useState)(!1),m=r()(p,2),b=m[0],v=m[1],j=Object(o.useMemo)((function(){return Object(k.p)(a)}),[a]),O=Object(o.useMemo)((function(){return Object(k.h)(a)}),[a]),y=Object(o.useMemo)((function(){return Object(k.f)({f:t,lang:n,date:Object(k.o)(a)})}),[t,n,a]),h=Object(o.useMemo)((function(){return Object(k.f)({f:t,lang:n,date:Object(k.g)(a)})}),[t,n,a]),g=Object(o.useMemo)((function(){var e;return null==a||null===(e=a.properties)||void 0===e?void 0:e.manual_purpose}),[a.properties.manual_purpose]),C=Object(o.useCallback)((function(){return v(!0)}),[]),x=Object(o.useCallback)((function(){return v(!1)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{disableGutters:!0},i.a.createElement(c.a,{className:"u-pb-0 u-mb-0"},i.a.createElement(E,{label:j,endLabel:y,type:"start"}),i.a.createElement(G,null),i.a.createElement(E,{label:O,endLabel:h,type:"end"}))),f&&i.a.createElement(u.a,{style:le.divider}),i.a.createElement(d.a,{disableGutters:!0},i.a.createElement(ae,{purpose:g,onClick:C})),b&&i.a.createElement(ce,{onClose:x}))};t.a=i.a.memo(ue)},xYwX:function(e,t,n){"use strict";(function(e){var a=n("q1tI"),r=n.n(a),o=n("55Ip"),i=n("Ty5D"),c=n("0cfB"),l=n("jDpt"),u=n("le8I"),s=n("67rm"),d=n("buk/"),f=n("fH6n"),p=n("jEK9"),m=n("dawk"),b=n("B/ud"),v=n("BdYW"),j=n("9muV"),O=function(){var e=Object(d.e)().t;return r.a.createElement(o.a,null,r.a.createElement(l.b,null,r.a.createElement(f.a,null),r.a.createElement(l.c,null,r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/trip/:timeserieId",component:m.a}),r.a.createElement(i.b,{path:"/trips",component:p.a}),r.a.createElement(i.b,{path:"/settings",component:j.a}),r.a.createElement(i.b,{path:"/analysis/modes/:mode",component:b.a}),r.a.createElement(i.b,{path:"/analysis/modes",component:b.a}),r.a.createElement(i.b,{path:"/analysis/purposes/:purpose",component:v.a}),r.a.createElement(i.b,{path:"/analysis/purposes",component:v.a}),r.a.createElement(i.a,{from:"/analysis",to:"/analysis/modes"}),r.a.createElement(i.a,{from:"/",to:"/trips"}),r.a.createElement(i.a,{from:"*",to:"/trips"})))),r.a.createElement(s.a,{t:e}),r.a.createElement(u.a,null)))};t.a=Object(c.hot)(e)(r.a.memo(O))}).call(this,n("3UD+")(e))},zer9:function(e,t,n){},zyvo:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d}));var a=n("6ibL"),r=n("qxfp");function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var c=function(e){var t=0,n=e.distance/1e3;switch(e.mode){case r.a:if(n<=r.H){t+=n*r.E;break}n<=r.p?t+=n*r.D:t+=n*r.C;break;case r.f:t+=n*r.e;break;case r.d:t+=n*r.c;break;case r.M:t+=n*r.N;break;case r.P:t+=n*r.O;break;case r.Q:}return t},l=function(e){var t,n=0,r=o(Object(a.n)(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=c(i)}}catch(l){r.e(l)}finally{r.f()}return n},u=function(e,t){var n,r=0,i=o(Object(a.n)(e));try{for(i.s();!(n=i.n()).done;){var l=n.value;l.mode===t&&(r+=c(l))}}catch(u){i.e(u)}finally{i.f()}return r},s=function(e,t){return e*r.h*3.5/200*t},d=function(e){var t,n=0,i=o(Object(a.n)(e));try{for(i.s();!(t=i.n()).done;){var c=t.value,l=c.averageSpeed,u=c.duration/60,d=void 0;switch(c.mode){case r.R:d=l<=r.L?r.x:l<=r.q?r.w:l<=r.m?r.v:r.y;break;case r.b:d=l<=r.K?r.t:l<=r.J?r.s:l<=r.I?r.r:r.u}d&&(n+=s(d,u))}}catch(f){i.e(f)}finally{i.f()}return n}}});