!function(e){function t(t){for(var n,i,c=t[0],l=t[1],s=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var l=a[c];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={1:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([1,0]),a()}({0:function(e,t){},1:function(e,t,a){a("MQ8b"),a("jI5P"),e.exports=a("nXPL")},2:function(e,t){},"2maa":function(e){e.exports=JSON.parse('{"nav":{"trips":"Trips","analysis":"Analysis","modes":"Modes of transport","purposes":"Purposes of travel","settings":"Settings"},"folder":{"administrative":"Administrative","coachco2":"Coach CO2"},"devices":{"select":"Select a device","label":"Data source"},"settings":{"allAccounts":"All sources","debug":"Demo & debug mode","services":"Services"},"trips":{"allTrips":"All trips","trips":"Trips","from":"Trips from","departure":"Departure","arrival":"Arrival","submit":"Save","cancel":"Cancel","customLabel":"Custom label","modes":{"AIR_OR_HSR":"Plane","BICYCLING_ELECTRIC":"Electric bike","BICYCLING":"Bike","BUS_ELECTRIC":"Electric bus","BUS":"Bus","CAR_ELECTRIC":"Electric car","CAR":"Car","IN_VEHICLE":"Vehicle","CARPOOL_ELECTRIC":"Electric carpooling","CARPOOL":"Carpooling","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Electric scooter","MOPED":"Moped","SUBWAY":"Subway","TRAIN":"Train","TRAMWAY":"Tramway","UNKNOWN":"Unknown","WALKING":"Walking","ON_FOOT":"Walking","RUNNING":"Running","categories":{"BICYCLING_CATEGORY":"Bike, scooter","CAR_CATEGORY":"Car, motorcycle, moped","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Going to or from work","WORK":"Profressional travel","SHOPPING":"Going shopping","PERSONAL_MED":"Personal travel","PICK_DROP":"Pick & drop someone","SPORT":"Going to or from sport","EXERCISE":"Physical activity / sport","ENTERTAINMENT":"Going out, leisure","TRAVEL":"Travel","OTHER_PURPOSE":"Unknown"},"duration":"Duration","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Save the starting point?","saveEndPlace":"Save the arrival point?","tooltip":"Saving this address will enable you to find it in similar trips and help categorise them automatically.","submit":"Save","delete":"Delete","cancel":"Cancel","dismiss":"No, thanks","contact":"Save as contact","label":"Label","noLabel":"No label","custom":"Customised","customLabel":"Custom label","home":"Home","work":"Work","error":"Specify which contact to save the address under","addSuccess":"The addresses have been registered","removeSuccess":"The addresses have been deleted","atHome":"At home","lat":"lat.","long":"long."},"loadMore":"Load more trips","tripEdit":{"selectMode":"Modify the transportation mode","modeTooltip":"The CO2 values in grams per kilometre (g/km) displayed may not always be representative of reality and may vary. It is important to take the CO2 values displayed with caution and to consider them as a general indication rather than an accurate representation of reality. Driving conditions, driver behaviour and other factors can lead to significant variations from the laboratory values, making it difficult to make a true comparison between different vehicles in terms of CO2 emissions.","selectPurpose":"Modify the travel purpose"},"purpose":"Reason for travel","recurring":{"title":"Recurrence","text":"Automatically apply this pattern to similar moves"},"analysis":{"mode":"CO2 emissions","purpose":"CO2 emissions","travels":"%{smart_count} travel |||| %{smart_count} travel","allYear":"All year","emittedCO2":"emitted CO2"},"support":{"label":"Support","problem":"A problem?","consult":{"text":"Consult our","link":"Geolocation FAQ"}},"export":{"filename":"%{today} - Trips %{accountLabel}.csv","button":"Export trips in CSV","modal":{"button":{"close":"Close","viewInDrive":"View in Drive"},"title":"Exporting","content":{"done":"The \\"%{filename}\\" file was created in the \\"Drive%{pathAppDir}\\" folder of your Cozy.","progress":"The export of your trips is in progress, please wait..."}}},"emptyContent":{"welcome":{"title":"Welcome to your CO2¬†Coach","text":"Let\'s improve our region together.\\n\\nThis application will allow you to record all your journeys, to understand their impact in terms of CO2 emissions, to compare yourself with the average user, and so on..","textA":"This application, available free of charge for %{maxDaysToCapture} days as part of your package, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, track your eligibility for the cycle allowance, compare yourself with the average user, and so on.","textB":"This application, which is included in your Cozy package, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, track your eligibility for the cycle allowance, compare yourself with the average user, and so on.","textC":"Let\'s improve our region together.\\n\\nThis application, which is made available to you by your %{sourceType} %{sourceName}, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, keep track of your bike journeys, and so on.","textD":"This application, which is currently in the experimental phase, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, and notify you as soon as you are eligible for your %{sourceType} %{sourceName} cycling allowance, etc.","action":"Let\'s go!"},"installApp":{"title":"Detect your movements\\nwith the Cozy Cloud app","text":"Install the Cozy Cloud application on your mobile phone to record all your journeys, understand their impact in terms of CO2 emissions, keep track of your journeys by bike, etc.","action":"Install the app"},"GPSStandby":{"title":"Location detected","text":"Your first trip will be posted here a few hours after you make it."},"changeAccount":{"title":"No travel","text":"No travel has yet been detected from the selected data source.","action":"Changing the data source"}},"manifest":{"short_description":"Keep track of your trips and analyze their impact on the environment.","long_description":"If you happen to be looking for answers to some of these questions:\\n- How far have I travelled **on foot** this week?\\n- If I bought an **electric** car, what would be the impact on my fuel bill?\\n- Would it make sense for me to **lease a car instead of owning one**, given my actual usage?\\n- How can I **find the start of this enchanting path** that I found by chance two years ago?\\n- How much do **my air travel** represent in my annual CO2 emissions?\\n- How many **home/work trips** have I made by bike this year?\\n- What if I kept an **accurate history of** all the places I visited during **my travels?**?\\n- As a company, how can I make **my bike allowance** (SMP) more effective?\\n\\n...¬†then the CoachCO2 application can provide you with some answers! It will also help you to **awareness of the challenges** of mobility, to question your travel habits, and perhaps to find more sustainable alternatives.\\n\\n&nbsp;\\n\\n**What about the confidentiality of my private life?**\\n\\n&nbsp;\\n\\nAs always with your Cozy: **you are by default the only one** with the right to **access your data**. And you can of course also **share them** with whomever you like, for as long as you like.\\n\\n&nbsp;\\n\\n**Can I advance ecomobility by sharing my anomymised data?**\\n\\n&nbsp;\\n\\nYes, as well as helping you to become more aware of your own mobility issues, the aim of the CoachCO2 application is to enable the emergence of new ecomobility offers thanks to studies based on anonymised and previously aggregated data such as distances travelled by means and objectives of transport. Some French **local authorities** are **already working** on this!\\n\\n&nbsp;\\n\\n**And tomorrow ?**\\n\\n&nbsp;\\n\\nThis memory of your trips is stored and secured in your personal cloud in a **standard format that can be reused and exported** as you wish.\\n\\n&nbsp;\\n\\nThe CoachCO2 application itself is regularly enhanced with **new features**. Today it focuses on mobility, but tomorrow other sources of CO2 could extend its scope, such as the energy consumption of your home.\\n\\n&nbsp;\\n\\nTomorrow, new applications will be able to offer you **other uses** thanks to the storage of this precious travel data. For example, you could build your own mapped albums of your travels or favourite activities, and share them with friends and family without having to use social networks.\\n\\n&nbsp;\\n\\n**Acknowledgements and conditions of use**\\n\\n&nbsp;\\n\\nThis application is currently being developed and maintained by Cozy Cloud as a common asset. Launched in 2021 thanks to the agglomeration of **la Rochelle** and its Agremob programme, it was then supported by the department of **Alpes-Maritimes**. You can use it for free if you self-host your Cozy, or buy it from a third party. It is also available as part of the Premium packages hosted by Cozy Cloud (with a 1-month free trial in the discovery package).","permissions":{"apps":{"description":"Required by the cozy-bar to display the icons of the apps"},"settings":{"description":"Required by the cozy-bar to display Claudy and know which applications are coming soon"},"accounts":{"description":"Required to get konnector account"},"files":{"description":"Required to access the files for saved your export of trips"},"geojson-timeseries":{"description":"Required to display geojson timeseries"},"coachco2.settings":{"description":"Used to manage your Coach CO2 settings"}}},"dacc":{"settings":{"anonymous_participation":"Participate anonymously in the calculation of average CO2 emissions","showAlerter":"Show DACC alerter"},"tripsCard":{"label":"Compare your emissions to the average of other users of the application?","discard":"No, thank you","accept":"Compare"},"compareDialog":{"title":"Compare anonymously","primaryText":"In order to average the emissions of users, and because your Cozy has made a promise to you to never disclose your data without your explicit request, it will ask you for the right to send this data.","secondaryText":"This data will be aggregated and anonymous and will not contain any identifiers or locations.","action":"I understood"},"permissionsDialog":{"title":"Request for permissions","primaryText":"The CO2 Coach application requires the following permissions from your Cozy:","secondaryText":"Once authorized, the permissions can be modified in the settings","why_asking":"Why ask me for these permissions?","export_outside":"Exporting out of Cozy","anonymized_emissions":"My anonymized CO2 emissions","anonymized_bikegoal_progression":"My anonymized progression","accept":"Always allow","refuse":"Refuse"},"reasonsDialog":{"title":"Reasons for permissions","content":"Because your Cozy has made a promise to you to never disclose your private data, it will always ask you for the right to let an application send it out."}},"vericalBarChart":{"title":"CO2 emissions","legend":{"yours":"Your emissions","average":"Average users of the app"}},"bikeGoal":{"title":"Bike to work","yearly_goal_progression":"%{days}/%{daysToReach} days \\nper year","goal_progression":"%{days}/%{daysToReach} days","my_progression":"My¬†yearly progression","average_progression":"Avg. progress of my organisation","average_progression_noValue":"Avg. progress of other users","achievement_certificate":"Certificate of achievement","goal":"Objective","goals":"Objectives","days":"days","empty":{"title":"Your trips eligible for the Bike Goal will be counted and displayed here."},"about":{"title":"About the goal","intro":{"title":"Introduction","content":"In order to encourage the use of alternative and sustainable modes of transport, the sustainable mobility package came into force on 10 May 2020.\\n\\nEmployees and agents who choose an alternative and sustainable mode of transport for their home-to-work journey will be able to receive a sum from their employer if the latter implements this scheme."},"how_trips_detected":{"title":"How are my trips detected?","content":"Your home-to-work journeys by bike will be automatically detected on the basis of your timetable and your speed.\\n\\nIf a journey is not automatically classified as a ‚ÄúJourney to and from work‚Äú, open the details of the journey and change the reason for the journey.\\n\\nIf the mode of transport for a journey is not automatically detected as ‚Äúbike‚Äú, open the journey details and change the mode of transport to ‚Äúbike‚Äú."},"once_goal_reach":{"title":"What to do once the goal is reached?","optional":"Last step","content":"Once you\'ve reached your target, you can congratulate yourself! You\'ll then be able to generate a certificate of honour that you can send to your employer."}},"deactivate":{"deactivate":"Deactivate","title":"Do you really want to stop participating in the goal?","content":"You can always choose to participate again from the application settings.","stop_participate":"No longer participating","cancel":"Cancel"},"alert":{"success":{"text":"Congratulations, you have achieved the ‚ÄúBike to Work‚Äù goal üéâ","action":"Receive my certificate |||| Benefit from my %{bountyAmount}‚Ç¨ package"},"title":"Be part of the change: cycle to work!","text":"Track your trips and generate a certificate for your employer if they offer the Sustainable Mobility Package (SMP) bonus.","actions":{"participate":"Participate","discard":"No,¬†thank you"}},"edit":{"modify":"Modify","title":"Modify the goal","firstname":"Firstname","lastname":"Lastname","daysToReach":"Days to reach","compare_progress":"Compare my progress with that of my organisation","compare_progress_noValue":"Compare my progress with that of other users","cancel":"Cancel","submit":"Ok","required":"This field is required"},"settings":{"participation":"Participate to the goal ‚ÄúBike to work‚Äù","showAlerter":"Bike goal: Show bike goals alerter","hideOnboarding":"Bike goal: Hide bike goal onboarding","sendToDACC":"Bike goal: activate DACC","showAlerterSuccess":"Bike goal: Show the bike goal success alert"},"onboarding":{"title":"Objective: To cycle to work","actions":{"finish":"Finish","previous":"Previous","next":"Next"},"steps":{"naming":{"title":"Lastname and firstname","nameLegend":"Fill in the following details to generate a certificate of achievement in your name:"},"daysToReach":{"title":"Set yourself a goal","legend":"Set a number of days for your home-to-work journeys by bike or scooter and track your progress with your CO2 Coach.\\n\\nOnce you\'ve reached your target, you\'ll receive an alert and a certificate of achievement to send to your employer.","error":"Set a more realistic goal. Enter a value greater than 0."},"comparison":{"comparisonLegend":"You can display the average progress of the members of your organisation %{sourceName} who are participating in the objective. To do this, you will be asked to participate in the creation of this average.\\n\\nYour progress data will be aggregated and sent anonymously, and will not contain any identifiers or locations.","comparisonLegend_noValue":"You can display the average progress of the other users who are participating in the objective. To do this, you will be asked to participate in the creation of this average.\\n\\nYour progress data will be aggregated and sent anonymously, and will not contain any identifiers or locations.","compare":"Compare my progression","doNotCompare":"Do not compare my progression"}}},"certificateGeneration":{"title":"Congratulations, you have achieved the ‚ÄúBike¬†to¬†Work‚Äú¬†goal","content":"A certificate has been generated to certify your success for %{year}. Email it to your employer now. |||| A certificate has been generated as proof of your success for the year %{year}. Forward it now by email to your employer to receive %{bountyAmount}‚Ç¨ !","actions":{"show":"Certificate - Bike to work.pdf","generate":"Generate a certificate","regenerate":"Generate a new certificate","understood":"Understood"}}},"geolocationTracking":{"tooltip":{"title":"Your new trips are not saved","text":"Automatically record all your movements and discover your carbon footprint.","action":"Configure"},"locationRefusedDialog":{"description":"Your Cozy needs access to additional data in order to help you analyze your movements. This data will NEVER be transmitted to anyone without your explicit request.\\n\\nYou will be redirected to the app\'s settings to authorize it to ALWAYS access your phone\'s position, even when the app is not in use, and PHYSICAL ACTIVITY, movement and shape data.."},"locationDisabledDialog":{"title":"Enable Location Services and Fitness Tracking","description":"To record your movements, you must first activate:","locationService":"- Location Services in Settings > Privacy & Security > Location Services","motionService":"- Fitness Tracking in Settings > Privacy & Security > Motion & Fitness"},"settings":{"enable":"Record my movements with my mobile (GPS)","sendLogs":"Send my logs to support","forceUploadData":"Force Upload Data","copyIdentifier":"Copy OpenPATH Identifier","createdOn":"created on"}},"Modes":{"DefaultDialog":{"primary":"Set as default transport for this category?","secondary":"The transport mode will automatically be selected as default for all future trips detected for this transport type.","actions":{"save":"Save","cancel":"Cancel"}}},"PDF":{"name":"Certificate - Cycling to work (%{year}).pdf","title":"Certificate on honor\\n of the success of the objective\\n of the Sustainable Mobility Package","date":"%{currentDateFormatted} at %{currentTimeFormatted}","recipient":"Employer : %{sourceName}","paragraph01":"I, %{username}, certify on my honor that I have achieved the %{daysToReach} days sustainable mobility package objective by traveling from home to work by bike from January 1 to %{year}.","paragraph02":"In addition to this certificate, I provide my employer with any useful proof of actual use of the bicycle, such as invoice or payment statements, insurance or maintenance of my bicycle.","paragraph03":"Made to serve and assert what is right.","signature":"Signature : %{username}"},"centreValDeLoireExpe":{"settings":{"sendToDACC":"Participate in the region‚Äôs Mobile CVL experiment"}}}')},3:function(e,t){},4:function(e,t){},5:function(e,t){},"5z4W":function(e,t){e.exports={name:"Coach CO2",slug:"coachco2",icon:"icon.svg",categories:[],version:"0.18.0",licence:"AGPL-3.0",editor:"Cozy Cloud",source:"https://github.com/cozy/coachCO2.git@build",developer:{name:"Cozy Cloud",url:"https://cozy.io"},default_locale:"fr",langs:["fr","en"],routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},settings:{description:"Required by the cozy-bar to display Claudy and know which applications are coming soon",type:"io.cozy.settings",verbs:["GET"]},accounts:{description:"Required to get konnector account",type:"io.cozy.accounts",verbs:["GET","POST","PUT"]},konnectors:{description:"Required to create your mobility konnector account and to display additional information in the viewer for files automatically retrieved by services",type:"io.cozy.konnectors",verbs:["GET"]},triggers:{description:"Required to create your mobility konnector account and to display additional information in the viewer and for the notification service",type:"io.cozy.triggers",verbs:["GET","POST"]},files:{description:"Required to access the files for saved your export of trips",type:"io.cozy.files",verbs:["ALL"]},sharings:{description:"Required to have access to the sharings in realtime",type:"io.cozy.sharings",verbs:["ALL"]},"geojson-timeseries":{description:"Required to display geojson timeseries",type:"io.cozy.timeseries.geojson"},"coachco2.settings":{description:"Used to manage your Coach CO2 settings",type:"io.cozy.coachco2.settings",verbs:["GET","POST","PUT"]},jobs:{description:"Used in services to start other services",type:"io.cozy.jobs",verbs:["POST"]},dacc:{type:"cc.cozycloud.dacc_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions"},"dacc-dev":{type:"cc.cozycloud.dacc.dev_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions, for developement purposes"},contacts:{type:"io.cozy.contacts.*",verbs:["GET","POST","PUT","DELETE"],description:"Used to link contacts to geojson timeseries and sharing documents"}},services:{fetchOpenPathTrips:{type:"node",file:"services/fetchOpenPathTrips/coachco2.js",trigger:"@hourly"},fetchOpenPathTripsWebhook:{type:"node",file:"services/fetchOpenPathTrips/coachco2.js",trigger:"@webhook"},timeseriesWithoutAggregateMigration:{type:"node",file:"services/timeseriesWithoutAggregateMigration/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED,UPDATED",debounce:"1m"},daccMonthlyCO2:{type:"node",file:"services/daccMonthlyCO2/coachco2.js",trigger:"@monthly on the 1"},daccBikeGoal:{type:"node",file:"services/daccBikeGoal/coachco2.js",trigger:"@daily"},daccCentreValDeLoireExpe:{type:"node",file:"services/daccCentreValDeLoireExpe/coachco2.js",trigger:"@daily"},recurringPurposes:{type:"node",file:"services/recurringPurposes/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED",debounce:"2m"}}}},6:function(e,t){},7:function(e,t){},"7SaY":function(e,t,a){},"7z1u":function(e,t,a){var n={"./_lib/build_formatting_tokens_reg_exp/index.js":"5XOE","./ar/build_distance_in_words_locale/index.js":"qs6D","./ar/build_format_locale/index.js":"80pQ","./ar/index.js":"n4NV","./be/build_distance_in_words_locale/index.js":"b7Vp","./be/build_format_locale/index.js":"STnx","./be/index.js":"ka/z","./bg/build_distance_in_words_locale/index.js":"fyh8","./bg/build_format_locale/index.js":"STBG","./bg/index.js":"BBHR","./ca/build_distance_in_words_locale/index.js":"4d8B","./ca/build_format_locale/index.js":"a88X","./ca/index.js":"Nz94","./cs/build_distance_in_words_locale/index.js":"70Ht","./cs/build_format_locale/index.js":"R/Ak","./cs/index.js":"oAfY","./da/build_distance_in_words_locale/index.js":"HjC7","./da/build_format_locale/index.js":"G0Zw","./da/index.js":"CJpN","./de/build_distance_in_words_locale/index.js":"DD2N","./de/build_format_locale/index.js":"pnJo","./de/index.js":"eBmD","./el/build_distance_in_words_locale/index.js":"tFqT","./el/build_format_locale/index.js":"twcE","./el/index.js":"m1rb","./en/build_distance_in_words_locale/index.js":"bjbr","./en/build_format_locale/index.js":"EW2Y","./en/index.js":"VkMk","./eo/build_distance_in_words_locale/index.js":"ujJO","./eo/build_format_locale/index.js":"S5Gq","./eo/index.js":"nn7U","./es/build_distance_in_words_locale/index.js":"h+mB","./es/build_format_locale/index.js":"Q4jc","./es/index.js":"4yJR","./fi/build_distance_in_words_locale/index.js":"Fpie","./fi/build_format_locale/index.js":"LTnX","./fi/index.js":"G/Qn","./fil/build_distance_in_words_locale/index.js":"VRy5","./fil/build_format_locale/index.js":"syEd","./fil/index.js":"k8V/","./fr/build_distance_in_words_locale/index.js":"nJeE","./fr/build_format_locale/index.js":"DeP4","./fr/index.js":"+owv","./hr/build_distance_in_words_locale/index.js":"Fs/O","./hr/build_format_locale/index.js":"ZlNX","./hr/index.js":"Kj+b","./hu/build_distance_in_words_locale/index.js":"8okG","./hu/build_format_locale/index.js":"lk8B","./hu/index.js":"+KHA","./id/build_distance_in_words_locale/index.js":"50BR","./id/build_format_locale/index.js":"18Vb","./id/index.js":"anKN","./is/build_distance_in_words_locale/index.js":"qUeK","./is/build_format_locale/index.js":"IcCt","./is/index.js":"4QE/","./it/build_distance_in_words_locale/index.js":"PCcA","./it/build_format_locale/index.js":"V71f","./it/index.js":"qK4z","./ja/build_distance_in_words_locale/index.js":"5vSx","./ja/build_format_locale/index.js":"CAsz","./ja/index.js":"XcQu","./ko/build_distance_in_words_locale/index.js":"jKsw","./ko/build_format_locale/index.js":"UEmh","./ko/index.js":"zOJj","./mk/build_distance_in_words_locale/index.js":"fcCd","./mk/build_format_locale/index.js":"re9F","./mk/index.js":"FDmM","./nb/build_distance_in_words_locale/index.js":"aEqN","./nb/build_format_locale/index.js":"pNMw","./nb/index.js":"mR4k","./nl/build_distance_in_words_locale/index.js":"7u2d","./nl/build_format_locale/index.js":"3riD","./nl/index.js":"06P9","./pl/build_distance_in_words_locale/index.js":"rygU","./pl/build_format_locale/index.js":"july","./pl/index.js":"vOlg","./pt/build_distance_in_words_locale/index.js":"sLR+","./pt/build_format_locale/index.js":"ZP65","./pt/index.js":"vSZg","./ro/build_distance_in_words_locale/index.js":"eJyG","./ro/build_format_locale/index.js":"fLwW","./ro/index.js":"OuEP","./ru/build_distance_in_words_locale/index.js":"KjgK","./ru/build_format_locale/index.js":"Tqgg","./ru/index.js":"T3Gn","./sk/build_distance_in_words_locale/index.js":"38t1","./sk/build_format_locale/index.js":"myxh","./sk/index.js":"In70","./sl/build_distance_in_words_locale/index.js":"Mhi5","./sl/build_format_locale/index.js":"yfgk","./sl/index.js":"D9r0","./sr/build_distance_in_words_locale/index.js":"I8h+","./sr/build_format_locale/index.js":"0FXG","./sr/index.js":"lQaB","./sv/build_distance_in_words_locale/index.js":"z6xu","./sv/build_format_locale/index.js":"jmSq","./sv/index.js":"SMJc","./th/build_distance_in_words_locale/index.js":"qHE1","./th/build_format_locale/index.js":"+W4l","./th/index.js":"5DsP","./tr/build_distance_in_words_locale/index.js":"0z6Z","./tr/build_format_locale/index.js":"NK/q","./tr/index.js":"OevD","./zh_cn/build_distance_in_words_locale/index.js":"SBqD","./zh_cn/build_format_locale/index.js":"219J","./zh_cn/index.js":"QhI5","./zh_tw/build_distance_in_words_locale/index.js":"7Fp2","./zh_tw/build_format_locale/index.js":"l09L","./zh_tw/index.js":"TDp1"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="7z1u"},8:function(e,t){},"8Bbg":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var n=Boolean(window.location.hostname.endsWith("cozy.localhost")||window.location.hostname.endsWith("cozy.tools"));function r(t){if("serviceWorker"in navigator){if(new URL(e.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="/service-worker.js";n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(e,t)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,a("JtWf"))},"8IOV":function(e,t,a){e.exports={"cozy-leaflet-markers":"cozy-leaflet-markers--3tOnD","cozy-leaflet-markers-end":"cozy-leaflet-markers-end--G0e6q","cozy-leaflet-markers-start":"cozy-leaflet-markers-start--1JdEL"}},9:function(e,t){},DZbK:function(e,t,a){e.exports=a.p+"Courgette.ttf"},Ev3x:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"g",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"i",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"j",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return m}));var n="io.cozy.apps",r="io.cozy.files",o="io.cozy.timeseries.geojson",i="io.cozy.accounts",c="io.cozy.coachco2.settings",l="io.cozy.jobs",s="io.cozy.contacts",u="io.cozy.settings",d="cc.cozycloud.dacc_v2",m="cc.cozycloud.dacc.dev_v2";t.k={timeseries:{doctype:o,attributes:{},relationships:{startPlaceContact:{type:"has-one",doctype:s},endPlaceContact:{type:"has-one",doctype:s}}},files:{doctype:r,attributes:{},relationships:{}},settings:{doctype:c,attributes:{},relationships:{}}}},Hsuv:function(e){e.exports=JSON.parse('{"nav":{"trips":"D√©placements","analysis":"Analyses","modes":"Modes de transport","purposes":"Motifs de d√©placement","settings":"Param√®tres"},"folder":{"administrative":"Administratif","coachco2":"Coach CO2"},"devices":{"select":"S√©lectionnez un appareil","label":"Source des donn√©es"},"settings":{"allAccounts":"Toutes les sources","debug":"Mode d√©mo & d√©bug","services":"Services"},"trips":{"allTrips":"Tous les d√©placements","trips":"D√©placements","from":"D√©placements de","departure":"D√©part","arrival":"Arriv√©e","submit":"Enregistrer","cancel":"Annuler","customLabel":"Libell√© personnalis√©","modes":{"default":"d√©faut","AIR_OR_HSR":"Avion","BICYCLING_ELECTRIC":"V√©lo √©lectrique","BICYCLING":"V√©lo","BUS_ELECTRIC":"Bus √©lectrique","BUS":"Bus","CAR_ELECTRIC":"Voiture √©lectrique","CAR":"Voiture","IN_VEHICLE":"V√©hicule","CARPOOL_ELECTRIC":"Covoiturage √©lectrique","CARPOOL":"Covoiturage","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Trottinette √©lectrique","MOPED":"Cyclomoteur","SUBWAY":"M√©tro","TRAIN":"Train","TRAMWAY":"Tramway","UNKNOWN":"Non reconnu","WALKING":"Marche","ON_FOOT":"Marche","RUNNING":"Course","categories":{"BICYCLING_CATEGORY":"V√©lo, trotinette","CAR_CATEGORY":"Voiture, moto, scooter","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Aller-retour au travail","WORK":"D√©placement professionel","SHOPPING":"Aller faire les courses","PERSONAL_MED":"D√©placement personnel","PICK_DROP":"D√©poser quelqu\'un","SPORT":"Aller-retour au sport","EXERCISE":"Activit√© physique / sportive","ENTERTAINMENT":"Sortie, loisirs","TRAVEL":"Voyage","OTHER_PURPOSE":"Ind√©fini"},"duration":"Dur√©e","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Enregistrer le point de d√©part ?","saveEndPlace":"Enregistrer le point d\'arriv√©e ?","tooltip":"Enregistrer cette adresse vous permettra de la retrouver dans des d√©placements similaires et d\'aider √† leur cat√©gorisation automatique.","submit":"Enregistrer","delete":"Supprimer","cancel":"Annuler","dismiss":"Non, merci","contact":"Enregistrer dans une fiche contact","label":"Libell√©","noLabel":"Aucun libell√©","custom":"Personnalis√©","customLabel":"Libell√© personnalis√©","home":"Domicile","work":"Travail","error":"Pr√©ciser sous quel contact enregistrer l\'adresse","addSuccess":"Les adresses ont bien √©t√© enregistr√©es","removeSuccess":"Les adresses ont bien √©t√© supprim√©es","atHome":"Chez moi","lat":"lat.","long":"long."},"loadMore":"Charger plus de trajets","tripEdit":{"selectMode":"Modifier le mode de transport","modeTooltip":"Les valeurs de CO2 en grammes par kilom√®tre (g/km) affich√©es peuvent parfois ne pas √™tre repr√©sentatives de la r√©alit√© et peuvent varier. Il est important de prendre les valeurs de CO2 affich√©es avec pr√©caution et de les consid√©rer comme une indication g√©n√©rale plut√¥t qu\'une repr√©sentation pr√©cise de la r√©alit√©. Les conditions de conduite, le comportement du conducteur et d\'autres facteurs peuvent entra√Æner des variations significatives par rapport aux valeurs de laboratoire, ce qui rend difficile la comparaison r√©elle entre diff√©rents v√©hicules en termes d\'√©missions de CO2.","selectPurpose":"Modifier le motif du d√©placement"},"purpose":"Motif du d√©placement","recurring":{"title":"R√©currence","text":"Appliquer automatiquement ce motif aux d√©placements similaires"},"analysis":{"mode":"√âmissions de CO2","purpose":"√âmissions de CO2","travels":"%{smart_count} d√©placement |||| %{smart_count} d√©placements","allYear":"Toute l\'ann√©e","emittedCO2":"CO2 √©mis"},"support":{"label":"Support","problem":"Un probl√®me ?","consult":{"text":"Consulter notre","link":"FAQ de g√©olocalisation"}},"export":{"filename":"%{today} - D√©placements %{accountLabel}.csv","button":"Exporter les d√©placements en CSV","modal":{"button":{"close":"Fermer","viewInDrive":"Voir dans Drive"},"title":"Exportation","content":{"done":"Le fichier \\"%{filename}\\" a √©t√© cr√©√© dans le dossier \\"Drive%{pathAppDir}\\" de votre Cozy.","progress":"L‚Äôexport de vos d√©placements est en cours, merci de patienter..."}}},"emptyContent":{"welcome":{"title":"Bienvenue sur votre Coach¬†CO2","text":"Am√©liorons ensemble notre territoire.\\n\\nCette application vous permettra d‚Äôenregistrer tous vos d√©placements, d‚Äôen comprendre l‚Äôimpact en √©mission de CO2, de vous comparer avec la moyenne des utilisateurs, etc.","textA":"Cette application, disponible gratuitement pendant %{maxDaysToCapture} jours dans votre offre, vous permettra d\'enregistrer tous vos d√©placements, d\'en comprendre l\'impact en √©mission de CO2, de suivre votre √©ligibilit√© √† la prime v√©lo, de vous comparer avec la moyenne des utilisateurs, etc.","textB":"Cette application, incluse dans l\'offre de votre Cozy, vous permettra d\'enregistrer tous vos d√©placements, d\'en comprendre l\'impact en √©mission de CO2, de suivre votre √©ligibilit√© √† la prime v√©lo, de vous comparer avec la moyenne des utilisateurs, etc.","textC":"Am√©liorons ensemble notre territoire.\\n\\nCette application, dont l\'usage vous est offert par votre %{sourceType} %{sourceName}, vous permettra d\'enregistrer tous vos d√©placements, d\'en comprendre l\'impact en √©mission de CO2, de comptabiliser vos trajets en v√©lo, etc.","textD":"Cette application en phase exp√©rimentale vous permettra d\'enregistrer tous vos d√©placements, d\'en comprendre l\'impact en √©mission de CO2, de vous avertir d√®s que vous √™tes √©ligible √† la prime v√©lo de votre %{sourceType} %{sourceName}, etc.","action":"C\'est parti !"},"installApp":{"title":"D√©tecter vos d√©placements\\navec l\'app Cozy Cloud","text":"Installer l\'application Cozy Cloud sur votre mobile pour enregistrer tous vos d√©placements, en comprendre l\'impact en √©mission de CO2, comptabiliser vos trajets en v√©lo, etc.","action":"Installer l\'app"},"GPSStandby":{"title":"Localisation d√©tect√©e","text":"Votre premier trajet sera affich√© ici quelques heures apr√®s que vous l\'ayez effectu√©."},"changeAccount":{"title":"Aucun d√©placement","text":"Aucun d√©placement n‚Äôa encore √©t√© d√©tect√© depuis la source de donn√©es s√©lectionn√©e.","action":"Changer la source de donn√©es"}},"manifest":{"short_description":"Conservez l\'historique de vos d√©placements et analysez leurs impacts sur l\'environnement.","long_description":"S‚Äôil vous arrive de chercher des r√©ponses √† certaines de ces questions¬†:\\n- Quelle distance ai-je parcourue **√† pied** cette semaine¬†?\\n- Si j\'achetais une voiture **√©lectrique**, quel serait l\'impact sur ma facture de carburant¬†?\\n- Serait-il pertinent pour moi de **louer une voiture au lieu d‚Äôen poss√©der une**, √† la vue de mon usage r√©el¬†?\\n- Comment **retrouver le d√©part de ce sentier** enchanteur que j\'avais trouv√© par hasard il y a deux ans¬†?\\n- Que repr√©sentent **mes voyages en avion** dans mes √©missions annuelles de CO2¬†?\\n- Combien de **trajets domicile/travail** ai-je r√©alis√© en v√©lo cette ann√©e¬†?\\n- Et si je gardais un **historique pr√©cis de** tous les lieux que j‚Äôai visit√©s pendant **mes voyages¬†?**\\n- En tant qu‚Äôentreprise, comment pourrais-je rendre **ma prime v√©lo** (FMD) plus efficace ?\\n\\n...¬†alors l\'application CoachCO2 peut vous fournir des r√©ponses¬†! Elle vous permettra aussi de **prendre conscience des enjeux** de mobilit√©, de questionner vos habitudes de d√©placements, et peut-√™tre de trouver des alternatives plus durables.\\n\\n&nbsp;\\n\\n**Et la confidentialit√© de ma vie priv√©e¬†?**\\n\\n&nbsp;\\n\\nComme toujours dans votre Cozy¬†: **vous √™tes par d√©faut le seul** √† avoir le droit d\'**acc√©der √† vos donn√©es**. Et vous pourrez bien entendu aussi **les partager** avec qui vous souhaitez, pour la dur√©e que vous souhaitez.\\n\\n&nbsp;\\n\\n**Puis-je faire avancer l\'√©comobilit√© en partageant mes donn√©es anomymis√©es¬†?**\\n\\n&nbsp;\\n\\nOui, en plus de vous aider √† prendre conscience de vos propres enjeux de mobilit√©, l\'objectif de l\'application CoachCO2 est de permettre l‚Äô√©mergence de nouvelles offres d‚Äô√©comobilit√© gr√¢ce √† des √©tudes bas√©es sur des donn√©es anonymis√©es et pr√©alablement agr√©g√©es comme les distances parcourues par moyens et objectifs de transport. Certaines **collectivit√©s** fran√ßaises **y travaillent** d√©j√†¬†!\\n\\n&nbsp;\\n\\n**Et demain ?**\\n\\n&nbsp;\\n\\nCette m√©moire de vos d√©placements est stock√©e et s√©curis√©e dans votre cloud personnel dans un **format standard r√©utilisable et exportable** √† votre guise.\\n\\n&nbsp;\\n\\nL\'application CoachCO2 est elle-m√™me r√©guli√®rement enrichie de **nouvelles fonctionnalit√©s**. Elle est aujourd\'hui tourn√©e vers la mobilit√©, demain d\'autres sources de CO2 pourront √©tendre son champ d\'action, comme par exemple la consommation √©nerg√©tique de votre logement.\\n\\n&nbsp;\\n\\nDemain de nouvelles applications pourront vous offrir d\'**autres usages** gr√¢ce √† la m√©morisation de ces pr√©cieuses donn√©es de d√©placements. Par exemple, construire pour vous les albums cartographi√©s de vos voyages ou activit√©s passions, et les partager √† vos proches sans obligatoirement utiliser les r√©seaux sociaux.\\n\\n&nbsp;\\n\\n**Remerciements et conditions d\'utilisation**\\n\\n&nbsp;\\n\\nCette application est aujourd\'hui d√©velopp√©e et maintenue par Cozy Cloud comme un bien commun. D√©marr√©e en 2021 gr√¢ce √† l\'agglom√©ration de **la Rochelle** et son programme Agremob, elle a ensuite √©t√© soutenue par le d√©partement des **Alpes-Maritimes**. Vous pouvez ainsi l\'utiliser gratuitement si vous auto-h√©bergez votre Cozy, ou en achetez l‚Äôh√©bergement √† un tiers. Elle est ainsi disponible dans les offres Premium h√©berg√©es par Cozy Cloud (avec 1 mois d‚Äôessai gratuit dans l‚Äôoffre d√©couverte).","permissions":{"apps":{"description":"Utilis√© par la cozy-bar pour afficher les ic√¥nes des applications"},"settings":{"description":"Utilis√© par le cozy-bar pour afficher Claudy et savoir quelles applications sont √† venir"},"accounts":{"description":"Utilis√© pour obtenir un compte konnector"},"files":{"description":"Utilis√© pour acc√©der aux fichiers de sauvegarde de votre exportation de voyages"},"geojson-timeseries":{"description":"Utilis√© pour afficher les s√©ries temporelles geojson"},"coachco2.settings":{"description":"Utilis√© pour g√©rer les param√®tres de votre Coach CO2"}}},"dacc":{"settings":{"anonymous_participation":"Participer anonymement au calcul des √©missions moyennes de CO2","showAlerter":"Emission CO2 : afficher l\'alerter DACC sur la homepage"},"tripsCard":{"label":"Comparez vos √©missions √† la moyenne des autres utilisateurs de l‚Äôapplication ?","discard":"Non, merci","accept":"Comparer"},"compareDialog":{"title":"Comparez-vous anonymement","primaryText":"Afin de constituer la moyenne des √©missions des utilisateurs, et parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos donn√©es sans votre demande explicite, il va vous demander le droit d\'envoyer cette donn√©e.","secondaryText":"Ces donn√©es seront agr√©g√©es et anonymes, elles ne contiendront aucun identifiant ni lieux.","action":"J\'ai compris"},"permissionsDialog":{"title":"Demande de permissions","primaryText":"L‚Äôapplication Coach CO2 demande les permissions suivantes √† votre Cozy :","secondaryText":"Une fois autoris√©es, les permissions pourront √™tre modifi√©es dans les param√®tres","why_asking":"Pourquoi me demander ces permissions ?","export_outside":"Exporter hors du Cozy","anonymized_emissions":"Mes √©missions de CO2 anonymis√©es","anonymized_bikegoal_progression":"Ma progression de fa√ßon anonyme","accept":"Toujours autoriser","refuse":"Refuser"},"reasonsDialog":{"title":"Motifs de permissions","content":"Parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos donn√©es priv√©es, il vous demandera toujours le droit de laisser une application les envoyer √† l\'ext√©rieur."}},"vericalBarChart":{"title":"√âmissions de CO2","legend":{"yours":"Vos √©missions","average":"Moyennes des utilisateurs de l\'app"}},"bikeGoal":{"title":"Aller au travail √† v√©lo","yearly_goal_progression":"%{days}/%{daysToReach} jours \\npar an","goal_progression":"%{days}/%{daysToReach} jours","my_progression":"Ma¬†progression annuelle","average_progression":"Progression moy. de mon organisation","average_progression_noValue":"Progression moy. des autres utilisateurs","achievement_certificate":"Attestation de r√©ussite","goal":"Objectif","goals":"Objectifs","days":"jours","empty":{"title":"Vos d√©placements √©ligibles √† l\'objectif v√©lo seront comptabilis√©s et affich√©s ici."},"about":{"title":"√Ä propos de l‚Äôobjectif","intro":{"title":"Introduction","content":"Afin d‚Äôencourager le recours √† des modes de transports alternatifs et durables, la mise en ≈ìuvre du forfait mobilit√©s durables est entr√© en vigueur le 10 mai 2020.\\n\\nAinsi les collaborateurs et agent qui font le choix d\'un mode de transport alternatif et durable pour leur trajet domicile-travail pourront recevoir une somme de leur employeur si celui-ci met en place ce dispositif."},"how_trips_detected":{"title":"Comment sont d√©tect√©s mes trajets ?","content":"Vos trajets domicile-travail √† v√©lo seront automatiquement d√©tect√©s √† partir de vos horaires et de votre vitesse.\\n\\nSi un trajet n‚Äôest pas automatiquement qualifi√© en ‚ÄúAller-retour au travail‚Äù, ouvrez le d√©tail du trajet et modifiez le motif du d√©placement.\\n\\nSi le mode de transport d‚Äôun trajet n‚Äôest pas automatiquement d√©tect√© en ‚Äúv√©lo‚Äù, ouvrez le d√©tail du trajet et modifiez le mode de transport en ‚Äúv√©lo‚Äù."},"once_goal_reach":{"title":"Que faire une fois l‚Äôobjectif atteint¬†?","optional":"Derni√®re √©tape","content":"Une fois l\'objectif atteint, vous pourrez vous en f√©liciter ! Et il vous sera alors possible de g√©n√©rer une attestation sur l\'honneur que vous pourrez transmettre √† votre employeur."}},"deactivate":{"deactivate":"D√©sactiver","title":"Souhaitez-vous vraiment ne plus participer √† l‚Äôobjectif ?","content":"Vous pourrez toujours choisir d‚Äôy participer √† nouveau depuis les param√®tres de l‚Äôapplication.","stop_participate":"Ne plus participer","cancel":"Annuler"},"alert":{"success":{"text":"F√©licitations, vous avez atteint l‚Äôobjectif ‚ÄúAller travailler √† v√©lo‚Äù üéâ","action":"B√©n√©ficier de mon attestation |||| B√©n√©ficier de mon forfait de %{smart_count}‚Ç¨"},"title":"Soyez acteur du changement, allez travailler √† v√©lo¬†!","text":"Suivez vos trajets et g√©n√©rez une attestation √† destination de votre employeur s\'il propose la prime Forfait Mobilit√© Durable (FMD).","actions":{"participate":"Participer","discard":"non,¬†merci"}},"edit":{"modify":"Modifier","title":"Modifier l\'objectif","firstname":"Pr√©nom","lastname":"Nom","daysToReach":"Objectif √† atteindre","compare_progress":"Comparer ma progression avec celle de mon organisation","compare_progress_noValue":"Comparer ma progression avec celle des autres utilisateurs","cancel":"Annuler","submit":"Ok","required":"Ce champ est obligatoire"},"settings":{"participation":"Participer √† l\'objectif ‚ÄúAller au travail √† v√©lo‚Äù","showAlerter":"Objectif v√©lo : afficher l\'infobulle de participation sur la homepage","hideOnboarding":"Objectif v√©lo : masquer l\'onboarding","sendToDACC":"Objectif v√©lo : activer le DACC","showAlerterSuccess":"Objectif v√©lo : forcer l\'affichage de l\'alerte de succ√®s sur la homepage"},"onboarding":{"title":"Objectif : Aller travailler √† v√©lo","actions":{"finish":"Terminer","previous":"Pr√©c√©dent","next":"Suivant"},"steps":{"naming":{"title":"Nom et pr√©nom","nameLegend":"Renseigner les informations suivantes afin de g√©n√©rer l‚Äôattestation de r√©ussite √† votre nom¬†:"},"daysToReach":{"title":"Fixez-vous un objectif","legend":"D√©finissez un nombre de jours √† v√©lo ou trottinette pour vos trajets domicile-travail et suivez votre avancement avec votre Coach CO2.\\n\\nUne fois votre objectif atteint, vous recevrez une alerte ainsi qu‚Äôune attestation de r√©ussite √† transmettre √† votre employeur.","error":"D√©finissez un objectif plus r√©aliste. Entrer une valeur sup√©rieure √† 0."},"comparison":{"comparisonLegend":"Il vous est possible d‚Äôafficher la progression moyenne des membres de votre organisation %{sourceName} qui participent √† l‚Äôobjectif. Pour cela, il vous sera demand√© de participer √©galement √† la constitution de cette moyenne.\\n\\nVos donn√©es de progression seront agr√©g√©es et envoy√©es anonymement, elles ne contiendront aucun identifiant ni lieux.","comparisonLegend_noValue":"Il vous est possible d‚Äôafficher la progression moyenne des autres utilisateurs qui participent √† l‚Äôobjectif. Pour cela, il vous sera demand√© de participer √©galement √† la constitution de cette moyenne.\\n\\nVos donn√©es de progression seront agr√©g√©es et envoy√©es anonymement, elles ne contiendront aucun identifiant ni lieux.","compare":"Comparer ma progression","doNotCompare":"Ne pas comparer ma progression"}}},"certificateGeneration":{"title":"F√©licitations, vous¬†avez¬†atteint¬†l‚Äôobjectif ‚ÄúAller¬†travailler¬†√†¬†v√©lo‚Äù","content":"Une attestation a √©t√© g√©n√©r√©e pour attester de votre succ√®s pour l‚Äôann√©e %{year}. Transf√©rez-la d√®s maintenant par email √† votre employeur. |||| Une attestation a √©t√© g√©n√©r√©e pour attester de votre succ√®s pour l‚Äôann√©e %{year}. Transf√©rez-la d√®s maintenant par email √† votre employeur pour recevoir %{smart_count}‚Ç¨¬†!","actions":{"show":"Certificat - Aller travailler √† v√©lo.pdf","generate":"G√©n√©rer une attestation","regenerate":"G√©n√©rer une nouvelle attestation","understood":"J\'ai¬†compris"}}},"geolocationTracking":{"tooltip":{"title":"Vos nouveaux trajets ne sont pas m√©moris√©s","text":"Enregistrez automatiquement tous vos d√©placements et d√©couvrez votre empreinte carbone.","action":"Configurer"},"locationRefusedDialog":{"description":"Votre Cozy a besoin d\'acc√©der √† des donn√©es suppl√©mentaires afin de vous aider √† analyser vos d√©placements. Elles ne seront JAMAIS transmises √† qui que ce soit sans votre demande explicite.\\n\\nVous allez √™tre redirig√© vers les param√®tres de l\'app afin de l\'autoriser √† TOUJOURS acc√©der √† la position de votre t√©l√©phone, donc aussi lorsque l\'app n\'est pas utilis√©e, et au donn√©es d\'ACTIVIT√â PHYSIQUE, mouvements et formes."},"locationDisabledDialog":{"title":"Activez la localisation et le suivi forme","description":"Pour enregistrer vos d√©placements, vous devez d\'abord activer :","locationService":"- le service de localisation dans R√©glages > Confidentialit√© et s√©curit√© > Service de localisation","motionService":"- le suivi forme dans R√©glages > Confidentialit√© et s√©curit√© > Mouvements et forme"},"settings":{"enable":"Enregistrer mes d√©placements avec mon mobile (GPS)","sendLogs":"Envoyer mes logs au support","forceUploadData":"Forcer l\'upload des donn√©es","copyIdentifier":"Copier l\'identifiant OpenPATH","createdOn":"cr√©√© le"}},"Modes":{"DefaultDialog":{"primary":"D√©finir comme transport par d√©faut pour cette cat√©gorie ?","secondary":"Le mode de transport sera automatiquement s√©lectionn√© comme par d√©faut pour tous les futurs trajets d√©tect√©s pour ce type de transport.","actions":{"save":"Enregistrer","cancel":"Annuler"}}},"PDF":{"name":"Attestation - Aller travailler √† v√©lo (%{year}).pdf","title":"Attestation sur l\'honneur\\n de le r√©ussite de l\'objectif\\n du forfait mobilit√©s durables","date":"Le %{currentDateFormatted} √† %{currentTimeFormatted}","recipient":"Employeur : %{sourceName}","paragraph01":"Je soussign√©(e) %{username} certifie sur l‚Äôhonneur avoir atteint l\'objectif forfait mobilit√©s durables de %{daysToReach} jours en effectuant mes d√©placements du domicile vers mon travail en v√©lo du 1er janvier au 31 d√©cembre %{year}.","paragraph02":"En plus de cette attestation, je tiens √† disposition de mon employeur tout justificatif utile d\'utilisation effective du v√©lo comme les relev√©s de facture ou de paiement, d‚Äôassurances ou d‚Äôentretien de mon v√©lo.","paragraph03":"Fait pour servir et valoir ce que de droit.","signature":"Signature : %{username}"},"centreValDeLoireExpe":{"settings":{"sendToDACC":"Participer √† l‚Äôexp√©rimentation Mobile CVL de la r√©gion"}}}')},IvPY:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"z",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"j",(function(){return i})),a.d(t,"k",(function(){return c})),a.d(t,"m",(function(){return l})),a.d(t,"n",(function(){return s})),a.d(t,"v",(function(){return u})),a.d(t,"w",(function(){return d})),a.d(t,"q",(function(){return m})),a.d(t,"r",(function(){return p})),a.d(t,"eb",(function(){return f})),a.d(t,"gb",(function(){return b})),a.d(t,"ib",(function(){return v})),a.d(t,"vb",(function(){return g})),a.d(t,"Eb",(function(){return y})),a.d(t,"Gb",(function(){return h})),a.d(t,"Ib",(function(){return E})),a.d(t,"Lb",(function(){return O})),a.d(t,"Nb",(function(){return j})),a.d(t,"R",(function(){return C})),a.d(t,"jb",(function(){return w})),a.d(t,"tb",(function(){return x})),a.d(t,"h",(function(){return k})),a.d(t,"t",(function(){return D})),a.d(t,"rb",(function(){return _})),a.d(t,"Pb",(function(){return S})),a.d(t,"y",(function(){return P})),a.d(t,"wb",(function(){return T})),a.d(t,"Jb",(function(){return A})),a.d(t,"mb",(function(){return M})),a.d(t,"O",(function(){return N})),a.d(t,"Cb",(function(){return L})),a.d(t,"N",(function(){return I})),a.d(t,"nb",(function(){return F})),a.d(t,"lb",(function(){return R})),a.d(t,"Q",(function(){return G})),a.d(t,"Ob",(function(){return B})),a.d(t,"qb",(function(){return z})),a.d(t,"pb",(function(){return q})),a.d(t,"ob",(function(){return Y})),a.d(t,"c",(function(){return Z})),a.d(t,"xb",(function(){return Q})),a.d(t,"T",(function(){return V})),a.d(t,"e",(function(){return U})),a.d(t,"Hb",(function(){return H})),a.d(t,"d",(function(){return W})),a.d(t,"b",(function(){return J})),a.d(t,"l",(function(){return K})),a.d(t,"fb",(function(){return X})),a.d(t,"hb",(function(){return $})),a.d(t,"s",(function(){return ee})),a.d(t,"u",(function(){return te})),a.d(t,"p",(function(){return ae})),a.d(t,"o",(function(){return ne})),a.d(t,"g",(function(){return re})),a.d(t,"i",(function(){return oe})),a.d(t,"ub",(function(){return ie})),a.d(t,"db",(function(){return ce})),a.d(t,"Mb",(function(){return le})),a.d(t,"Kb",(function(){return se})),a.d(t,"M",(function(){return ue})),a.d(t,"bb",(function(){return de})),a.d(t,"ab",(function(){return me})),a.d(t,"Z",(function(){return pe})),a.d(t,"cb",(function(){return fe})),a.d(t,"Bb",(function(){return be})),a.d(t,"U",(function(){return ve})),a.d(t,"P",(function(){return ge})),a.d(t,"X",(function(){return ye})),a.d(t,"W",(function(){return he})),a.d(t,"V",(function(){return Ee})),a.d(t,"Y",(function(){return Oe})),a.d(t,"Ab",(function(){return je})),a.d(t,"zb",(function(){return Ce})),a.d(t,"yb",(function(){return we})),a.d(t,"x",(function(){return xe})),a.d(t,"D",(function(){return ke})),a.d(t,"B",(function(){return De})),a.d(t,"C",(function(){return _e})),a.d(t,"J",(function(){return Se})),a.d(t,"I",(function(){return Pe})),a.d(t,"L",(function(){return Te})),a.d(t,"K",(function(){return Ae})),a.d(t,"F",(function(){return Me})),a.d(t,"E",(function(){return Ne})),a.d(t,"H",(function(){return Le})),a.d(t,"G",(function(){return Ie})),a.d(t,"A",(function(){return Fe})),a.d(t,"Fb",(function(){return Re})),a.d(t,"S",(function(){return Ge})),a.d(t,"sb",(function(){return Be})),a.d(t,"Db",(function(){return ze})),a.d(t,"kb",(function(){return qe}));var n="coachco2",r={CVL:"Centre-Val de Loire"},o="AIR_OR_HSR",i="BICYCLING_ELECTRIC",c="BICYCLING",l="BUS_ELECTRIC",s="BUS",u="CAR_ELECTRIC",d="CAR",m="CARPOOL_ELECTRIC",p="CARPOOL",f="MOPED",b="MOTO_INF_250",v="MOTO_SUP_250",g="SCOOTER_ELECTRIC",y="SUBWAY",h="TRAIN",E="TRAMWAY",O="UNKNOWN",j="WALKING",C="IN_VEHICLE",w="ON_FOOT",x="RUNNING",k={name:"BICYCLING_CATEGORY",modes:[c,i,g]},D={name:"CAR_CATEGORY",modes:[d,u,p,m,b,v,f]},_={name:"PUBLIC_TRANSPORT_CATEGORY",modes:[s,l,h,E,y]},S="WORK",P="COMMUTE",T="SHOPPING",A="TRAVEL",M="PERSONAL_MED",N="EXERCISE",L="SPORT",I="ENTERTAINMENT",F="PICK_DROP",R="OTHER_PURPOSE",G="home",B="work",z=.258,q=.187,Y=.152,Z=[z,q,Y],Q=1e3,V=3500,U=[.00173,.00529,.0248],H=.003,W=[.0025,.0022,.0041,.00472,.00298],J=[.146,.137,.129],K=.0217,X=.0604,$=.165,ee=.192,te=.0198,ae=.0099,ne=.096,re=0,oe=0,ie=0,ce=.064,le=0,se=0,ue=74.25,de=2,me=3.5,pe=5,fe=7,be=3,ve=5,ge=6.5,ye=5.8,he=8,Ee=10,Oe=15.8,je=15,Ce=22.4,we=25.6,xe={tripId:"Trip_Id",tripStartDisplayName:"Trip_Start_Display_Name",tripArrivalDisplayName:"Trip_Arrival_Display_Name",tripPurpose:"Trip_Purpose",tripStartDate:"Trip_Start_Date",tripEndDate:"Trip_End_Date",sectionStartDate:"Section_Start_Date",sectionEndDate:"Section_End_Date",sectionDuration:"Section_Duration",sectionDistance:"Section_Distance",sectionMode:"Section_Mode",sectionCoordinates:"Section_Coordinates",sectionDistances:"Section_Distances",sectionTimestamps:"Section_Timestamps",sectionSpeeds:"Section_Speeds"},ke="co2-emissions-monthly",De=Object.freeze({is_tracemob_expe:!0}),_e="bike-goal-yearly",Se="trips-count-monthly",Pe="trips-CO2-monthly",Te="trips-duration-monthly",Ae="trips-distance-monthly",Me="sections-count-monthly",Ne="sections-CO2-monthly",Le="sections-duration-monthly",Ie="sections-distance-monthly",Fe="experimentation-consent",Re="timeseriesWithoutAggregateMigration",Ge=12,Be="recurringPurposes",ze=50,qe="openpath"},J3iu:function(e,t){e.exports="/img/icon.aa5e3ec7c4ab374b229f92d96f796ca6.svg"},PFMP:function(e,t){e.exports="/img/location-detected.c862fbaed6fc77b32a0bbb165b330a48.svg"},"PG+o":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return s}));var n=a("HZZ/"),r=a.n(n),o=a("hJxD"),i=a.n(o),c=a("IvPY"),l=a("Ev3x"),s=(a("8XZk"),function(){var e=r()(i.a.mark((function e(t,a){var n,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},r=n.fields,e.next=3,t.collection(l.i).create("service",{name:a,slug:c.f,fields:r});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}).call(this,a("JtWf"))},VDMD:function(e,t){e.exports="/img/background.ada7027117d5bc0de6d2c11f52c6e096.png"},eUFy:function(e,t,a){var n={"./en":"2maa","./en.json":"2maa","./fr":"Hsuv","./fr.json":"Hsuv"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="eUFy"},iC3e:function(e,t,a){var n={"./en.json":"5dwM","./fr.json":"eW7n","./nl_NL.json":"w7vk"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="iC3e"},kyG8:function(e,t,a){e.exports={"CertificateGeneration-root":"CertificateGeneration-root--wWT2w"}},nXPL:function(e,t,a){"use strict";a.r(t);a("k37E"),a("QLHQ"),a("7SaY");var n=a("ivGQ"),r=a.n(n),o=a("iOQm"),i=a("J58c"),c=a.n(i),l=a("UdSB"),s=a.n(l),u=a("Ev3x"),d=a("HZZ/"),m=a.n(d),p=a("QGb3"),f=a.n(p),b=a("hJxD"),v=a.n(b),g=a("L7Xp"),y=a("0d4v"),h=a("rfej"),E=a("6aJT"),O=a("HmmB"),j=a("IvPY"),C=a("xEu0"),w=a.n(C);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit;return{definition:Object(C.Q)(u.h).where({}).partialIndex({aggregation:{$exists:!0}}).select(["startDate","endDate","title","aggregation"]).indexFields(["startDate","endDate"]).sortBy([{startDate:"desc"}]).limitBy(t),options:{as:"".concat(u.h,"/limitedBy/").concat(t),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}}},_=function(e){var t=e.accountId,a=e.limit;return{definition:Object(C.Q)(u.h).where({"cozyMetadata.sourceAccount":t}).partialIndex({aggregation:{$exists:!0}}).select(["cozyMetadata.sourceAccount","startDate","endDate","title","aggregation"]).indexFields(["cozyMetadata.sourceAccount","startDate","endDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(a),options:{as:"".concat(u.h,"/sourceAccount/").concat(t,"/limitedBy/").concat(a),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.date,a=void 0===t?null:t,n=e.isFullYear,r=e.accountId,o=e.limit,i=void 0===o?1e3:o,c=Object(h.a)(a)||null,l=Object(g.a)(a)||null,s=Object(E.a)(a)||null,d=Object(y.a)(a)||null,m=a?"".concat(c.getFullYear(),"-").concat(c.getMonth()).concat(n?"-fullyear":""):"noDate",p=Object(C.Q)(u.h).where(k({"cozyMetadata.sourceAccount":r},a&&{startDate:{$gte:n?s.toISOString():c.toISOString(),$lte:n?d.toISOString():l.toISOString()}})).partialIndex({aggregation:{$exists:!0}}).select(["aggregation","title","cozyMetadata.sourceAccount","startDate","endDate"]).indexFields(["cozyMetadata.sourceAccount"].concat(f()(a?["startDate"]:[]))).limitBy(i);return{definition:p,options:{as:"".concat(u.h,"/sourceAccount/").concat(r,"/date/").concat(m,"/limitedBy/").concat(i),fetchPolicy:w.a.fetchPolicies.olderThan(3e4),enabled:Boolean(a)&&Boolean(r)}}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.date,a=void 0===t?null:t,n={};if(a){var r=Object(E.a)(new Date(a)).toISOString(),o=Object(y.a)(new Date(a)).toISOString();n.startDate={$gte:r,$lte:o}}else n.startDate={$gt:null};return{definition:Object(C.Q)(u.h).where(n).partialIndex({"aggregation.purpose":j.y,"aggregation.modes":{$in:[j.k,j.j,j.vb]}}).select(["startDate","endDate","title","aggregation","aggregation.modes","aggregation.purpose","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(u.h,"/BikeCommute"),fetchPolicy:w.a.fetchPolicies.olderThan(1e8)}}},T=function(e){var t=e.accountId,a=e.date,n=void 0===a?null:a,r={"cozyMetadata.sourceAccount":t};if(n){var o=Object(E.a)(new Date(n)).toISOString(),i=Object(y.a)(new Date(n)).toISOString();r.startDate={$gte:o,$lte:i}}else r.startDate={$gt:null};return{definition:Object(C.Q)(u.h).where(r).partialIndex({"aggregation.purpose":j.y,"aggregation.modes":{$in:[j.k,j.j,j.vb]}}).select(["startDate","endDate","title","aggregation","aggregation.modes","aggregation.purpose","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(u.h,"/sourceAccount/").concat(t,"/BikeCommute"),fetchPolicy:w.a.fetchPolicies.olderThan(1e8)}}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?100:t,n=e.withOnlyLogin,r=void 0===n||n,o=Object(C.Q)(u.a).partialIndex({account_type:{$or:["tracemob","openpath"]}}).limitBy(a);return r&&o.select(["auth.login","account_type"]),{definition:o,options:{as:"".concat(u.a,"/account_type/limitedBy/").concat(a,"/withOnlyLogin/").concat(r),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}}},M=function(){return{definition:Object(C.Q)(u.c),options:{as:u.c,fetchPolicy:w.a.fetchPolicies.olderThan(1e8)}}},N=["data"],L=["data"];function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=Object(n.createContext)(),G=function(){var e=Object(n.useContext)(R);if(!e)throw new Error("useAccountContext must be used within a AccountProvider");return e},B=function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.login},z=!0,q=function(e){var t,a,o,i,c=e.children,l=Object(C.useMutation)().mutate,d=M(),m=Object(C.useQuery)(d.definition,d.options),p=m.data,f=s()(m,N),b=Object(C.isQueryLoading)(f),v=A(),g=Object(C.useQuery)(v.definition,v.options),y=g.data,h=s()(g,L),E=Object(C.isQueryLoading)(h),O=b||E;Object(n.useEffect)((function(){var e;if(!O&&z&&void 0===(null==p||null===(e=p[0])||void 0===e?void 0:e.account)){var t=(null==p?void 0:p[0])||{};l(F(F({},t),{},{_type:u.c,account:null,isAllAccountsSelected:!0})),z=!1}}),[p,O,l]);var j=Object(n.useCallback)((function(e){var t=p[0]||{};l(F(F({},t),{},{_type:u.c,account:e,isAllAccountsSelected:null===e}))}),[l,p]),w={accounts:y,account:null!==(t=null==p||null===(a=p[0])||void 0===a?void 0:a.account)&&void 0!==t?t:null,setAccount:j,isAccountLoading:E,isAllAccountsSelected:null!==(o=null==p||null===(i=p[0])||void 0===i?void 0:i.isAllAccountsSelected)&&void 0!==o&&o};return r.a.createElement(R.Provider,{value:w},c)},Y=a("XkwL"),Z=a.n(Y),Q=a("/s+K"),V=a("pSj2"),U=a("9Ub/"),H=a("Aaol"),W=function(e){var t=e.onClose,a=Object(H.e)().t;return r.a.createElement(V.a,{open:!0,title:a("geolocationTracking.locationDisabledDialog.title"),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,a("geolocationTracking.locationDisabledDialog.description")),r.a.createElement(U.a,null,a("geolocationTracking.locationDisabledDialog.locationService")),r.a.createElement(U.a,null,a("geolocationTracking.locationDisabledDialog.motionService"))),actions:r.a.createElement(Q.a,{label:"OK",onClick:t}),onClose:t})},J=a("Kv7L"),K=a("8ZpT"),X=a.n(K),$=a("6/w4"),ee=a.n($),te=a("DIBL"),ae=ee()("GeolocationTracking"),ne=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.lang,o=t.deviceName,e.next=3,re({client:a,t:n,lang:r,deviceName:o});case 3:return i=e.sent,c=Object(te.a)(),l={account_type:j.kb,auth:{login:i},token:c},e.next=8,a.create(u.a,l);case 8:return e.abrupt("return",{login:i,password:c});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.lang,o=t.deviceName,i=o,s=o,c={definition:Object(C.Q)(u.a).where({"auth.login":s}).partialIndex({account_type:{$or:["tracemob","openpath"]}}).indexFields(["auth.login"]).select(["auth.login","account_type"]),options:{as:"".concat(u.a,"/account_type/login/").concat(s)}},e.next=5,a.query(c.definition,c.options);case 5:if(l=e.sent,0!==l.data.length){e.next=9;break}return e.abrupt("return",i);case 9:return e.abrupt("return","".concat(o," ").concat(n("geolocationTracking.settings.createdOn")," ").concat((new Date).toLocaleDateString(r)));case 10:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=m()(v.a.mark((function e(t,a,n){var r,o,i,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.call("getGeolocationTrackingStatus");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={enabled:!1,quotaExceeded:!1};case 5:r=e.t0,o=r.enabled,i=r.quotaExceeded,c=void 0!==i&&i,a(o),n(c);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ie=function(){var e=m()(v.a.mark((function e(t,a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.call("setGeolocationTracking",!1);case 2:return e.next=4,oe(t,a,n);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ce=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,d,m,p,f,b,g;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.lang,r=t.t,o=t.webviewIntent,i=t.setIsGeolocationTrackingEnabled,e.next=3,null==o?void 0:o.call("getGeolocationTrackingId");case 3:if(null!==e.sent){e.next=29;break}return e.next=7,null==o?void 0:o.call("getDeviceInfo");case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={deviceName:null};case 10:if(c=e.t0,!(l=c.deviceName)){e.next=29;break}return m={definition:Object(C.Q)(u.a).where({"cozyMetadata.createdAt":{$gt:null}}).partialIndex({account_type:"openpath",token:{$exists:!0}}).indexFields(["cozyMetadata.createdAt"]).sortBy([{"cozyMetadata.createdAt":"desc"}]).limitBy(1),options:{as:"".concat(u.a,"/account_type/openpath-with-token"),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}},e.next=16,a.query(m.definition,m.options);case 16:if(p=e.sent,f=p.data,null!=(b=null==f?void 0:f[0])&&b.token&&(null==b||null===(s=b.auth)||void 0===s?void 0:s.login)===l){e.next=26;break}return e.next=22,ne({client:a,t:r,lang:n,deviceName:l});case 22:g=e.sent,d=g.password,e.next=27;break;case 26:d=b.token;case 27:return e.next=29,null==o?void 0:o.call("setGeolocationTrackingId",d);case 29:return e.next=31,null==o?void 0:o.call("setGeolocationTracking",!0);case 31:i(!0);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.client,n=t.lang,r=t.t,o=t.setIsGeolocationTrackingEnabled,i=t.permissions,c=t.webviewIntent,l=t.setShowLocationRequestableDialog,s=t.setShowLocationRefusedDialog,u=t.setShowLocationDisabledDialog,d=t.showAlert,e.prev=1,e.t1=i,e.t1){e.next=7;break}return e.next=6,null==c?void 0:c.call("checkPermissions","geolocationTracking");case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0={};case 10:if(!(m=e.t0).granted){e.next=16;break}return e.next=14,ce({client:a,lang:n,t:r,webviewIntent:c,setIsGeolocationTrackingEnabled:o});case 14:e.next=17;break;case 16:m.canRequest?l(!0):s(!0);case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(1),"Native permission unavailable"===e.t2.message?u(!0):(ae.error(e.t2),d(e.t2.message,"error"));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=m()(v.a.mark((function e(t,a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(J.isFlagshipApp)()||!X()("coachco2.GPSMemory.enabled")){e.next=15;break}return e.prev=1,e.next=4,null==t?void 0:t.call("isAvailable","geolocationTracking");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=null;case 7:n=e.t0,a(n),e.next=13;break;case 11:e.prev=11,e.t1=e.catch(1);case 13:e.next=16;break;case 15:a(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.webviewIntent,n=t.client,r=t.lang,o=t.t,i=t.setIsGeolocationTrackingEnabled,c=t.setShowLocationRequestableDialog,l=t.setShowLocationRefusedDialog,s=t.setShowLocationDisabledDialog,u=t.showAlert,e.next=3,null==a?void 0:a.call("requestPermissions","geolocationTracking");case 3:return d=e.sent,e.next=6,le({client:n,lang:r,t:o,setIsGeolocationTrackingEnabled:i,permissions:d,webviewIntent:a,setShowLocationRequestableDialog:c,setShowLocationRefusedDialog:l,setShowLocationDisabledDialog:s,showAlert:u});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=a("HROS"),me=a("ZOg5"),pe=a("vTbG"),fe=Object(n.createContext)(),be=function(){var e=Object(n.useContext)(fe);if(!e)throw new Error("useGeolocationTracking must be used within a GeolocationTrackingProvider");return e},ve=function(e){var t=e.children,a=Object(de.useWebviewIntent)(),o=Object(C.useClient)(),i=Object(H.e)(),c=i.t,l=i.lang,s=function(){var e=Object(n.useState)(document.visibilityState),t=Z()(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){var e=function(){r(document.visibilityState)};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}),[]),{visibilityState:a}}().visibilityState,u=Object(pe.b)().showAlert,d=Object(n.useState)(null),p=Z()(d,2),f=p[0],b=p[1],g=Object(n.useState)(null),y=Z()(g,2),h=y[0],E=y[1],O=Object(n.useState)(null),j=Z()(O,2),w=j[0],x=j[1],k=Object(n.useState)(!1),D=Z()(k,2),_=D[0],S=D[1],P=Object(n.useState)(!1),T=Z()(P,2),A=T[0],M=T[1],N=Object(n.useState)(!1),L=Z()(N,2),I=L[0],F=L[1];Object(n.useEffect)((function(){se(a,b),oe(a,E,x)}),[a]),Object(n.useEffect)((function(){f&&"visible"===s&&oe(a,E,x)}),[a,f,s]);var R=Object(n.useMemo)((function(){return{isGeolocationTrackingAvailable:f,isGeolocationTrackingEnabled:h,isGeolocationQuotaExceeded:w,disableGeolocationTracking:function(){return ie(a,E,x)},checkPermissionsAndEnableTrackingOrShowDialog:function(e){return le({permissions:e,client:o,lang:l,t:c,setIsGeolocationTrackingEnabled:E,webviewIntent:a,setShowLocationRequestableDialog:S,setShowLocationRefusedDialog:M,setShowLocationDisabledDialog:F,showAlert:u})}}}),[f,h,w,a,o,l,c,u]);return r.a.createElement(fe.Provider,{value:R},t,_&&r.a.createElement(me.a,{onAllow:m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!1),!Object(J.isAndroid)()){e.next=6;break}return e.next=4,ue({webviewIntent:a,client:o,lang:l,t:c,setIsGeolocationTrackingEnabled:E,setShowLocationRequestableDialog:S,setShowLocationRefusedDialog:M,setShowLocationDisabledDialog:F,showAlert:u});case 4:e.next=8;break;case 6:return e.next=8,ce({client:o,lang:l,t:c,webviewIntent:a,setIsGeolocationTrackingEnabled:E,setIsGeolocationQuotaExceeded:x});case 8:case"end":return e.stop()}}),e)}))),onClose:function(){S(!1)}}),A&&r.a.createElement(me.a,{onAllow:m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!1),e.next=3,a.call("openAppOSSettings");case 3:case"end":return e.stop()}}),e)}))),onClose:function(){M(!1)},description:c("geolocationTracking.locationRefusedDialog.description")}),I&&r.a.createElement(W,{onClose:function(){F(!1)}}))},ge=Object(n.createContext)(),ye=function(){var e=Object(n.useContext)(ge);if(!e)throw new Error("useSelectDatesContext must be used within a SelectDatesProvider");return e},he=function(e){var t=e.children,a=Object(n.useState)(null),o=Z()(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Z()(l,2),u=s[0],d=s[1],m=Object(n.useState)(!0),p=Z()(m,2),f=p[0],b=p[1],v=r.a.useState(null),g=Z()(v,2),y={selectedDate:i,setSelectedDate:c,isFullYear:u,setIsFullYear:d,isSelectedDateLoading:f,setIsSelectedDateLoading:b,options:g[0],setOptions:g[1]};return r.a.createElement(ge.Provider,{value:y},t)},Ee=a("Rx+m"),Oe=a("5LIP"),je=a("0Lot"),Ce=a("BqmN"),we=Object(je.a)({disableGlobal:!0}),xe=function(e){var t=e.client,a=e.lang,n=e.polyglot,o=e.children;return r.a.createElement(de.WebviewIntentProvider,null,r.a.createElement(Ce.b,{generateClassName:we},r.a.createElement(C.CozyProvider,{client:t},r.a.createElement(C.RealTimeQueries,{doctype:u.h}),r.a.createElement(C.RealTimeQueries,{doctype:u.c}),r.a.createElement(C.RealTimeQueries,{doctype:u.g}),r.a.createElement(C.RealTimeQueries,{doctype:u.d}),r.a.createElement(C.RealTimeQueries,{doctype:u.a}),r.a.createElement(q,null,r.a.createElement(he,null,r.a.createElement(H.b,{lang:a,polyglot:n},r.a.createElement(Oe.a,null,r.a.createElement(Ee.a,null,r.a.createElement(pe.a,null,r.a.createElement(ve,null,o))))))))))},ke=a("mZuE"),De=a("6Vpj"),_e=a("uRLs"),Se=a.n(_e),Pe=a("rUPj"),Te=a.n(Pe),Ae=a("QVGT"),Me=a("rinC"),Ne=a("uywR"),Le=a("eBtv"),Ie=a("Dzzq"),Fe=a("6CkU"),Re=a("x9kU"),Ge=a("Dt6a"),Be=a("tLIM"),ze=a("GLkt"),qe=a("Npr/"),Ye=a("t+nR"),Ze=a("4+jE"),Qe=a("P6yu"),Ve=a("XAJ7"),Ue=a("B7lc"),He=a("P/GF"),We=a("I46i"),Je=a("KeZy"),Ke=a("u/Gg"),Xe=a("Ins2"),$e=a("DK1t"),et=a("B6UP"),tt=a("keV2"),at=a("6+xZ"),nt=ee()("components/helpers"),rt=[j.a,j.j,j.k,j.m,j.n,j.v,j.w,j.R,j.q,j.r,j.gb,j.ib,j.vb,j.eb,j.Eb,j.Gb,j.Ib,j.Nb,j.jb,j.tb,j.Lb],ot=function e(t){switch(t){case j.a:return Ue.a;case j.j:return Re.a;case j.k:return Ae.a;case j.m:return Me.a;case j.w:case j.R:return Ne.a;case j.n:return Me.a;case j.v:case j.q:return Ge.a;case j.r:return Le.a;case j.gb:case j.ib:return Ye.a;case j.vb:return Be.a;case j.eb:return qe.a;case j.Eb:return Ke.a;case j.Gb:return Xe.a;case j.Ib:return $e.a;case j.Nb:case j.jb:case j.tb:return tt.a;case j.Lb:return et.a;default:return nt.info("Unknown mode ".concat(t),"pickModeIcon"),e(j.Lb)}},it=function e(t){switch(t){case j.a:return"#F05759";case j.j:return"#B3BF26";case j.k:return"#15CACD";case j.vb:return"#84C6AA";case j.m:return"#F85AA8";case j.n:return"#BA5AE8";case j.v:return"#FC881C";case j.w:case j.R:return"#FF7B5E";case j.q:return"#80A5E1";case j.r:return"#1CAAE8";case j.gb:return"#C78542";case j.ib:return"#C8A76F";case j.eb:return"#E3BE7D";case j.Eb:return"#8978FF";case j.Gb:case j.Ib:return"#F1B61E";case j.Lb:return"#A4A7AC";case j.Nb:case j.jb:case j.tb:return"#21B930";default:return nt.info("Unknown mode ".concat(t),"modeToColor"),e(j.Lb)}},ct=[j.y,j.Pb,j.wb,j.mb,j.nb,j.Cb,j.O,j.N,j.Jb,j.lb],lt=function e(t){switch(t){case j.y:return Fe.a;case j.Pb:return at.a;case j.wb:return We.a;case j.Jb:return Ze.a;case j.mb:return Ve.a;case j.O:return ze.a;case j.N:return Ie.a;case j.nb:return He.a;case j.Cb:return Je.a;case j.lb:return Qe.a;default:return nt.info("Unknown purpose ".concat(t),"pickPurposeIcon"),e(j.lb)}},st=function e(t){switch(t){case j.y:return"#BA5AE8";case j.Pb:return"#8978FF";case j.wb:return"#FF7B5E";case j.Jb:return"#15CACD";case j.mb:return"#1CAAE8";case j.O:return"#21B930";case j.N:return"#F85AA8";case j.nb:return"#C78542";case j.Cb:return"#B3BF26";case j.lb:return"#A4A7AC";default:return nt.info("Unknown purpose ".concat(t),"purposeToColor"),e(j.lb)}},ut=function(e){var t=function(e){return parseFloat((e.reduce((function(e,t){return e+t}),0)/e.length).toFixed(5))};switch(e){case j.a:return t(j.c);case j.j:return j.i;case j.k:return j.g;case j.m:return j.l;case j.n:return t(j.b);case j.v:return j.u;case j.w:case j.R:return j.s;case j.q:return j.p;case j.r:return j.o;case j.gb:return j.fb;case j.ib:return j.hb;case j.vb:return j.ub;case j.eb:return j.db;case j.Eb:return t(j.d);case j.Gb:return t(j.e);case j.Ib:return j.Hb;case j.Lb:return j.Kb;case j.Nb:case j.jb:case j.tb:return j.Mb;default:return j.Kb}},dt=function(e){return 1e3*parseFloat(e)},mt=function(e){return e===j.a?"(".concat(dt(j.ob),"~").concat(dt(j.qb),") g/km"):"".concat(pt(e)," g/km")},pt=function(e){return Math.round(dt(ut(e)))},ft=function e(t){switch(t){case j.a:case j.Nb:case j.jb:case j.tb:case j.Lb:return null;case j.j:case j.k:case j.vb:return j.h.name;case j.m:case j.n:case j.Eb:case j.Gb:case j.Ib:return j.rb.name;case j.v:case j.w:case j.R:case j.q:case j.r:case j.gb:case j.ib:case j.eb:return j.t.name;default:return Te()("info","Unknown mode ".concat(t),void 0,"service/timeseriesWithoutAggregateMigration"),nt.info("Unknown mode ".concat(t),"modeToCategory"),e(j.Lb)}},bt=a("Qugh"),vt=a("kjpz"),gt=function(e){var t=e.icon,a=e.color,n=e.faded,o=e.ghost,i=function(e){var t=e.faded,a=e.color;return t?{color:a||"var(--primaryColor)",backgroundColor:"var(--paperBackgroundColor)",border:"1px solid var(--borderMainColor)"}:{backgroundColor:a}}({faded:n,color:a});return r.a.createElement(bt.b,{style:i,icon:t,size:32,ghost:o})},yt=function(e){var t=e.attribute;return r.a.createElement(gt,{icon:lt(t),color:st(t),ghost:t===j.lb})},ht=function(e){var t=e.attribute,a=e.defaultColor,n=Object(vt.a)();return r.a.createElement(gt,{icon:ot(t),color:a?n.palette.primary.main:it(t),faded:!0})},Et=a("e0b0"),Ot=a.n(Et),jt=function(e){var t="m",a=e;return e>1e3&&(t="km",a=e/1e3),"".concat(Math.round(a)," ").concat(t)},Ct=function(e){return"".concat(Math.round(100*e)/100," kg")},wt=function(e,t){var a=["fr","en"].includes(t)?t:"en";return Ot()(1e3*e,{delimiter:" ",largest:2,round:!0,units:["h","m"],language:a,languages:{fr:{d:function(){return"j"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}},en:{d:function(){return"d"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}}}})},xt=function(e){var t=e.f,a=e.lang,n=e.date;return t(n,"fr"===a?"HH[h]mm":"HH:mm")},kt=function(e){return 3.6*(e.reduce((function(e,t){return e+t}),0)/e.length)},Dt=a("xr2j"),_t=a("AHiN"),St=a("Mb5X"),Pt=a("4jS1"),Tt=a("i5f2"),At=a("dUf/"),Mt={co2:{fontWeight:700}},Nt={modes:ht,purposes:yt},Lt=function(e){var t=e.type,a=e.sortedTimeserieKey,n=Nt[t];return r.a.createElement(n,{attribute:a})},It=function(e){var t=e.sortedTimeserie,a=e.totalCO2,n=e.type,o=Object(H.e)().t,i=Object(ke.h)(),c=Z()(t,2),l=c[0],s=c[1],u=s.timeseries.length,d=s.totalCO2,m=function(e,t){if(0===t)return"0%";var a=(100*e/t).toFixed(2).split("."),n=Z()(a,2),r=n[0],o=n[1];return"00"===o?"".concat(r,"%"):"".concat(r,".").concat(o,"%")}(d,a);return 0===u&&0===d?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.b,{"data-testid":"ListItem",onClick:function(){return i("/analysis/".concat(n,"/").concat(l))},button:!0},r.a.createElement(Tt.a,null,r.a.createElement(Lt,{type:n,sortedTimeserieKey:l})),r.a.createElement(At.a,{primary:o("trips.".concat(n,".").concat(l)),secondary:"".concat(m," ¬∑ ").concat(o("analysis.travels",u))}),r.a.createElement(U.a,{style:Mt.co2,variant:"body2"},Ct(d)),r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:St.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Dt.a,null))},Ft=function(e,t,a){var n=Object.keys(e),r=Object.values(e),o="modes"===t?it:st,i=r.map((function(e){return e.totalCO2})),c=n.map((function(e){return o(e)}));return{data:{labels:n.map((function(e){return a("trips.".concat(t,".").concat(e))})),datasets:[{id:1,data:i,backgroundColor:c}]},options:{plugins:{tooltip:{displayColors:!1,callbacks:{label:function(e){return"".concat(e.label," ").concat(Ct(e.raw))}}}}}}},Rt=a("Ht4I"),Gt=a("ii0b"),Bt=a.n(Gt),zt=a("qmdU"),qt=a("0r57"),Yt=a("8wm5"),Zt=a("C+aL"),Qt=a.n(Zt),Vt=a("/yh+"),Ut=a.n(Vt),Ht=a("3UCn"),Wt=a.n(Ht),Jt=a("wXrU"),Kt=a.n(Jt),Xt=a("XA6X"),$t=a.n(Xt),ea=a("PpCK"),ta=a.n(ea),aa=a("nVpl"),na=a.n(aa),ra=a("FpXT"),oa=a.n(ra),ia=a("efAt"),ca=a.n(ia),la=a("Jb16"),sa=a.n(la),ua=a("gSRL"),da=a.n(ua),ma=a("DWnN");function pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ba=function(e){return"start"===e?"startPlaceContact":"end"===e?"endPlaceContact":null},va=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return{address:null==n||null===(t=n.address)||void 0===t?void 0:t.find((function(e,t){var n,i,c;if(e.id===(null===(n=r.relationships[ba(o)])||void 0===n||null===(i=n.data)||void 0===i||null===(c=i.metadata)||void 0===c?void 0:c.addressId))return a=t,e})),index:a}},ga=function(e){var t,a,n,r=e.contact,o=e.timeserie,i=e.type;return null===(t=va({contact:r,timeserie:o,type:i}))||void 0===t||null===(a=t.address)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.cozyCategory},ya=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return null===(t=va({contact:n,timeserie:r,type:o}))||void 0===t||null===(a=t.address)||void 0===a?void 0:a.type},ha=function(e,t){return e[ba(t)]},Ea=function(e,t){var a;return!(null===(a=ha(e,t))||void 0===a||!a.data)},Oa=function(e){var t,a=e.timeserie,n=e.type,r=e.t,o=null===(t=ha(a,n))||void 0===t?void 0:t.data;if(!o)return null;var i=!!o.me,c=ga({timeserie:a,type:n,contact:o}),l=ya({timeserie:a,type:n,contact:o}),s=Object(ma.getDisplayName)(o);return c===j.Q&&i?r("contactToPlace.atHome"):l?i?l:"".concat(s," (").concat(l,")"):s},ja=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.type,o=t.t,i=t.contact,c=va({contact:i,timeserie:n,type:r}),l=c.address,sa()(i.address,(function(e){return e.id&&e.id===l.id})),e.next=5,a.save(i);case 5:return e.next=7,ha(n,r).remove();case 7:return s=e.sent,u=s.data,da()(u,"relationships.".concat(ba(r),".data.metadata.addressId")),$t()(u,"aggregation.automaticTitle",Za(fa(fa({},u),{},{startPlaceContact:n.startPlaceContact,endPlaceContact:n.endPlaceContact}),o)),e.next=13,a.save(u);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ca=function(e){var t=e.contact,a=e.addressId,n=e.label,r=e.timeserie,o=e.type,i=e.t,c=e.category;return fa(fa({},t),{},{address:[].concat(f()(t.address||[]),[{id:a,type:n,formattedAddress:an({timeserie:r,type:o,t:i}),geo:{geo:nn(r,o),cozyCategory:c}}])})},wa=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m,p,f;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=t.t,s=Object(te.a)(),u=Ca({contact:n,addressId:s,label:i,timeserie:r,type:o,t:l,category:c}),e.next=5,a.save(u);case 5:return d=e.sent,m=d.data,e.next=9,ha(r,o).add(m);case 9:return p=e.sent,f=p.data,$t()(f,"relationships.".concat(ba(o),".data.metadata"),{addressId:s}),$t()(f,"aggregation.automaticTitle",Za(fa(fa({},f),{},{startPlaceContact:r.startPlaceContact,endPlaceContact:r.endPlaceContact}),l)),e.next=15,a.save(f);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xa=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=t.t,s=va({contact:n,timeserie:r,type:o}),u=s.index,$t()(n,"address[".concat(u,"].type"),i),$t()(n,"address[".concat(u,"].geo.cozyCategory"),c),e.next=6,a.save(n);case 6:return $t()(r,"aggregation.automaticTitle",Za(r,l)),e.next=9,a.save(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ka=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.type,r=t.timeserie,o=t.contact,i=t.label,c=t.isSameContact,l=t.category,s=t.t,u=va({contact:o,timeserie:r,type:n}),d=u.address,e.abrupt("return",c&&d?xa({client:a,contact:o,timeserie:r,type:n,label:i,isSameContact:c,category:l,t:s}):wa({client:a,contact:o,timeserie:r,type:n,label:i,category:l,t:s}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Da=function(e){var t=0,a=e.distance/1e3;switch(e.mode){case j.a:if(a<=j.xb){t+=a*j.qb;break}a<=j.T?t+=a*j.pb:t+=a*j.ob;break;case j.j:t+=a*j.i;break;case j.k:t+=a*j.g;break;case j.m:t+=a*j.l;break;case j.n:t+=a*ut(j.n);break;case j.v:t+=a*j.u;break;case j.w:case j.R:t+=a*j.s;break;case j.q:t+=a*j.p;break;case j.r:t+=a*j.o;break;case j.gb:t+=a*j.fb;break;case j.ib:t+=a*j.hb;break;case j.vb:t+=a*j.ub;break;case j.eb:t+=a*j.db;break;case j.Eb:t+=a*ut(j.Eb);break;case j.Gb:t+=a*ut(j.Gb);break;case j.Ib:t+=a*j.Hb;break;case j.Lb:t+=a*j.Kb;break;case j.Nb:case j.tb:case j.jb:t+=a*j.Mb}return t},_a=function(e){var t,a=e.averageSpeed,n=e.duration/60;switch(e.mode){case j.Nb:case j.jb:case j.tb:t=a<=j.Bb?j.bb:a<=j.U?j.ab:a<=j.P?j.Z:j.cb;break;case j.k:t=a<=j.Ab?j.X:a<=j.zb?j.W:a<=j.yb?j.V:j.Y}return t?function(e,t){return e*j.M*3.5/200*t}(t,n):0},Sa=a("euuj"),Pa=a.n(Sa),Ta=function(e){return Ut()(e,"properties.manual_purpose")},Aa=function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.automatic_purpose},Ma=function(e){return Ut()(e,"properties.start_place.data.properties.display_name")},Na=function(e){return Ut()(e,"properties.end_place.data.properties.display_name")},La=function(e,t){var a=(t||{}).defaultTransportModeByGroup,n=Ut()(e,"properties.sensed_mode","").toUpperCase(),r=n.split("PREDICTEDMODETYPES.")[1]||n.split("MOTIONTYPES.")[1],o=rt.includes(r),i=rt.find((function(e){return(null==a?void 0:a[ft(r)])===e}));return!!i&&i||o&&r||j.Lb},Ia=Pa()((function(e,t){return e.features.filter((function(e){return"FeatureCollection"===e.type})).flatMap((function(e){return function(e,t){return e.features.map((function(e){var a=Ut()(e,"properties.start_fmt_time"),n=Ut()(e,"properties.end_fmt_time"),r=Ut()(e,"properties.speeds");return{id:e.id,mode:La(e,t),coordinates:Ut()(e,"geometry.coordinates"),timestamps:Ut()(e,"properties.timestamps"),distance:Ut()(e,"properties.distance"),distances:Ut()(e,"properties.distances"),duration:Ut()(e,"properties.duration"),startDate:a?new Date(a):a,endDate:n?new Date(n):n,speeds:r,avgSpeed:r?kt(r):void 0}}))}(e,t)}))})),Fa=function(e){return new Date(e.properties.start_fmt_time)},Ra=function(e){return new Date(e.properties.end_fmt_time)};function Ga(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ba(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ga(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function za(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return qa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qa(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}C.models.geo.geodesicDistance;var Ya=function(e){return e.flatMap((function(t,a){if(!t.series)throw new Error("The timeserie with id ".concat(t._id,' must have a "series" attributes to make transformTimeseriesToTrips() working properly'));return t.series.map((function(t){return function(e){var t=e.features,a=e.properties,n=Wt()(t,(function(e){return e.id}));return Kt()({},e,{properties:{start_place:{data:n[a.start_place.$oid]},end_place:{data:n[a.end_place.$oid]}}})}(Ba(Ba({},t),{},{timeserieId:e[a]._id}))}))}))},Za=function(e,t){var a,n,r,o,i,c,l=Oa({timeserie:e,type:"start",t:t}),s=Oa({timeserie:e,type:"end",t:t}),u=(null===(a=en(e,t))||void 0===a||null===(n=a.split(","))||void 0===n||null===(r=n[1])||void 0===r?void 0:r.trim())||"",d=(null===(o=tn(e,t))||void 0===o||null===(i=o.split(","))||void 0===i||null===(c=i[1])||void 0===c?void 0:c.trim())||"";if(l||s){var m=l||en(e,t),p=s||tn(e,t);return"".concat(m," ‚ûù ").concat(p)}return(u||d)&&u!==d?"".concat(u," ‚ûù ").concat(d).trim():tn(e,t)},Qa=function(e){var t=e.timeseries,a=e.makeSections,n=e.t;return t.map((function(e){if(!e.series)throw new Error("The timeserie with id ".concat(e._id,' must have a "series" attributes to make computeAggregatedTimeseries() working properly'));var t=e.series[0],r=0,o=0,i=0,c=0,l=[],s=function(e){var t,a=[],n=za(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=Ba({},r);if(r.duration<0){var i=r.timestamps[r.timestamps.length-1]-r.timestamps[0];o.duration=i/1e3}if(r.distance<0){var c=r.distances.reduce((function(e,t){return e+t}),0);o.distance=c}(r.duration<0||r.distance<0)&&(o.avgSpeed=o.distance/o.duration),a.push(o)}}catch(l){n.e(l)}finally{n.f()}return a}(a(e)).map((function(e){var t={startDate:e.startDate,endDate:e.endDate,CO2:Da(e),calories:_a(e),avgSpeed:e.avgSpeed,duration:e.duration,distance:e.distance,mode:e.mode,id:e.id};return r+=t.CO2,o+=t.distance,i+=t.duration,c+=t.calories,l.push(t.mode),t}));return Ba(Ba({},e),{},{aggregation:{automaticTitle:Za(e,n),totalCO2:r,totalDistance:o,totalDuration:i,totalCalories:c,startPlaceDisplayName:en(e,n),endPlaceDisplayName:tn(e,n),coordinates:{startPoint:hn(e),endPoint:En(e)},purpose:Ta(t)||Aa(t),modes:l,sections:s}})}))},Va=function(e){var t=0;return e.forEach((function(e){var a;t+=(null===(a=e.aggregation)||void 0===a?void 0:a.totalCO2)||0})),t},Ua=function(e,t){var a=oa()(e),n=e[t],r=0===n.timeseries.length&&0===n.totalCO2,o=ta()(a.filter((function(e){return r?e[0]!==t&&e[1].totalCO2>0:e[1].totalCO2>0})),(function(e){return e[1].totalCO2})).reverse(),i=ta()(a.filter((function(e){return r?e[0]!==t&&0===e[1].totalCO2:0===e[1].totalCO2})),(function(e){return e[1].timeseries.length})).reverse();return Ba(Ba(Ba({},Qt()(o)),Qt()(i)),r&&c()({},t,n))},Ha=function(e){var t=function(e){var t=rt.reduce((function(e,t){return Ba(Ba({},e),{},c()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){e.aggregation.sections.forEach((function(a){var n=t[a.mode].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a.mode].totalCO2+=a.CO2}))})),t}(e);return Ua(t,j.Lb)},Wa=function(e){var t=Ut()(e,"aggregation.purpose","").toUpperCase();return ct.includes(t)&&t||j.lb},Ja=function(e){var t=function(e){var t=ct.reduce((function(e,t){return Ba(Ba({},e),{},c()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){var a=Wa(e),n=t[a].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a].totalCO2+=e.aggregation.totalCO2})),t}(e);return Ua(t,j.lb)},Ka=function(e){return e.startDate?new Date(e.startDate):null},Xa=function(e){return e.endDate?new Date(e.endDate):null},$a=function(e,t){return"start"===t?Ka(e):"end"===t?Xa(e):null},en=function(e,t){var a;return Ut()(e,"aggregation.startPlaceDisplayName")||Ut()(null===(a=e.series)||void 0===a?void 0:a[0],"features[0].properties.display_name")||t("trips.departure")},tn=function(e,t){var a;return Ut()(e,"aggregation.endPlaceDisplayName")||Ut()(null===(a=e.series)||void 0===a?void 0:a[0],"features[1].properties.display_name")||t("trips.arrival")},an=function(e){var t=e.timeserie,a=e.type,n=e.t;return"start"===a?en(t,n):"end"===a?tn(t,n):null},nn=function(e,t){var a=on(e);return f()(a.properties["".concat(t,"_loc")].coordinates)},rn=function(e){var t=e.timeserie,a=e.type,n=e.t;return"".concat(n("contactToPlace.lat"),": ")+nn(t,a).reverse().toString().replace(",",", ".concat(n("contactToPlace.long"),": "))},on=function(e){return Ut()(e,"series[0]")},cn=function(e,t){var a=Ut()(e,"title");if(a)return a;var n=Ut()(e,"aggregation.automaticTitle");if(!n)return null;if(!t)return n;var r=n.split("‚ûù"),o=Z()(r,2),i=o[0],c=o[1];return i.length>12&&c?"".concat(i.slice(0,12).trim(),"... ‚ûù ").concat(c.trim()):n},ln=function(e){var t=Ka(e),a=Xa(e);return Object(qt.a)(a,t)},sn=function(e){return jt(e.aggregation.totalDistance)},un=function(e){var t=function(e){return Ut()(e,"aggregation.totalCO2","")}(e);return Ct(t)},dn=function(e){var t,a=function(e){return Ut()(e,"aggregation.totalCalories","")}(e);return t=a,"".concat(Math.round(t)," kcal")},mn=function(e,t){var a=t(Ka(e),"dddd D MMMM YYYY");return a.charAt(0).toUpperCase()+a.slice(1)},pn=function(e,t){var a;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var n=Ba({},e);return $t()(n,"series[0].properties.automatic_purpose",t),$t()(n,"aggregation.recurring",!0),bn(n)},fn=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isRecurringTrip,o=void 0===r?null:r;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var i=Ba({},e);return $t()(i,"series[0].properties.manual_purpose",t.toUpperCase()),null!==o&&$t()(i,"aggregation.recurring",o),bn(i)},bn=function(e){var t;if(!e.series)throw new Error("The timeserie with id ".concat(e._id,' must have a "series" attributes to make setAggregationPurpose() working properly'));var a=e.series[0],n=null!=e&&null!==(t=e.aggregation)&&void 0!==t&&t.recurring&&Aa(a)||Ta(a);return n?Ba(Ba({},e),{},{aggregation:Ba(Ba({},e.aggregation),{},{purpose:n})}):e},vn=function(e,t){var a=function(e,t){var a,n=0,r=za(e.aggregation.sections);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.mode===t&&(n+=o.CO2)}}catch(i){r.e(i)}finally{r.f()}return n}(e,t);return Ct(a)},gn=function(e){var t=0,a=f()(e).sort((function(e,t){return Ka(e)-Ka(t)}));return a.forEach((function(e,n){if(0===n)t++;else{var r=Ka(e),o=a[n-1],i=Ka(o),c=Object(zt.a)(i,12);r.toDateString()===i.toDateString()||r<c||t++}})),t},yn=function(e,t){return e?e.filter((function(e){return new Date(e.startDate).getFullYear().toString()===t})):[]},hn=function(e){var t,a,n,r,o,i,c,l,s,u;return{lon:null==e||null===(t=e.series)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.properties)||void 0===n||null===(r=n.start_loc)||void 0===r||null===(o=r.coordinates)||void 0===o?void 0:o[0],lat:null==e||null===(i=e.series)||void 0===i||null===(c=i[0])||void 0===c||null===(l=c.properties)||void 0===l||null===(s=l.start_loc)||void 0===s||null===(u=s.coordinates)||void 0===u?void 0:u[1]}},En=function(e){var t,a,n,r,o,i,c,l,s,u;return{lon:null==e||null===(t=e.series)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.properties)||void 0===n||null===(r=n.end_loc)||void 0===r||null===(o=r.coordinates)||void 0===o?void 0:o[0],lat:null==e||null===(i=e.series)||void 0===i||null===(c=i[0])||void 0===c||null===(l=c.properties)||void 0===l||null===(s=l.end_loc)||void 0===s||null===(u=s.coordinates)||void 0===u?void 0:u[1]}},On=a("MRub"),jn={co2:{fontWeight:700,whiteSpace:"nowrap",marginRight:"-1rem"},tripIcon:{marginRight:"4px"}},Cn=function(e){var t=e.tripModeIcons,a=e.duration,n=e.distance;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(_t.a,{key:t,icon:e,size:10,style:jn.tripIcon})})),"¬∑ ".concat(a," ¬∑ ").concat(n))},wn=function(e){var t=e.timeserie,a=e.hasDateHeader,o=Object(H.e)(),i=o.t,c=o.f,l=Object(ke.g)(),s=Object(ke.h)(),u=Object(ke.j)().mode,d=Object(Ee.c)().isMobile,m=Wa(t),p=ln(t),f=function(e){return ca()(e.aggregation.sections.sort((function(e,t){return e.distance>t.distance?-1:1})).map((function(e){return e.mode})).filter(Boolean))}(t),b=sn(t),v=Object(n.useMemo)((function(){return u?vn(t,u):un(t)}),[t,u]),g=Object(n.useMemo)((function(){return f.map((function(e){return ot(e)}))}),[f]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(On.a,null,c(Ka(t),"dddd DD MMMM")),r.a.createElement(Pt.b,{button:!0,onClick:function(){s("".concat(l.pathname,"/").concat(t._id))}},r.a.createElement(Tt.a,null,r.a.createElement(yt,{attribute:m})),r.a.createElement(At.a,{primary:cn(t,d)||tn(t,i),secondary:r.a.createElement(Cn,{tripModeIcons:g,duration:p,distance:b})}),r.a.createElement(U.a,{style:jn.co2,variant:"body2"},v),r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:St.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Dt.a,null))};wn.propTypes={timeserie:Bt.a.object.isRequired,hasDateHeader:Bt.a.bool.isRequired};var xn=r.a.memo(wn,(function(e,t){return e.timeserie._rev===t.timeserie._rev}));xn.displayName="MemoizedTripItem";var kn=xn,Dn=a("whoR"),_n=a("IJzH"),Sn=a("OEPu"),Pn=a("gQXR"),Tn=function(e){var t=e.timeseries,a=e.noHeader,o=Object(Ee.b)().isMobile,i=Object(H.e)().t,c=Object(ke.h)(),l=be(),s=l.isGeolocationTrackingAvailable,u=l.isGeolocationTrackingEnabled,d=s&&!u,m=Object(n.useCallback)((function(e,a){return 0===a||!Object(Rt.a)(Ka(e),Ka(t[a-1]))}),[t]);return r.a.createElement(r.a.Fragment,null,o&&!a&&r.a.createElement(Pn.a,{className:"u-ph-1",style:{height:"4rem",display:"flex",alignItems:"center"},square:!0},r.a.createElement(U.a,{variant:"h5"},i("trips.trips"))),d&&r.a.createElement(Dn.a,{className:"u-mt-half u-mh-half",block:!0,action:r.a.createElement(Q.a,{variant:"text",size:"small",label:i("geolocationTracking.tooltip.action"),onClick:function(){return c("/settings")}})},r.a.createElement(_n.a,null,i("geolocationTracking.tooltip.title")),i("geolocationTracking.tooltip.text")),r.a.createElement(Sn.a,null,t.map((function(e,t){return r.a.createElement(kn,{key:"".concat(e.id).concat(t),timeserie:e,hasDateHeader:m(e,t)})}))))};Tn.propTypes={timeseries:Bt.a.arrayOf(Bt.a.object).isRequired,noHeader:Bt.a.bool};var An=Tn,Mn=a("+rdD"),Nn=a("kTYB"),Ln=function(e){var t=e.timeseries,a=Object(ke.j)().mode,o=Object(H.e)().t,i=Object(Ee.b)().isMobile,c=Object(n.useMemo)((function(){return Ha(t)}),[t]),l=Va(t),s=Object(n.useMemo)((function(){return Ft(c,"modes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(An,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Se()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(Nn.a,{data:u,options:d,primaryText:Ct(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Mn.a,{marginTop:i?void 0:"6rem"},r.a.createElement(Sn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(It,{key:t,type:"modes",totalCO2:l,sortedTimeserie:e})})))))},In=function(){var e=Object(ke.i)(),t=Z()(e,1)[0];return r.a.createElement(Ln,{timeseries:t})},Fn=function(e){var t=e.timeseries,a=Object(ke.j)().purpose,o=Object(H.e)().t,i=Object(Ee.b)().isMobile,c=Object(n.useMemo)((function(){return Ja(t)}),[t]),l=Va(t),s=Object(n.useMemo)((function(){return Ft(c,"purposes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(An,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Se()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(Nn.a,{data:u,options:d,primaryText:Ct(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Mn.a,{marginTop:i?void 0:"6rem"},r.a.createElement(Sn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(It,{key:t,type:"purposes",totalCO2:l,sortedTimeserie:e})})))))},Rn=function(){var e=Object(ke.i)(),t=Z()(e,1)[0];return r.a.createElement(Fn,{timeseries:t})},Gn=a("6WJ3"),Bn=a("HYTT"),zn=a("Su4X"),qn=a("Gyqq"),Yn=a("d5dM"),Zn=Object(qn.f)(De.b),Qn=function(){var e=Object(H.e)().t,t=Object(ke.g)().pathname.startsWith("/analysis");return r.a.createElement(Yn.a,null,r.a.createElement(qn.e,null,r.a.createElement(qn.b,null,r.a.createElement(Zn,{to:"/trips"},r.a.createElement(qn.a,{icon:Gn.a}),r.a.createElement(qn.d,null,e("nav.trips")))),r.a.createElement(qn.b,null,r.a.createElement(Zn,{to:"/analysis/modes",className:Se()(qn.c.className,t?qn.c.activeClassName:null)},r.a.createElement(qn.a,{icon:Bn.a}),r.a.createElement(qn.d,null,e("nav.analysis")))),r.a.createElement(qn.b,{secondary:!0},r.a.createElement(Zn,{to:"/analysis/modes"},r.a.createElement(qn.d,null,e("nav.modes")))),r.a.createElement(qn.b,{secondary:!0},r.a.createElement(Zn,{to:"/analysis/purposes"},r.a.createElement(qn.d,null,r.a.createElement(Mn.a,{whiteSpace:"nowrap"},e("nav.purposes"))))),r.a.createElement(qn.b,null,r.a.createElement(Zn,{to:"/settings"},r.a.createElement(qn.a,{icon:zn.a}),r.a.createElement(qn.d,null,e("nav.settings"))))))},Vn=a("9Y1u"),Un=a("WY6r"),Hn=a("N8wp"),Wn=function(){var e=Object(H.e)().t;return r.a.createElement(Un.b,null,r.a.createElement(Qn,null),r.a.createElement(Un.c,null,r.a.createElement(Un.a,null,r.a.createElement(ke.b,null))),r.a.createElement(Hn.a,{t:e}),r.a.createElement(Vn.a,null))},Jn=a("LGLP"),Kn=a.n(Jn),Xn=a("VDMD"),$n=a.n(Xn),er=function(e){var t,a,n=null==e||null===(t=e[0].bikeGoal)||void 0===t?void 0:t.daysToReach,r=null===(a=X()("coachco2.bikegoal.settings"))||void 0===a?void 0:a.daysToReach;return n||r||100},tr=function(){var e;return null===(e=X()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.bountyAmount},ar=function(){var e,t,a,n=null===(e=X()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.sourceName;return{sourceType:null===(t=X()("coachco2.bikegoal.settings"))||void 0===t?void 0:t.sourceType,sourceOffer:null===(a=X()("coachco2.bikegoal.settings"))||void 0===a?void 0:a.sourceOffer,sourceName:n}},nr=function(e,t){return!(!e||0===e.length)&&gn(e)>=er(t)},rr=function(e,t){if(!e||0===e.length)return 0;var a=gn(e),n=er(t);return a<n?a:n},or=function(e,t){if(!t)return 0;var a=er(e),n=t>a?a:t;return Math.round(n/a*100)},ir=function(e){var t,a=(null==e||null===(t=e[0])||void 0===t?void 0:t.bikeGoal)||{};return{givenName:a.firstname,familyName:a.lastname}},cr=a("ro7u"),lr=a("2Eyq");Te.a.namespace("services/centreValDeLoireExpe"),a("NhwE"),a("8tKC");var sr=a("PG+o");var ur=Te.a.namespace("services/daccMonthlyCO2"),dr=ee()("daccMonthlyCO2"),mr=C.models.dacc.fetchAggregatesFromDACC,pr=function(){var e=m()(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=fr(),n=Object(cr.a)(Object(h.a)(Object(Yt.a)(Date.now(),11)),"yyyy-MM-dd"),e.next=5,mr(t,a,{measureName:j.D,startDate:n});case 5:return r=e.sent,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),ur("error","Error while retrieving data from remote-doctype"),dr.error("Error while retrieving data from remote-doctype",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();Te.a.namespace("services/dacc"),C.models.dacc.sendMeasureToDACC;var fr=function(){return!0===X()("coachco2.dacc-dev_v2")?u.f:u.e};function br(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return vr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return vr(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}Te.a.namespace("services/daccBikeGoal");var gr=ee()("daccBikeGoal"),yr=C.models.dacc.fetchAggregatesFromDACC,hr=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=fr(),n=Date.now(),r=Object(cr.a)(Object(lr.a)(n,1),"yyyy-MM-dd"),o=Object(cr.a)(n,"yyyy-MM-dd"),e.next=7,yr(t,a,{measureName:j.C,startDate:r,endDate:o});case 7:return i=e.sent,e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(0),gr.error("Error while retrieving data from remote-doctype",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Er=function(e){var t,a=Or(),n=br(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.groups.some((function(e){return e.groupName===a})))return Math.round(r.avg)}}catch(o){n.e(o)}finally{n.f()}return null},Or=function(){return ar().sourceName||"unknown"},jr=function(){var e=m()(v.a.mark((function e(t,a){var n,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a!==j.D){e.next=6;break}return e.next=3,pr(t);case 3:return n=e.sent,r=(null==n?void 0:n.length)>0?n.map((function(e){return e.avg})):null,e.abrupt("return",r);case 6:if(a!==j.C){e.next=13;break}return e.next=9,hr(t);case 9:if(o=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.abrupt("return",Er(o));case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Cr=function(e){var t=e.hasConsent,a=e.measureName,r=Object(C.useClient)(),o=Object(n.useState)(!1),i=Z()(o,2),c=i[0],l=i[1],s=Object(n.useState)(null),u=Z()(s,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){t&&function(){var e=m()(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,jr(r,a);case 3:t=e.sent,l(!1),p(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[r,t,a]),{isLoading:c,data:d}},wr=a("gQ+z"),xr=["timeseries","sendToDACC","size"],kr=["data"],Dr=function(e){var t=e.timeseries,a=e.sendToDACC,o=e.size,i=s()(e,xr),c=Object(n.useState)(!1),l=Z()(c,2),u=l[0],d=l[1],m=M(),p=Object(C.useQuery)(m.definition,m.options),f=p.data,b=s()(p,kr);Object(n.useEffect)((function(){var e,t=null==f||null===(e=f[0].bikeGoal)||void 0===e?void 0:e.sendToDACC;d(!!t)}),[f]);var v=Cr({hasConsent:u,measureName:j.C}),g=v.data,y=v.isLoading;if(Object(C.isQueryLoading)(b)&&y)return null;var h=function(e,t){if(!e)return 100;var a=rr(e,t),n=er(t);return Math.round(a/n*100)}(t,f),E=function(e){switch(e){case"medium":return"3rem";case"small":return"2.5rem";default:return"4.5rem"}}(o);return r.a.createElement(wr.a,Kn()({size:o,primaryProps:{value:h,color:"#BA5AE8"}},a&&{secondaryProps:{value:or(f,g),color:"#BA5AE83D"}},i),r.a.createElement(Mn.a,{fontSize:E},"üö¥"))};Dr.propTypes={className:Bt.a.string,timeseries:Bt.a.arrayOf(Bt.a.object)};var _r=Dr,Sr=a("kyG8"),Pr=a.n(Sr),Tr=a("i0pn"),Ar=a("DZbK"),Mr=a.n(Ar),Nr=a("vVt6"),Lr=a.n(Nr),Ir=a("v5t+"),Fr=a.n(Ir),Rr=function(){return r.a.createElement(Tr.h,{viewBox:"0 0 409 757"},r.a.createElement(Tr.f,{d:"M386.752 16.07C386.752 22.7658 392.18 28.1938 398.876 28.1938C403.363 28.1938 407 31.8309 407 36.3175L407 720.682C407 725.169 403.363 728.806 398.876 728.806C392.18 728.806 386.752 734.234 386.752 740.93L386.752 743.903C386.752 750.032 381.784 755 375.656 755L33.3444 755C27.2158 755 22.2475 750.032 22.2475 743.903L22.2475 740.93C22.2475 734.234 16.8195 728.806 10.1237 728.806C5.63715 728.806 2 725.169 2 720.682L2.00003 36.3175C2.00003 31.8309 5.63718 28.1938 10.1238 28.1938C16.8195 28.1938 22.2476 22.7658 22.2476 16.07L22.2476 13.0969C22.2476 6.96822 27.2158 1.99998 33.3444 1.99998L375.656 2C381.784 2 386.752 6.96825 386.752 13.0969L386.752 16.07Z",fill:"white",stroke:"#297EF2",strokeWidth:"4"}),r.a.createElement(Tr.f,{d:"M386.926 8.8584C395.21 8.8584 401.926 15.5741 401.926 23.8584L401.926 736.142C401.926 742.77 396.553 748.142 389.926 748.142L19.0743 748.142C12.4468 748.142 7.07429 742.77 7.07429 736.142L7.07431 20.8584C7.07431 14.231 12.4469 8.85838 19.0743 8.85838L386.926 8.8584Z",stroke:"#297EF2",strokeWidth:"2"}),r.a.createElement(Tr.c,{cx:"404.951",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(Tr.c,{cx:"404.951",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(Tr.c,{cx:"4.04962",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(Tr.c,{cx:"4.04962",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}))},Gr=function(){return r.a.createElement(Tr.h,{width:"72",height:"72",viewBox:"0 0 72 72"},r.a.createElement(Tr.f,{d:"M31.2945 5.16468C33.8194 2.39335 38.1806 2.39335 40.7055 5.16468C42.3805 7.00311 44.9728 7.6977 47.3426 6.94307C50.9149 5.8055 54.6918 7.98608 55.4928 11.6486C56.0241 14.0782 57.9218 15.9759 60.3514 16.5072C64.0139 17.3082 66.1945 21.0851 65.0569 24.6574C64.3023 27.0272 64.9969 29.6195 66.8353 31.2945C69.6067 33.8194 69.6067 38.1806 66.8353 40.7055C64.9969 42.3805 64.3023 44.9728 65.0569 47.3426C66.1945 50.9149 64.0139 54.6918 60.3514 55.4928C57.9218 56.0241 56.0241 57.9218 55.4928 60.3514C54.6918 64.0139 50.9149 66.1945 47.3426 65.0569C44.9728 64.3023 42.3805 64.9969 40.7055 66.8353C38.1806 69.6067 33.8194 69.6067 31.2945 66.8353C29.6195 64.9969 27.0272 64.3023 24.6574 65.0569C21.0851 66.1945 17.3082 64.0139 16.5072 60.3514C15.9759 57.9218 14.0782 56.0241 11.6486 55.4928C7.98608 54.6918 5.8055 50.9149 6.94307 47.3426C7.6977 44.9728 7.00311 42.3805 5.16468 40.7055C2.39335 38.1806 2.39335 33.8194 5.16468 31.2945C7.00311 29.6195 7.6977 27.0272 6.94307 24.6574C5.8055 21.0851 7.98608 17.3082 11.6486 16.5072C14.0782 15.9759 15.9759 14.0782 16.5072 11.6486C17.3082 7.98608 21.0851 5.8055 24.6574 6.94307C27.0272 7.6977 29.6195 7.00311 31.2945 5.16468Z",fill:"#297EF2"}),r.a.createElement(Tr.a,{cx:"36",cy:"36",r:"26",fill:"white"}),r.a.createElement(Tr.f,{d:"M33.8789 46.515C34.1467 46.4481 34.4182 46.611 34.4852 46.8789L34.9852 48.8789C34.9953 48.9194 35.0002 48.9601 35.0002 49.0001H37C37 48.9601 37.0049 48.9194 37.015 48.8789L37.515 46.8789C37.582 46.611 37.8535 46.4481 38.1214 46.515C38.3893 46.582 38.5522 46.8535 38.4852 47.1214L38.0001 49.0617V51.0001C38.0001 51.5524 37.5524 52.0001 37.0001 52.0001H35.0001C34.4478 52.0001 34.0001 51.5524 34.0001 51.0001V49.0617L33.515 47.1214C33.4481 46.8535 33.611 46.582 33.8789 46.515Z",fill:"#297EF2"}),r.a.createElement(Tr.f,{d:"M34 47C33.4477 47 32.9798 46.5318 32.6829 46.0661C32.1387 45.2125 30.95 44.2886 29.5553 43.2046C26.3288 40.6968 22 37.3322 22 32C22 25.3726 28.268 20 36 20V47H34Z",fill:"#297EF2"}),r.a.createElement(Tr.f,{d:"M36 47H34.2857C34.2857 45.882 33.4127 44.6945 32.3173 43.2046C30.4736 40.6968 28 37.3322 28 32C28 25.3726 31.5817 20 36 20V47Z",fill:"#579EFF"}),r.a.createElement(Tr.f,{d:"M38 47C38.5523 47 39.0202 46.5318 39.3171 46.0661C39.8613 45.2125 41.05 44.2886 42.4447 43.2046C45.6712 40.6968 50 37.3322 50 32C50 25.3726 43.732 20 36 20V47H38Z",fill:"#B3D3FF"}),r.a.createElement(Tr.f,{d:"M36 47H37.7143C37.7143 45.882 38.5873 44.6945 39.6827 43.2046C41.5264 40.6968 44 37.3322 44 32C44 25.3726 40.4183 20 36 20V47Z",fill:"#91BFFF"}),r.a.createElement(Tr.a,{cx:"36",cy:"36",r:"23",stroke:"#297EF2",strokeWidth:"2"}))},Br=function(){return r.a.createElement(Tr.h,{width:"74",height:"32",viewBox:"0 0 74 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement(Tr.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M57.1068 13.6515L58.8382 18.2742L60.4808 13.6515H62.3782L59.6788 20.5655C59.1822 21.8522 58.3415 22.5275 57.3102 22.5275C56.7628 22.5275 56.1002 22.3622 55.6548 22.1202L56.0488 20.8468C56.3675 21.0242 56.6988 21.1388 56.9155 21.1388C57.2708 21.1388 57.5522 21.0242 57.6928 20.7822L57.9222 20.2982L55.1835 13.6515H57.1068ZM45.1202 13.5208C47.0682 13.5208 48.6982 15.0868 48.6982 16.9588C48.6982 18.8308 47.0682 20.4095 45.1202 20.4095C43.1588 20.4095 41.5162 18.8308 41.5162 16.9588C41.5162 15.0868 43.1588 13.5208 45.1202 13.5208ZM37.9802 11.3335C39.3042 11.3335 40.5268 11.8948 41.3802 12.7988L40.0182 14.0208C39.5082 13.4355 38.7828 13.0408 37.9802 13.0408C36.5162 13.0408 35.2675 14.3395 35.2675 15.8542C35.2675 17.3822 36.5162 18.6815 37.9808 18.6815C38.7828 18.6815 39.5082 18.2868 40.0182 17.7008L41.3802 18.9242C40.5268 19.8148 39.3042 20.3882 37.9802 20.3882C35.4728 20.3882 33.3335 18.3122 33.3335 15.8548C33.3335 13.3975 35.4735 11.3335 37.9802 11.3335ZM54.7055 13.6522V14.9642L51.3948 18.6562H54.7315V20.2348H48.9762V18.9235L52.2868 15.2302H49.0655V13.6522H54.7055ZM45.1188 15.0868C44.1255 15.0868 43.2988 15.9402 43.2988 16.9588C43.2988 17.9782 44.1255 18.8435 45.1188 18.8435C46.1002 18.8435 46.9275 17.9782 46.9275 16.9588C46.9275 15.9402 46.1008 15.0868 45.1195 15.0868H45.1188Z",fill:"#297EF2"}),r.a.createElement(Tr.f,{d:"M20.0002 26.6668C25.8912 26.6668 30.6668 21.8912 30.6668 16.0002C30.6668 10.1091 25.8912 5.3335 20.0002 5.3335C14.1091 5.3335 9.3335 10.1091 9.3335 16.0002C9.3335 21.8912 14.1091 26.6668 20.0002 26.6668Z",fill:"#297EF2"}),r.a.createElement(Tr.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2092 17.0408C22.1026 17.2075 21.8666 17.2568 21.7032 17.1475C21.6899 17.1395 21.6759 17.1302 21.6632 17.1208C21.1886 17.4928 20.6039 17.6955 19.9966 17.6955C19.3906 17.6955 18.8079 17.4935 18.3339 17.1222C18.3219 17.1315 18.3092 17.1402 18.2966 17.1482C18.1292 17.2575 17.8966 17.2055 17.7906 17.0422C17.6839 16.8775 17.7306 16.6542 17.8946 16.5435C18.0372 16.4502 18.0472 16.2628 18.0472 16.2608C18.0506 16.1628 18.0932 16.0695 18.1646 16.0042C18.2352 15.9375 18.3239 15.9002 18.4219 15.9075C18.6179 15.9122 18.7779 16.0775 18.7739 16.2762C18.7739 16.2788 18.7739 16.3782 18.7379 16.5162C19.4699 17.1235 20.5312 17.1215 21.2606 16.5108C21.2339 16.4048 21.2272 16.3208 21.2252 16.2815C21.2232 16.1795 21.2599 16.0875 21.3279 16.0168C21.3952 15.9482 21.4859 15.9088 21.5826 15.9075H21.5892C21.7852 15.9075 21.9479 16.0655 21.9526 16.2622C21.9526 16.2622 21.9626 16.4502 22.1039 16.5435C22.2686 16.6522 22.3159 16.8748 22.2092 17.0408ZM23.7572 12.7948C23.6526 11.9095 23.2606 11.0908 22.6306 10.4575C21.9086 9.73216 20.9539 9.3335 19.9439 9.3335C18.9339 9.3335 17.9806 9.73216 17.2579 10.4582C16.6259 11.0935 16.2326 11.9168 16.1306 12.8075C15.2632 12.9128 14.4612 13.3162 13.8419 13.9655C13.1352 14.7062 12.7466 15.6855 12.7466 16.7235C12.7466 18.8982 14.4692 20.6668 16.5879 20.6668H23.4119C25.5292 20.6668 27.2532 18.8982 27.2532 16.7235C27.2532 14.6682 25.7132 12.9748 23.7572 12.7948Z",fill:"white"}))};Tr.d.register({family:"Lato",src:Lr.a}),Tr.d.register({family:"Courgette",src:Mr.a}),Tr.d.register({family:"PlusJakarta",src:Fr.a});var zr=Tr.g.create({co2CertificateSVG:{margin:"0 auto 10px"},cozySVG:{margin:"0 auto"},page:{padding:8},content:{display:"flex",justifyContent:"space-between",position:"absolute",top:54,left:40,bottom:50,right:40},title:{whiteSpace:"pre-line",fontFamily:"PlusJakarta",fontSize:24,fontStyle:"normal",textAlign:"center",lineHeight:1.2},subTitle:{textAlign:"center",color:"rgba(29, 33, 42, 0.48)",marginTop:20,fontSize:12,fontStyle:"normal",fontWeight:400},name:{fontFamily:"Courgette",textAlign:"center",color:"#297EF2",fontSize:32,fontStyle:"normal",marginTop:20},divider:{width:"100%",height:1,backgroundColor:"rgba(29, 33, 42, 0.12)",margin:"20px 0"},text:{fontFamily:"Lato",textAlign:"left",color:"rgba(29, 33, 42, 0.90)",fontSize:14,fontStyle:"normal",marginTop:20,lineHeight:1.3}}),qr=function(e){var t=e.t,a=e.username,n=e.daysToReach,o=e.sourceName,i=e.year,c=e.lang,l=new Date,s=l.toLocaleDateString(c,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u=l.toLocaleTimeString(c,{hour12:!1,hour:"2-digit",minute:"2-digit"}).replace(":","h");return r.a.createElement(Tr.b,null,r.a.createElement(Tr.e,{wrap:!1,style:zr.page},r.a.createElement(Tr.j,null,r.a.createElement(Rr,null)),r.a.createElement(Tr.j,{style:zr.content},r.a.createElement(Tr.j,null,r.a.createElement(Tr.j,{style:zr.co2CertificateSVG},r.a.createElement(Gr,null)),r.a.createElement(Tr.i,{style:zr.title},t("PDF.title")),r.a.createElement(Tr.i,{style:zr.subTitle},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(Tr.i,{style:zr.name},a),r.a.createElement(Tr.j,{style:zr.divider}),r.a.createElement(Tr.i,{style:zr.text},t("PDF.recipient",{sourceName:o})),r.a.createElement(Tr.i,{style:zr.text},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(Tr.i,{style:zr.text},t("PDF.paragraph01",{username:a,daysToReach:n,year:i})),r.a.createElement(Tr.i,{style:zr.text},t("PDF.paragraph02")),r.a.createElement(Tr.i,{style:zr.text},t("PDF.paragraph03")),r.a.createElement(Tr.i,{style:zr.text},t("PDF.signature",{username:a}))),r.a.createElement(Tr.j,{style:zr.cozySVG},r.a.createElement(Br,null)))))},Yr=C.models.folder,Zr=Yr.MAGIC_FOLDERS,Qr=Yr.ensureMagicFolder,Vr=Yr.getReferencedFolder,Ur="".concat(u.b,"/coachco2"),Hr=function(){var e=m()(v.a.mark((function e(t,a){var n,r,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(t,{_id:Ur,_type:u.b});case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,Qr(t,Zr.ADMINISTRATIVE,"/".concat(a("folder.administrative")));case 9:return r=e.sent,o=r.path,e.next=13,Qr(t,Zr.COACH_CO2,"".concat(o,"/").concat(a("folder.coachco2")));case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Wr=a("0nAg"),Jr=ee()("savePdfCertificate"),Kr=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.pdfDocument,o=t.year,e.prev=1,e.next=4,Object(Tr.k)(r).toBlob();case 4:return i=e.sent,e.next=7,Hr(a,n);case 7:return c=e.sent,l=c._id,e.next=11,Object(Wr.uploadFileWithConflictStrategy)(a,i,{name:n("PDF.name",{year:o}),contentType:"application/pdf",dirId:l,conflictStrategy:"rename"});case 11:return s=e.sent,u=s.data,e.abrupt("return",u);case 16:return e.prev=16,e.t0=e.catch(1),Jr.error(e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),Xr=a("W5TB"),$r=["data"],eo=function(e){var t=e.certificate,a=Object(H.e)(),o=a.t,i=a.lang,c=Object(C.useClient)(),l=Object(Ee.b)().isMobile,u=Object(ke.j)().year,d=Object(ke.h)(),p=Object(n.useState)(!1),f=Z()(p,2),b=f[0],g=f[1],y=M(),h=Object(C.useQuery)(y.definition,y.options),E=h.data,O=s()(h,$r);if(Object(C.isQueryLoading)(O))return null;var j=function(){var e=m()(v.a.mark((function e(){var t,a,n,l,s,d,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),t=ar(),a=t.sourceName,n=ir(E),l=n.givenName,s=n.familyName,d="".concat(s," ").concat(l),m=r.a.createElement(qr,{t:o,username:d,daysToReach:er(E),sourceName:a,year:u,lang:i}),e.next=7,Kr({client:c,t:o,pdfDocument:m,year:u});case 7:g(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=o(t?"bikeGoal.certificateGeneration.actions.regenerate":"bikeGoal.certificateGeneration.actions.generate");return r.a.createElement("div",{className:Pr.a["CertificateGeneration-root"]},r.a.createElement(_r,l&&{size:"medium"}),r.a.createElement(U.a,{variant:"h4"},o("bikeGoal.certificateGeneration.title")),r.a.createElement(U.a,{variant:"body2",className:"u-mv-1"},o("bikeGoal.certificateGeneration.content",{smart_count:tr()||-1,year:u})),!!t&&!b&&r.a.createElement(Pn.a,{onClick:function(){d({pathname:"../certificate/".concat(t._id)})},className:"u-c-pointer"},r.a.createElement(Sn.a,null,r.a.createElement(Pt.b,null,r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Xr.a,size:32})),r.a.createElement(At.a,{primary:t.name})))),r.a.createElement(Q.a,{variant:"text",label:w,className:"u-mt-half u-fz-xsmall",onClick:j,busy:b}))},to=a("tRUj"),ao=a("bQqJ"),no=["data"],ro=function(){var e=Object(ke.h)(),t=Object(Ee.b)().isMobile,a=Object(H.e)().t,n={definition:Object(C.Q)(u.g).partialIndex({"cozyMetadata.createdByApp":"coachco2",class:"pdf",type:"file",trashed:!1}).indexFields(["cozyMetadata.updatedAt"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(1),options:{as:u.g,fetchPolicy:w.a.fetchPolicies.olderThan(1e8)}},o=Object(C.useQuery)(n.definition,n.options),i=o.data,c=s()(o,no),l=Object(C.isQueryLoading)(c);return r.a.createElement(to.a,Kn()({open:!0,background:"var(--paperBackgroundColor) repeat-x url(".concat($n.a,")"),content:l?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(eo,{certificate:i[0]})},t?{onBack:function(){return e("..")}}:{onClose:function(){return e("..")}},{actions:r.a.createElement(Q.a,{label:a("bikeGoal.certificateGeneration.actions.understood"),onClick:function(){return e("..")}}),actionsLayout:"column"}))},oo=a("XfNG"),io=a("GXf6"),co=["/analysis/modes","/analysis/purposes"],lo=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},so=function(){var e=Object(ke.h)(),t=Object(ke.g)().pathname,a=Object(H.e)().t,n=co.indexOf(co.find((function(e){return t.includes(e)})));return r.a.createElement(Pn.a,null,r.a.createElement(oo.a,{value:n,onChange:function(t,a){e(co[a])}},r.a.createElement(io.a,Kn()({label:a("nav.modes")},lo(0))),r.a.createElement(io.a,Kn()({label:a("nav.purposes")},lo(1)))))},uo=a("lomp"),mo=a.n(uo),po=a("nOWK"),fo=a.n(po),bo=new mo.a({id:"pins-path_2d4c69ec9e779e37080be582b17e8596",use:"pins-path_2d4c69ec9e779e37080be582b17e8596-usage",viewBox:"0 0 96 96",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 96 96" id="pins-path_2d4c69ec9e779e37080be582b17e8596"><g clip-path="url(#pins-path_2d4c69ec9e779e37080be582b17e8596_a)"><path stroke="#FFD799" stroke-linecap="round" stroke-width="8" d="M20 46h9.5C35.851 46 41 51.149 41 57.5v0C41 63.851 35.851 69 29.5 69h-14C9.149 69 4 74.149 4 80.5v0C4 86.851 9.149 92 15.5 92H72" /><path fill="#FFB64F" d="M96 48c0 11.267-17.34 32.28-22.542 38.33a1.908 1.908 0 0 1-2.916 0C65.341 80.28 48 59.268 48 48c0-13.255 10.745-24 24-24s24 10.745 24 24ZM35 16c0 7.19-10.594 20.336-14.541 24.984a1.904 1.904 0 0 1-2.918 0C13.594 36.336 3 23.19 3 16 3 7.163 10.163 0 19 0s16 7.163 16 16Z" /><circle cx="72" cy="48" r="8" fill="#F33136" /><circle cx="19" cy="16" r="5.333" fill="#F33136" /></g><defs><clipPath id="pins-path_2d4c69ec9e779e37080be582b17e8596_a"><path fill="#fff" d="M0 0h96v96H0z" /></clipPath></defs></symbol>'}),vo=(fo.a.add(bo),bo),go=a("HCvV"),yo=a("XqEJ"),ho=a("gMSI");function Eo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Oo=function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Eo(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({position:"fixed",width:"100%",textAlign:"center",bottom:"calc(var(--safe-area-inset-bottom) + 4rem)"},e&&{left:"calc(var(--safe-area-inset-left) + calc(13.75rem / 2))"})},jo=function(){var e=Object(H.e)().t,t=Object(Ee.b)().isDesktop,a=Oo(t);return r.a.createElement("div",{style:a},r.a.createElement(U.a,null,e("support.problem")),r.a.createElement(U.a,null,e("support.consult.text")," ",r.a.createElement(ho.a,{target:"_blank",href:"https://support.cozy.io/tag/cozy-coach-co2/"},e("support.consult.link")," ",r.a.createElement(go.a,{size:"small",color:"inherit"},r.a.createElement(_t.a,{icon:yo.a})))))},Co=a("Jbzi"),wo=a("ebeN"),xo=function(e){var t=e.label,a=e.subtitle,n=e.onBack,o=Object(Ee.b)().isMobile,i=cozy.bar,l=i.BarCenter,s=i.BarLeft,u="function"==typeof n?n:void 0;return o?r.a.createElement(r.a.Fragment,null,u&&r.a.createElement(s,null,r.a.createElement(go.a,{className:"u-mr-half",onClick:u,size:"medium"},r.a.createElement(_t.a,{icon:wo.a,size:16}))),r.a.createElement(l,null,r.a.createElement(Oe.a,null,r.a.createElement(Co.a,null,t)))):r.a.createElement("div",{className:Se()(c()({},"u-flex u-flex-items-baseline u-ml-2",u))},u&&r.a.createElement(go.a,{className:"u-mr-half",onClick:u,size:"medium"},r.a.createElement(_t.a,{icon:wo.a,size:16})),r.a.createElement("div",{className:Se()("u-mv-1-half-s u-ml-1-s u-mv-2",c()({},"u-ml-2",!u))},r.a.createElement(U.a,{variant:"h3"},t),a))};xo.propTypes={label:Bt.a.string,subtitle:Bt.a.node,onBack:Bt.a.func};var ko=xo,Do=a("/5Aj"),_o=function(){var e=Object(H.e)().t,t=Object(Ee.b)().isMobile,a=Object(ke.h)(),n=G(),o=n.account,i=n.isAllAccountsSelected?e("settings.allAccounts"):"".concat(e("trips.from")," ").concat(B(o));return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(ko,{label:o?"".concat(i):e("trips.trips")}),r.a.createElement(Do.a,{icon:vo,title:e("emptyContent.changeAccount.title"),text:e("emptyContent.changeAccount.text"),centered:!0},r.a.createElement(Q.a,{className:"u-mt-1",variant:"secondary",label:e("emptyContent.changeAccount.action"),onClick:function(){return a("/settings")}})),r.a.createElement(jo,null))},So=a("PFMP"),Po=a.n(So),To=function(){var e=Object(H.e)().t,t=Object(Ee.b)().isMobile,a=G().account;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(ko,{label:e("trips.from")+" "+B(a)}),r.a.createElement(Do.a,{icon:r.a.createElement("img",{src:Po.a}),iconSize:"medium",title:e("emptyContent.GPSStandby.title"),text:e("emptyContent.GPSStandby.text"),centered:!0}),r.a.createElement(jo,null))},Ao=new mo.a({id:"cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a",use:"cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a-usage",viewBox:"0 0 128 96",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 128 96" id="cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a"><path fill="#BBD9FD" fill-rule="evenodd" d="M38.15 93.955c2.147.763 7.653 1.424 12.09 1.688 12.119.722 29.052.33 36.23-.998 7.231-1.34 7.553-3.364-10.83-4.366-15.654-.854-33.926.363-37.833 2.175-1.049.487-.991 1.028.343 1.5Z" clip-rule="evenodd" /><path fill="#297EF1" fill-rule="evenodd" d="M68.641 13.698 42.583 19.09c-3.788.788-6.22 4.474-5.436 8.242l10.852 51.938c.784 3.773 4.493 6.186 8.278 5.413l26.062-5.413a6.962 6.962 0 0 0 5.432-8.242l-10.848-51.93c-.788-3.769-4.493-6.19-8.282-5.401Z" clip-rule="evenodd" /><path fill="#BBD9FD" fill-rule="evenodd" d="m80.66 62.672-29.485 6.115-8.385-40.122 29.493-6.106 8.377 40.113Zm-10.502 12.15a2.636 2.636 0 0 1-3.638.748 2.6 2.6 0 0 1-.748-3.618 2.72 2.72 0 0 1 3.634-.756 2.607 2.607 0 0 1 .76 3.618l-.008.008Z" clip-rule="evenodd" /><path fill="#fff" d="M97.828 0c-14.083 0-25.5 11.417-25.5 25.5l.003.345a25.496 25.496 0 0 0 13.273 22.04l.18.096.071-.122c-.38.64-.617 1.306-.617 1.967 0 1.424.679 2.62 2.05 3.099l.23.077c2.601.819 4.952.042 7.797-1.95l.217-.155.561.045a25.8 25.8 0 0 0 1.735.058c14.084 0 25.5-11.417 25.5-25.5S111.912 0 97.828 0Z" /><path fill="#BBD9FD" d="M97.828 0c-14.083 0-25.5 11.417-25.5 25.5l.003.345a25.496 25.496 0 0 0 13.273 22.04l.18.096.071-.122c-.38.64-.617 1.306-.617 1.967 0 1.424.679 2.62 2.05 3.099l.23.077c2.601.819 4.952.042 7.797-1.95l.217-.155.561.045a25.8 25.8 0 0 0 1.735.058c14.084 0 25.5-11.417 25.5-25.5S111.912 0 97.828 0Zm0 3c12.427 0 22.5 10.074 22.5 22.5S110.255 48 97.828 48c-.856 0-1.705-.048-2.547-.142l-.579-.066-.893.65c-2.24 1.608-3.823 2.172-5.372 1.703l-.16-.052c-.037-.013-.04-.018-.04-.267 0-.029.068-.218.181-.409l.061-.097a5.366 5.366 0 0 0 .723-1.677l.294-1.2-1.12-.518A22.501 22.501 0 0 1 75.328 25.5c0-12.426 10.074-22.5 22.5-22.5Z" /><path fill="#297EF2" d="M84 22.2c0-3.92 0-5.88.763-7.378a7 7 0 0 1 3.06-3.059C89.318 11 91.28 11 95.2 11h5.6c3.92 0 5.881 0 7.378.763a7 7 0 0 1 3.059 3.06C112 16.318 112 18.28 112 22.2v5.6c0 3.92 0 5.88-.763 7.378a7 7 0 0 1-3.059 3.059C106.681 39 104.72 39 100.8 39h-5.6c-3.92 0-5.88 0-7.378-.763a7 7 0 0 1-3.059-3.06C84 33.682 84 31.72 84 27.8v-5.6Z" /><path fill="#fff" fill-rule="evenodd" d="M101.07 27.836a.515.515 0 0 1-.759.11c-.66.518-1.471.8-2.316.8-.842 0-1.652-.281-2.31-.796l-.052.035a.516.516 0 0 1-.703-.147.507.507 0 0 1 .144-.693c.198-.13.212-.39.212-.393a.514.514 0 0 1 .163-.357.467.467 0 0 1 .358-.134.504.504 0 0 1 .49.512c0 .004-.001.142-.051.333a2.737 2.737 0 0 0 3.506-.007 1.637 1.637 0 0 1-.05-.318.505.505 0 0 1 .497-.52h.009c.273 0 .499.22.505.493 0 0 .015.261.211.39.229.152.294.461.146.692Zm2.151-5.9a5.5 5.5 0 0 0-1.565-3.249 5.237 5.237 0 0 0-7.466.001 5.5 5.5 0 0 0-1.568 3.265 5.26 5.26 0 0 0-3.18 1.609 5.528 5.528 0 0 0-1.522 3.833c0 3.022 2.394 5.48 5.338 5.48h9.483c2.943 0 5.339-2.458 5.339-5.48 0-2.856-2.14-5.21-4.859-5.46Z" clip-rule="evenodd" /></symbol>'}),Mo=(fo.a.add(Ao),Ao),No=a("aCpG"),Lo=function(){var e=Object(n.useState)(!1),t=Z()(e,2),a=t[0],o=t[1],i=Object(H.e)().t,c=Object(Ee.b)().isMobile,l=Object(C.useClient)();return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement(ko,{label:l.appMetadata.slug}),r.a.createElement(Do.a,{icon:Mo,title:i("emptyContent.installApp.title"),text:i("emptyContent.installApp.text"),centered:!0},r.a.createElement(Q.a,{className:"u-mt-1",label:i("emptyContent.installApp.action"),onClick:function(){return o(!0)}})),a&&r.a.createElement(No.a,{onClose:function(){return o(!1)}}))};function Io(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Io(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ro=function(e){return e.map((function(e){return e._id})).reduce((function(e,t){var a,n=(a=t,{definition:Object(C.Q)(u.h).where({"cozyMetadata.sourceAccount":a}).select(["cozyMetadata.sourceAccount"]).limitBy(1),options:{as:"".concat(u.h,"/hasTimeseries/sourceAccount/").concat(a),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}});return e[t]=Fo(Fo({},n.options),{},{query:n.definition}),e}),{})},Go=a("eCKa"),Bo={typography:{whiteSpace:"pre-line"}},zo=function(){var e=Object(H.e)().t,t=Object(Ee.b)().isMobile,a=Object(C.useClient)(),n=be().checkPermissionsAndEnableTrackingOrShowDialog,o=ar(),i=o.sourceName,c=o.sourceType,l=function(){var e=X()("coachco2.max-days-to-capture"),t="number"==typeof e&&e>=0,a="number"==typeof e&&e<0,n=!0===X()("coachco2.bikegoal.enabled"),r=ar(),o=r.sourceName,i=r.sourceOffer;return n&&t?"textA":!n||!a||i&&"premium"!==i?n&&a&&"employer"!==i&&o?"textC":n&&a&&"employer"===i?"textD":"text":"textB"}();return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(ko,{label:a.appMetadata.slug}),r.a.createElement(Do.a,{"data-testid":"EmptyContent",className:t?"u-p-1":"u-flex-justify-start u-p-3",icon:r.a.createElement(Go.a,{app:"coachco2"}),iconSize:"large",title:e("emptyContent.welcome.title"),text:r.a.createElement(U.a,{style:Bo.typography,variant:"inherit",color:"inherit"},e("emptyContent.welcome.".concat(l),{maxDaysToCapture:X()("coachco2.max-days-to-capture"),sourceType:c,sourceName:i})),centered:!0},r.a.createElement(Q.a,{className:"u-mt-1",label:e("emptyContent.welcome.action"),onClick:m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))})))},qo=function(){var e=G(),t=e.accounts,a=e.account,n=e.isAllAccountsSelected,o=be(),i=o.isGeolocationTrackingAvailable,c=o.isGeolocationTrackingEnabled,l=null===i||null===c,s=n?[]:t.filter((function(e){return e._id!==(null==a?void 0:a._id)})),u=Ro(s),d=Object(C.useQueries)(u);return Object(C.isQueriesLoading)(d)||l?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):Object.values(d).some((function(e){return e.data.length>0}))?r.a.createElement(_o,null):i?c&&a?r.a.createElement(To,null):r.a.createElement(zo,null):r.a.createElement(Lo,null)},Yo=a("7u78"),Zo=a("o1F1"),Qo=a("/ENz"),Vo=["children","className","spaceBetween"],Uo=Object(Qo.a)((function(){return{button:{padding:"0 1rem",justifyContent:function(e){return e.spaceBetween?"space-between":"left"}},typography:{textTransform:"initial"}}})),Ho=function(e){var t=e.children,a=e.className,n=e.spaceBetween,o=s()(e,Vo),i=Uo({spaceBetween:n});return r.a.createElement(Yo.a,Kn()({className:Se()(i.button,a),endIcon:r.a.createElement(_t.a,{icon:Zo.a,size:10})},o),r.a.createElement(U.a,{className:i.typography},t))},Wo=a("1Crc"),Jo=a("Zkmp"),Ko=a("Llgb"),Xo=["className","type","options","selectedIndex","disabledIndexes","isFullYear","setIsFullYear","onclick"],$o=Object(Qo.a)((function(){return{paper:{width:function(e){var t=e.anchorEl;return t?window.getComputedStyle(t).width:void 0},marginTop:2},list:{outline:0,maxHeight:200,overflowY:"auto"}}})),ei=function(e){var t=e.className,a=e.type,o=e.options,i=e.selectedIndex,c=e.disabledIndexes,l=e.isFullYear,u=e.setIsFullYear,d=e.onclick,m=s()(e,Xo),p=Object(H.e)().t,f=Object(n.useState)(null),b=Z()(f,2),v=b[0],g=b[1],y=Object(n.useState)(i||0),h=Z()(y,2),E=h[0],O=h[1],j=$o({anchorEl:v}),C=j.paper,w=j.list,x=function(){g(null)},k=function(e){return function(){x(),"month"===a&&l&&u(!1),O(e),null==d||d(a,o[e])}};return Object(n.useEffect)((function(){void 0!==i&&O(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ho,Kn()({"data-testid":"dropdown-button",className:t,onClick:function(e){g(e.currentTarget)}},m),"month"===a&&l?p("analysis.allYear"):o[E]),r.a.createElement(Ko.a,{"data-testid":"dropdown-menu",open:Boolean(v),PaperProps:{classes:{root:C}},getContentAnchorEl:null,anchorEl:v,elevation:2,keepMounted:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:x},r.a.createElement(Jo.a,{className:w},o.map((function(e,t){return r.a.createElement(Wo.a,{"data-testid":"dropdown-menuItem-".concat(t),key:t,selected:"month"===a?!l&&t===E:t===E,disabled:c&&c.includes(t),onClick:k(t)},e)}))),"month"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,null),r.a.createElement(Jo.a,{className:w},r.a.createElement(Wo.a,{selected:l,onClick:function(){x(),u(!0)}},p("analysis.allYear"))))))};ei.proptypes={className:Bt.a.string,type:Bt.a.oneOfType([Bt.a.string,Bt.a.number]),options:Bt.a.array.isRequired,isFullYear:Bt.a.bool.isRequired,setIsFullYear:Bt.a.func.isRequired,selectedIndex:Bt.a.number,disabledIndexes:Bt.a.array,onclick:Bt.a.func};var ti=ei,ai=a("13ub"),ni=a.n(ai),ri=ee()("components/SelectDates/helpers"),oi=function(e){return Array(12).fill().map((function(t,a){return ni()(new Intl.DateTimeFormat("".concat(e,"-").concat(e.toUpperCase()),{month:"long"}).format(new Date(0,a)))}))},ii=function(e){return new Date(Math.min.apply(null,e))},ci=function(e){return new Date(Math.max.apply(null,e))},li=function(e,t){return e.map((function(e,a){return t.includes(e)?null:a})).filter((function(e){return null!==e}))},si=function(e,t){var a=function(e){var t=ci(e).getFullYear(),a=ii(e).getFullYear(),n=Number(a);return Array(t-a+1).fill().map((function(){return n++})).sort().reverse()}(e),n=function(e){return f()(new Set(e.map((function(e){return e.getFullYear()}))))}(e),r=a.indexOf(t.getFullYear());return{years:a,yearSelectedIndex:r,disabledYearsIndexes:li(a,n)}},ui=Pa()((function(e){var t=e.dates,a=e.selectedDate,n=e.lang,r=oi(n),o=ii(t),i=ci(t),c=a.getFullYear(),l=c===i.getFullYear(),s=c===o.getFullYear(),u=12;l?u=i.getMonth()+1:s&&(u=12-o.getMonth());var d,m=function(e){var t=e.monthCount,a=e.allMonthsName,n=e.endToStart;return a.slice(n?a.length-t:0,n?a.length:t)}({monthCount:u,allMonthsName:r,endToStart:s&&s!==l}),p=m.indexOf(r[a.getMonth()]);-1===p&&(l?d=i:s&&(d=o),p=m.indexOf(r[d.getMonth()]));var b=function(e){var t=e.dates,a=e.year,n=e.allMonthsName;return f()(new Set(t.map((function(e){return e.getFullYear()===a?n[e.getMonth()]:null})).filter((function(e){return null!==e}))))}({dates:t,year:c,allMonthsName:r});return{months:m,monthSelectedIndex:p,disabledMonthsIndexes:li(m,b)}})),di=Pa()((function(e){var t=e.oldDate,a=e.lang,n=e.value,r=e.type,o=e.dates,i=oi(a);if("year"===r){var c=new Date(new Date(t).setFullYear(n)),l=ui({dates:o,selectedDate:c,lang:a}),s=l.months,u=l.monthSelectedIndex,d=i.indexOf(s[u]);return new Date(new Date(c).setMonth(d))}if("month"===r){var m=i.indexOf(n);return new Date(new Date(t).setMonth(m))}return t})),mi=a("K4g+"),pi=Object(Qo.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},leftDropdownButton:{borderTopLeftRadius:1e3,borderBottomLeftRadius:1e3,paddingRight:"2.5rem"},rightDropdownButton:{borderTopRightRadius:1e3,borderBottomRightRadius:1e3,paddingRight:"1.2rem"},divider:{margin:"0.6rem 0"},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2],backgroundColor:e.palette.background.paper}}})),fi=function(e){var t=e.className,a=e.options,o=e.selectedDate,i=e.setSelectedDate,c=e.isFullYear,l=e.setIsFullYear,s=pi(),u=Object(H.e)().lang,d=ui({dates:a,selectedDate:o,lang:u}),m=d.months,p=d.monthSelectedIndex,f=d.disabledMonthsIndexes,b=Object(n.useMemo)((function(){return si(a,o)}),[a,o]),v=b.years,g=b.yearSelectedIndex,y=b.disabledYearsIndexes,h=function(e,t){var n=di({oldDate:o,lang:u,value:t,type:e,dates:a});i(n)},E=Object(n.useMemo)((function(){return a.reduce((function(e,t){return e.find((function(e){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}))||e.push(t),e}),[])}),[a]),O=function(e){return function(){i((function(t){return function(e){var t,a=e.dates,n=e.currentDate,r=e.isFullYear,o=e.step,i=n.getMonth(),c=n.getFullYear(),l=a.findIndex((function(e){return e.getMonth()===i&&e.getFullYear()===c}));if(-1===l)return ri.error("Date '".concat(n,"' not found in the dates array: [").concat(a,"]")),n;if(r){var s=c-o,u=a.findIndex((function(e){return e.getFullYear()===s}));t=a[u]}else t=a[l+o];return void 0===t?(ri.error("Index '".concat(l+o,"' doesn't exist in dates array: [").concat(a,"]")),n):t}({dates:E,currentDate:t,isFullYear:c,step:e})}))}},j=function(e){return function(e){var t=e.type,a=e.selectedDate,n=e.isFullYear,r=e.options,o=new Date(a.getFullYear(),!n&&a.getMonth());if("previous"===t){var i=ii(r);return new Date(i.getFullYear(),!n&&i.getMonth()).getTime()===o.getTime()}if("next"===t){var c=ci(r);return new Date(c.getFullYear(),!n&&c.getMonth()).getTime()===o.getTime()}return!1}({type:e,selectedDate:o,isFullYear:c,options:a})};return r.a.createElement(Mn.a,{display:"flex",className:t},r.a.createElement(Pn.a,{className:s.paper,elevation:2},r.a.createElement(ti,{"data-testid":"dropdown-button-year",type:"year",className:s.leftDropdownButton,options:v,selectedIndex:g,disabledIndexes:y,isFullYear:c,setIsFullYear:l,onclick:h}),r.a.createElement(Dt.a,{className:s.divider,orientation:"vertical",flexItem:!0}),r.a.createElement(ti,{"data-testid":"dropdown-button-month",type:"month",className:s.rightDropdownButton,fullWidth:!0,spaceBetween:!0,options:m,selectedIndex:p,disabledIndexes:f,isFullYear:c,setIsFullYear:l,onclick:h})),r.a.createElement(Mn.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(go.a,{"data-testid":"previous-button",className:s.iconButton,onClick:O(1),disabled:j("previous"),size:"medium"},r.a.createElement(_t.a,{icon:mi.a})),r.a.createElement(go.a,{"data-testid":"next-button",className:Se()(s.iconButton,"u-ml-half"),onClick:O(-1),disabled:j("next"),size:"medium"},r.a.createElement(_t.a,{icon:St.a}))))};fi.proptypes={className:Bt.a.string,options:Bt.a.array.isRequired,isFullYear:Bt.a.bool.isRequired,setIsFullYear:Bt.a.func.isRequired,selectedDate:Bt.a.number.isRequired,setSelectedDate:Bt.a.func.isRequired};var bi=fi,vi=function(e){var t=e.className,a=e.options,n=e.isLoading,o=e.isFullYear,i=e.setIsFullYear,c=e.selectedDate,l=e.setSelectedDate;return n?r.a.createElement(Mn.a,{display:"flex",className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2"},r.a.createElement(Mn.a,{display:"inline-flex",width:264,borderRadius:999,style:{backgroundColor:"var(--actionColorDisabledBackground)"}}),r.a.createElement(Mn.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(go.a,{style:{backgroundColor:"var(--actionColorDisabledBackground)"},size:"medium",disabled:!0},r.a.createElement(_t.a,{icon:mi.a})),r.a.createElement(go.a,{style:{backgroundColor:"var(--actionColorDisabledBackground)"},className:"u-ml-half",size:"medium",disabled:!0},r.a.createElement(_t.a,{icon:St.a})))):r.a.createElement(bi,{className:t,options:a,isFullYear:o,setIsFullYear:i,selectedDate:c,setSelectedDate:l})},gi=["data"];function yi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function hi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ei=function(){var e=ye(),t=e.selectedDate,a=e.setSelectedDate,o=e.isSelectedDateLoading,i=e.setIsSelectedDateLoading,c=e.isFullYear,l=e.setIsFullYear,u=e.options,d=e.setOptions,m=G(),p=m.account,f=m.isAllAccountsSelected,b=function(e){var t=e.isAllAccountsSelected,a=e.accountId;return t?D({limit:1e3}):_({accountId:a,limitBy:1e3})}({isAllAccountsSelected:f,accountId:null==p?void 0:p._id}),v=Object(C.useQueryAll)(b.definition,hi(hi({},b.options),{},{enabled:Boolean(p)||f})),g=v.data,y=s()(v,gi),h=Object(C.isQueryLoading)(y)||y.hasMore;return Object(n.useEffect)((function(){if((p||f)&&!h&&o){var e=function(e,t){return e||!t||0===(null==t?void 0:t.length)?null:t.map((function(e){return new Date(e.startDate)}))}(h,g);i(!1),e&&(a(ci(e)),d(e))}p||f||i(!1),(p||f)&&h&&!o&&i(!0)}),[p,f,h,o,i,a,g,d]),r.a.createElement(vi,{className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2",isLoading:!u||o,options:u,isFullYear:c,setIsFullYear:l,selectedDate:t,setSelectedDate:a})},Oi=a("G8Y8"),ji=["data"],Ci=function(e){var t=e.isAllAccountsSelected,a=e.selectedDate,n=e.accountId,r=e.isFullYear;return t?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.date,a=void 0===t?null:t,n=e.isFullYear,r=e.limit,o=void 0===r?1e3:r,i=Object(h.a)(a)||null,c=Object(g.a)(a)||null,l=Object(E.a)(a)||null,s=Object(y.a)(a)||null,d=a?"".concat(i.getFullYear(),"-").concat(i.getMonth()).concat(n?"-fullyear":""):"noDate";return{definition:Object(C.Q)(u.h).where(k({endDate:{$gt:null}},a&&{startDate:{$gte:n?l.toISOString():i.toISOString(),$lte:n?s.toISOString():c.toISOString()}})).partialIndex({aggregation:{$exists:!0}}).select(["aggregation","title","startDate","endDate"]).indexFields(["endDate"].concat(f()(a?["startDate"]:[]))).limitBy(o),options:{as:"".concat(u.h,"/date/").concat(d,"/limitedBy/").concat(o),fetchPolicy:w.a.fetchPolicies.olderThan(3e4),enabled:Boolean(a)}}}({isFullYear:r,date:a}):S({date:a,isFullYear:r,accountId:n})},wi=function(){var e=G(),t=e.account,a=e.isAccountLoading,n=e.isAllAccountsSelected,o=ye(),i=o.selectedDate,c=o.isFullYear,l=o.isSelectedDateLoading,u=Ci({isAllAccountsSelected:n,selectedDate:i,isFullYear:c,accountId:null==t?void 0:t._id}),d=Object(C.useQueryAll)(u.definition,u.options),m=d.data,p=s()(d,ji);return l||a||(t||n)&&(Object(C.isQueryLoading)(p)||p.hasMore)&&null!==i?r.a.createElement(Oi.a,{count:8,hasSecondary:!0,divider:!0}):(t||n)&&m&&0!==(null==m?void 0:m.length)?r.a.createElement(ke.b,{context:[m]}):r.a.createElement(qo,null)},xi=function(){var e=Object(H.e)().t,t=Object(ke.h)(),a=Object(ke.g)(),n=Object(ke.j)().mode,o=Object(Ee.b)().isMobile,i=e(n?"trips.modes.".concat(n.toUpperCase()):"analysis.mode"),c=n?function(){return t("/analysis/modes")}:void 0;return a.pathname.includes("purposes")||a.pathname.includes("modes")?r.a.createElement(r.a.Fragment,null,r.a.createElement(ko,{label:i,onBack:c}),o&&r.a.createElement(so,null),r.a.createElement(Ei,null),r.a.createElement(wi,null)):r.a.createElement(ke.a,{to:"/analysis/modes",replace:!0})},ki=a("eson"),Di=["days","label","color","isSuccess","body1"],_i=["data"],Si=function(e){return{color:e&&"var(--successColor)"}},Pi=function(e){var t=e.days,a=e.label,n=e.color,o=e.isSuccess,i=e.body1,c=s()(e,Di),l=Object(H.e)().t,u=M(),d=Object(C.useQuery)(u.definition,u.options),m=d.data,p=s()(d,_i),f=t||"-";return Object(C.isQueryLoading)(p)?null:r.a.createElement("div",c,r.a.createElement(_t.a,{className:"u-mr-half",icon:ki.a,color:n,size:8}),r.a.createElement(U.a,{display:"inline",variant:i?"body1":"caption",color:"textPrimary",style:Si(o)},l("bikeGoal.goal_progression",{days:f,daysToReach:er(m)})),r.a.createElement(U.a,{variant:"caption",style:Si(o)},a))};Pi.defaultProps={color:"#BA5AE8"};var Ti=Pi,Ai=["data"],Mi=function(e){var t=e.className,a=e.timeseries,o=e.body1,i=e.componentsProps,c=Object(n.useState)(!1),l=Z()(c,2),u=l[0],d=l[1],m=Object(H.e)().t,p=ar().sourceName,f=M(),b=Object(C.useQuery)(f.definition,f.options),v=b.data,g=s()(b,Ai);Object(n.useEffect)((function(){var e,t=null==v||null===(e=v[0].bikeGoal)||void 0===e?void 0:e.sendToDACC;d(!!t)}),[v]);var y=Cr({hasConsent:u,measureName:j.C}),h=y.data,E=y.isLoading;return Object(C.isQueryLoading)(g)&&E?null:r.a.createElement("div",{className:"u-flex ".concat(t)},r.a.createElement(Ti,Kn()({},i.BikeGoalSummaryItem,{days:rr(a,v),label:m("bikeGoal.my_progression"),isSuccess:nr(a,v),body1:o})),r.a.createElement(Dt.a,{className:"u-mh-1",style:{marginTop:4},orientation:"vertical",flexItem:!0}),r.a.createElement(Ti,Kn()({},i.BikeGoalSummaryItem,{days:h,label:m(p?"bikeGoal.average_progression":"bikeGoal.average_progression_noValue"),color:"#BA5AE83D",body1:o})))};Mi.defaultProps={className:"",componentsProps:{}};var Ni=Mi,Li=["data"],Ii=function(e){var t=e.timeseriesByYear,a=e.settings;return{whiteSpace:e.preLine&&"pre-line",color:nr(t,a)&&"var(--successColor)"}},Fi=function(e){var t=e.className,a=e.timeseriesByYear,n=e.variant,o=e.preLine,i=Object(H.e)().t,c=M(),l=Object(C.useQuery)(c.definition,c.options),u=l.data,d=s()(l,Li);return Object(C.isQueryLoading)(d)?null:r.a.createElement(U.a,{className:t,variant:n,style:Ii({timeseriesByYear:a,settings:u,preLine:o})},i("bikeGoal.yearly_goal_progression",{days:rr(a,u),daysToReach:er(u)}))},Ri=a("Yb2N"),Gi=a("PExr"),Bi=["data"],zi={BikeGoalSummaryItem:{flex:"1 1 0"}},qi=function(e){var t=e.className,a=e.timeseries,n=e.sendToDACC,o=Object(H.e)().t,i=Object(Ee.b)().isMobile,c=Object(ke.h)(),l=M(),u=Object(C.useQuery)(l.definition,l.options),d=u.data,m=s()(u,Bi);if(Object(C.isQueryLoading)(m))return null;return r.a.createElement("div",{className:t},i&&r.a.createElement(U.a,{className:"u-mb-half",variant:"h3"},o("bikeGoal.title")),n?r.a.createElement(Ni,{className:Se()("u-mt-half",{"u-ph-1 u-ta-center":i}),timeseries:a,body1:i,componentsProps:{BikeGoalSummaryItem:zi.BikeGoalSummaryItem}}):r.a.createElement(Fi,{className:"u-mt-half",timeseriesByYear:a}),nr(a,d)&&r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Ri.a,{icon:r.a.createElement(_t.a,{icon:Gi.a,className:"u-ml-half"}),label:o("bikeGoal.achievement_certificate"),color:"success",clickable:!0,onClick:function(){c("certificate/generate")}})))};qi.propTypes={className:Bt.a.string,timeseries:Bt.a.arrayOf(Bt.a.object)};var Yi=qi,Zi=a("J14j"),Qi=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(Ee.b)().isMobile?r.a.createElement(Zi.a,{textVariant:"h6",onClick:n},a):r.a.createElement(Q.a,{ref:t,variant:"secondary",label:a,endIcon:r.a.createElement(_t.a,{icon:Zo.a,size:14}),onClick:n})}));Qi.displayName="ActionButton",Qi.propTypes={label:Bt.a.string,onClick:Bt.a.func};var Vi=Qi,Ui=a("lAlC"),Hi=a("/gvb"),Wi=a("hAvo"),Ji=function(e){var t=e.timeseries,a=Object(ke.j)().year,o=Object(ke.h)(),i=Object(n.useRef)(),c=Object(n.useState)(!1),l=Z()(c,2),s=l[0],u=l[1],d=Object(n.useMemo)((function(){return function(e){var t=new Date;if(!e||0===e.length)return[t.getFullYear().toString()];var a=new Date(function(e){return e.reduce((function(e,t){return e.startDate<t.startDate?e:t}))}(e).startDate),n=Object(Ui.a)(t,a);return Array.from({length:n+1},(function(e,a){return Object(O.a)(t,a).getFullYear().toString()}))}(t)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vi,{ref:i,label:a,onClick:function(){return u((function(e){return!e}))}}),s&&r.a.createElement(Hi.a,{anchorElRef:i,autoclose:!0,onClose:function(){return u(!1)},popperOptions:{placement:"bottom-end"}},d.map((function(e,t){return r.a.createElement(Wi.a,{key:t,onClick:function(){return o("/bikegoal/".concat(e,"/trips"))}},e)}))))};Ji.propTypes={timeseries:Bt.a.arrayOf(Bt.a.object)};var Ki=r.a.memo(Ji),Xi=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(Ee.b)().isMobile?r.a.createElement(go.a,{onClick:n},a):r.a.createElement(Q.a,{ref:t,className:"u-miw-auto u-ml-half",variant:"secondary",label:a,onClick:n})}));Xi.displayName="ActionButton",Xi.propTypes={label:Bt.a.node,onClick:Bt.a.func};var $i=Xi,ec=["data"];function tc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ac(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tc(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nc=function(e){var t=Object(C.useClient)(),a=M(),n=Object(C.useQuery)(a.definition,a.options),r=n.data,o=s()(n,ec),i=Object(C.isQueryLoading)(o);return{isLoading:i,value:i?void 0:r&&r[0]?Ut()(r[0],e):void 0,save:function(){var a=m()(v.a.mark((function a(n){var o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=ac(ac({},r[0]),{},{_type:u.c}),$t()(o,e,n),a.next=4,t.save(o);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},rc=function(e){var t=e.open,a=e.onClose,o=Object(H.e)().t,i=Object(ke.h)(),c=nc("bikeGoal.activated"),l=c.isLoading,s=c.save,u=Object(n.useState)(!1),d=Z()(u,2),m=d[0],p=d[1];return r.a.createElement(V.a,{open:t,title:o("bikeGoal.deactivate.title"),content:o("bikeGoal.deactivate.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"secondary",label:o("bikeGoal.deactivate.cancel"),onClick:a}),r.a.createElement(Q.a,{color:"error",label:o("bikeGoal.deactivate.stop_participate"),busy:m||l,onClick:function(){p(!0),s(!1),i("/trips")}})),onClose:a})};rc.propTypes={open:Bt.a.bool.isRequired,onClose:Bt.a.func.isRequired};var oc=rc,ic=a("vc9t"),cc=a("jMeN"),lc=a("KsnS"),sc=a("QRbe"),uc=function(){var e=Object(H.e)().t,t=Object(Ee.b)().isMobile,a=Object(n.useRef)(),o=Object(ke.h)(),i=Object(n.useState)(!1),c=Z()(i,2),l=c[0],s=c[1],u=Object(n.useState)(!1),d=Z()(u,2),m=d[0],p=d[1],f={divider:{borderTop:0,marginLeft:{isMobile:t}.isMobile?"3rem":void 0}};return r.a.createElement(r.a.Fragment,null,r.a.createElement($i,{ref:a,label:r.a.createElement(_t.a,{icon:ic.a}),onClick:function(){return s((function(e){return!e}))}}),l&&r.a.createElement(Hi.a,{anchorElRef:a,autoclose:!0,onClose:function(){return s(!1)},popperOptions:{placement:"bottom-end"}},r.a.createElement(Wi.a,{left:r.a.createElement(_t.a,{icon:sc.a}),onClick:function(){return o("edit")}},e("bikeGoal.edit.modify")),r.a.createElement(Wi.a,{left:r.a.createElement(_t.a,{icon:lc.a}),onClick:function(){return o("about")}},e("bikeGoal.about.title")),r.a.createElement(Dt.a,{style:f.divider}),r.a.createElement(Wi.a,{left:r.a.createElement(_t.a,{icon:cc.a}),onClick:function(){return p(!0)}},e("bikeGoal.deactivate.deactivate"))),r.a.createElement(oc,{open:m,onClose:function(){return p(!1)}}))};Ki.propTypes={timeseries:Bt.a.arrayOf(Bt.a.object)};var dc=function(e){var t=e.timeseries,a=Object(Ee.b)().isMobile,n={actions:{right:{isMobile:a}.isMobile?0:"13rem"}};return r.a.createElement("div",{className:Se()("u-flex u-flex-justify-end",{"u-pos-absolute u-top-m":!a}),style:n.actions},r.a.createElement(Ki,{timeseries:t}),r.a.createElement(uc,null))},mc=a("13md"),pc=function(e){var t=e.className,a=e.timeseries,n=e.hasMore,o=e.fetchMore,i=Object(H.e)().t;return 0===(null==a?void 0:a.length)?r.a.createElement(U.a,{className:"u-mt-2 u-p-2",variant:"h5",align:"center"},i("bikeGoal.empty.title")):r.a.createElement("div",{className:t},r.a.createElement(An,{timeseries:a,noHeader:!0}),n&&r.a.createElement(mc.a,{label:i("loadMore"),fetchMore:o}))};pc.propTypes={className:Bt.a.string,timeseries:Bt.a.arrayOf(Bt.a.object).isRequired,hasMore:Bt.a.bool,fetchMore:Bt.a.func};var fc=pc,bc=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(ke.h)(),i=Object(ke.j)().year,c=yn(t,i);return r.a.createElement(to.a,{open:!0,onClose:function(){return o("/trips")},disableGutters:!0,componentsProps:{dialogTitle:{className:"u-p-0"}},title:r.a.createElement(dc,{timeseries:t}),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(_r,{display:"flex",paddingTop:"1.5rem",marginTop:"3rem",timeseries:c,sendToDACC:n}),r.a.createElement(Yi,{className:"u-flex u-flex-column u-flex-items-center",timeseries:c,sendToDACC:n}),r.a.createElement(fc,{className:"u-mt-2",timeseries:c,hasMore:a.hasMore,fetchMore:a.fetchMore}))})};bc.propTypes={timeseries:Bt.a.arrayOf(Bt.a.object),timeseriesQueryLeft:Bt.a.object.isRequired};var vc=bc,gc=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(H.e)().t,i=Object(ke.h)(),c=Object(ke.j)().year,l=yn(t,c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ko,{label:o("bikeGoal.title"),subtitle:r.a.createElement(Yi,{timeseries:l,sendToDACC:n}),onBack:function(){return i("/trips")}}),r.a.createElement(dc,{timeseries:t}),r.a.createElement(_r,{display:"flex",position:"absolute",top:"2rem",right:"2rem",timeseries:l,sendToDACC:n}),r.a.createElement(fc,{className:"u-mt-3",timeseries:l,hasMore:a.hasMore,fetchMore:a.fetchMore}))};gc.propTypes={timeseries:Bt.a.arrayOf(Bt.a.object),timeseriesQueryLeft:Bt.a.object.isRequired};var yc=gc,hc=["data"],Ec=["data"];function Oc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function jc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Cc=function(){var e,t=G(),a=t.account,n=t.isAccountLoading,o=t.isAllAccountsSelected,i=Object(Ee.b)().isMobile,c=M(),l=Object(C.useQuery)(c.definition,c.options),u=l.data,d=s()(l,hc),m=Object(C.isQueryLoading)(d),p=function(e){var t=e.isAllAccountsSelected,a=e.accountId;return t?P():T({accountId:a})}({accountId:null==a?void 0:a._id,isAllAccountsSelected:o}),f=Object(C.useQueryAll)(p.definition,jc(jc({},p.options),{},{enabled:Boolean(a)||o})),b=f.data,v=s()(f,Ec);if(p.options.enabled&&(Object(C.isQueryLoading)(v)||v.hasMore)||n||m)return r.a.createElement(Oi.a,{count:8,hasSecondary:!0,divider:!0});var g=!(null==u||null===(e=u[0].bikeGoal)||void 0===e||!e.sendToDACC);return i?r.a.createElement(vc,{timeseries:b,timeseriesQueryLeft:v,sendToDACC:g}):r.a.createElement(yc,{timeseries:b,timeseriesQueryLeft:v,sendToDACC:g})},wc=function(){var e=Object(H.e)().t,t=Object(ke.h)(),a={typography:{whiteSpace:"pre-line"}};return r.a.createElement(to.a,{open:!0,title:e("bikeGoal.about.title"),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:"u-mb-1",variant:"h5"},e("bikeGoal.about.intro.title")),r.a.createElement(U.a,{variant:"body1",style:a.typography},e("bikeGoal.about.intro.content")),r.a.createElement(U.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.how_trips_detected.title")),r.a.createElement(U.a,{variant:"body1",style:a.typography},e("bikeGoal.about.how_trips_detected.content")),r.a.createElement(U.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.once_goal_reach.title")),r.a.createElement(U.a,{variant:"body1",style:a.typography},e("bikeGoal.about.once_goal_reach.content"))),onClose:function(){return t("..")}})},xc=a("UuKj"),kc=function(e){var t=e.itemName,a=e.onClose,o=Object(H.e)().t,i=nc("bikeGoal.".concat(t)),c=i.isLoading,l=i.value,s=i.save,u=Object(n.useState)(l),d=Z()(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),g=Z()(b,2),y=g[0],h=g[1],E="daysToReach"===t,O=!p||E&&p<=0,j=!p||E&&p<=0,C=p?E&&j?o("bikeGoal.onboarding.steps.daysToReach.error"):" ":o("bikeGoal.edit.required"),w=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,s(p);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(V.a,{open:!0,title:o("bikeGoal.edit.".concat(t)),content:c?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(xc.a,{variant:"outlined",marging:"normal",type:E?"number":void 0,inputProps:E?{min:"1",step:"1"}:void 0,defaultValue:p,required:!0,fullWidth:!0,error:j,helperText:C,onChange:function(e){return f(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"secondary",label:o("bikeGoal.edit.cancel"),onClick:a}),r.a.createElement(Q.a,{className:"u-miw-4",label:o("bikeGoal.edit.submit"),busy:y,disabled:O,onClick:w})),onClose:a})};kc.propTypes={itemName:Bt.a.string.isRequired,onClose:Bt.a.func.isRequired};var Dc=kc,_c=a("uiSW"),Sc=a("MzjA"),Pc=a("EMSc");function Tc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ac(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tc(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Mc=function(){var e=Object(H.e)().t,t=Object(n.useState)(""),a=Z()(t,2),o=a[0],i=a[1],c=nc("bikeGoal"),l=c.isLoading,s=c.value,u=c.save,d=ar().sourceName,m=function(){u(Ac(Ac({},s),{},{sendToDACC:!s.sendToDACC}))};return l?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,null,r.a.createElement(Pt.b,{button:!0,onClick:function(){return i("lastname")}},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Ve.a})),r.a.createElement(At.a,{primary:r.a.createElement(U.a,{variant:"caption"},e("bikeGoal.edit.lastname")),secondary:r.a.createElement(U.a,{variant:"body1"},s.lastname)})),r.a.createElement(Dt.a,{component:"li",variant:"inset"}),r.a.createElement(Pt.b,{button:!0,onClick:function(){return i("firstname")}},r.a.createElement(Tt.a,null),r.a.createElement(At.a,{primary:r.a.createElement(U.a,{variant:"caption"},e("bikeGoal.edit.firstname")),secondary:r.a.createElement(U.a,{variant:"body1"},s.firstname)})),r.a.createElement(Dt.a,{component:"li",variant:"inset"}),r.a.createElement(Pt.b,{button:!0,onClick:function(){return i("daysToReach")}},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Fe.a})),r.a.createElement(At.a,{primary:r.a.createElement(U.a,{variant:"caption"},e("bikeGoal.edit.daysToReach")),secondary:r.a.createElement(U.a,{variant:"body1"},s.daysToReach)})),r.a.createElement(Dt.a,{component:"li",variant:"inset"}),r.a.createElement(Pt.b,{ellipsis:!1,button:!0,onClick:m},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:_c.a})),r.a.createElement(At.a,{primary:e(d?"bikeGoal.edit.compare_progress":"bikeGoal.edit.compare_progress_noValue")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{className:"u-w-auto",color:"primary",checked:s.sendToDACC,onChange:m})))),Boolean(o)&&r.a.createElement(Dc,{itemName:o,onClose:function(){return i("")}}))},Nc=function(){var e=Object(H.e)().t,t=Object(ke.h)();return r.a.createElement(to.a,{open:!0,disableGutters:!0,title:e("bikeGoal.edit.title"),content:r.a.createElement(Mc,null),onClose:function(){return t("..")}})},Lc=new mo.a({id:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d",use:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d-usage",viewBox:"0 0 106 106",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 106 106" id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d"><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a)"><path d="M16 48c0-19.882 16.118-36 36-36s36 16.118 36 36-16.118 36-36 36-36-16.118-36-36Z" fill="#fff" /></g><path d="M65.11 37.39C63.962 31.193 58.53 26.5 52 26.5c-6.53 0-11.962 4.693-13.11 10.89C32.693 38.538 28 43.97 28 50.5c0 7.364 5.97 13.333 13.333 13.333H62.667C70.03 63.833 76 57.863 76 50.5c0-6.53-4.693-11.962-10.89-13.11Z" fill="#B3D3FF" /><path d="M49.569 36c.837 0 1.528.63 1.622 1.443l.011.19v10.941a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-9.308l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v9.308a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-6.042l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v16.33a6.527 6.527 0 0 1-3 5.495V67a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2.615a6.69 6.69 0 0 1-1.022-.78l-8.425-7.824a1.73 1.73 0 0 1-.262-2.226 1.538 1.538 0 0 1 2.075-.463l4.67 2.827V40.9l.012-.19a1.633 1.633 0 0 1 3.244 0l.01.19v7.675a.49.49 0 0 0 .378.477l.112.013h.654c.27 0 .49-.22.49-.49V37.633l.01-.19A1.633 1.633 0 0 1 49.57 36Z" fill="#297EF2" /><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b)"><rect x="58" y="54" width="32" height="32" rx="8" fill="#fff" /><path d="M72.409 77.886c.2-.05.404.072.455.273l.375 1.5c.007.03.011.061.011.091h1.5c0-.03.004-.06.011-.091l.375-1.5a.375.375 0 1 1 .728.182l-.364 1.455v1.454a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-1.454l-.364-1.455a.375.375 0 0 1 .273-.455Z" fill="#F33136" /><path d="M72.5 78.25c-.414 0-.765-.351-.988-.7-.408-.64-1.3-1.334-2.346-2.147C66.746 73.523 63.5 71 63.5 67c0-4.97 4.701-9 10.5-9v20.25h-1.5Z" fill="#F33136" /><path d="M74 78.25h-1.286c0-.838-.654-1.73-1.476-2.847C69.855 73.523 68 71 68 67c0-4.97 2.686-9 6-9v20.25Z" fill="#FC7B0E" /><path d="M75.5 78.25c.414 0 .765-.351.988-.7.408-.64 1.3-1.334 2.346-2.147C81.254 73.523 84.5 71 84.5 67c0-4.97-4.701-9-10.5-9v20.25h1.5Z" fill="#FFD799" /><path d="M74 78.25h1.286c0-.838.654-1.73 1.476-2.847C78.145 73.523 80 71 80 67c0-4.97-2.686-9-6-9v20.25Z" fill="#FFB64F" /></g><defs><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a" x="0" y="0" width="104" height="104" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b" x="42" y="42" width="64" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter></defs></symbol>'}),Ic=(fo.a.add(Lc),Lc),Fc=new mo.a({id:"icon-anonymous_f9180197246a84316517b8157ef006c8",use:"icon-anonymous_f9180197246a84316517b8157ef006c8-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-anonymous_f9180197246a84316517b8157ef006c8"><path d="M4.36 1.24 3 6H1a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2h-2l-1.36-4.76A1.7 1.7 0 0 0 9.062.291L8 1 6.938.292a1.7 1.7 0 0 0-2.578.947Z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.84 13.549A3.502 3.502 0 0 1 0 12.5a3.5 3.5 0 0 1 6.76-1.274A3.49 3.49 0 0 1 8 11c.436 0 .854.08 1.24.226a3.501 3.501 0 1 1-.08 2.323A1.495 1.495 0 0 0 8 13c-.467 0-.883.212-1.16.549ZM3.5 14a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" /></symbol>'}),Rc=(fo.a.add(Fc),Fc),Gc=new mo.a({id:"icon-export_a08eff636b3b69e5d1cfc230029cdad8",use:"icon-export_a08eff636b3b69e5d1cfc230029cdad8-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-export_a08eff636b3b69e5d1cfc230029cdad8"><path d="M7.165 8.244C7.585 6.01 9.581 4.297 12 4.297s4.415 1.713 4.835 3.947l.143.76.76.14c2.295.418 4.012 2.396 4.012 4.748 0 .555-.096 1.089-.272 1.586l1.704 1.704a6.98 6.98 0 0 0 .818-3.29c0-3.222-2.173-5.925-5.131-6.79C17.984 4.17 15.236 2.047 12 2.047c-3.236 0-5.984 2.123-6.869 5.055C2.173 7.967 0 10.67 0 13.892c0 3.926 3.224 7.08 7.167 7.08H8.25v-2.25H7.167c-2.731 0-4.917-2.177-4.917-4.83 0-2.352 1.717-4.33 4.012-4.749l.76-.139.143-.76Z" fill="#1D212A" fill-opacity=".72" /><path d="M19.499 19.567a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1 0-3h2.368l-4.993-4.993a1.508 1.508 0 0 1 2.018-2.236l.114.104 4.993 4.992v-2.367a1.5 1.5 0 1 1 3 0v6Z" fill="#EA3F3F" /></symbol>'}),Bc=(fo.a.add(Gc),Gc),zc=function(e){var t=e.sharedDataLabel,a=e.open,n=e.onClose,o=e.onRefuse,i=e.onAccept,c=e.showDaccReasonsDialog,l=Object(H.e)().t;return r.a.createElement(Oe.a,{variant:"inverted"},r.a.createElement(V.a,{open:a,onClose:n,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(_t.a,{icon:Ic,size:106}),r.a.createElement(U.a,{variant:"h4"},l("dacc.permissionsDialog.title")),r.a.createElement(U.a,{className:"u-mt-1"},l("dacc.permissionsDialog.primaryText")),r.a.createElement(Oe.a,{variant:"normal"},r.a.createElement(Pn.a,{className:"u-mt-1-half",elevation:0},r.a.createElement(Sn.a,null,r.a.createElement(Pt.b,{divider:!0},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Bc,size:24})),r.a.createElement(At.a,{primary:r.a.createElement(U.a,{variant:"h6"},l("dacc.permissionsDialog.export_outside"))})),r.a.createElement(Pt.b,{dense:!0},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Rc,color:"var(--iconTextColor)"})),r.a.createElement(At.a,{primary:r.a.createElement(U.a,{variant:"body2"},t)}))))),r.a.createElement(U.a,{className:"u-mt-1-half",style:{textDecoration:"underline"},onClick:c},l("dacc.permissionsDialog.why_asking")),r.a.createElement(U.a,{className:"u-mt-1-half",variant:"caption",color:"textPrimary"},l("dacc.permissionsDialog.secondaryText"))),actionsLayout:"column",actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{label:l("dacc.permissionsDialog.refuse"),onClick:o}),r.a.createElement(Q.a,{label:l("dacc.permissionsDialog.accept"),onClick:i}))}))};zc.propTypes={sharedDataLabel:Bt.a.string.isRequired,open:Bt.a.bool.isRequired,onClose:Bt.a.func.isRequired,onRefuse:Bt.a.func.isRequired,onAccept:Bt.a.func.isRequired,showDaccReasonsDialog:Bt.a.func.isRequired};var qc=zc,Yc=function(e){var t=e.open,a=e.onClose,n=Object(H.e)().t;return r.a.createElement(V.a,{open:t,onClose:a,title:n("dacc.reasonsDialog.title"),content:n("dacc.reasonsDialog.content")})};Yc.propTypes={open:Bt.a.bool.isRequired,onClose:Bt.a.func.isRequired};var Zc=Yc,Qc=function(e){var t=e.onClose,a=e.onRefuse,o=e.onAccept,i=e.componentProps,c=Object(n.useState)(!1),l=Z()(c,2),s=l[0],u=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(qc,Kn()({open:!0,onClose:t,onRefuse:a,onAccept:o,showDaccReasonsDialog:function(){return u(!0)}},i.DaccPermissionsDialog)),s&&r.a.createElement(Zc,{open:!0,onClose:function(){return u(!1)}}))};Qc.propTypes={onClose:Bt.a.func.isRequired,onRefuse:Bt.a.func.isRequired,onAccept:Bt.a.func.isRequired,componentProps:Bt.a.shape({DaccPermissionsDialog:Bt.a.shape({sharedDataLabel:Bt.a.string.isRequired}).isRequired}).isRequired};var Vc=Qc,Uc=function(e){var t=e.onClose,a=e.onRefuse,n=e.onAccept,o=Object(H.e)().t;return r.a.createElement(Vc,{onClose:t,onRefuse:a,onAccept:n,componentProps:{DaccPermissionsDialog:{sharedDataLabel:o("dacc.permissionsDialog.anonymized_bikegoal_progression")}}})};Uc.propTypes={onClose:Bt.a.func.isRequired,onRefuse:Bt.a.func.isRequired,onAccept:Bt.a.func.isRequired};var Hc=Uc,Wc=a("VXtb"),Jc=a("gHOe"),Kc=a("5Q3L"),Xc=a("7EAA"),$c=a("lwqu"),el=a("BxMJ");function tl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function al(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nl=Object(n.forwardRef)((function(e,t){var a=Object(H.e)().t,o=Object(n.useState)(!1),i=Z()(o,2),c=i[0],l=i[1],s=Object(n.useReducer)((function(e){return!e}),!1),u=Z()(s,2),d=u[0],p=u[1],f=nc("bikeGoal"),b=f.isLoading,g=f.value,y=void 0===g?{}:g,h=f.save,E=y.onboardingStep,O=void 0===E?0:E,j=y.sendToDACC,C=void 0===j?null:j,w=Object(n.useState)(C),x=Z()(w,2),k=x[0],D=x[1],_=ar().sourceName,S={typography:{whiteSpace:"pre-line"}},P=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,h(al(al({},y),{},{onboardingStep:O-1}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,h(al(al({},y),{},{onboardingStep:O+1,sendToDACC:k}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement($c.a,Kn()({},e,{ref:t}),r.a.createElement(el.a,null,a(_?"bikeGoal.edit.compare_progress":"bikeGoal.edit.compare_progress_noValue")),r.a.createElement(Xc.a,null,b?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{style:S.typography},_?a("bikeGoal.onboarding.steps.comparison.comparisonLegend",{sourceName:_}):a("bikeGoal.onboarding.steps.comparison.comparisonLegend_noValue")),r.a.createElement(Jc.a,{className:"u-mt-1"},r.a.createElement(Wc.a,{control:r.a.createElement(Kc.a,{checked:!0===k,onClick:function(){return l(!0)}}),label:a("bikeGoal.onboarding.steps.comparison.compare"),className:"u-m-0"}),r.a.createElement(Wc.a,{control:r.a.createElement(Kc.a,{checked:!1===k,onClick:function(){return D(!1)}}),label:a("bikeGoal.onboarding.steps.comparison.doNotCompare"),className:"u-m-0"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Q.a,{onClick:T,label:a("bikeGoal.onboarding.actions.next"),disabled:d||null==k}),r.a.createElement(Q.a,{onClick:P,label:a("bikeGoal.onboarding.actions.previous"),disabled:d,variant:"text",className:"u-ml-half"}),d&&r.a.createElement(ao.b,{className:"u-ml-half"}))))),c&&r.a.createElement(Hc,{onClose:function(){return l(!1)},onRefuse:function(){l(!1),D(!1)},onAccept:function(){l(!1),D(!0)}}))}));nl.displayName="BikeGoalOnboardingComparison";var rl=nl;function ol(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function il(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ol(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var cl=Object(n.forwardRef)((function(e,t){var a=Object(H.e)().t,o=Object(ke.h)(),i=Object(n.useReducer)((function(e){return!e}),!1),c=Z()(i,2),l=c[0],s=c[1],u=nc("bikeGoal"),d=u.isLoading,p=u.value,f=void 0===p?{}:p,b=u.save,g=f.onboardingStep,y=void 0===g?0:g,h={typography:{whiteSpace:"pre-line"}},E=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,b(il(il({},f),{},{onboardingStep:y-1}));case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=m()(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,b(il(il({},f),{},{onboarded:!0,activated:!0,showAlert:!1}));case 3:s(),t=(new Date).getFullYear().toString(),o("/bikegoal/".concat(t,"/trips"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement($c.a,Kn()({},e,{ref:t}),r.a.createElement(el.a,{optional:r.a.createElement(U.a,{variant:"caption"},a("bikeGoal.about.once_goal_reach.optional"))},a("bikeGoal.about.once_goal_reach.title")),r.a.createElement(Xc.a,null,d?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{style:h.typography},a("bikeGoal.about.once_goal_reach.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Q.a,{onClick:O,label:a("bikeGoal.onboarding.actions.finish"),disabled:l}),r.a.createElement(Q.a,{onClick:E,label:a("bikeGoal.onboarding.actions.previous"),disabled:l,variant:"text",className:"u-ml-half"}),l&&r.a.createElement(ao.b,{className:"u-ml-half"})))))}));cl.displayName="BikeGoalOnboardingConclusion";var ll=cl,sl=a("0JGJ");function ul(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function dl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ul(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ml=Object(n.forwardRef)((function(e,t){var a=Object(H.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=Z()(o,2),c=i[0],l=i[1],s=nc("bikeGoal"),u=s.isLoading,d=s.value,p=void 0===d?{}:d,f=s.save,b=p.onboardingStep,g=void 0===b?0:b,y=p.daysToReach,h=void 0===y?100:y,E=Object(n.useState)(h),O=Z()(E,2),j=O[0],C=O[1],w={typography:{whiteSpace:"pre-line"}},x=""===j||j<=0,k=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(dl(dl({},p),{},{onboardingStep:g-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(dl(dl({},p),{},{onboardingStep:g+1,daysToReach:j}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement($c.a,Kn()({},e,{ref:t}),r.a.createElement(el.a,null,a("bikeGoal.onboarding.steps.daysToReach.title")),r.a.createElement(Xc.a,null,u?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{style:w.typography},a("bikeGoal.onboarding.steps.daysToReach.legend")),r.a.createElement("div",null,r.a.createElement(xc.a,{className:"u-w-5 u-mt-1",variant:"outlined",type:"number",label:a("bikeGoal.goal"),defaultValue:j,error:x,helperText:x?a("bikeGoal.onboarding.steps.daysToReach.error"):" ",inputProps:{min:"1",step:"1"},InputProps:{endAdornment:r.a.createElement(sl.a,{position:"end"},a("bikeGoal.days"))},onChange:function(e){return C(e.target.value)}})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Q.a,{onClick:D,label:a("bikeGoal.onboarding.actions.next"),disabled:c||!!x}),r.a.createElement(Q.a,{onClick:k,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(ao.b,{className:"u-ml-half"})))))}));ml.displayName="BikeGoalOnboardingDaysToReach";var pl=ml;function fl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function bl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vl=Object(n.forwardRef)((function(e,t){var a=Object(H.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=Z()(o,2),c=i[0],l=i[1],s=nc("bikeGoal"),u=s.isLoading,d=s.value,p=void 0===d?{}:d,f=s.save,b=p.onboardingStep,g=void 0===b?0:b,y={typography:{whiteSpace:"pre-line"}},h=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(bl(bl({},p),{},{onboardingStep:g-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(bl(bl({},p),{},{onboardingStep:g+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement($c.a,Kn()({},e,{ref:t}),r.a.createElement(el.a,null,a("bikeGoal.about.how_trips_detected.title")),r.a.createElement(Xc.a,null,u?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{style:y.typography},a("bikeGoal.about.how_trips_detected.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Q.a,{onClick:E,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),r.a.createElement(Q.a,{onClick:h,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(ao.b,{className:"u-ml-half"})))))}));vl.displayName="BikeGoalOnboardingDetection";var gl=vl;function yl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function hl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var El=Object(n.forwardRef)((function(e,t){var a=Object(H.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=Z()(o,2),c=i[0],l=i[1],s=nc("bikeGoal"),u=s.isLoading,d=s.value,p=void 0===d?{}:d,f=s.save,b=p.onboardingStep,g=void 0===b?0:b,y={typography:{whiteSpace:"pre-line"}},h=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(hl(hl({},p),{},{onboardingStep:g+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement($c.a,Kn()({},e,{ref:t}),r.a.createElement(el.a,null,a("bikeGoal.about.intro.title")),r.a.createElement(Xc.a,null,u?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{style:y.typography},a("bikeGoal.about.intro.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Q.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),c&&r.a.createElement(ao.b,{className:"u-ml-half"})))))}));El.displayName="BikeGoalOnboardingIntroduction";var Ol=El;function jl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Cl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var wl=Object(n.forwardRef)((function(e,t){var a=Object(H.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=Z()(o,2),c=i[0],l=i[1],s=nc("bikeGoal"),u=s.isLoading,d=s.value,p=void 0===d?{}:d,f=s.save,b=p.onboardingStep,g=void 0===b?0:b,y=p.lastname,h=void 0===y?"":y,E=p.firstname,O=void 0===E?"":E,j=Object(n.useState)(h),C=Z()(j,2),w=C[0],x=C[1],k=Object(n.useState)(O),D=Z()(k,2),_=D[0],S=D[1],P=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(Cl(Cl({},p),{},{onboardingStep:g-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(Cl(Cl({},p),{},{onboardingStep:g+1,lastname:w,firstname:_}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement($c.a,Kn()({},e,{ref:t}),r.a.createElement(el.a,null,a("bikeGoal.onboarding.steps.naming.title")),r.a.createElement(Xc.a,null,u?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,a("bikeGoal.onboarding.steps.naming.nameLegend")),r.a.createElement("div",null,r.a.createElement(xc.a,{variant:"outlined",label:a("bikeGoal.edit.lastname"),defaultValue:w,onChange:function(e){return x(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",null,r.a.createElement(xc.a,{variant:"outlined",label:a("bikeGoal.edit.firstname"),defaultValue:_,onChange:function(e){return S(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Q.a,{onClick:T,label:a("bikeGoal.onboarding.actions.next"),disabled:c||""===_||""===w}),r.a.createElement(Q.a,{onClick:P,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(ao.b,{className:"u-ml-half"})))))}));wl.displayName="BikeGoalOnboardingNaming";var xl=wl,kl=a("pFWb"),Dl=function(){var e=Object(H.e)().t,t=Object(ke.h)(),a=nc("bikeGoal.onboardingStep"),n=a.isLoading,o=a.value,i=void 0===o?0:o;return r.a.createElement(to.a,{open:!0,disableGutters:!0,title:e("bikeGoal.onboarding.title"),content:r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}),!n&&r.a.createElement(kl.a,{activeStep:i,orientation:"vertical"},r.a.createElement(Ol,null),r.a.createElement(pl,null),r.a.createElement(xl,null),r.a.createElement(gl,null),r.a.createElement(rl,null),r.a.createElement(ll,null))),onClose:function(){t("..")}})},_l=a("bS3/"),Sl=function(){var e=Object(H.e)().t,t=G(),a=t.accounts,n=t.account,o=t.setAccount,i=t.isAllAccountsSelected,c=a.map((function(e){return{label:B(e),value:e._id}}));c.push({label:e("settings.allAccounts"),value:"allSources"});var l=i?{label:e("settings.allAccounts"),value:"allSources"}:{label:B(n),value:null==n?void 0:n._id};return r.a.createElement(_l.a,{fullwidth:!0,className:"u-w-100",options:c,value:l,label:e("devices.label"),placeholder:e("devices.select"),onChange:function(e){var t=e.value;o("allSources"===t?null:a.find((function(e){return e._id===t})))}})},Pl=a("5z4W"),Tl=a.n(Pl),Al=function(){var e=Object(Ee.b)().isMobile;return r.a.createElement(Mn.a,Kn()({color:"var(--infoColor)",style:{zIndex:"var(--zindex-alert)"},position:"fixed"},e?{top:"0.5rem",right:"1rem"}:{bottom:"1rem",right:"2rem"}),Pl.version)},Ml=a("N0Ji"),Nl={ListItemText:{color:"var(--infoColor)"}},Ll=function(){var e=Object(H.e)().t,t=nc("CO2Emission.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Ml.a,color:"var(--infoColor)"})),r.a.createElement(At.a,{style:Nl.ListItemText,primary:e("dacc.settings.showAlerter")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{checked:o,onChange:c})))},Il=a("gDzS"),Fl=function(){var e=Object(H.e)().t,t=nc("centreValDeLoireExpe.sendToDACC"),a=t.isLoading,n=t.value,o=void 0!==n&&n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Il.a})),r.a.createElement(At.a,{primary:e("centreValDeLoireExpe.settings.sendToDACC")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{color:"primary",checked:o,onChange:c})))},Rl=function(){var e=Object(H.e)().t,t=nc("CO2Emission.sendToDACC"),a=t.isLoading,n=t.value,o=void 0!==n&&n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Bn.a})),r.a.createElement(At.a,{primary:e("dacc.settings.anonymous_participation")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{color:"primary",checked:o,onChange:c})))};function Gl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Bl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var zl=ee()("exportTripsToCSV"),ql=C.models.file.uploadFileWithConflictStrategy,Yl=function(e,t){return t("export.filename",{today:Object(cr.a)(new Date,"yyyy MM dd"),accountLabel:e})},Zl=function(e){return[Object.keys(e[0])].concat(f()(e)).map((function(e){return Object.values(e).map((function(e){return e?'"'.concat(e,'"'):" "})).toString()})).join("\n")},Ql=function(){var e=m()(v.a.mark((function e(t,a){var n,r,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchQueryAndGetFromState(M());case 2:return n=e.sent,r=n.data,o=(null==r?void 0:r[0])||{},i=a.flatMap((function(e){return Ia(e,o).map((function(t){var a,n,r=(a={},c()(a,j.x.sectionStartDate,t.startDate),c()(a,j.x.sectionEndDate,t.endDate),c()(a,j.x.sectionDuration,t.duration),c()(a,j.x.sectionDistance,t.distance),c()(a,j.x.sectionMode,t.mode),c()(a,j.x.sectionCoordinates,t.coordinates),c()(a,j.x.sectionDistances,t.distances),c()(a,j.x.sectionTimestamps,t.timestamps),c()(a,j.x.sectionSpeeds,t.speeds),a);return Bl(Bl({},(n={},c()(n,j.x.tripId,e.id),c()(n,j.x.tripStartDate,Fa(e)),c()(n,j.x.tripEndDate,Ra(e)),c()(n,j.x.tripStartDisplayName,Ma(e)),c()(n,j.x.tripArrivalDisplayName,Na(e)),c()(n,j.x.tripPurpose,Ta(e)),n)),r)}))})),e.abrupt("return",ta()(i,j.x.tripId));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Vl=function(){var e=m()(v.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.timeseries,o=t.accountName,e.prev=1,i=Ya(r),e.next=5,Ql(a,i);case 5:return c=e.sent,l=Zl(c),s=Yl(o,n),e.next=10,Hr(a,n);case 10:return u=e.sent,e.next=13,ql(a,l,{name:s,contentType:"text/csv",dirId:u._id,conflictStrategy:"rename"});case 13:return d=e.sent,m=d.data,e.abrupt("return",{appDir:u,fileCreated:m,isLoading:!1});case 18:return e.prev=18,e.t0=e.catch(1),zl.error(e.t0),e.abrupt("return",{appDir:null,fileCreated:null,isLoading:!0});case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),Ul=["data"],Hl=function(e){var t=e.isAllAccountsSelected,a=e.accountId;return t?{definition:Object(C.Q)(u.h).where({}).indexFields(["cozyMetadata.sourceAccount"]).sortBy([{"cozyMetadata.sourceAccount":"desc"}]).limitBy(1e3),options:{as:u.h,fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}}:function(e){var t=e.accountId;return{definition:Object(C.Q)(u.h).where({"cozyMetadata.sourceAccount":t}).indexFields(["cozyMetadata.sourceAccount"]).sortBy([{"cozyMetadata.sourceAccount":"desc"}]).limitBy(1e3),options:{as:"".concat(u.h,"/sourceAccount/").concat(t),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}}}({accountId:a})},Wl=function(){var e=Object(H.e)().t,t=Object(C.useClient)(),a=G(),r=a.account,o=a.isAllAccountsSelected,i=Object(n.useState)(!1),c=Z()(i,2),l=c[0],u=c[1],d=Object(n.useState)({appDir:null,fileCreated:null,isLoading:!0}),p=Z()(d,2),f=p[0],b=f.appDir,g=f.fileCreated,y=f.isLoading,h=p[1],E=Hl({isAllAccountsSelected:o,accountId:null==r?void 0:r._id}),O=Object(C.useQueryAll)(E.definition,E.options),j=O.data,w=s()(O,Ul),x=Object(C.isQueryLoading)(w)||w.hasMore,k=o?e("settings.allAccounts"):B(r);return Object(n.useEffect)((function(){x||l||b||function(){var a=m()(v.a.mark((function a(){var n;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u(!0),a.next=3,Vl({client:t,t:e,timeseries:j,accountName:k});case 3:n=a.sent,h(n),u(!1);case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}),[k,b,t,l,x,e,j]),{isLoading:y,appDir:b,file:g}},Jl=function(e){var t=e.onClose,a=Object(H.e)().t,n=Object(C.useClient)(),o=Wl(),i=o.file,c=o.appDir;if(o.isLoading)return r.a.createElement(V.a,{open:!0,title:a("export.modal.title"),content:r.a.createElement(U.a,{color:"textPrimary"},a("export.modal.content.progress"))});var l=Object(C.generateWebLink)({slug:"drive",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(c._id)});return r.a.createElement(V.a,{open:!0,title:a("export.modal.title"),content:r.a.createElement(U.a,{color:"textPrimary"},a("export.modal.content.done",{filename:i.name,pathAppDir:c.path})),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"secondary",onClick:t,label:a("export.modal.button.close")}),r.a.createElement(Q.a,{href:l,target:"_blank",label:a("export.modal.button.viewInDrive")})),onClose:t})},Kl=a("MPPK"),Xl=function(e){var t=e.accountName,a=Object(H.e)().t,o=Object(n.useState)(!1),i=Z()(o,2),c=i[0],l=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.b,{button:!0,ellipsis:!1,disabled:c,onClick:function(){return l(!0)}},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Kl.a})),r.a.createElement(At.a,{primary:a("export.button")})),c&&r.a.createElement(Jl,{accountName:t,onClose:function(){l(!1)}}))},$l=Object(n.memo)(Xl),es=a("6td7"),ts=function(){var e=Object(H.e)().t;return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,component:"a",target:"_blank",href:"https://support.cozy.io/tag/cozy-coach-co2/"},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:es.a})),r.a.createElement(At.a,{primary:e("support.consult.link")}),r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:yo.a})))},as=a("SIS9"),ns=function(){var e=Object(H.e)().t,t=Object(de.useWebviewIntent)();return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call("sendGeolocationTrackingLogs");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:as.a})),r.a.createElement(At.a,{primary:e("geolocationTracking.settings.sendLogs")}))},rs=function(){var e=be().getGeolocationTrackingId,t=Object(H.e)().t,a=Object(de.useWebviewIntent)(),n=function(){var t=m()(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:if(!(a=t.sent)){t.next=6;break}return t.next=6,navigator.clipboard.writeText(a);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"u-m-1"},r.a.createElement(Q.a,{fullWidth:!0,label:t("geolocationTracking.settings.forceUploadData"),variant:"secondary",onClick:m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("forceUploadGeolocationTrackingData");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:"u-mb-1"}),r.a.createElement(Q.a,{fullWidth:!0,label:t("geolocationTracking.settings.copyIdentifier"),variant:"secondary",onClick:n,className:"u-mb-1"}))},os=a("LFaT"),is=a("vSUP"),cs=function(){var e=be(),t=e.disableGeolocationTracking,a=e.checkPermissionsAndEnableTrackingOrShowDialog,o=e.isGeolocationTrackingEnabled,i=e.isGeolocationQuotaExceeded,c=Object(H.e)().t,l=Object(n.useState)(!1),s=Z()(l,2),u=s[0],d=s[1],p=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=4;break}return e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:if(!i){e.next=7;break}return d(!0),e.abrupt("return");case 7:return e.next=9,a();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:p},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:os.a})),r.a.createElement(At.a,{primary:c("geolocationTracking.settings.enable")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{color:"primary",checked:o,onChange:p}))),u?r.a.createElement(is.a,{days:X()("coachco2.max-days-to-capture"),onClose:function(){d(!1)}}):null)},ls=a("yPUo"),ss={ListItemText:{color:"var(--infoColor)"}},us=function(){var e=Object(H.e)().t,t=nc("bikeGoal.showAlertSuccess"),a=t.isLoading,n=t.value,o=t.save,i=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;o(n)};return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return i(!n)},disabled:a},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:ls.a,color:"var(--infoColor)"})),r.a.createElement(At.a,{style:ss.ListItemText,primary:e("bikeGoal.settings.showAlerterSuccess")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{checked:n,onChange:i})))},ds={ListItemText:{color:"var(--infoColor)"}},ms=function(){var e=Object(H.e)().t,t=nc("bikeGoal.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Ml.a,color:"var(--infoColor)"})),r.a.createElement(At.a,{style:ds.ListItemText,primary:e("bikeGoal.settings.showAlerter")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{checked:o,onChange:c})))},ps={ListItemText:{color:"var(--infoColor)"}},fs=function(){var e=Object(H.e)().t,t=nc("bikeGoal.sendToDACC"),a=t.isLoading,n=t.value,o=t.save,i=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;o(n)};return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return i(!n)},disabled:a},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Bn.a,color:"var(--infoColor)"})),r.a.createElement(At.a,{style:ps.ListItemText,primary:e("bikeGoal.settings.sendToDACC")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{checked:n,onChange:i})))},bs=a("fYln"),vs={ListItemText:{color:"var(--infoColor)"}},gs=function(){var e=Object(H.e)().t,t=nc("bikeGoal.onboarded"),a=t.isLoading,n=t.value,o=void 0!==n&&n,i=t.save,c=nc("bikeGoal.activated"),l=c.isLoading,s=c.value,u=void 0!==s&&s,d=c.save,p=o||u,f=a||l,b=function(){var e=m()(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null!==(a=null==t||null===(n=t.target)||void 0===n?void 0:n.checked)&&void 0!==a?a:t,!u){e.next=4;break}return e.next=4,d(r);case 4:return e.next=6,i(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return b(!p)},disabled:f},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:bs.a,color:"var(--infoColor)"})),r.a.createElement(At.a,{style:vs.ListItemText,primary:e("bikeGoal.settings.hideOnboarding")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{checked:p,onChange:b})))},ys=function(){var e=Object(H.e)().t,t=Object(ke.h)(),a=nc("bikeGoal.onboarded"),n=a.isLoading,o=a.value,i=void 0!==o&&o,c=nc("bikeGoal.activated"),l=c.isLoading,s=c.value,u=void 0!==s&&s,d=c.save,p=i&&u,f=n||l,b=function(){var e=m()(v.a.mark((function e(a){var n,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(n=null==a||null===(r=a.target)||void 0===r?void 0:r.checked)&&void 0!==n?n:a,!i){e.next=6;break}return e.next=4,d(o);case 4:e.next=7;break;case 6:t("bikegoalonboarding");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return b(!p)},disabled:f},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Ae.a})),r.a.createElement(At.a,{primary:e("bikeGoal.settings.participation")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{color:"primary",checked:p,onChange:b})))},hs={width:"fit-content"},Es=function(){var e=Object(H.e)().t,t=Object(Ee.b)().isMobile,a=be(),n=a.isGeolocationTrackingAvailable,o=a.isGeolocationTrackingEnabled,i=G(),c=i.isAccountLoading,l=i.accounts,s=i.account,u=i.isAllAccountsSelected,d=ar().sourceName;if(c)return r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"});if(0===l.length){if(!n)return r.a.createElement(Lo,null);if(!o)return r.a.createElement(zo,null)}var m=u?e("settings.allAccounts"):B(s);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ko,{label:e("nav.settings")}),r.a.createElement("div",Kn()({className:"u-mb-1"},!t&&{style:hs}),r.a.createElement(Sn.a,{subheader:r.a.createElement(On.a,null,e("devices.label"))},r.a.createElement(Pt.b,null,r.a.createElement(Sl,null)),n&&r.a.createElement(cs,null)),r.a.createElement(Sn.a,{subheader:r.a.createElement(On.a,null,e("settings.services"))},r.a.createElement(Rl,null),X()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,{variant:"inset",component:"li"}),r.a.createElement(ys,null)),d===j.z.CVL&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,{variant:"inset",component:"li"}),r.a.createElement(Fl,null)),r.a.createElement(Dt.a,{variant:"inset",component:"li"}),r.a.createElement($l,{accountName:m})),(s||u)&&r.a.createElement(Sn.a,{subheader:r.a.createElement(On.a,null,e("support.label"))},r.a.createElement(ts,null),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,{variant:"inset",component:"li"}),r.a.createElement(ns,null)):null),X()("coachco2.admin-mode")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{subheader:r.a.createElement(On.a,null,e("settings.debug"))},r.a.createElement(Ll,null),X()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,{component:"li",variant:"inset"}),r.a.createElement(ms,{className:"u-mt-1-half-s"}),r.a.createElement(Dt.a,{component:"li",variant:"inset"}),r.a.createElement(gs,{className:"u-mt-1-half-s"}),r.a.createElement(Dt.a,{component:"li",variant:"inset"}),r.a.createElement(us,{className:"u-mt-1-half-s"}),r.a.createElement(Dt.a,{component:"li",variant:"inset"}),r.a.createElement(fs,{className:"u-mt-1-half-s"}))),n&&r.a.createElement(rs,null),r.a.createElement(Al,null))))};function Os(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var js=function(e){var t,a=null==e||null===(t=e.aggregation)||void 0===t?void 0:t.sections;if(!a)return e;var n=a.sort((function(e,t){return new Date(e.startDate).getTime()-new Date(t.startDate).getTime()})),r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Os(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);return r.aggregation.sections=n,r},Cs=r.a.createContext(),ws=function(){var e=Object(n.useContext)(Cs);if(!e)throw new Error("useTrip must be used within a TripProvider");return e},xs=function(e){var t=e.timeserie,a=e.children,o=Object(n.useMemo)((function(){return{timeserie:js(t)}}),[t]);return r.a.createElement(Cs.Provider,{value:o},a)},ks=r.a.memo(xs),Ds=a("JaZj"),_s=function(){var e=Object(n.useState)(!1),t=Z()(e,2),a=t[0],o=t[1],i=uu(),c=i.type,l=i.isSameContact,s=i.contact,u=i.setContact,d=i.setType,p=i.label,f=i.category,b=Object(H.e)().t,g=ws().timeserie,y=Object(C.useClient)(),h=Object(pe.b)().showAlert,E=function(){return d()},O=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",o(!0));case 2:return u(null),h(b("contactToPlace.addSuccess"),"success"),"start"!==c||Ea(g,"end")?E():d("end"),e.next=7,ka({client:y,type:c,timeserie:g,contact:s,label:p,isSameContact:l,category:f,t:b});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){return o(!1)},w=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(b("contactToPlace.removeSuccess"),"success"),u(null),E(),e.next=5,ja({client:y,timeserie:g,type:c,t:b,contact:s});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,l?r.a.createElement(Q.a,{variant:"secondary",label:b("contactToPlace.delete"),color:"error",onClick:w}):r.a.createElement(Q.a,{variant:"secondary",label:b("contactToPlace.dismiss"),onClick:E}),r.a.createElement(Q.a,{label:b("contactToPlace.submit"),onClick:O}),r.a.createElement(Ds.a,{open:a,onClose:j},r.a.createElement(Dn.a,{variant:"filled",elevation:6,severity:"error",onClose:j},b("contactToPlace.error"))))},Ss=a("DPrj"),Ps=function(){var e=Object(n.useState)(!1),t=Z()(e,2),a=t[0],o=t[1],i=Object(H.e)().t,c=uu(),l=c.contact,s=c.setContact,u=c.setLabel,d=c.setCategory;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.b,{button:!0,gutters:"disabled",onClick:function(){return o(!0)}},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Ve.a})),r.a.createElement(At.a,Kn()({primary:l?Object(ma.getDisplayName)(l):i("contactToPlace.contact")},!l&&{primaryTypographyProps:{color:"textSecondary"}})),r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Zo.a}))),a&&r.a.createElement(Ss.a,{dismissAction:function(){return o(!1)},onItemClick:function(e){s(e),u(i("contactToPlace.home")),d(j.Q)}}))},Ts=(a("2nE9"),a("SdDE")),As=a("MWqS"),Ms=a("/rN/"),Ns=a("vZHb"),Ls=new mo.a({id:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35",use:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35-usage",viewBox:"0 0 32 33",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 33" id="location_5cb8a90cd75b6b5e8e203a5e2d5f9e35"><path fill="#97ECA1" d="M26 10c0 5.764-6.78 17.628-9.174 21.64a.955.955 0 0 1-1.652 0C12.78 27.628 6 15.763 6 10 6 4.477 10.477 0 16 0s10 4.477 10 10Z" /><circle cx="16" cy="10" r="4" fill="#09AE1C" /></symbol>'}),Is=(fo.a.add(Ls),Ls),Fs=[51.505,-.09],Rs={height:128,borderRadius:8},Gs=Object(Qo.a)({icon:{filter:"drop-shadow(0 5px 8px rgba(29,33,42,0.12))"}}),Bs=function(){var e=Object(n.useState)(),t=Z()(e,2),a=t[0],o=t[1],i=Object(n.useState)({x:0,y:0}),c=Z()(i,2),l=c[0],s=c[1],u=ws().timeserie,d=uu().type,m=Object(Ts.a)(),p=Gs();return Object(n.useEffect)((function(){!function(e){var t=e.map,a=e.timeserie,n=e.type,r=e.setBounds,o=e.setSVGPositions,i=f()(on(a).properties["".concat(n,"_loc")].coordinates).reverse();t.setView(i);var c=t.getBounds(),l=t.getSize(),s=l.x,u=l.y;r(c),o({x:s/2-24,y:u/2-48})}({map:m,timeserie:u,type:d,setBounds:o,setSVGPositions:s})}),[u,m,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(As.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'¬© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),a&&r.a.createElement(Ms.a,{bounds:a},r.a.createElement(_t.a,{className:p.icon,icon:Is,size:48,x:l.x,y:l.y})))},zs=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ns.a,{style:Rs,center:Fs,zoom:17,zoomControl:!1,doubleClickZoom:!1,boxZoom:!1,scrollWheelZoom:!1},r.a.createElement(Bs,null)))},qs=function(e){var t=e.onClose,a=Object(n.useState)(),o=Z()(a,2),i=o[0],c=o[1],l=Object(H.e)().t,s=uu(),u=s.setLabel,d=s.setCategory;return r.a.createElement(V.a,{open:!0,title:l("contactToPlace.customLabel"),content:r.a.createElement(xc.a,{className:"u-mt-half",variant:"outlined",fullWidth:!0,autoFocus:!0,onChange:function(e){return c(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"secondary",label:l("contactToPlace.cancel"),onClick:t}),r.a.createElement(Q.a,{label:l("contactToPlace.submit"),onClick:function(){u(i),d(),t()}})),onClose:t})},Ys=a("INxB"),Zs=function(e){var t=e.showCustomLabelModal,a=Object(n.forwardRef)((function(e,t){var a=Object(H.e)().t,n=uu().label,o=![a("contactToPlace.work"),a("contactToPlace.home"),void 0].includes(n);return r.a.createElement(Ys.a,Kn()({},e,{ref:t}),r.a.createElement(Tt.a,null,r.a.createElement(Kc.a,{checked:o})),r.a.createElement(At.a,{primary:a("contactToPlace.custom")}))}));return a.displayName="CustomLabelActionComponent",{name:"customLabel",action:function(){t()},Component:a}},Qs=["onClick"],Vs=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=s()(e,Qs),o=Object(H.e)().t,i=uu(),c=i.label,l=i.setLabel,u=i.setCategory,d=o("contactToPlace.home");return r.a.createElement(Ys.a,Kn()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:l,setCategory:u})}}),r.a.createElement(Tt.a,null,r.a.createElement(Kc.a,{checked:c===d})),r.a.createElement(At.a,{primary:d}))}));return e.displayName="HomeComponent",{name:j.Q,action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r(j.Q)},Component:e}},Us=["onClick"],Hs=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=s()(e,Us),o=Object(H.e)().t,i=uu(),c=i.label,l=i.setLabel,u=i.setCategory;return r.a.createElement(Ys.a,Kn()({},n,{ref:t,onClick:function(){return a({setLabel:l,setCategory:u})}}),r.a.createElement(Tt.a,null,r.a.createElement(Kc.a,{checked:void 0===c})),r.a.createElement(At.a,{primary:o("contactToPlace.noLabel")}))}));return e.displayName="NoLabelActionComponent",{name:"noLabel",action:function(e,t){var a=t.setLabel,n=t.setCategory;a(),n()},Component:e}},Ws=["onClick"],Js=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=s()(e,Ws),o=Object(H.e)().t,i=uu(),c=i.label,l=i.setLabel,u=i.setCategory,d=o("contactToPlace.work");return r.a.createElement(Ys.a,Kn()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:l,setCategory:u})}}),r.a.createElement(Tt.a,null,r.a.createElement(Kc.a,{checked:c===d})),r.a.createElement(At.a,{primary:d}))}));return e.displayName="WorkActionComponent",{name:j.Ob,action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r(j.Ob)},Component:e}},Ks=a("zLZg"),Xs=a("ZpM7"),$s=a("4aAG"),eu=a("Nvei"),tu=function(){var e=Object(n.useState)(!1),t=Z()(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=Z()(i,2),l=c[0],s=c[1],u=Object(n.useRef)(null),d=Object(H.e)().t,m=uu().label,p=Object(Xs.c)([Hs,Vs,Js,Zs],{showCustomLabelModal:function(){return o(!0)}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.b,{ref:u,"aria-controls":"simple-menu","aria-haspopup":"true",button:!0,gutters:"disabled",onClick:function(){return s(!0)}},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:eu.a})),r.a.createElement(At.a,{primary:m||d("contactToPlace.noLabel")}),r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:Zo.a}))),r.a.createElement(Ks.a,{ref:u,open:l,actions:p,onClose:function(){return s(!1)}},r.a.createElement($s.a,null,r.a.createElement(At.a,{primary:d("contactToPlace.label"),primaryTypographyProps:{variant:"h6",align:"center"}}))),a&&r.a.createElement(qs,{onClose:function(){return o(!1)}}))},au=a("nUfk"),nu=function(){var e=ws().timeserie,t=uu(),a=t.type,n=t.contact,o=Object(au.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(zs,null),r.a.createElement(Sn.a,null,r.a.createElement(Pt.b,{gutters:"disabled"},r.a.createElement(Tt.a,null,r.a.createElement(_t.a,{icon:os.a})),r.a.createElement(At.a,{primary:an({timeserie:e,type:a,t:o}),secondary:rn({timeserie:e,type:a,t:o})})),r.a.createElement(Dt.a,{className:"u-ml-3"}),r.a.createElement(Ps,null),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,{className:"u-ml-3"}),r.a.createElement(tu,null))))},ru=a("uol1"),ou=a("0pj4"),iu=a("aoYa"),cu=function(e){var t=e.isLoading,a=Object(n.useState)(!1),o=Z()(a,2),i=o[0],c=o[1],l=uu(),s=l.type,u=l.setType,d=l.setContact,m=Object(H.e)().t;return r.a.createElement(V.a,{open:!0,title:r.a.createElement(r.a.Fragment,null,m("contactToPlace.save".concat(ni()(s),"Place")),r.a.createElement(ru.a,{onClickAway:function(){return c(!1)}},r.a.createElement(iu.a,{onClose:function(){return c(!1)},open:i,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:m("contactToPlace.tooltip"),placement:"top-end",arrow:!0},r.a.createElement(Tt.a,null,r.a.createElement(go.a,{onClick:function(){return c((function(e){return!e}))}},r.a.createElement(_t.a,{icon:ou.a})))))),content:t?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(nu,null),actions:r.a.createElement(_s,null),onClose:function(){d(null),u()}})},lu=["data"],su=r.a.createContext(),uu=function(){var e=Object(n.useContext)(su);if(!e)throw new Error("useContactToPlace must be used within a ContactToPlaceProvider");return e},du=function(e){var t,a,o=e.children,i=Object(n.useState)(),c=Z()(i,2),l=c[0],d=c[1],m=Object(n.useState)(),p=Z()(m,2),f=p[0],b=p[1],v=Object(n.useState)(),g=Z()(v,2),y=g[0],h=g[1],E=Object(n.useState)(),O=Z()(E,2),j=O[0],x=O[1],k=ws().timeserie,D=function(e){return{definition:Object(C.Q)(u.d).getById(e),options:{as:"".concat(u.d,"/").concat(e),fetchPolicy:w.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}((null===(t=ha(k,l))||void 0===t||null===(a=t.data)||void 0===a?void 0:a._id)||(null==f?void 0:f._id)||" "),_=Object(C.useQuery)(D.definition,D.options),S=_.data,P=s()(_,lu),T=Object(C.isQueryLoading)(P),A=Object(n.useMemo)((function(){return S&&S._id===(null==f?void 0:f._id)}),[f,S]),M=Object(n.useMemo)((function(){return{type:l,setType:d,contact:f,setContact:b,label:y,setLabel:h,isSameContact:A,category:j,setCategory:x}}),[l,f,y,A,j]);return Object(n.useEffect)((function(){b(S),h(ya({contact:S,timeserie:k,type:l})),x(ga({contact:S,timeserie:k,type:l}))}),[l,null==S?void 0:S._rev,null==S?void 0:S._id,null==k?void 0:k._id]),r.a.createElement(su.Provider,{value:M},o,!!l&&r.a.createElement(cu,{isLoading:T}))},mu=r.a.memo(du),pu=a("IW7p"),fu=a.n(pu),bu=function(e){var t=e.timeserie,a=e.selectedPurpose,n=e.setContactToPlaceType,r=e.onClose;a===j.y&&(Ea(t,"start")?Ea(t,"end")||n("end"):n("start")),r()};function vu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vu(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var yu=function(){var e=m()(v.a.mark((function e(){var t,a,n,r,o,i,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.isRecurringTrip,i=gu({},n),o&&(i=pn(i,r)),i=fn(i,r,{isRecurringTrip:o}),e.next=6,a.save(i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hu=function(){var e=m()(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.purpose,e.next=3,yu({client:a,timeserie:n,purpose:r,isRecurringTrip:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Eu=function(){var e=m()(v.a.mark((function e(){var t,a,n,r,o,i=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.oldPurpose,e.next=3,yu({client:a,timeserie:n,purpose:r,isRecurringTrip:!0});case 3:Object(sr.a)(a,j.sb,{fields:{docId:n._id,oldPurpose:o}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ou=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.icon,r=a.withDescription,o=a.withInfo,i=a.action,c=a.children,l=a.defaultModes,s=void 0===l?{}:l,u=Object.values(s).some((function(e){return e===t})),d=u?"".concat(e("trips.modes.".concat(t))," (").concat(e("trips.modes.default"),")"):e("trips.modes.".concat(t));return gu(gu(gu(gu({id:t,title:d,isChecked:!1,icon:ht({attribute:n||t,defaultColor:!0})},r&&{description:mt(t)}),o&&{info:mt(t)}),i&&{action:i}),c&&{children:c})},ju=a("IW7r"),Cu=function(e){return{children:ct.map((function(t){return{id:t,title:e("trips.purposes.".concat(t)),icon:r.a.createElement(yt,{attribute:t})}}))}},wu=function(e){var t=e.onClose,a=Object(H.e)().t,o=Object(C.useClient)(),i=ws().timeserie,c=uu(),l=c.type,s=c.setType,u=function(){var e=m()(v.a.mark((function e(a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Wa(i))===j.lb){e.next=6;break}return e.next=4,hu({client:o,timeserie:i,purpose:a.id});case 4:e.next=8;break;case 6:return e.next=8,Eu({client:o,timeserie:i,purpose:a.id,oldPurpose:n});case 8:bu({timeserie:i,selectedPurpose:a.id,setContactToPlaceType:s,onClose:t});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=Object(n.useMemo)((function(){return function(e){var t=Wa(i);return t?e.id===t:e.id===j.lb}}),[i]);return l?r.a.createElement(cu,{onClose:t}):r.a.createElement(ju.a,{title:a("tripEdit.selectPurpose"),onClose:t,onSelect:u,isSelected:d,options:Cu(a)})},xu=r.a.memo(wu),ku=a("bnOl"),Du=a("ee3C"),_u=a("Vc4F"),Su=a("ksij"),Pu=a("86gN"),Tu=Object(Qo.a)((function(e){return{dotStart:{marginTop:"9px"},dot:{marginBottom:"-1px"},connector:{width:"6px",backgroundColor:e.palette.primary.main},item:{marginTop:"-9px",paddingLeft:"11px","&::before":{padding:0,flexGrow:0},cursor:"pointer"},contentWrapper:{display:"flex",marginLeft:"11px"},endLabel:{fontWeight:700}}})),Au=function(e){var t,a=e.type,o=Object(H.e)(),i=o.t,l=o.f,s=o.lang,u=uu().setType,d=ws().timeserie,m=Tu(),p=Object(n.useMemo)((function(){return"end"!==a}),[a]),f=Object(n.useMemo)((function(){return"start"===a}),[a]),b=Oa({timeserie:d,type:a,t:i}),v=b||an({timeserie:d,type:a,t:i}),g=b?an({timeserie:d,type:a,t:i}):null;return r.a.createElement(Su.a,{className:m.item,onClick:function(){return u(a)}},r.a.createElement(Pu.a,null,r.a.createElement(_u.a,{className:Se()((t={},c()(t,m.dot,p),c()(t,m.dotStart,f),t)),color:"primary",variant:"outlined"}),p&&r.a.createElement(ku.a,{className:m.connector})),r.a.createElement(Du.a,null,r.a.createElement("div",{className:m.contentWrapper},r.a.createElement("div",{className:"u-flex-grow-1"},r.a.createElement(U.a,null,v),g&&r.a.createElement(U.a,{variant:"caption"},g)),r.a.createElement(U.a,{className:m.endLabel,variant:"body2",component:"div"},xt({f:l,lang:s,date:$a(d,a)})))))},Mu=r.a.memo(Au),Nu=a("2Kpg");function Lu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Iu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Fu=function(e){var t,a=e.item,o=e.onClose,i=e.onConfirm,l=Object(n.useState)(!1),s=Z()(l,2),u=s[0],d=s[1],p=Object(n.useState)(!1),f=Z()(p,2),b=f[0],g=f[1],y=Object(n.useState)(!1),h=Z()(y,2),E=h[0],O=h[1],j=Object(Ee.b)().isDesktop,w=Object(H.e)().t,x=Object(C.useClient)(),k=M(),D=Object(C.useQuery)(k.definition,k.options).data,_=null===(t=D[0])||void 0===t?void 0:t.defaultTransportModeByGroup,S=null==_?void 0:_[ft(a.id)];Object(n.useEffect)((function(){d(S===a.id)}),[_,S,a.id]),Object(n.useEffect)((function(){var e=S&&S===a.id;g(u===!e)}),[S,u,a.id]);var P=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,x.save(Iu(Iu({},D[0]),{},{defaultTransportModeByGroup:Iu(Iu({},_),{},c()({},ft(a.id),u?a.id:""))}));case 3:i();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(to.a,{open:!0,title:a.title,size:"large",disableGutters:!0,content:r.a.createElement(Sn.a,null,r.a.createElement(Pt.b,{ellipsis:!1,button:!0,onClick:function(){d((function(e){return!e}))}},r.a.createElement(Tt.a,null,r.a.createElement(Nu.a,{checked:u})),r.a.createElement(At.a,{primary:w("Modes.DefaultDialog.primary"),secondary:w("Modes.DefaultDialog.secondary")}))),onClose:o,actions:r.a.createElement("div",{className:Se()("u-flex",{"u-w-100 u-ph-1":!j,"u-p-1":j}),style:{gap:"1rem"}},r.a.createElement(Q.a,{label:w("Modes.DefaultDialog.actions.cancel"),variant:"secondary",onClick:o}),r.a.createElement(Q.a,{label:w("Modes.DefaultDialog.actions.save"),busy:E,onClick:P,disabled:!b}))})},Ru=function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=e.t,o=t.series.flatMap((function(e,t){return e.features.flatMap((function(e,n){if(e.features)return e.features.flatMap((function(e,r){if(e.id===a)return{feature:e,serieIndex:t,firstIndex:n,secondIndex:r}}))}))})).find((function(e){return e}));if(o){var i=o.feature,c=o.serieIndex,l=o.firstIndex,s=o.secondIndex,u=$t()(fu()(i),"properties.manual_mode",n),d=$t()(fu()(t),"series[".concat(c,"].features[").concat(l,"].features[").concat(s,"]"),u);return Qa({timeseries:[d],makeSections:function(e){return function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=t.aggregation.sections,o=r.find((function(e){return e.id===a})),i=Object.assign({},o,{mode:n});return r.map((function(e){return e.id===a?i:e}))}({timeserie:e,sectionId:a,mode:n})},t:r})[0]}return t},Gu=function(e){var t=e.item,a=e.onClick;return r.a.createElement(Sc.a,null,r.a.createElement(go.a,{onClick:function(){return a({item:t})}},r.a.createElement(_t.a,{icon:zn.a})))},Bu=function(e){var t=e.section,a=e.onClose,o=Object(n.useState)(null),i=Z()(o,2),c=i[0],l=i[1],s=Object(n.useState)(!1),u=Z()(s,2),d=u[0],p=u[1],f=Object(H.e)().t,b=Object(C.useClient)(),g=ws().timeserie,y=M(),h=Object(C.useQuery)(y.definition,y.options).data,E=Object(n.useMemo)((function(){return(null==h?void 0:h[0])||{}}),[h]),O=null==E?void 0:E.defaultTransportModeByGroup,w=Object(n.useCallback)(function(){var e=m()(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru({timeserie:g,sectionId:t.id,mode:n.id,t:f}),e.next=3,b.save(r);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b,g,a,t.id,f]),x=Object(n.useMemo)((function(){return function(e){return e.id===t.mode}}),[t.mode]),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.defaultModes,n=t.action;return{children:[Ou(e,j.Nb,{withInfo:!0}),Ou(e,"categories.".concat(j.h.name),{icon:j.k,children:j.h.modes.map((function(t){return Ou(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),Ou(e,"categories.".concat(j.t.name),{icon:j.w,children:j.t.modes.map((function(t){return Ou(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),Ou(e,"categories.".concat(j.rb.name),{icon:j.n,children:j.rb.modes.map((function(t){return Ou(e,t,{withDescription:!0})}))}),Ou(e,j.a,{withInfo:!0}),Ou(e,j.Lb,{withInfo:!0})]}}(f,{defaultModes:O,action:{Component:Gu,props:{onClick:function(e){var t=e.item;l(t)}}}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(ju.a,{title:r.a.createElement(r.a.Fragment,null,f("tripEdit.selectMode"),r.a.createElement(ru.a,{onClickAway:function(){return p(!1)}},r.a.createElement(iu.a,{open:d,title:f("tripEdit.modeTooltip"),disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,placement:"top-end",arrow:!0,onClose:function(){return p(!1)}},r.a.createElement(go.a,{onClick:function(){return p((function(e){return!e}))}},r.a.createElement(_t.a,{icon:ou.a}))))),onClose:a,onSelect:w,isSelected:x,options:k,ellipsis:!1}),!!c&&r.a.createElement(Fu,{item:c,onClose:function(){return l(null)},onConfirm:a}))},zu=r.a.memo(Bu),qu=Object(Qo.a)((function(e){return{iconItem:{marginTop:"-14px",cursor:"pointer","&::before":{padding:0,flexGrow:0}},iconDot:{backgroundColor:e.palette.background.paper,borderWidth:"1px",borderColor:e.palette.border.main,margin:0,padding:0,boxShadow:"none"},icon:{color:e.palette.primary.main,backgroundColor:e.palette.background.paper},connector:{width:"6px",backgroundColor:e.palette.primary.main}}})),Yu=function(e){var t=e.icon,a=e.label,n=e.endLabel,o=e.onClick,i=qu();return r.a.createElement(Su.a,{className:i.iconItem,onClick:o},r.a.createElement(Pu.a,null,r.a.createElement(_u.a,{className:i.iconDot},r.a.createElement(bt.b,{icon:t,className:i.icon,size:32})),r.a.createElement(ku.a,{className:i.connector})),r.a.createElement(Du.a,{className:"u-flex"},r.a.createElement(U.a,{className:"u-flex-grow-1",variant:"body2",color:"textSecondary"},a),r.a.createElement(U.a,{className:i.endLabel,variant:"body2",component:"div"},n)))},Zu=r.a.memo(Yu),Qu=function(){var e=ws().timeserie,t=Object(H.e)(),a=t.t,o=t.f,i=t.lang,c=Object(n.useState)(!1),l=Z()(c,2),s=l[0],u=l[1],d=Object(n.useState)(null),m=Z()(d,2),p=m[0],f=m[1],b=Object(n.useCallback)((function(e){return function(){f(e),u(!0)}}),[]),v=Object(n.useCallback)((function(){return u(!1)}),[]);return r.a.createElement(r.a.Fragment,null,e.aggregation.sections.map((function(e,t){return r.a.createElement(Zu,{key:t,label:"".concat(a("trips.modes.".concat(e.mode))," - ").concat(wt(e.duration)," - ").concat(jt(e.distance)," - ").concat((n=e.avgSpeed,"".concat(Math.round(n)," km/h"))),endLabel:xt({f:o,lang:i,date:new Date(e.endDate)}),icon:ot(e.mode),onClick:b(e)});var n})),s&&r.a.createElement(zu,{section:p,onClose:v}))},Vu=r.a.memo(Qu),Uu=function(e){var t=e.purpose,a=e.onClick,n=Object(H.e)().t;return r.a.createElement(Pt.b,{button:!0,onClick:a},r.a.createElement(Tt.a,null,r.a.createElement(yt,{attribute:t})),r.a.createElement(At.a,{primary:n("purpose"),primaryTypographyProps:{variant:"caption"},secondary:n("trips.purposes.".concat(t)),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))};Uu.defaultProps={purpose:j.lb};var Hu=r.a.memo(Uu),Wu=a("epof"),Ju=a("JKPP"),Ku=function(e){var t,a,n=e.purpose,o=Object(H.e)().t,i=ws().timeserie,c=Object(C.useClient)(),l=null!==(t=null==i||null===(a=i.aggregation)||void 0===a?void 0:a.recurring)&&void 0!==t&&t,s=function(){var e=m()(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==(a=null==t||null===(r=t.target)||void 0===r?void 0:r.checked)&&void 0!==a?a:t)){e.next=6;break}return e.next=4,Eu({client:c,timeserie:i,purpose:n,oldPurpose:n});case 4:e.next=8;break;case 6:return e.next=8,hu({client:c,timeserie:i,purpose:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n===j.lb?null:r.a.createElement(Pt.b,{button:!0,ellipsis:!1,onClick:function(){return s(!l)},style:{paddingLeft:64}},r.a.createElement(At.a,{primary:o("recurring.text")}),r.a.createElement(Sc.a,null,r.a.createElement(Pc.a,{color:"primary",edge:"end",checked:l,onChange:s})))},Xu={divider:{margin:"-10px -32px 10px"}},$u=function(){var e=ws().timeserie,t=Object(Ee.b)().isDesktop,a=Object(n.useState)(!1),o=Z()(a,2),i=o[0],c=o[1],l=Wa(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wu.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(Ju.a,{className:"u-pb-0 u-mb-0"},r.a.createElement(Mu,{type:"start"}),r.a.createElement(Vu,null),r.a.createElement(Mu,{type:"end"}))),t&&r.a.createElement(Dt.a,{style:Xu.divider}),r.a.createElement(Wu.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(Sn.a,{className:"u-pv-half"},r.a.createElement(Hu,{purpose:l,onClick:function(){return c(!0)}}),i&&r.a.createElement(xu,{onClose:function(){return c(!1)}}),r.a.createElement(Dt.a,{variant:"inset",component:"li"}),r.a.createElement(Ku,{purpose:l}))))},ed=r.a.memo($u);function td(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ad(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?td(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):td(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nd=function(e){var t=e.title,a=e.value,o=e.highlighted,i=Object(n.useMemo)((function(){return function(e){var t=e.highlighted;return{infoBlock:{backgroundColor:t?"var(--primaryColor)":"none",flex:"1 1 0"},typography:ad({},t&&{color:"var(--primaryContrastTextColor)"})}}({highlighted:o})}),[o]);return r.a.createElement("div",{style:i.infoBlock,className:"u-h-100 u-flex u-flex-column u-flex-items-center u-flex-justify-center u-ta-center u-bdrs-4"},r.a.createElement(U.a,{style:i.typography,variant:"caption"},t),r.a.createElement(U.a,{style:i.typography,variant:o?"h6":"body1"},a))},rd=r.a.memo(nd),od=function(){var e=ws().timeserie,t=Object(H.e)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(rd,{title:t("trips.duration"),value:ln(e)}),r.a.createElement(rd,{title:t("trips.distance"),value:sn(e)}),r.a.createElement(rd,{title:t("trips.calories"),value:dn(e)}),r.a.createElement(rd,{title:t("trips.co2"),value:un(e),highlighted:!0}))},id=r.a.memo(od),cd=a("bOJc"),ld=a("/h+6"),sd=a("l149"),ud={mediumHeightRatio:.66},dd=Object(Qo.a)({mapContainer:{height:function(e){var t=e.toolbarHeight;return"calc(100vh - ".concat(t,"px - var(--sidebarHeight) - env(safe-area-inset-bottom))")}},bottomSheetHeader:{gap:"0.5rem"}}),md=function(e){var t=e.titleRef,a=Object(n.useState)(0),o=Z()(a,2),i=o[0],c=o[1],l=dd({toolbarHeight:i}),s=Object(n.useMemo)((function(){return{height:i}}),[i]);return Object(n.useEffect)((function(){null!=t&&t.current&&c(t.current.offsetHeight)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"u-w-100 u-pos-fixed ".concat(l.mapContainer)},r.a.createElement(hd,null)),r.a.createElement(ld.a,{settings:ud,toolbarProps:s},r.a.createElement(sd.a,{className:"u-h-3 u-pb-half u-ph-half ".concat(l.bottomSheetHeader)},r.a.createElement(id,null)),r.a.createElement(ed,null)))},pd=r.a.memo(md),fd=a("CUq/"),bd=a("8IOV"),vd=a.n(bd),gd=function(){var e=Object(n.useRef)(),t=Object(Ee.b)().isMobile,a=Object(vt.a)(),o=ws().timeserie,i=Object(Ts.a)(),c=Object(n.useMemo)((function(){return function(e){return{style:function(t){return{weight:"section"===t.properties.feature_type?5:2,color:e.palette.primary.main}},pointToLayer:function(e,t){return fd.f.marker(t,{icon:fd.f.divIcon({html:"<div></div>",iconSize:[12,12],className:"".concat(vd.a["cozy-leaflet-markers"]," ").concat("end_place"===e.properties.feature_type?"".concat(vd.a["cozy-leaflet-markers-end"]):"".concat(vd.a["cozy-leaflet-markers-start"]))})})},markerIcon:function(e,t){return fd.f.marker(e,{icon:fd.f.divIcon({html:"".concat(t())})})}}}(a)}),[a]),l=c.pointToLayer,s=c.style,u=Object(n.useMemo)((function(){return t?ud.mediumHeightRatio:0}),[t]);return Object(n.useEffect)((function(){var t=e.current.getBounds(),a=[16,16],n=[16,16+i.getSize().y*u];i.fitBounds(t,{paddingTopLeft:a,paddingBottomRight:n})}),[i,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(As.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'¬© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(cd.a,{ref:e,data:on(o),pointToLayer:l,style:s}))},yd=[51.505,-.09],hd=function(){return r.a.createElement(Ns.a,{className:"u-h-100",center:yd,zoom:13},r.a.createElement(gd,null))},Ed={map:{height:"400px",margin:"-24px -32px 0"},divider:{margin:"10px -32px 25px"},bottomSheetHeader:{gap:"0.5rem"}},Od=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Ed.map},r.a.createElement(hd,null)),r.a.createElement("div",{style:Ed.bottomSheetHeader,className:"u-mt-1 u-h-3 u-flex u-flex-items-center u-pb-half"},r.a.createElement(id,null)),r.a.createElement(Dt.a,{style:Ed.divider}),r.a.createElement(ed,null))};function jd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Cd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var wd=function(e){var t=e.onClose,a=Object(H.e)().t,o=ws().timeserie,i=Object(C.useClient)(),c=Object(n.useState)(o.title),l=Z()(c,2),s=l[0],u=l[1],d=Object(n.useState)(!1),p=Z()(d,2),f=p[0],b=p[1],g=function(){var e=m()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,i.save(Cd(Cd({},o),{},{title:s}));case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(V.a,{open:!0,title:a("trips.customLabel"),content:r.a.createElement(xc.a,{className:"u-mt-half",variant:"outlined",defaultValue:s,fullWidth:!0,autoFocus:!0,onChange:function(e){return u(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"secondary",label:a("trips.cancel"),onClick:t}),r.a.createElement(Q.a,{label:a("trips.submit"),busy:f,onClick:g})),onClose:t})},xd=function(){var e=Object(H.e)(),t=e.t,a=e.f,o=Object(Ee.c)().isMobile,i=Object(ke.j)().timeserieId,c=ws().timeserie,l=Object(ke.g)().pathname,s=Object(ke.h)(),u=Object(n.useRef)(null),d=Object(n.useState)(!1),m=Z()(d,2),p=m[0],f=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(to.a,{open:!0,size:o?void 0:"large",transitionDuration:o?0:void 0,disableGutters:o,title:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"u-c-pointer",onClick:function(){return f(!0)}},cn(c,o)||tn(c,t)),r.a.createElement(U.a,{className:"u-mt-half",variant:"caption",align:o?"center":void 0},mn(c,a))),titleRef:u,content:o?r.a.createElement(pd,{titleRef:u}):r.a.createElement(Od,null),onClose:function(){return s(l.split("/".concat(i))[0])}}),p&&r.a.createElement(wd,{onClose:function(){return f(!1)}}))},kd=r.a.memo(xd),Dd=["data"],_d=function(){var e=Object(ke.g)().pathname,t=function(e){return{definition:Object(C.Q)(u.h).getById(e).include(["startPlaceContact","endPlaceContact"]),options:{as:"".concat(u.h,"/").concat(e),fetchPolicy:w.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}(Object(n.useMemo)((function(){return e.split("/").pop()}),[e])),a=Object(C.useQuery)(t.definition,t.options),o=a.data,i=s()(a,Dd);return Object(C.isQueryLoading)(i)?r.a.createElement(ao.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(ks,{timeserie:o},r.a.createElement(mu,null,r.a.createElement(kd,null)))},Sd=r.a.memo(_d),Pd=a("PKog"),Td={minHeight:"48px",display:"flex",alignItems:"center"},Ad=function(){var e=Object(H.e)().t,t=Object(vt.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,null),r.a.createElement(Pn.a,{style:Td,className:"u-ph-1-s u-ph-2",square:!0,elevation:0},r.a.createElement(_t.a,{className:"u-mr-half",icon:ki.a,color:"var(--primaryColor)",size:8}),r.a.createElement(U.a,{className:"u-mr-1",display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.yours")),r.a.createElement(_t.a,{className:"u-mr-half",icon:ki.a,color:Object(Pd.a)(t.palette.primary.main,.24),size:8}),r.a.createElement(U.a,{display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.average"))))},Md=a("HO4k"),Nd=a("DmLS");Md.f.register(Md.e,Md.i,Md.c,Md.n),Md.f.defaults.font={family:"Lato, sans-serif",size:"11",weight:"700"};var Ld=function(e){var t=e.className,a=e.title,n=e.data,o=e.options,i=e.width,c=e.height,l=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:"u-mt-1 u-ml-1",variant:"h5"},a),r.a.createElement("div",{style:{width:i,height:c}},r.a.createElement(Nd.a,{className:t,width:i,height:c,options:o,data:n})),l)},Id=function(e){var t=e.theme,a=e.isMobile,n=e.oneYearOldTimeseries,r=e.sendToDACC,o=e.globalAverages,i=e.f,c=e.t,l=function(e,t){var a=new Date,n=Array.from({length:12},(function(e,t){return Object(h.a)(Object(Yt.a)(a,t))})).reverse();return{months:n.map((function(e){return t(e,"MMM").toUpperCase()})),CO2s:n.map((function(t,a){var r=a===n.length-1,o=e.filter((function(e){return new Date(e.startDate)>=t&&(!!r||new Date(e.startDate)<n[a+1])})),i=na()(o,"aggregation.totalCO2");return Math.round(100*i)/100}))}}(n,i),s=l.months,u=l.CO2s,d={labels:s,datasets:[{label:c("vericalBarChart.legend.yours"),backgroundColor:t.palette.primary.main,borderRadius:a?8:4,barThickness:a?r?6:8:24,data:u}]};return r&&d.datasets.push({label:c("vericalBarChart.legend.average"),backgroundColor:Object(Pd.a)(t.palette.primary.main,.24),borderRadius:a?8:4,barPercentage:a?.55:.85,data:X()("coachco2.fake-dacc-datas.enabled")?u:o}),d},Fd=["data"];function Rd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Gd=function(e){var t,a=e.isAllAccountsSelected,n=e.accountId;return a?(t=Object(h.a)(Object(O.a)(new Date,1)),{definition:Object(C.Q)(u.h).where({startDate:{$gte:t.toISOString()}}).partialIndex({aggregation:{$exists:!0}}).select(["startDate","endDate","aggregation","title","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"asc"},{startDate:"asc"}]).limitBy(1e3),options:{as:"".concat(u.h,"/withAggregation/fromDate/").concat(t.getFullYear(),"-").concat(t.getMonth()),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}}):function(e){var t=e.accountId,a=Object(h.a)(Object(O.a)(new Date,1));return{definition:Object(C.Q)(u.h).where({"cozyMetadata.sourceAccount":t,startDate:{$gte:a.toISOString()}}).partialIndex({aggregation:{$exists:!0}}).select(["startDate","endDate","aggregation","title","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"asc"},{startDate:"asc"}]).limitBy(1e3),options:{as:"".concat(u.h,"/sourceAccount/").concat(t,"/withAggregation/fromDate/").concat(a.getFullYear(),"-").concat(a.getMonth()),fetchPolicy:w.a.fetchPolicies.olderThan(3e4)}}}({accountId:n})},Bd=function(){var e=Object(H.e)(),t=e.t,a=e.f,n=Object(vt.a)(),o=Object(Ee.b)().isMobile,i=G(),l=i.account,u=i.isAllAccountsSelected,d=nc("CO2Emission.sendToDACC"),m=d.isLoading,p=d.value,f=void 0!==p&&p,b=Gd({isAllAccountsSelected:u,accountId:null==l?void 0:l._id}),v=Object(C.useQueryAll)(b.definition,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rd(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},b.options)),g=v.data,y=s()(v,Fd),h=Cr({hasConsent:f,measureName:j.D}).data;if(Object(C.isQueryLoading)(y)||y.hasMore)return r.a.createElement("div",{className:"u-mt-1 u-ph-half-s u-ph-2",style:{minHeight:"190px"}});var E=!m&&f,O=function(e){return{maintainAspectRatio:!1,scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{color:e.palette.text.secondary}},y:{grid:{color:e.palette.border.main,drawBorder:!1},ticks:{color:e.palette.text.secondary,callback:function(e,t){return t%2==0?"".concat(e," kg"):""}}}},plugins:{tooltip:{displayColors:!1}}}}(n),w=Id({theme:n,isMobile:o,oneYearOldTimeseries:g,sendToDACC:f,globalAverages:h,f:a,t:t});return r.a.createElement(Ld,{className:"u-mt-1 u-ph-half-s u-ph-2",title:t("vericalBarChart.title"),height:"190px",data:w,options:O},E&&r.a.createElement(Ad,null))},zd=a("33AU"),qd=function(e){var t=e.onDiscard,a=e.onAccept,n=Object(H.e)().t;return r.a.createElement(zd.a,{className:"u-mh-half-s u-mh-2 u-mb-half-s u-mb-1 u-mt-0-s u-mt-1 u-bdrs-4 u-pv-half u-pr-half",text:n("dacc.tripsCard.label"),icon:r.a.createElement(_t.a,{className:"u-ml-1",style:{marginTop:12,color:"var(--primaryColor)"},icon:Ml.a,size:16}),buttonOne:r.a.createElement(Q.a,{variant:"text",label:n("dacc.tripsCard.discard"),onClick:t}),buttonTwo:r.a.createElement(Q.a,{variant:"text",label:n("dacc.tripsCard.accept"),onClick:a}),bgcolor:"#EAF3FF",disableIconStyles:!0})};qd.propTypes={onDiscard:Bt.a.func.isRequired,onAccept:Bt.a.func.isRequired};var Yd=qd,Zd=new mo.a({id:"dacc-compare_095afa7eb600270496978dbb605e6b2d",use:"dacc-compare_095afa7eb600270496978dbb605e6b2d-usage",viewBox:"0 0 200 136",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 136" id="dacc-compare_095afa7eb600270496978dbb605e6b2d"><path fill="#fff" d="M0 0h200v136H0z" /><path d="M161 14.592c-1.888.222-7.568-.664-15.182-5.982-9.518-6.647-13.847-8.724-22.434-4.183C115 8.86 115.227 23.012 115 27M165.844 92c5.431-3.51 16.097-12.334 15.315-19.554-.977-9.025-12.708-11.282-22.81-10.78-10.101.501-17.596 4.512-28.349 1.504M23.495 72c-.329 4.729-2.425 21.765 5.479 27.308 9.88 6.928 23.668-1.244 30.831-5.203C66.97 90.146 79.072 83.217 85 85.527" stroke="#B2D3FF" stroke-width="4" stroke-linecap="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M62 118a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.899c1.777.371 3.182 1.857 3.472 3.649a4.507 4.507 0 0 1-2.828 4.953l-.112.039V117h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L62 113a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.399Z" fill="#38D1D3" /><circle cx="100" cy="64" fill="#297EF2" r="48" /><path fill-rule="evenodd" clip-rule="evenodd" d="M120.91 37.605a2.166 2.166 0 0 1 .235 3.055l-13 15.167a2.166 2.166 0 0 1-2.33.645L93.96 52.52 81.887 62.581a2.167 2.167 0 0 1-2.774-3.329l13-10.833a2.167 2.167 0 0 1 2.072-.391l11.618 3.873 12.052-14.061a2.166 2.166 0 0 1 3.055-.235Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M119.5 42.5a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-26 10.833a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-13 10.834a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm29.25-9.75a3.25 3.25 0 1 1-6.5 0 3.25 3.25 0 0 1 6.5 0ZM117.167 53.333a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V55.333a2 2 0 0 0-2-2h-4.666Zm-26 10.834a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V66.167a2 2 0 0 0-2-2h-4.666ZM78.167 75a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-4.666Zm24-4.5a2 2 0 0 1 2-2h4.666a2 2 0 0 1 2 2V86a2 2 0 0 1-2 2h-4.666a2 2 0 0 1-2-2V70.5Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M43 21a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm1.452-16.349c2.666.557 4.773 2.786 5.208 5.474a6.76 6.76 0 0 1-4.242 7.43l-.168.058V19.5h-4.5v-3.75c0-1.17.893-2.13 2.034-2.24L43 13.5a2.25 2.25 0 1 0-2.24-2.468l-.01.218h-4.5a6.758 6.758 0 0 1 8.202-6.599Z" fill="#72E7E9" /><path fill-rule="evenodd" clip-rule="evenodd" d="M69 19a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L69 16.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 42a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 39.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2ZM20 14a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L20 11.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M26 33a1.125 1.125 0 1 1 0 2.25A1.125 1.125 0 0 1 26 33Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.12 3.715l-.085.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12L26 29.25a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M39 116.5a.938.938 0 1 1 0 1.876.938.938 0 0 1 0-1.876Zm.605-6.812a2.811 2.811 0 0 1 2.17 2.281 2.816 2.816 0 0 1-1.767 3.095l-.07.025v.786h-1.875v-1.563c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 90a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 87.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M184 99a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V98h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L184 94a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M191 64a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M134 18a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.585.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M118 119a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2ZM153 55a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L153 52.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M81 118a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.25 2.25 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L81 115.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M177 124a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M164 75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L164 72.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M92 8.5a.937.937 0 1 1 0 1.875.937.937 0 0 1 0-1.875Zm.605-6.812a2.81 2.81 0 0 1 2.17 2.28 2.817 2.817 0 0 1-1.767 3.096l-.07.025v.786h-1.875V6.312c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#72E7E9" /><circle cx="148" cy="104" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 106c-4.418 0-8-4.029-8-9 0-4.97 3.582-9 8-9s8 4.03 8 9c0 4.971-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 101a1.5 1.5 0 1 1-.001 3.001A1.5 1.5 0 0 1 148 101Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V100h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L148 96a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="148" cy="104" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="24" cy="65" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 67c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9ZM8 77c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4H10c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 62a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V61h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L24 57a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="24" cy="65" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="172" cy="28" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 30c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V24h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L172 20a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="172" cy="28" r="20" stroke="#B9F6F7" stroke-width="8" /><path d="M66.418 133.29a81.818 81.818 0 0 0 16.142 2.244c16.166.948 38.758.424 48.325-1.346 9.567-1.771 10.083-4.465-14.448-5.812-20.925-1.147-45.26.474-50.362 2.894-1.52.648-1.447 1.371.343 2.02Z" fill="#BBD9FD" /></symbol>'}),Qd=(fo.a.add(Zd),Zd),Vd=function(e){var t=e.open,a=e.onClose,n=e.showDaccPermissionsDialog,o=Object(H.e)().t;return r.a.createElement(V.a,{open:t,onClose:a,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(_t.a,{className:"u-mv-1",icon:Qd,width:200,height:136}),r.a.createElement(U.a,{variant:"h3"},o("dacc.compareDialog.title")),r.a.createElement(U.a,{className:"u-mt-1"},o("dacc.compareDialog.primaryText")),r.a.createElement(U.a,{className:"u-mt-1"},o("dacc.compareDialog.secondaryText"))),actions:r.a.createElement(Q.a,{label:o("dacc.compareDialog.action"),onClick:n})})};Vd.propTypes={open:Bt.a.bool.isRequired,onClose:Bt.a.func.isRequired,showDaccPermissionsDialog:Bt.a.func.isRequired};var Ud=Vd;function Hd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Wd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Hd(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Hd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Jd=function(){var e=Object(H.e)().t,t=Object(n.useState)(!1),a=Z()(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=Z()(c,2),s=l[0],u=l[1],d=nc("CO2Emission"),m=d.isLoading,p=d.value,f=void 0===p?{}:p,b=d.save;if(m)return null;var v=f.showAlert,g=void 0===v||v,y=f.sendToDACC,h=void 0!==y&&y;return r.a.createElement(r.a.Fragment,null,g&&!h&&r.a.createElement(Yd,{onDiscard:function(){b(Wd(Wd({},f),{},{showAlert:!1}))},onAccept:function(){return i(!0)}}),r.a.createElement(Ud,{open:o,onClose:function(){return i(!1)},showDaccPermissionsDialog:function(){i(!1),u(!0)}}),s&&r.a.createElement(Vc,{onClose:function(){return u(!1)},onRefuse:function(){return u(!1)},onAccept:function(){b(Wd(Wd({},f),{},{showAlert:!1,sendToDACC:!0})),u(!1)},componentProps:{DaccPermissionsDialog:{sharedDataLabel:e("dacc.permissionsDialog.anonymized_emissions")}}}))};Jd.propTypes={};var Kd=Jd,Xd=function(e){var t=e.onDiscard,a=e.onParticipate,n=Object(H.e)().t;return r.a.createElement(Dn.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,icon:r.a.createElement(_t.a,{icon:Ml.a}),action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{variant:"text",label:n("bikeGoal.alert.actions.discard"),onClick:t}),r.a.createElement(Q.a,{variant:"text",label:n("bikeGoal.alert.actions.participate"),onClick:a}))},r.a.createElement(_n.a,null,n("bikeGoal.alert.title")),n("bikeGoal.alert.text"))};Xd.propTypes={onDiscard:Bt.a.func,onParticipate:Bt.a.func};var $d=Xd,em=function(){var e=Object(ke.h)(),t=nc("bikeGoal.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save;return a||o?r.a.createElement($d,{onParticipate:function(){e("bikegoalonboarding")},onDiscard:function(){i(!1)}}):null},tm=function(){var e=Object(H.e)().t,t=Object(ke.h)(),a=nc("bikeGoal.showAlertSuccess").save;return r.a.createElement(Dn.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,severity:"success",action:r.a.createElement(Q.a,{variant:"text",color:"success",label:e("bikeGoal.alert.success.action",{smart_count:tr()||-1}),onClick:function(){a(!1);var e=(new Date).getFullYear().toString();t("".concat(e,"/certificate/generate"))}})},e("bikeGoal.alert.success.text"))},am=["data"],nm=["data"];function rm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function om(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rm(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var im={paper:{gap:"1rem"},div:{height:65}},cm=function(){var e,t=Object(H.e)().t,a=Object(ke.h)(),n=G(),o=n.account,i=n.isAccountLoading,c=n.isAllAccountsSelected,l=M(),u=Object(C.useQuery)(l.definition,l.options),d=u.data,m=s()(u,am),p=Object(C.isQueryLoading)(m),f=function(e){var t=e.isAllAccountsSelected,a=e.accountId;return t?P():T({accountId:a})}({accountId:null==o?void 0:o._id,isAllAccountsSelected:c}),b=Object(C.useQueryAll)(f.definition,om(om({},f.options),{},{enabled:Boolean(o)||c})),v=b.data,g=s()(b,nm),y=Object(C.isQueryLoading)(g)||g.hasMore;if(i||y||p)return r.a.createElement(Pn.a,{elevation:2,className:"u-flex u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start"},r.a.createElement(ao.b,{size:"xlarge",className:"u-m-1"}));var h=(new Date).getFullYear().toString(),E=yn(v,h),O=!(null==d||null===(e=d[0].bikeGoal)||void 0===e||!e.sendToDACC);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn.a,{elevation:2,className:"u-flex u-flex-items-start-s u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-p-1 u-c-pointer",style:im.paper,onClick:function(){return a("/bikegoal/".concat(h,"/trips"))}},r.a.createElement("div",{style:im.div},r.a.createElement(_r,{timeseries:E,sendToDACC:O,size:"small"})),r.a.createElement("div",null,r.a.createElement(U.a,{variant:"h6"},t("bikeGoal.title")),O?r.a.createElement(Ni,{timeseries:E}):r.a.createElement(Fi,{timeseriesByYear:E,variant:"caption",preLine:!0}))))},lm=["data"],sm=["data"],um=["data"];function dm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function mm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dm(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pm={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},fm=function(){var e,t,a,n,o,i=Object(H.e)().t,c=Object(Ee.b)().isMobile,l=G(),d=l.account,m=l.isAccountLoading,p=l.isAllAccountsSelected,f=Object(C.useClient)().getStackClient().uri,b={definition:Object(C.Q)(u.j).getById("context"),options:{as:"".concat(u.j,"/context"),fetchPolicy:w.a.fetchPolicies.olderThan(1e8),singleDocData:!0}},v=Object(C.useQuery)(b.definition,b.options),g=v.data,y=s()(v,lm),h=M(),E=Object(C.useQuery)(h.definition,h.options),O=E.data,j=s()(E,sm),x=function(e){var t=e.isAllAccountsSelected,a=e.accountId;return t?P():T({accountId:a})}({accountId:null==d?void 0:d._id,isAllAccountsSelected:p}),k=Object(C.useQueryAll)(x.definition,mm(mm({},x.options),{},{enabled:Boolean(d)||p})),D=k.data,_=s()(k,um),S=Object(C.isQueryLoading)(_)||_.hasMore,A=Object(C.isQueryLoading)(j),N=Object(C.isQueryLoading)(y);if(A||(m||S)||N)return null;var L=null==g||null===(e=g.logos)||void 0===e||null===(t=e.coachco2)||void 0===t||null===(a=t.light)||void 0===a?void 0:a[0],I=(new Date).getFullYear().toString(),F=yn(D,I),R=null!==(n=null==O||null===(o=O[0])||void 0===o?void 0:o.bikeGoal)&&void 0!==n?n:{},B=R.activated,z=void 0!==B&&B,q=R.showAlert,Y=void 0===q||q,Z=R.showAlertSuccess,Q=void 0===Z?nr(F,O):Z;return z||Y?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:"u-mb-1-s u-mt-1 u-mb-1-s u-mb-2 u-mh-1 u-flex u-flex-justify-between",variant:"h5"},i("bikeGoal.goals"),L&&r.a.createElement("img",{src:"".concat(f,"/assets").concat(L.src),alt:L.alt})),Y&&r.a.createElement(em,null),z&&r.a.createElement(r.a.Fragment,null,Q&&r.a.createElement(tm,null),r.a.createElement(cm,null)),c&&r.a.createElement(Dt.a,{style:pm.divider})):null},bm=["data"];function vm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vm(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vm(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ym={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},hm=function(){var e=G(),t=e.account,a=e.isAccountLoading,n=e.isAllAccountsSelected,o=Object(H.e)().t,i=Object(Ee.b)().isMobile,c=function(e){var t=e.isAllAccountsSelected,a=e.accountId;return t?D({limit:50}):_({accountId:a,limitBy:50})}({isAllAccountsSelected:n,accountId:null==t?void 0:t._id}),l=Object(C.useQuery)(c.definition,gm(gm({},c.options),{},{enabled:Boolean(t)||n})),u=l.data,d=s()(l,bm);if(a)return r.a.createElement(Oi.a,{count:8,hasSecondary:!0,divider:!0});if((t||n)&&Object(C.isQueryLoading)(d)&&!Object(C.hasQueryBeenLoaded)(d))return r.a.createElement(Oi.a,{count:8,hasSecondary:!0,divider:!0});if(!n&&!t||!u||0===(null==u?void 0:u.length))return r.a.createElement(qo,null);var m=n?o("trips.allTrips"):"".concat(o("trips.from")," ").concat(B(t));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ko,{label:m}),X()("coachco2.bikegoal.enabled")&&r.a.createElement(fm,null),r.a.createElement(Bd,null),r.a.createElement(Kd,null),i&&r.a.createElement(Dt.a,{style:ym.divider}),r.a.createElement(An,{timeseries:u}),d.hasMore&&r.a.createElement(mc.a,{label:o("loadMore"),fetchMore:d.fetchMore}))},Em=a("mJLf"),Om=(a("cRRo"),a("R34t")),jm=a("Qy9h"),Cm=a("BkYy"),wm=a("hXCt"),xm=a("yKoJ"),km=a("pJCX"),Dm=function(){var e=Object(ke.j)().fileId,t=Object(ke.h)(),a=Object(C.useClient)(),n=function(e){return{definition:function(){return Object(C.Q)(u.g).getById(e)},options:{as:"".concat(u.g,"/").concat(e),fetchPolicy:w.a.fetchPolicies.olderThan(1e8)}}}(null!=e?e:null),o=Object(C.useQuery)(n.definition,n.options);return Object(C.hasQueryBeenLoaded)(o)?r.a.createElement(Em.a,{client:a,doctype:u.g,documentType:"Files"},r.a.createElement(Cm.a,{files:o.data,currentIndex:0,onCloseRequest:function(){return t("..")}},r.a.createElement(wm.a,null,r.a.createElement(km.a,null),r.a.createElement(xm.a,null)))):r.a.createElement(jm.a,{open:!0},r.a.createElement(Om.a,{open:!0},r.a.createElement(ao.b,{size:"xxlarge",middle:!0,noMargin:!0,color:"var(--primaryContrastTextColor)"})))},_m=function(e){var t=e.Component;return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,null),r.a.createElement(ke.b,null))},Sm=function(){var e=(new Date).getFullYear();return r.a.createElement(De.a,null,r.a.createElement(ke.e,null,r.a.createElement(ke.c,{path:"/",element:r.a.createElement(Wn,null)},r.a.createElement(ke.c,{path:"trips",element:r.a.createElement(_m,{Component:hm})},r.a.createElement(ke.c,{path:"certificate/:fileId",element:r.a.createElement(Dm,null)}),r.a.createElement(ke.c,{path:":year/certificate/generate",element:r.a.createElement(ro,null)}),r.a.createElement(ke.c,{path:":timeserieId",element:r.a.createElement(Sd,null)}),X()("coachco2.bikegoal.enabled")&&r.a.createElement(ke.c,{path:"bikegoalonboarding",element:r.a.createElement(Dl,null)})),r.a.createElement(ke.c,{path:"settings",element:r.a.createElement(_m,{Component:Es})},X()("coachco2.bikegoal.enabled")&&r.a.createElement(ke.c,{path:"bikegoalonboarding",element:r.a.createElement(Dl,null)})),r.a.createElement(ke.c,{path:"analysis/",element:r.a.createElement(xi,null)},r.a.createElement(ke.c,{path:"modes",element:r.a.createElement(_m,{Component:In})}),r.a.createElement(ke.c,{path:"modes/:mode",element:r.a.createElement(_m,{Component:In})},r.a.createElement(ke.c,{path:":timeserieId",element:r.a.createElement(Sd,null)})),r.a.createElement(ke.c,{path:"purposes",element:r.a.createElement(_m,{Component:Rn})}),r.a.createElement(ke.c,{path:"purposes/:purpose",element:r.a.createElement(_m,{Component:Rn})},r.a.createElement(ke.c,{path:":timeserieId",element:r.a.createElement(Sd,null)}))),X()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.c,{path:"bikegoal/:year/trips",element:r.a.createElement(_m,{Component:Cc})},r.a.createElement(ke.c,{path:"certificate/:fileId",element:r.a.createElement(Dm,null)}),r.a.createElement(ke.c,{path:":timeserieId",element:r.a.createElement(Sd,null)}),r.a.createElement(ke.c,{path:"edit",element:r.a.createElement(Nc,null)}),r.a.createElement(ke.c,{path:"about",element:r.a.createElement(wc,null)}),r.a.createElement(ke.c,{path:"certificate/generate",element:r.a.createElement(ro,null)}))),X()("coachco2.bikegoal.enabled")&&r.a.createElement(ke.c,{path:"bikegoal",element:r.a.createElement(ke.a,{replace:!0,to:"/bikegoal/".concat(e,"/trips")})}),r.a.createElement(ke.c,{path:"/",element:r.a.createElement(ke.a,{replace:!0,to:"/trips"})}),r.a.createElement(ke.c,{path:"*",element:r.a.createElement(ke.a,{replace:!0,to:"/trips"})}))))},Pm=a("8Bbg"),Tm=a("cyLt"),Am=a("f2KQ"),Mm=a("/jyu"),Nm=function(e,t){return/^\{\{\..*\}\}$/.test(e)?t:e},Lm=function(e){var t=e.app,n=e.locale,r={appIconDefault:a("J3iu"),appNamePrefixDefault:Tl.a.name_prefix,appNameDefault:Tl.a.name,appLocaleDefault:"en"};return{appName:Nm(t.name,r.appNameDefault),appNamePrefix:Nm(t.prefix,r.appNamePrefixDefault),iconPath:Nm(t.icon,r.appIconDefault),lang:Nm(n,r.appLocaleDefault)}},Im=a("+s1f"),Fm=a("8XZk");function Rm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Gm(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rm(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Bm=function(){var e=m()(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query(M().definition);case 2:if(a=e.sent,n=a.data,!(r=n[0]||{}).account){e.next=8;break}return e.next=8,t.save(Gm(Gm({},r),{},{_type:u.c,account:null,isAllAccountsSelected:!0}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zm=Pa()((function(){var e,t,n,r,o=document.querySelector("[role=application]"),i=Lm(JSON.parse(o.dataset.cozy)),c=i.lang,l=i.appName,s=Object(Fm.a)(c,(function(e){return a("eUFy")("./".concat(e))})),d=(e=document.querySelector("[role=application]"),t=JSON.parse(e.dataset.cozy),n=window.location.protocol,r="".concat(n,"//").concat(t.domain),new w.a({uri:r,token:t.token,appMetadata:{slug:Tl.a.name,version:Tl.a.version},schema:u.k,store:!1}));return d.registerPlugin(X.a.plugin),d.registerPlugin(Im.RealtimePlugin),X()("coachco2.forceAllSelectedAccount.disabled")||Bm(d),Am.a({dsn:"https://9f18ae40b7a3ec801af8fcee845bca53@errors.cozycloud.cc/67",environment:"production",release:Tl.a.version,integrations:[new Tm.a({levels:["error"]}),new Mm.a],tracesSampleRate:1,defaultIntegrations:!1}),function(e){var t=e.client,a=e.container,n=e.lang,r=e.appName,o=Lm(JSON.parse(a.dataset.cozy)),i=o.appNamePrefix,c=o.iconPath;cozy.bar.init({appName:r,appNamePrefix:i,cozyClient:t,iconPath:c,lang:n,replaceTitleOnMobile:!1})}({client:d,container:o,lang:c,appName:l}),{container:o,client:d,lang:c,polyglot:s}}));Object(Pm.a)(),document.addEventListener("DOMContentLoaded",(function(){var e,t,a,n,i;e=zm(),t=e.container,a=e.client,n=e.lang,i=e.polyglot,Object(o.createRoot)(t).render(r.a.createElement(xe,{client:a,lang:n,polyglot:i},r.a.createElement(Sm,null)))}))},"v5t+":function(e,t,a){e.exports=a.p+"PlusJakartaSans.ttf"},vVt6:function(e,t,a){e.exports=a.p+"Lato.ttf"}});