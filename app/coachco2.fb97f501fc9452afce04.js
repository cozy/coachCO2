!function(e){function t(t){for(var r,c,i=t[0],u=t[1],l=t[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={0:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;o.push([0,1]),n()}({"/KVF":function(e,t,n){var r={"./en":"7dT6","./en.json":"7dT6","./fr":"9pOX","./fr.json":"9pOX"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="/KVF"},"/kYV":function(e,t,n){},0:function(e,t,n){n("55Il"),n("7NIr"),e.exports=n("LiWt")},1:function(e,t){},"2E0U":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("qxfp"),a="io.cozy.apps";t.b={todos:{doctype:r.j,attributes:{},relationships:{}},files:{doctype:"io.cozy.files",attributes:{},relationships:{}}}},"3zCr":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("J4zp"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=n("k4gI"),u=n("q54A"),l=n("iFCN"),s=n("uPPc"),d=n("IAR5"),f={mediumHeightRatio:.66},p=function(e){var t=e.titleRef,n=Object(o.useState)(0),r=a()(n,2),p=r[0],m=r[1],b=Object(o.useMemo)((function(){return{height:p}}),[p]),j=Object(o.useMemo)((function(){return function(e){var t=e.toolbarHeight;return{mapContainer:{height:"calc(100vh - ".concat(t,"px - var(--sidebarHeight) - env(safe-area-inset-bottom))")}}}({toolbarHeight:p})}),[p]);return Object(o.useEffect)((function(){null!=t&&t.current&&m(t.current.offsetHeight)}),[t]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"u-w-100 u-pos-fixed",style:j.mapContainer},c.a.createElement(d.a,null)),c.a.createElement(i.a,{settings:f,toolbarProps:b},c.a.createElement(u.a,{className:"u-h-3 u-pb-half"},c.a.createElement(l.a,null)),c.a.createElement(s.a,null)))};t.b=c.a.memo(p)},"6QpA":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("J4zp"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=Object(o.createContext)();t.b=function(e){var t=e.children,n=Object(o.useState)(null),r=a()(n,2),u=r[0],l=r[1];return c.a.createElement(i.Provider,{value:{selectedAccount:u,setSelectedAccount:l}},t)}},"6ibL":function(e,t,n){"use strict";n.d(t,"j",(function(){return _})),n.d(t,"n",(function(){return h})),n.d(t,"g",(function(){return x})),n.d(t,"h",(function(){return E})),n.d(t,"e",(function(){return L})),n.d(t,"i",(function(){return P})),n.d(t,"l",(function(){return N})),n.d(t,"k",(function(){return A})),n.d(t,"m",(function(){return T})),n.d(t,"f",(function(){return B})),n.d(t,"d",(function(){return R})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return H})),n.d(t,"a",(function(){return V}));var r=n("lSNA"),a=n.n(r),o=n("mwIZ"),c=n.n(o),i=n("TYy9"),u=n.n(i),l=n("7tbW"),s=n.n(l),d=n("44Ds"),f=n.n(d),p=n("NmtT"),m=n.n(p),b=n("jxQj"),j=n.n(b),v=n("qxfp"),O=n("zyvo"),y=n("6k9G");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){return c()(e,"properties.manual_purpose")},h=function(e){return c()(e,"properties.start_place.data.properties.display_name")},x=function(e){return c()(e,"properties.end_place.data.properties.display_name")},E=function(e){var t=new Date(e.properties.start_fmt_time),n=new Date(e.properties.end_fmt_time);return m()(n,t)},w=function(e){var t="m",n=e;return e>1e3&&(t="km",n=e/1e3),"".concat(Math.round(n)," ").concat(t)},L=function(e){return w(e.properties.distance)},k=function(e){var t=c()(e,"properties.manual_mode"),n=c()(e,"properties.sensed_mode"),r=n&&n.split("PredictedModeTypes.")[1],a=y.b.includes(r);return t||a&&r||v.Q},M=function(e){return e.features.map((function(e){return k(e)}))},D=function(e){return c()(e,"features[0].properties.distance")},S=function(e,t){return D(e)>D(t)?-1:1},P=function(e){return s()(u()(e.features.filter((function(e){return"FeatureCollection"===e.type})).sort(S).map(M)).filter(Boolean))},I=function(e){return e.features.map((function(e){var t=c()(e,"properties.start_fmt_time"),n=c()(e,"properties.end_fmt_time"),r=c()(e,"properties.speeds");return{id:e.id,mode:k(e),coordinates:c()(e,"geometry.coordinates"),timestamps:c()(e,"properties.timestamps"),distance:c()(e,"properties.distance"),distances:c()(e,"properties.distances"),duration:c()(e,"properties.duration"),startDate:t?new Date(t):t,endDate:n?new Date(n):n,speeds:r,averageSpeed:r?z(r):void 0}}))},N=f()((function(e){return e.features.filter((function(e){return"FeatureCollection"===e.type})).flatMap(I)})),A=function(e,t){var n=N(e),r=["fr","en"].includes(t)?t:"en";return n.map((function(e){return g(g({},e),{},{distance:"".concat(w(e.distance)),duration:"".concat(j()(1e3*e.duration,{delimiter:" ",largest:2,round:!0,units:["h","m"],language:r,languages:{fr:{d:function(){return"j"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}},en:{d:function(){return"d"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}}}})),averageSpeed:"".concat(Math.round(e.averageSpeed)," km/h")})}))},T=function(e){return new Date(e.properties.start_fmt_time)},B=function(e){return new Date(e.properties.end_fmt_time)},R=function(e){var t=e.f,n=e.lang,r=e.date;return t(r,"fr"===n?"HH[h]mm":"HH:mm")},z=function(e){return 3.6*(e.reduce((function(e,t){return e+t}),0)/e.length)},F=function(e){var t,n=Object(O.c)(e);return t=n,"".concat(Math.round(t)," kcal")},H=function(e){return"".concat(Math.round(100*e)/100," kg")},V=function(e){var t=Object(O.b)(e);return H(t)}},"6k9G":function(e,t,n){"use strict";n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return Z})),n.d(t,"a",(function(){return q})),n.d(t,"f",(function(){return U})),n.d(t,"d",(function(){return Q})),n.d(t,"e",(function(){return W}));var r=n("lSNA"),a=n.n(r),o=n("4BeY"),c=n.n(o),i=n("IaFt"),u=n.n(i),l=new c.a({id:"icon-bike_65d46ca584727420e1c29afb24e1e3b9",use:"icon-bike_65d46ca584727420e1c29afb24e1e3b9-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-bike_65d46ca584727420e1c29afb24e1e3b9">\n<path d="M12.5 3C12.5 4.10457 11.6046 5 10.5 5C9.39543 5 8.5 4.10457 8.5 3C8.5 1.89543 9.39543 1 10.5 1C11.6046 1 12.5 1.89543 12.5 3Z" />\n<path d="M8.45697 7.54303C8.63931 7.69896 8.83598 7.85182 9.04516 7.9962C9.81647 8.52854 10.8381 9 12 9C12.5523 9 13 8.55228 13 8C13 7.44772 12.5523 7 12 7C11.3793 7 10.7507 6.74323 10.1812 6.35018C9.61222 5.95746 9.1823 5.48301 8.97738 5.18643C8.72314 4.81846 8.27236 4.5 7.70064 4.5C7.30696 4.5 6.9294 4.65639 6.65102 4.93476L4.44715 7.13864C4.16084 7.42494 4 7.81325 4 8.21815C4 8.72859 4.2551 9.20525 4.67982 9.48839L7 11.0352V14C7 14.5523 7.44772 15 8 15C8.55228 15 9 14.5523 9 14V10.5C9 10.1656 8.8329 9.85342 8.5547 9.66795L7.22111 8.77889L8.45697 7.54303Z" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16 13C16 14.6569 14.6569 16 13 16C11.3431 16 10 14.6569 10 13C10 11.3431 11.3431 10 13 10C14.6569 10 16 11.3431 16 13ZM14.5 13C14.5 13.8284 13.8284 14.5 13 14.5C12.1716 14.5 11.5 13.8284 11.5 13C11.5 12.1716 12.1716 11.5 13 11.5C13.8284 11.5 14.5 12.1716 14.5 13Z" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16C4.65685 16 6 14.6569 6 13C6 11.3431 4.65685 10 3 10C1.34315 10 0 11.3431 0 13C0 14.6569 1.34315 16 3 16ZM3 14.5C3.82843 14.5 4.5 13.8284 4.5 13C4.5 12.1716 3.82843 11.5 3 11.5C2.17157 11.5 1.5 12.1716 1.5 13C1.5 13.8284 2.17157 14.5 3 14.5Z" />\n</symbol>'}),s=(u.a.add(l),l),d=new c.a({id:"icon-bus_415f853847fd170ca8b598425515dddb",use:"icon-bus_415f853847fd170ca8b598425515dddb-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-bus_415f853847fd170ca8b598425515dddb">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1 11C1 11.88 1.39 12.67 2 13.22V14.5C2 15.33 2.67 16 3.5 16C4.33 16 5 15.33 5 14.5V14H11V14.5C11 15.32 11.67 16 12.5 16C13.32 16 14 15.33 14 14.5V13.22C14.61 12.67 15 11.88 15 11V4C15 1 12 0 8 0C4 0 1 1 1 4V11ZM4.5 12C3.67 12 3 11.33 3 10.5C3 9.67 3.67 9 4.5 9C5.33 9 6 9.67 6 10.5C6 11.33 5.33 12 4.5 12ZM11.5 12C10.67 12 10 11.33 10 10.5C10 9.67 10.67 9 11.5 9C12.33 9 13 9.67 13 10.5C13 11.33 12.33 12 11.5 12ZM13 7H3V3H13V7Z" />\n</symbol>'}),f=(u.a.add(d),d),p=n("cStB"),m=new c.a({id:"icon-plane_22e9ed98beea0170553db3e03775b4b4",use:"icon-plane_22e9ed98beea0170553db3e03775b4b4-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-plane_22e9ed98beea0170553db3e03775b4b4">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5388 0.461149C14.915 -0.162685 13.9003 -0.15226 13.2895 0.484295L9.87894 4.08068L2.02506 1.13549C1.83777 1.06526 1.62671 1.11097 1.48527 1.25241L0.149401 2.58828C-0.0498005 2.78748 -0.0498005 3.11045 0.149401 3.30965C0.18146 3.34171 0.217649 3.36935 0.257014 3.39184L6.81841 7.14119L3.24779 10.7118L1.50892 10.2771C1.32376 10.2308 1.12825 10.2917 1.00219 10.435L0.140789 11.4144C-0.0452691 11.6259 -0.0246203 11.9482 0.18691 12.1343C0.227083 12.1696 0.272564 12.1984 0.321687 12.2196L2.7377 13.2622L3.78034 15.6782C3.89196 15.9369 4.19213 16.0561 4.45079 15.9444C4.49991 15.9232 4.54539 15.8945 4.58557 15.8591L5.56489 14.9977C5.7082 14.8717 5.76915 14.6762 5.72286 14.491L5.28814 12.7521L8.85876 9.18153L12.6081 15.7429C12.7479 15.9875 13.0595 16.0725 13.3041 15.9327C13.3434 15.9102 13.3796 15.8826 13.4117 15.8505L14.7476 14.5146C14.889 14.3732 14.9347 14.1621 14.8645 13.9749L11.9193 6.12102L15.5157 2.71053C16.1523 2.09964 16.1627 1.08502 15.5388 0.461149Z" />\n</symbol>'}),b=(u.a.add(m),m),j=new c.a({id:"icon-subway_33456d57d4027cd371ae5a4f7d484e6b",use:"icon-subway_33456d57d4027cd371ae5a4f7d484e6b-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-subway_33456d57d4027cd371ae5a4f7d484e6b">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.64 0.64C11.2 0.072 9.488 0 8 0C6.512 0 4.8 0.072 3.36 0.64C1.224 1.472 0 3.24 0 5.488V16H16V5.488C16 3.24 14.776 1.472 12.64 0.64ZM13 5.85714V10.8571C13 11.9278 12.2148 12.8151 11.1888 12.9745L12.2857 14.0714V14.4286H10.8571L9.42857 13H6.57143L5.14286 14.4286H3.71429V14.0714L4.81122 12.9745C3.78523 12.8151 3 11.9278 3 10.8571V5.85714C3 3.71429 5.14286 3 8 3C10.8571 3 13 3.71429 13 5.85714ZM4.42857 5.14286V8H11.5714V5.14286H4.42857ZM6.57143 10.5C6.57143 11.0917 6.09173 11.5714 5.5 11.5714C4.90827 11.5714 4.42857 11.0917 4.42857 10.5C4.42857 9.90827 4.90827 9.42857 5.5 9.42857C6.09173 9.42857 6.57143 9.90827 6.57143 10.5ZM10.5 11.5714C11.0917 11.5714 11.5714 11.0917 11.5714 10.5C11.5714 9.90827 11.0917 9.42857 10.5 9.42857C9.90827 9.42857 9.42857 9.90827 9.42857 10.5C9.42857 11.0917 9.90827 11.5714 10.5 11.5714Z" />\n</symbol>'}),v=(u.a.add(j),j),O=new c.a({id:"icon-train_70170486ca87a512b7204fe36c85d93a",use:"icon-train_70170486ca87a512b7204fe36c85d93a-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-train_70170486ca87a512b7204fe36c85d93a">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15 4V11C15 12.4989 13.9007 13.7411 12.4643 13.9643L14 15.5V16H12L10 14H6L4 16H2V15.5L3.53571 13.9643C2.09932 13.7411 1 12.4989 1 11V4C1 1 4 0 8 0C12 0 15 1 15 4ZM3 7H7V3H3V7ZM9 3V7H13V3H9ZM6 10.5C6 11.3284 5.32843 12 4.5 12C3.67157 12 3 11.3284 3 10.5C3 9.67157 3.67157 9 4.5 9C5.32843 9 6 9.67157 6 10.5ZM11.5 12C12.3284 12 13 11.3284 13 10.5C13 9.67157 12.3284 9 11.5 9C10.6716 9 10 9.67157 10 10.5C10 11.3284 10.6716 12 11.5 12Z" />\n</symbol>'}),y=(u.a.add(O),O),C=new c.a({id:"icon-walk_3412ebb9703de376be3ce0e1998574bd",use:"icon-walk_3412ebb9703de376be3ce0e1998574bd-usage",viewBox:"0 0 16 17",content:'<symbol viewBox="0 0 16 17" xmlns="http://www.w3.org/2000/svg" id="icon-walk_3412ebb9703de376be3ce0e1998574bd">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.602 3.66294C10.2731 3.8827 9.88647 4 9.49091 4C8.96047 4 8.45177 3.78929 8.07669 3.41421C7.70162 3.03914 7.49091 2.53043 7.49091 2C7.49091 1.60444 7.6082 1.21776 7.82797 0.88886C8.04773 0.559962 8.36009 0.303617 8.72554 0.152242C9.09099 0.000866563 9.49312 -0.0387401 9.88109 0.0384303C10.269 0.115601 10.6254 0.306082 10.9051 0.585787C11.1848 0.865492 11.3753 1.22186 11.4525 1.60982C11.5296 1.99778 11.49 2.39992 11.3387 2.76537C11.1873 3.13082 10.9309 3.44318 10.602 3.66294ZM10.4807 7.39386C10.9048 7.75478 11.435 7.96757 11.9909 7.99998C12.2561 7.99998 12.5105 8.10533 12.698 8.29287C12.8855 8.48041 12.9909 8.73476 12.9909 8.99998C12.9909 9.26519 12.8855 9.51955 12.698 9.70708C12.5105 9.89462 12.2561 9.99998 11.9909 9.99998C11.4289 10.0037 10.8722 9.89107 10.3558 9.66905C9.83953 9.44703 9.37478 9.12048 8.9909 8.70998L8.3009 10.29L10.6309 12.23C10.7438 12.324 10.8346 12.4417 10.8968 12.5748C10.959 12.7079 10.9911 12.8531 10.9909 13V15C10.9909 15.2652 10.8855 15.5195 10.698 15.7071C10.5105 15.8946 10.2561 16 9.9909 16C9.72568 16 9.47133 15.8946 9.28379 15.7071C9.09626 15.5195 8.9909 15.2652 8.9909 15V13.47L6.4109 11.35L4.9309 15.35C4.83807 15.5993 4.65001 15.8015 4.40809 15.9121C4.16617 16.0228 3.8902 16.0328 3.6409 15.94C3.3916 15.8471 3.18938 15.6591 3.07873 15.4172C2.96809 15.1752 2.95807 14.8993 3.0509 14.65L5.8709 6.99998L4.7509 7.31998L3.9309 9.31998C3.83277 9.56663 3.64068 9.7642 3.39688 9.86922C3.15308 9.97424 2.87755 9.97811 2.6309 9.87998C2.38425 9.78185 2.18668 9.58975 2.08166 9.34596C1.97664 9.10216 1.97277 8.82663 2.0709 8.57998L3.0709 6.07998C3.12824 5.93757 3.2176 5.81028 3.33206 5.70796C3.44651 5.60565 3.58298 5.53106 3.7309 5.48998L7.0909 4.48998H7.2109C7.32042 4.47551 7.43138 4.47551 7.5409 4.48998H7.6409C8.08988 4.50248 8.5238 4.65464 8.88227 4.92529C9.24073 5.19593 9.50591 5.57158 9.6409 5.99998C9.76177 6.54357 10.0566 7.03293 10.4807 7.39386Z" />\n</symbol>'}),g=(u.a.add(C),C),_=new c.a({id:"icon-unknow_94cf41154b7a0fc55376c4d86e0f7d4b",use:"icon-unknow_94cf41154b7a0fc55376c4d86e0f7d4b-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-unknow_94cf41154b7a0fc55376c4d86e0f7d4b">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 12C8.82845 12 9.50002 12.6716 9.50002 13.5C9.50002 14.3284 8.82845 15 8.00002 15C7.1716 15 6.50002 14.3284 6.50002 13.5C6.50002 12.6716 7.1716 12 8.00002 12ZM8.96812 1.10088C10.7451 1.47188 12.1501 2.95788 12.4401 4.74988C12.7991 6.98088 11.5181 8.97188 9.61212 9.70288L9.50012 9.74188V10.9999H6.50012V8.49988C6.50012 7.72059 7.09539 7.07948 7.85573 7.00675L8.00012 6.99988C8.82812 6.99988 9.50012 6.32888 9.50012 5.49988C9.50012 4.67188 8.82812 3.99988 8.00012 3.99988C7.22012 3.99988 6.57912 4.59488 6.50712 5.35488L6.50012 5.49988H3.50012C3.50012 2.69888 6.06012 0.494882 8.96812 1.10088Z" />\n</symbol>'}),h=(u.a.add(_),_),x=n("5YfE"),E=new c.a({id:"icon-fitness_ae3c064360611de9597b4de211955fa5",use:"icon-fitness_ae3c064360611de9597b4de211955fa5-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-fitness_ae3c064360611de9597b4de211955fa5">\n<path d="M14.9825 9.2725L15.7025 8.5525C16.0925 8.1625 16.0925 7.5325 15.7025 7.1425L15.6825 7.1225C15.2925 6.7325 14.6625 6.7325 14.2725 7.1225L11.4125 9.9825L6.0125 4.5825L8.8725 1.7225C9.2625 1.3325 9.2625 0.7025 8.8725 0.3125L8.8525 0.2925C8.4625 -0.0975 7.8325 -0.0975 7.4425 0.2925L6.7225 1.0125L6.0025 0.2925C5.6125 -0.0975 4.9725 -0.0975 4.5825 0.2925L3.1525 1.7225L2.4325 1.0025C2.0425 0.6125 1.3925 0.6125 1.0025 1.0025C0.6125 1.3925 0.6125 2.0425 1.0025 2.4325L1.7225 3.1525L0.2925 4.5825C-0.0975 4.9725 -0.0975 5.6025 0.2925 5.9925L1.0125 6.7125L0.2925 7.4425C-0.0975 7.8325 -0.0975 8.4625 0.2925 8.8525L0.3125 8.8725C0.7025 9.2625 1.3325 9.2625 1.7225 8.8725L4.5825 6.0125L9.9825 11.4125L7.1225 14.2725C6.7325 14.6625 6.7325 15.2925 7.1225 15.6825L7.1425 15.7025C7.5325 16.0925 8.1625 16.0925 8.5525 15.7025L9.2725 14.9825L9.9925 15.7025C10.3825 16.0925 11.0125 16.0925 11.4025 15.7025L12.8325 14.2725L13.5525 14.9925C13.9425 15.3825 14.5925 15.3825 14.9825 14.9925C15.3725 14.6025 15.3725 13.9525 14.9825 13.5625L14.2625 12.8425L15.7025 11.4125C16.0925 11.0225 16.0925 10.3925 15.7025 10.0025L14.9825 9.2725Z" />\n</symbol>'}),w=(u.a.add(E),E),L=n("7aXT"),k=new c.a({id:"icon-mountain_c950b1445e1a5a610bbf83a694f50951",use:"icon-mountain_c950b1445e1a5a610bbf83a694f50951-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-mountain_c950b1445e1a5a610bbf83a694f50951">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.06484 7.65952L6.06157 7.66504L4.87157 5.54949C4.48927 4.86983 3.51073 4.86983 3.12842 5.54949L0.33827 10.5098C-0.0366953 11.1764 0.445019 12 1.20985 12H5.25245H6.79015H14.7475C15.5218 12 16.0024 11.1579 15.6085 10.4913L10.8609 2.45697C10.4739 1.80194 9.52613 1.80194 9.13907 2.45697L6.94654 6.1674L8.47368 8.88231C8.67676 9.24333 8.54872 9.70062 8.1877 9.90369C7.82668 10.1068 7.36939 9.97872 7.16632 9.61771L6.06484 7.65952Z" />\n</symbol>'}),M=(u.a.add(k),k),D=new c.a({id:"icon-movement_fbb1e0f518e951b9c4a8b059b9234d1f",use:"icon-movement_fbb1e0f518e951b9c4a8b059b9234d1f-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-movement_fbb1e0f518e951b9c4a8b059b9234d1f">\n<path d="M12.585 7.002H1.00087C0.448104 7.002 0 7.4501 0 8.00287C0 8.55573 0.448265 9.00388 1.00113 9.00374L12.583 9.002L11.2929 10.2929C10.9024 10.6834 10.9024 11.3166 11.2929 11.7071C11.6834 12.0976 12.3166 12.0976 12.7071 11.7071L15.7071 8.70711C16.0976 8.31658 16.0976 7.68342 15.7071 7.29289L12.7071 4.29289C12.3166 3.90237 11.6834 3.90237 11.2929 4.29289C10.9024 4.68342 10.9024 5.31658 11.2929 5.70711L12.5858 7L12.585 7.002Z" />\n</symbol>'}),S=(u.a.add(D),D),P=n("kJHp"),I=new c.a({id:"icon-restaurant_ee0665fcc223592f963a8c2e7a7a3f0d",use:"icon-restaurant_ee0665fcc223592f963a8c2e7a7a3f0d-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-restaurant_ee0665fcc223592f963a8c2e7a7a3f0d">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 0C13.1422 0 14.8911 1.68397 14.9951 3.80036L15 4V9C15 9.51284 14.614 9.93551 14.1166 9.99327L14 10H12.5V14.75C12.5 15.4404 11.9404 16 11.25 16C10.5596 16 10 15.4404 10 14.75V1C10 0.487164 10.386 0.0644928 10.8834 0.00672773L11 0ZM7 0C7.51284 0 7.93551 0.38604 7.99327 0.883379L8 1V5C8 6.57237 6.79034 7.86221 5.25087 7.98966L5.25 14.75C5.25 15.4404 4.69036 16 4 16C3.30964 16 2.75 15.4404 2.75 14.75L2.75013 7.98974C1.26813 7.86755 0.0915336 6.66814 0.00509269 5.17627L0 5V1C0 0.447715 0.447715 0 1 0C1.51284 0 1.93551 0.38604 1.99327 0.883379L2 1V5H3V1C3 0.447715 3.44772 0 4 0C4.51284 0 4.93551 0.38604 4.99327 0.883379L5 1V5H6V1C6 0.447715 6.44772 0 7 0Z" />\n</symbol>'}),N=(u.a.add(I),I),A=new c.a({id:"icon-restore_ecfa30b3f5b20551a9355968977efa9c",use:"icon-restore_ecfa30b3f5b20551a9355968977efa9c-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-restore_ecfa30b3f5b20551a9355968977efa9c">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 5C12.6569 5 14 6.34315 14 8C14 9.65685 12.6569 11 11 11H3C2.44771 11 2 11.4477 2 12C2 12.5523 2.44771 13 3 13H11C13.7614 13 16 10.7614 16 8C16 5.23858 13.7614 3 11 3H3.41421L4.70711 1.70711C5.09763 1.31658 5.09763 0.683417 4.70711 0.292893C4.31658 -0.0976311 3.68342 -0.0976311 3.29289 0.292893L0.292893 3.29289C-0.0976315 3.68342 -0.0976315 4.31658 0.292893 4.70711L3.29289 7.70711C3.68342 8.09763 4.31658 8.09763 4.70711 7.70711C5.09763 7.31658 5.09763 6.68342 4.70711 6.29289L3.41421 5H11Z" />\n</symbol>'}),T=(u.a.add(A),A),B=new c.a({id:"icon-school_203a4d6b33c17472cb6881d9b05a14fb",use:"icon-school_203a4d6b33c17472cb6881d9b05a14fb-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-school_203a4d6b33c17472cb6881d9b05a14fb">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.9993 9.102L13 11.9446C13 12.1252 12.9026 12.2918 12.7452 12.3804L8.24516 14.9121C8.09294 14.9977 7.90706 14.9977 7.75484 14.9121L3.25484 12.3804C3.09742 12.2918 3 12.1252 3 11.9446L2.9993 9.102L7.03054 11.2575C7.63525 11.5808 8.36475 11.5808 8.96946 11.2575L12.9993 9.102ZM8.16075 1.0235L8.26216 1.06528L15.7273 5.05696C15.8127 5.1026 15.8832 5.16965 15.9312 5.25079C16.0599 5.46829 16.0021 5.73734 15.8069 5.89111L15.7273 5.94304L8.26216 9.93472C8.13194 10.0044 7.97868 10.0183 7.83925 9.9765L7.73784 9.93472L2 6.867V11C2 11.5523 1.55228 12 1 12C0.447715 12 1.52471e-09 11.5523 1.52471e-09 11V5.5C-1.17714e-05 5.35234 0.0681539 5.20792 0.191876 5.10987L0.272674 5.05696L7.73784 1.06528C7.84202 1.00957 7.96093 0.98952 8.07573 1.00512L8.16075 1.0235Z" />\n</symbol>'}),R=(u.a.add(B),B),z=new c.a({id:"icon-shop_e47217e21158c920d44711e55007f73a",use:"icon-shop_e47217e21158c920d44711e55007f73a-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" id="icon-shop_e47217e21158c920d44711e55007f73a">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 13C5.32843 13 6 13.6716 6 14.5C6 15.3284 5.32843 16 4.5 16C3.67157 16 3 15.3284 3 14.5C3 13.6716 3.67157 13 4.5 13ZM12.5 13C13.3284 13 14 13.6716 14 14.5C14 15.3284 13.3284 16 12.5 16C11.6716 16 11 15.3284 11 14.5C11 13.6716 11.6716 13 12.5 13ZM2.49996 1C2.98882 1 3.40602 1.35344 3.48637 1.83564L3.847 4H14C14.5523 4 15 4.44772 15 5C15 5.05508 14.9954 5.11007 14.9864 5.1644L14.1257 10.3288C13.9649 11.2932 13.1306 12 12.1529 12H4.84696C3.86936 12 3.03502 11.2933 2.87421 10.329L1.652 3H1C0.487164 3 0.0644928 2.61396 0.00672773 2.11662L0 2C0 1.48716 0.38604 1.06449 0.883379 1.00673L1 1H2.49996Z" />\n</symbol>'}),F=(u.a.add(z),z),H=n("qxfp"),V=[H.a,H.b,H.d,H.f,H.M,H.P,H.R,H.Q],Z=function(e){switch(e){case H.a:return b;case H.b:return s;case H.f:return p.a;case H.d:return f;case H.M:return v;case H.P:return y;case H.R:return g;case H.Q:default:return h}},q=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.Q,n=(e={},a()(e,H.a,"#F05759"),a()(e,H.b,"#15CACD"),a()(e,H.d,"#BA5AE8"),a()(e,H.f,"#FF7B5E"),a()(e,H.M,"#8978FF"),a()(e,H.P,"#F1B61E"),a()(e,H.R,"#21B930"),a()(e,H.Q,"#A4A7AC"),e);return n[t]},U=[H.n,H.S,H.F,H.G,H.o,H.A,H.l,H.k,H.B,H.z],Q=function(e){switch(e){case H.n:return L.a;case H.S:return x.a;case H.F:return R;case H.G:return F;case H.o:return N;case H.A:return P.a;case H.l:return w;case H.k:return M;case H.B:return T;case H.z:default:return S}},W=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.z,n=(e={},a()(e,H.n,"#F1B61E"),a()(e,H.S,"#BA5AE8"),a()(e,H.F,"#8978FF"),a()(e,H.G,"#FF7B5E"),a()(e,H.o,"#15CACD"),a()(e,H.A,"#1CAAE8"),a()(e,H.l,"#21B930"),a()(e,H.k,"#F85AA8"),a()(e,H.B,"#C78542"),a()(e,H.z,"#A4A7AC"),e);return n[t]}},"7dT6":function(e){e.exports=JSON.parse('{"nav":{"trips":"Trips","analysis":"Analysis","modes":"Mode of travel","purposes":"Purpose of travel","settings":"Settings"},"account":{"notFound":"No account found"},"folder":{"administrative":"Administrative","coachco2":"Coach CO2"},"devices":{"select":"Select a device","label":"Data source"},"trips":{"from":"Trips from","modes":{"AIR_OR_HSR":"Plane","BICYCLING":"Bike","CAR":"Car","SUBWAY":"Subway","TRAIN":"Train","UNKNOWN":"Unknown","WALKING":"Walking","BUS":"Bus"},"purposes":{"HOME":"Home","WORK":"Work","SCHOOL":"School","SHOPPING":"Shopping","MEAL":"Meal","PERSONAL_MED":"Personal","EXERCISE":"Sport","ENTERTAINMENT":"Entertainment","PICK_DROP":"Pick & drop","OTHER_PURPOSE":"Unknown"},"duration":"Duration","distance":"Distance","calories":"Calories","co2":"CO2"},"loadMore":"Load more trips","tripEdit":{"selectMode":"Modify the transportation mode","selectPurpose":"Modify the travel purpose"},"purpose":"Reason for travel","analysis":{"mode":"Mode of travel","purpose":"Purpose of travel","travels":"%{smart_count} travel |||| %{smart_count} travel","emittedCO2":"emitted CO2"},"export":{"label":"Export","filename":"%{today} - Trips %{accountLabel}.csv","button":"Export trips in CSV","modal":{"button":{"close":"Close","viewInDrive":"View in Drive"},"title":"Exporting","content":{"done":"The \\"%{filename}\\" file was created in the \\"Drive%{pathAppDir}\\" folder of your Cozy.","progress":"The export of your trips is in progress, please wait..."}}}}')},"9muV":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("xjMU"),c=n("w7SU"),i=n("buk/"),u=n("SH7X"),l=n("6QpA"),s=n("dN3h"),d=n("YB/B"),f=n("yXPU"),p=n.n(f),m=n("J4zp"),b=n.n(m),j=n("o0o1"),v=n.n(j),O=n("aR52"),y=n("c8ah"),C=n("e5eR"),g=function(e){var t=e.onClose,n=e.appDir,r=e.fileCreated,o=e.linkToAppFolder,c=Object(i.e)().t;return a.a.createElement(C.a,{open:!0,onClose:n?t:void 0,title:c("export.modal.title"),content:n?a.a.createElement(y.a,{variant:"body1",color:"textPrimary"},c("export.modal.content.done",{filename:r.name,pathAppDir:n.path})):a.a.createElement(y.a,{variant:"body1",color:"textPrimary"},c("export.modal.content.progress")),actions:n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{variant:"secondary",onClick:t,label:c("export.modal.button.close")}),a.a.createElement(O.a,{href:o,target:"_blank",label:c("export.modal.button.viewInDrive")}))})},_=n("lSNA"),h=n.n(_),x=n("RIqP"),E=n.n(x),w=n("xweI"),L=n.n(w),k=n("cPJV"),M=n.n(k),D=n("6ibL"),S=n("qxfp"),P=n("iThD"),I=n("2E0U"),N=u.models.folder,A=N.MAGIC_FOLDERS,T=N.ensureMagicFolder,B=N.getReferencedFolder,R="".concat(I.a,"/coachco2"),z=function(){var e=p()(v.a.mark((function e(t,n){var r,a,o,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,{_id:R,_type:I.a});case 2:if(!(r=e.sent)){e.next=7;break}return e.abrupt("return",r);case 7:return e.next=9,T(t,A.ADMINISTRATIVE,"/".concat(n("folder.administrative")));case 9:return a=e.sent,o=a.path,e.next=13,T(t,A.COACH_CO2,"".concat(o,"/").concat(n("folder.coachco2")));case 13:return c=e.sent,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=u.models.file.uploadFileWithConflictStrategy,Z=function(e,t){return t("export.filename",{today:M()(new Date,"YYYY MM DD"),accountLabel:e})},q=function(e){return[Object.keys(e[0])].concat(E()(e)).map((function(e){return Object.values(e).map((function(e){return e?'"'.concat(e,'"'):" "})).toString()})).join("\n")},U=function(e){var t=e.flatMap((function(e){return Object(D.l)(e).map((function(t){var n,r,a=(n={},h()(n,S.g.sectionStartDate,t.startDate),h()(n,S.g.sectionEndDate,t.endDate),h()(n,S.g.sectionDuration,t.duration),h()(n,S.g.sectionDistance,t.distance),h()(n,S.g.sectionMode,t.mode),h()(n,S.g.sectionCoordinates,t.coordinates),h()(n,S.g.sectionDistances,t.distances),h()(n,S.g.sectionTimestamps,t.timestamps),h()(n,S.g.sectionSpeeds,t.speeds),n);return H(H({},(r={},h()(r,S.g.tripId,e.id),h()(r,S.g.tripStartDate,Object(D.m)(e)),h()(r,S.g.tripEndDate,Object(D.f)(e)),h()(r,S.g.tripStartDisplayName,Object(D.n)(e)),h()(r,S.g.tripArrivalDisplayName,Object(D.g)(e)),h()(r,S.g.tripPurpose,Object(D.j)(e)),r)),a)}))}));return L()(t,S.g.tripId)},Q=function(){var e=p()(v.a.mark((function e(t,n,r){var a,o,c,i,u,l,d,f,p,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.d)(),e.next=3,t.query(a.definition);case 3:if(o=e.sent,c=o.data,i=Object(P.e)(c),!((u=U(i)).length>0)){e.next=18;break}return l=q(u),d=Z(r,n),e.next=12,z(t,n);case 12:return f=e.sent,e.next=15,V(t,l,{name:d,contentType:"text/css",dirId:f._id,conflictStrategy:"rename"});case 15:return p=e.sent,m=p.data,e.abrupt("return",{appFolder:f,file:m});case 18:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),W=function(e){var t=e.accountName,n=Object(i.e)().t,o=Object(u.useClient)(),c=Object(r.useState)(!1),l=b()(c,2),s=l[0],d=l[1],f=Object(r.useState)(null),m=b()(f,2),j=m[0],y=m[1],C=Object(r.useState)(null),_=b()(C,2),h=_[0],x=_[1],E=Object(r.useState)(""),w=b()(E,2),L=w[0],k=w[1];Object(r.useEffect)((function(){if(j&&!L){var e=Object(u.generateWebLink)({slug:"drive",cozyUrl:o.getStackClient().uri,subDomainType:o.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(j._id)});k(e)}}),[j,o,L]);var M=Object(r.useCallback)(p()(v.a.mark((function e(){var r,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Q(o,n,t);case 3:r=e.sent,a=r.appFolder,c=r.file,x(c),y(a);case 8:case"end":return e.stop()}}),e)}))),[t,o,n]),D=Object(r.useCallback)((function(){d(!1),y(null),x(null)}),[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"u-mb-1-half"},a.a.createElement(O.a,{busy:!1,variant:"secondary",label:n("export.button"),onClick:M})),s&&a.a.createElement(g,{onClose:D,appDir:j,fileCreated:h,linkToAppFolder:L}))},G=Object(r.memo)(W);t.a=function(){var e,t,n=Object(i.e)().t,f=Object(r.useContext)(l.a),p=f.selectedAccount,m=f.setSelectedAccount,b=Object(s.a)(),j=Object(u.useQuery)(b.definition,b.options).data,v=Object(r.useMemo)((function(){return!j||j.length<1?[]:j.map((function(e){return{label:e.auth.login,_id:e._id}}))}),[j]),O=(null===(e=v[0])||void 0===e?void 0:e.label)||"",y=(null===(t=v[0])||void 0===t?void 0:t._id)||"";return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,null),a.a.createElement("div",{className:"u-mh-1 u-mv-1-half"},a.a.createElement("div",{className:"u-mb-1-half"},a.a.createElement(c.a,null,n("devices.label")),a.a.createElement(o.a,{options:v,value:{value:(null==p?void 0:p._id)||y,label:(null==p?void 0:p.label)||O},label:n("devices.label"),placeholder:n("devices.select"),onChange:m})),a.a.createElement(c.a,null,n("export.label")),a.a.createElement(G,{accountName:O})))}},"9pOX":function(e){e.exports=JSON.parse('{"nav":{"trips":"Déplacements","analysis":"Analyse","modes":"Mode de déplac.","purposes":"Raison du déplac.","settings":"Paramètres"},"account":{"notFound":"Aucun compte trouvé"},"folder":{"administrative":"Administratif","coachco2":"Coach CO2"},"devices":{"select":"Sélectionnez un appareil","label":"Source des données"},"trips":{"from":"Déplacements de","modes":{"AIR_OR_HSR":"Avion","BICYCLING":"Vélo","CAR":"Voiture","SUBWAY":"Métro","TRAIN":"Train","UNKNOWN":"Non reconnu","WALKING":"Marche","BUS":"Bus"},"purposes":{"HOME":"Domicile","WORK":"Travail","SCHOOL":"École","SHOPPING":"Achats","MEAL":"Repas","PERSONAL_MED":"Personnel","EXERCISE":"Sport","ENTERTAINMENT":"Loisir","PICK_DROP":"Dépose","OTHER_PURPOSE":"Indéfini"},"duration":"Durée","distance":"Distance","calories":"Calories","co2":"CO2"},"loadMore":"Charger plus de trajets","tripEdit":{"selectMode":"Modifier le mode de transport","selectPurpose":"Modifier la raison du déplacement"},"purpose":"Raison du déplacement","analysis":{"mode":"Mode de déplacement","purpose":"Raison du déplacement","travels":"%{smart_count} déplacement |||| %{smart_count} déplacements","emittedCO2":"CO2 émis"},"export":{"label":"Export","filename":"%{today} - Déplacements %{accountLabel}.csv","button":"Exporter les déplacements en CSV","modal":{"button":{"close":"Fermer","viewInDrive":"Voir dans Drive"},"title":"Exportation","content":{"done":"Le fichier \\"%{filename}\\" a été créé dans le dossier \\"Drive%{pathAppDir}\\" de votre Cozy.","progress":"L’export de vos déplacements est en cours, merci de patienter..."}}}}')},"B/ud":function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("Ty5D"),c=n("1I/2"),i=n("buk/"),u=n("YB/B"),l=n("QILm"),s=n.n(l),d=n("SH7X"),f=n("V2U0"),p=n("dN3h"),m=n("TSYQ"),b=n.n(m),j=n("cbAs"),v=n("iThD"),O=n("6ibL"),y=n("UI5b"),C=n("nIm6"),g=n("Kw70"),_=n("FZFE"),h=function(e){var t=e.timeseries,n=Object(o.i)().mode,u=Object(i.e)().t,l=Object(c.b)().isMobile,s=Object(r.useCallback)(Object(v.a)(t),[t]),d=Object(r.useCallback)(Object(v.c)(s),[s]),f=Object(r.useCallback)(Object(v.b)(s),[s]),p=Object(r.useCallback)(Object(y.a)(d,"modes",u),[u,d]),m=p.data,h=p.options,x=Object(r.useMemo)((function(){return n?Object(v.e)(d[n].timeseries):[]}),[n,d]);return n?a.a.createElement(_.a,{trips:x,timeseries:d[n].timeseries}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:b()("u-flex u-mt-1",{"u-flex-justify-end u-mr-2":!l,"u-flex-justify-center":l})},a.a.createElement(g.a,{data:m,options:h,total:Object(O.c)(f),label:u("analysis.emittedCO2")})),a.a.createElement(j.a,null,Object.entries(d).map((function(e,t){return a.a.createElement(C.a,{key:t,type:"modes",totalCO2:f,sortedTimeserie:e})}))))},x=["data"],E=function(){var e=Object(p.d)(),t=Object(d.useQuery)(e.definition,e.options),n=t.data,r=s()(t,x);return Object(d.isQueryLoading)(r)?a.a.createElement(f.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):a.a.createElement(h,{timeseries:n})},w=n("VaFe");t.a=function(){var e=Object(i.e)().t,t=Object(o.g)(),n=Object(o.i)().mode,r=Object(c.b)().isMobile,l=n?e("trips.modes.".concat(n)):"",s=n?t.goBack:void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{label:l,onBack:s}),r&&a.a.createElement(w.a,null),a.a.createElement(E,null))}},BdYW:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("Ty5D"),c=n("1I/2"),i=n("buk/"),u=n("YB/B"),l=n("VaFe"),s=n("QILm"),d=n.n(s),f=n("SH7X"),p=n("V2U0"),m=n("dN3h"),b=n("TSYQ"),j=n.n(b),v=n("cbAs"),O=n("iThD"),y=n("6ibL"),C=n("UI5b"),g=n("nIm6"),_=n("Kw70"),h=n("FZFE"),x=function(e){var t=e.timeseries,n=Object(o.i)().purpose,u=Object(i.e)().t,l=Object(c.b)().isMobile,s=Object(r.useMemo)((function(){return Object(O.a)(t)}),[t]),d=Object(r.useMemo)((function(){return Object(O.d)(s)}),[s]),f=Object(r.useMemo)((function(){return Object(O.b)(s)}),[s]),p=Object(r.useMemo)((function(){return Object(C.a)(d,"purposes",u)}),[u,d]),m=p.data,b=p.options,x=Object(r.useMemo)((function(){return n?Object(O.e)(d[n].timeseries):[]}),[n,d]);return n?a.a.createElement(h.a,{trips:x,timeseries:d[n].timeseries}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:j()("u-flex u-mt-1",{"u-flex-justify-end u-mr-2":!l,"u-flex-justify-center":l})},a.a.createElement(_.a,{data:m,options:b,total:Object(y.c)(f),label:u("analysis.emittedCO2")})),a.a.createElement(v.a,null,Object.entries(d).map((function(e,t){return a.a.createElement(g.a,{key:t,type:"purposes",sortedTimeserie:e,totalCO2:f})}))))},E=["data"],w=function(){var e=Object(m.d)(),t=Object(f.useQuery)(e.definition,e.options),n=t.data,r=d()(t,E);return Object(f.isQueryLoading)(r)?a.a.createElement(p.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):a.a.createElement(x,{timeseries:n})};t.a=function(){var e=Object(i.e)().t,t=Object(o.g)(),n=Object(o.i)().purpose,r=Object(c.b)().isMobile,s=n?e("trips.purposes.".concat(n)):"",d=n?t.goBack:void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{label:s,onBack:d}),r&&a.a.createElement(l.a,null),a.a.createElement(w,null))}},FZFE:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),c=n.n(o),i=n("/Tkk"),u=n.n(i),l=n("cbAs"),s=n("J4zp"),d=n.n(s),f=n("Ty5D"),p=n("mwIZ"),m=n.n(p),b=n("vEVt"),j=n("gPjO"),v=n("MSWZ"),O=n("aN1g"),y=n("eBdR"),C=n("QaI8"),g=n("buk/"),_=n("y6ex"),h=n("c8ah"),x=n("1I/2"),E=n("P5cT"),w=n("6ibL"),L=n("zyvo"),k=n("6k9G"),M=n("qFRD"),D=n("IAR5"),S=n("iFCN"),P=n("uPPc"),I=n("I4yF"),N={map:{height:"400px",margin:"-24px -32px 0"},divider:{margin:"10px -32px 25px"}},A=function(e){var t=e.geojson,n=e.trip,o=e.setShowTripDialog,c=Object(r.useMemo)((function(){return Object(w.g)(n)}),[n]),i=Object(r.useCallback)((function(){return o(!1)}),[o]);return a.a.createElement(I.a,{geojson:t,trip:n},a.a.createElement(M.a,{open:!0,onClose:i,title:c,size:"large",content:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:N.map},a.a.createElement(D.a,null)),a.a.createElement("div",{className:"u-mt-1 u-h-3 u-flex u-flex-items-center u-pb-half"},a.a.createElement(S.a,null)),a.a.createElement(v.a,{style:N.divider}),a.a.createElement(P.a,null))}))},T=a.a.memo(A),B={co2:{fontWeight:700},tripIcon:{marginRight:"4px"}},R=function(e){var t=e.tripModeIcons,n=e.duration,r=e.distance;return a.a.createElement(a.a.Fragment,null,t.map((function(e,t){return a.a.createElement(_.a,{key:t,icon:e,size:10,style:B.tripIcon})})),"· ".concat(n," · ").concat(r))},z=function(e){var t=e.geojson,n=e.trip,o=e.hasDateHeader,c=Object(g.e)().f,i=Object(f.g)(),u=m()(n,"properties.manual_purpose"),l=Object(x.b)().isMobile,s=Object(r.useState)(!1),p=d()(s,2),M=p[0],D=p[1],S=Object(r.useMemo)((function(){return Object(w.g)(n)}),[n]),P=Object(r.useMemo)((function(){return Object(w.h)(n)}),[n]),I=Object(r.useMemo)((function(){return Object(w.i)(n)}),[n]),N=Object(r.useMemo)((function(){return Object(w.e)(n)}),[n]),A=Object(r.useMemo)((function(){return c(Object(w.m)(n),"dddd DD MMMM")}),[c,n]),z=Object(r.useMemo)((function(){return Object(k.d)(u)}),[u]),F=Object(r.useMemo)((function(){return Object(k.e)(u)}),[u]),H=Object(r.useMemo)((function(){var e=Object(L.b)(n);return Math.round(100*e)/100}),[n]),V=Object(r.useMemo)((function(){return I.map((function(e){return Object(k.c)(e)}))}),[I]),Z=Object(r.useCallback)((function(){if(l)return i.push("/trip/".concat(n.geojsonId));D(!0)}),[i,l,n.geojsonId]);return a.a.createElement(a.a.Fragment,null,o&&a.a.createElement(y.a,null,A),a.a.createElement(j.a,{className:"u-pl-1-s u-pl-2",button:!0,onClick:Z},a.a.createElement(O.a,null,a.a.createElement(E.a,{icon:z,ghost:void 0===u,color:F})),a.a.createElement(b.a,{primary:S,secondary:a.a.createElement(R,{tripModeIcons:V,duration:P,distance:N})}),a.a.createElement(h.a,{className:"u-mh-half",style:B.co2,variant:"body2"},H," kg"),a.a.createElement(_.a,{icon:C.a,color:"var(--secondaryTextColor)"})),a.a.createElement(v.a,null),M&&a.a.createElement(T,{geojson:t,trip:n,setShowTripDialog:D}))};z.propTypes={trip:c.a.object.isRequired,hasDateHeader:c.a.bool.isRequired};var F=z,H=function(e){var t=e.trips,n=e.timeseries,o=Object(r.useCallback)((function(e,n){return 0===n||!u()(Object(w.m)(e),Object(w.m)(t[n-1]))}),[t]),c=Object(r.useCallback)((function(e){return n.find((function(t){return t._id===e.geojsonId}))}),[n]);return a.a.createElement(l.a,null,t.map((function(e,t){return a.a.createElement(F,{key:"".concat(e.id).concat(t),geojson:c(e),trip:e,hasDateHeader:o(e,t)})})))};H.propTypes={trips:c.a.arrayOf(c.a.object).isRequired,timeseries:c.a.arrayOf(c.a.object)};t.a=H},"G0/2":function(e,t,n){var r={"./en.json":"6wRk","./fr.json":"wNxD"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="G0/2"},I4yF:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n("q1tI"),a=n.n(r),o=a.a.createContext(),c=function(){return Object(r.useContext)(o)},i=function(e){var t=e.geojson,n=e.trip,c=e.children,i=Object(r.useMemo)((function(){return{geojson:t,trip:n}}),[t,n]);return a.a.createElement(o.Provider,{value:i},c)};t.a=a.a.memo(i)},IAR5:function(e,t,n){"use strict";var r=n("J4zp"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=n("r1Ps"),u=n("qnQ4"),l=n("fX4H"),s=n("tr08"),d=n("4R65"),f=n.n(d),p=(n("bMVF"),n("1I/2")),m=n("I4yF"),b=n("3zCr"),j=(n("zer9"),[51.505,-.09]);t.a=function(){var e=Object(p.b)().isMobile,t=Object(m.b)().trip,n=Object(s.a)(),r=Object(o.useRef)(),d=Object(o.useRef)(),v=Object(o.useState)(null),O=a()(v,2),y=O[0],C=O[1],g=Object(o.useMemo)((function(){return function(e){return{style:function(t){return{weight:"section"===t.properties.feature_type?5:2,color:e.palette.primary.main}},pointToLayer:function(e,t){return f.a.marker(t,{icon:f.a.divIcon({html:"<div></div>",iconSize:[12,12],className:"cozy-leaflet-markers ".concat("end_place"===e.properties.feature_type?"cozy-leaflet-markers-end":"cozy-leaflet-markers-start")})})}}}(n)}),[n]),_=g.pointToLayer,h=g.style,x=Object(o.useMemo)((function(){return e?b.a.mediumHeightRatio/2:0}),[e]);return Object(o.useEffect)((function(){C(r.current.leafletElement)}),[]),Object(o.useEffect)((function(){if(d.current){var e=d.current.leafletElement;y.fitBounds(e.getBounds()),y.panBy([0,y.getSize().y*x])}}),[y,x]),c.a.createElement(i.a,{className:"u-h-100",ref:r,center:j,zoom:13},c.a.createElement(u.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),c.a.createElement(l.a,{ref:d,data:t,pointToLayer:_,style:h}))}},Kw70:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("m0r1"),c=n("ymym"),i=n("c8ah"),u=n("WVRf");o.d.register(o.a,o.k);var l={position:"relative",zIndex:"1",width:"192px",height:"192px"},s={display:"flex",flexDirection:"column",position:"absolute",alignItems:"center",top:"25px",left:"25px",right:"25px",bottom:"25px",justifyContent:"center",borderRadius:"50%",zIndex:"-1"};t.a=function(e){var t=e.data,n=e.options,r=e.total,o=e.label;return a.a.createElement(u.a,l,a.a.createElement(c.a,{data:t,options:n,width:192,height:192}),a.a.createElement(u.a,s,a.a.createElement(i.a,{variant:"h3"},r),a.a.createElement(i.a,{variant:"body2"},o)))}},LiWt:function(e,t,n){"use strict";n.r(t);n("/8/d"),n("llna"),n("/kYV");var r=n("q1tI"),a=n.n(r),o=n("i8i4"),c=n("PRV4"),i=n("o8Rm"),u=n("SH7X"),l=n.n(u),s=n("buk/"),d=n("xIbs"),f=n("1I/2"),p=n("qvEe"),m=n("44Ds"),b=n.n(m),j=n("QCzH"),v=n("pZg0"),O=n.n(v),y=n("2E0U"),C=function(e,t){return/^\{\{\..*\}\}$/.test(e)?t:e},g=function(e){var t=e.app,r=e.locale,a={appIconDefault:n("ZAKO"),appNamePrefixDefault:O.a.name_prefix,appNameDefault:O.a.name,appLocaleDefault:"en"};return{appName:C(t.name,a.appNameDefault),appNamePrefix:C(t.prefix,a.appNamePrefixDefault),iconPath:C(t.icon,a.appIconDefault),lang:C(r,a.appLocaleDefault)}},_=b()((function(){var e=document.querySelector("[role=application]"),t=g(JSON.parse(e.dataset.cozy)),r=t.lang,a=t.appName,o=Object(j.a)(r,(function(e){return n("/KVF")("./".concat(e))})),c=function(){var e=document.querySelector("[role=application]"),t=JSON.parse(e.dataset.cozy),n=window.location.protocol,r="".concat(n,"//").concat(t.domain);return new l.a({uri:r,token:t.token,appMetadata:{slug:O.a.name,version:O.a.version},schema:y.b,store:!1})}();return function(e){var t=e.client,n=e.root,r=e.lang,a=e.appName,o=g(JSON.parse(n.dataset.cozy)),c=o.appNamePrefix,i=o.iconPath;cozy.bar.init({appName:a,appNamePrefix:c,cozyClient:t,iconPath:i,lang:r,replaceTitleOnMobile:!1})}({client:c,root:e,lang:r,appName:a}),{root:e,client:c,lang:r,polyglot:o}})),h=n("ZsYx"),x=n("xYwX"),E=n("6QpA"),w=Object(c.a)({disableGlobal:!0});Object(h.a)(),document.addEventListener("DOMContentLoaded",(function(){var e,t,n,r,c;e=_(),t=e.root,n=e.client,r=e.lang,c=e.polyglot,Object(o.render)(a.a.createElement(p.WebviewIntentProvider,null,a.a.createElement(i.b,{generateClassName:w},a.a.createElement(u.CozyProvider,{client:n},a.a.createElement(E.b,null,a.a.createElement(s.b,{lang:r,polyglot:c},a.a.createElement(d.a,null,a.a.createElement(f.a,null,a.a.createElement(x.a,null)))))))),t)}))},P5cT:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("BuRe");t.a=function(e){var t=e.icon,n=e.color,r=e.faded,c=e.ghost,i=function(e){var t=e.faded,n=e.color;return t?{color:"var(--primaryColor)",backgroundColor:"var(--paperBackgroundColor)",border:"1px solid var(--borderMainColor)"}:{backgroundColor:n}}({faded:r,color:n});return a.a.createElement(o.a,{style:i,icon:t,size:32,ghost:c})}},UI5b:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("6k9G"),a=n("6ibL"),o=function(e,t,n){var o=Object.keys(e),c=Object.values(e),i="modes"===t?r.a:r.e,u=c.map((function(e){return e.totalCO2})),l=o.map((function(e){return i(e)}));return{data:{labels:o.map((function(e){return n("trips.".concat(t,".").concat(e))})),datasets:[{id:1,data:u,backgroundColor:l}]},options:{cutout:"75%",elements:{arc:{borderWidth:0}},plugins:{tooltip:{callbacks:{label:function(e){return"".concat(e.label," ").concat(Object(a.c)(e.raw))}}}}}}}},VaFe:function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=n("Ty5D"),u=n("1aYg"),l=n("A52f"),s=n("JrkS"),d=n("buk/"),f=["/analysis/modes","/analysis/purposes"],p=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}};t.a=function(){var e=Object(i.g)(),t=Object(i.h)().pathname,n=Object(d.e)().t,r=f.indexOf(f.find((function(e){return t.includes(e)})));return c.a.createElement(u.a,null,c.a.createElement(l.a,{value:r,onChange:function(t,n){e.push(f[n])}},c.a.createElement(s.a,a()({label:n("nav.modes")},p(0))),c.a.createElement(s.a,a()({label:n("nav.purposes")},p(1)))))}},"YB/B":function(e,t,n){"use strict";var r=n("lSNA"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=n("Ty5D"),u=n("TSYQ"),l=n.n(u),s=n("buk/"),d=n("xIbs"),f=n("c8ah"),p=n("wvTK"),m=n("1I/2"),b=n("y6ex"),j=n("lEaz"),v=n("SjAl"),O={"/trips":"nav.trips","/analysis/modes":"analysis.mode","/analysis/purposes":"analysis.purpose","/settings":"nav.settings"};t.a=function(e){var t=e.label,n=e.onBack,r=Object(s.e)().t,o=Object(m.b)().isMobile,u=Object(i.h)().pathname,y=cozy.bar,C=y.BarCenter,g=y.BarLeft,_=t||r(O[u]),h="function"==typeof n?n:void 0;return o?c.a.createElement(c.a.Fragment,null,h&&c.a.createElement(g,null,c.a.createElement(j.a,{className:"u-mr-half",onClick:h},c.a.createElement(b.a,{icon:v.a,size:16}))),c.a.createElement(C,null,c.a.createElement(d.a,null,c.a.createElement(p.a,null,_)))):c.a.createElement("div",{className:l()(a()({},"u-flex u-flex-items-center u-ml-2",h))},h&&c.a.createElement(j.a,{className:"u-mr-half",onClick:h},c.a.createElement(b.a,{icon:v.a,size:16})),c.a.createElement(f.a,{variant:"h3",className:l()("u-mv-1-half-s u-ml-1-s u-mv-2",a()({},"u-ml-2",!h))},_))}},ZAKO:function(e,t){e.exports="/img/icon.8bf777c1eccbdaed0fc4ef4d9bc4231b.svg"},ZsYx:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=Boolean(window.location.hostname.endsWith("cozy.localhost")||window.location.hostname.endsWith("cozy.tools"));function a(t){if("serviceWorker"in navigator){if(new URL(e.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="/service-worker.js";r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(e,t)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,n("8oxB"))},dN3h:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n("SH7X"),a=n.n(r),o=n("qxfp"),c=function(e){return{definition:Object(r.Q)(o.j).where({"cozyMetadata.sourceAccount":e}).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(50),options:{as:"".concat(o.j,"/sourceAccount/").concat(e),fetchPolicy:a.a.fetchPolicies.olderThan(3e4)}}},i=function(){return{definition:Object(r.Q)(o.i).where({account_type:"tracemob"}).select(["auth.login"]).indexFields(["account_type"]).limitBy(100),options:{as:"".concat(o.i,"/account_type"),fetchPolicy:a.a.fetchPolicies.olderThan(3e4)}}},u=function(e){return{definition:Object(r.Q)(o.j).getById(e),options:{as:"".concat(o.j,"/").concat(e),fetchPolicy:a.a.fetchPolicies.olderThan(3e4)}}},l=function(){return{definition:Object(r.Q)(o.j).UNSAFE_noLimit(),options:{as:o.j,fetchPolicy:a.a.fetchPolicies.olderThan(3e4)}}}},dawk:function(e,t,n){"use strict";var r=n("QILm"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=n("Ty5D"),u=n("SH7X"),l=n("V2U0"),s=n("qFRD"),d=n("6ibL"),f=n("I4yF"),p=n("3zCr"),m=function(){var e=Object(f.b)().trip,t=Object(i.g)(),n=Object(o.useRef)(null),r=Object(o.useMemo)((function(){return Object(d.g)(e)}),[e]),a=Object(o.useCallback)((function(){return t.goBack()}),[t]);return c.a.createElement(s.a,{open:!0,transitionDuration:0,disableGutters:!0,onBack:a,title:r,titleRef:n,content:c.a.createElement(p.b,{titleRef:n})})},b=c.a.memo(m),j=n("dN3h"),v=n("iThD"),O=["data"],y=function(){var e=Object(i.h)().pathname,t=Object(o.useMemo)((function(){return e.split("/").pop()}),[e]),n=Object(j.c)(t),r=Object(u.useQuery)(n.definition,n.options),s=r.data,d=a()(r,O),p=Object(o.useMemo)((function(){return s&&s.length?Object(v.e)(s)[0]:null}),[s]);return Object(u.isQueryLoading)(d)?c.a.createElement(l.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):c.a.createElement(f.a,{geojson:s[0],trip:p},c.a.createElement(b,null))};t.a=c.a.memo(y)},fH6n:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("55Ip"),c=n("buk/"),i=n("9VR2"),u=n("fSd/"),l=n("rDu+"),s=n("Ratv"),d=n("HAAP"),f=Object(u.e)(o.b);t.a=function(){var e=Object(c.e)().t;return a.a.createElement(i.a,null,a.a.createElement(u.d,null,a.a.createElement(u.b,null,a.a.createElement(f,{to:"/trips"},a.a.createElement(u.a,{icon:l.a}),a.a.createElement(u.c,null,e("nav.trips")))),a.a.createElement(u.b,null,a.a.createElement(f,{to:"/analysis"},a.a.createElement(u.a,{icon:d.a}),a.a.createElement(u.c,null,e("nav.analysis")))),a.a.createElement(u.b,{secondary:!0},a.a.createElement(f,{to:"/analysis/modes"},a.a.createElement(u.c,null,e("nav.modes")))),a.a.createElement(u.b,{secondary:!0},a.a.createElement(f,{to:"/analysis/purposes"},a.a.createElement(u.c,null,e("nav.purposes")))),a.a.createElement(u.b,null,a.a.createElement(f,{to:"/settings"},a.a.createElement(u.a,{icon:s.a}),a.a.createElement(u.c,null,e("nav.settings"))))))}},iFCN:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("buk/"),c=n("lSNA"),i=n.n(c),u=n("c8ah");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.title,n=e.value,o=e.highlighted,c=Object(r.useMemo)((function(){return function(e){var t=e.highlighted;return{infoBlock:{backgroundColor:t?"var(--primaryColor)":"none",margin:"0.5rem"},typography:s({},t&&{color:"var(--primaryContrastTextColor)"})}}({highlighted:o})}),[o]);return a.a.createElement("div",{style:c.infoBlock,className:"u-h-100 u-flex u-flex-column u-flex-items-center u-flex-justify-center u-flex-grow-1  u-bdrs-4"},a.a.createElement(u.a,{style:c.typography,variant:"caption"},t),a.a.createElement(u.a,{style:c.typography,variant:o?"h6":"body1"},n))},f=a.a.memo(d),p=n("6ibL"),m=n("I4yF"),b=function(){var e=Object(m.b)().trip,t=Object(o.e)().t,n=Object(r.useMemo)((function(){return Object(p.h)(e)}),[e]),c=Object(r.useMemo)((function(){return Object(p.e)(e)}),[e]),i=Object(r.useMemo)((function(){return Object(p.b)(e)}),[e]),u=Object(r.useMemo)((function(){return Object(p.a)(e)}),[e]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(f,{title:t("trips.duration"),value:n}),a.a.createElement(f,{title:t("trips.distance"),value:c}),a.a.createElement(f,{title:t("trips.calories"),value:i}),a.a.createElement(f,{title:t("trips.co2"),value:u,highlighted:!0}))};t.a=a.a.memo(b)},iThD:function(e,t,n){"use strict";n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return L}));var r=n("lSNA"),a=n.n(r),o=n("QkVN"),c=n.n(o),i=n("QVEU"),u=n.n(i),l=n("xweI"),s=n.n(l),d=n("O7iK"),f=n.n(d),p=n("9UKM"),m=n.n(p),b=n("zyvo"),j=n("6ibL"),v=n("6k9G"),O=n("qxfp");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){return e.flatMap((function(t,n){return t.series.map((function(t){return function(e){var t=e.features,n=e.properties,r=u()(t,(function(e){return e.id}));return c()({},e,{properties:{start_place:{data:r[n.start_place.$oid]},end_place:{data:r[n.end_place.$oid]}}})}(C(C({},t),{},{geojsonId:e[n]._id}))}))}))},_=function(e){return e.map((function(e){var t=e.series[0],n=0,r=0,a=0,o=Object(j.l)(t).map((function(e){var t=Object(b.a)(e);return n+=t,r+=e.distance,a+=e.duration,C(C({},e),{},{totalCO2:t})}));return C(C({},e),{},{aggregation:{totalCO2:n,totalDistance:r,totalDuration:a,sections:o}})}))},h=function(e){var t=0;return e.forEach((function(e){t+=e.aggregation.totalCO2})),t},x=function(e,t){var n=m()(e),r=e[t],o=0===r.timeseries.length&&0===r.totalCO2,c=s()(n.filter((function(e){return o?e[0]!==t&&e[1].totalCO2>0:e[1].totalCO2>0})),(function(e){return e[1].totalCO2})).reverse(),i=s()(n.filter((function(e){return o?e[0]!==t&&0===e[1].totalCO2:0===e[1].totalCO2})),(function(e){return e[1].timeseries.length})).reverse();return C(C(C({},f()(c)),f()(i)),o&&a()({},t,r))},E=function(e){var t=function(e){var t=v.b.reduce((function(e,t){return C(C({},e),{},a()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){e.aggregation.sections.forEach((function(n){var r=t[n.mode].timeseries;r.includes(e.id)||r.push(e),t[n.mode].totalCO2+=n.totalCO2}))})),t}(e);return x(t,O.Q)},w=function(e){var t=v.f.reduce((function(e,t){return C(C({},e),{},a()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){var n,r=(n=e.series[0].properties.manual_purpose)&&n.toUpperCase()||O.z,a=t[r].timeseries;a.includes(e.id)||a.push(e),t[r].totalCO2+=e.aggregation.totalCO2})),t},L=function(e){var t=w(e);return x(t,O.z)}},jEK9:function(e,t,n){"use strict";var r=n("lSNA"),a=n.n(r),o=n("QILm"),c=n.n(o),i=n("q1tI"),u=n.n(i),l=n("SH7X"),s=n("buk/"),d=n("V2U0"),f=n("ZLzk"),p=n("dN3h"),m=n("FZFE"),b=n("iThD"),j=n("YB/B"),v=["data"],O=["data"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(){var e,t,n=Object(s.e)().t,r=Object(p.a)(),a=Object(l.useQuery)(r.definition,r.options),o=a.data,y=c()(a,v),g=Object(l.isQueryLoading)(y)&&!Object(l.hasQueryBeenLoaded)(y),_=Object(i.useMemo)((function(){return Array.isArray(o)?o.map((function(e){return{label:e.auth.login,_id:e._id}})):[]}),[o]),h=Object(p.b)(null==_||null===(e=_[0])||void 0===e?void 0:e._id),x=Object(l.useQuery)(h.definition,C(C({},h.options),{},{enabled:_&&_.length>0})),E=x.data,w=c()(x,O),L=Object(l.isQueryLoading)(w)&&!Object(l.hasQueryBeenLoaded)(w),k=Object(i.useMemo)((function(){return Array.isArray(E)?Object(b.e)(E):[]}),[E]);return g||0!==_.length?g||L?u.a.createElement(d.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):u.a.createElement(u.a.Fragment,null,u.a.createElement(j.a,{label:n("trips.from")+" "+(null==_||null===(t=_[0])||void 0===t?void 0:t.label)}),u.a.createElement(m.a,{trips:k,timeseries:E}),w.hasMore&&u.a.createElement(f.a,{label:n("loadMore"),fetchMore:w.fetchMore})):u.a.createElement("p",null,n("account.notFound"))}},nIm6:function(e,t,n){"use strict";var r=n("J4zp"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=n("Ty5D"),u=n("vEVt"),l=n("gPjO"),s=n("MSWZ"),d=n("aN1g"),f=n("buk/"),p=n("c8ah"),m=n("QaI8"),b=n("y6ex"),j=n("P5cT"),v=n("6k9G"),O=n("6ibL"),y={co2:{fontWeight:700}},C=function(e){var t=e.type,n=e.sortedTimeserieKey;return"modes"===t?c.a.createElement(j.a,{icon:Object(v.c)(n),color:Object(v.a)(n)}):c.a.createElement(j.a,{icon:Object(v.d)(n),color:Object(v.e)(n)})};t.a=function(e){var t=e.sortedTimeserie,n=e.totalCO2,r=e.type,o=Object(f.e)().t,j=Object(i.g)(),v=a()(t,2),g=v[0],_=v[1],h=_.timeseries.length,x=_.totalCO2,E="".concat(Math.round(100*x/n),"%"),w=0===h&&0===x;return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{className:"u-pl-1-s u-pl-2",disabled:w,onClick:w?void 0:function(){return j.push("/analysis/".concat(r,"/").concat(g))},button:!0},c.a.createElement(d.a,null,c.a.createElement(C,{type:r,sortedTimeserieKey:g})),c.a.createElement(u.a,{primary:o("trips.".concat(r,".").concat(g)),secondary:"".concat(E," · ").concat(o("analysis.travels",h))}),c.a.createElement(p.a,{className:"u-mh-half",style:y.co2,variant:"body2"},Object(O.c)(x)),!w&&c.a.createElement(b.a,{icon:m.a,color:"var(--secondaryTextColor)"})),c.a.createElement(s.a,null))}},nw0P:function(e,t,n){var r={"./_lib/build_formatting_tokens_reg_exp/index.js":"kOWh","./ar/build_distance_in_words_locale/index.js":"XxX6","./ar/build_format_locale/index.js":"alis","./ar/index.js":"EDRf","./be/build_distance_in_words_locale/index.js":"LQ09","./be/build_format_locale/index.js":"kj7F","./be/index.js":"YEhR","./bg/build_distance_in_words_locale/index.js":"7K3h","./bg/build_format_locale/index.js":"RrdL","./bg/index.js":"isx8","./ca/build_distance_in_words_locale/index.js":"wqqj","./ca/build_format_locale/index.js":"qcV0","./ca/index.js":"Vwa+","./cs/build_distance_in_words_locale/index.js":"ZKDM","./cs/build_format_locale/index.js":"ipyF","./cs/index.js":"dvhP","./da/build_distance_in_words_locale/index.js":"2Mgc","./da/build_format_locale/index.js":"Gned","./da/index.js":"7ur/","./de/build_distance_in_words_locale/index.js":"5IWf","./de/build_format_locale/index.js":"THCn","./de/index.js":"bgw5","./el/build_distance_in_words_locale/index.js":"o/GB","./el/build_format_locale/index.js":"8T9h","./el/index.js":"dH0v","./en/build_distance_in_words_locale/index.js":"LZbM","./en/build_format_locale/index.js":"6DAA","./en/index.js":"Us+F","./eo/build_distance_in_words_locale/index.js":"qrnn","./eo/build_format_locale/index.js":"Bl15","./eo/index.js":"UB7v","./es/build_distance_in_words_locale/index.js":"GEfZ","./es/build_format_locale/index.js":"O+zC","./es/index.js":"/S0t","./fi/build_distance_in_words_locale/index.js":"VHtQ","./fi/build_format_locale/index.js":"Oydx","./fi/index.js":"ndVD","./fil/build_distance_in_words_locale/index.js":"uq4p","./fil/build_format_locale/index.js":"d7hw","./fil/index.js":"pNfm","./fr/build_distance_in_words_locale/index.js":"IzMR","./fr/build_format_locale/index.js":"I3Zg","./fr/index.js":"LKA2","./hr/build_distance_in_words_locale/index.js":"DPvn","./hr/build_format_locale/index.js":"puw3","./hr/index.js":"L9Jq","./hu/build_distance_in_words_locale/index.js":"w2RQ","./hu/build_format_locale/index.js":"/0iD","./hu/index.js":"Nm+E","./id/build_distance_in_words_locale/index.js":"JbvB","./id/build_format_locale/index.js":"0wlw","./id/index.js":"A6C3","./is/build_distance_in_words_locale/index.js":"qzMC","./is/build_format_locale/index.js":"S3yD","./is/index.js":"N4bE","./it/build_distance_in_words_locale/index.js":"MDEp","./it/build_format_locale/index.js":"aUJd","./it/index.js":"hmb4","./ja/build_distance_in_words_locale/index.js":"nNvt","./ja/build_format_locale/index.js":"buui","./ja/index.js":"uAXs","./ko/build_distance_in_words_locale/index.js":"oEw+","./ko/build_format_locale/index.js":"9SQf","./ko/index.js":"iW8+","./mk/build_distance_in_words_locale/index.js":"nmwZ","./mk/build_format_locale/index.js":"htxJ","./mk/index.js":"GzBU","./nb/build_distance_in_words_locale/index.js":"SL1f","./nb/build_format_locale/index.js":"CJ5F","./nb/index.js":"73vv","./nl/build_distance_in_words_locale/index.js":"Uyu0","./nl/build_format_locale/index.js":"doCD","./nl/index.js":"hCQt","./pl/build_distance_in_words_locale/index.js":"FUBD","./pl/build_format_locale/index.js":"nOYf","./pl/index.js":"B6yL","./pt/build_distance_in_words_locale/index.js":"aTPA","./pt/build_format_locale/index.js":"TTT0","./pt/index.js":"gdks","./ro/build_distance_in_words_locale/index.js":"gI+A","./ro/build_format_locale/index.js":"njjO","./ro/index.js":"r2yp","./ru/build_distance_in_words_locale/index.js":"KmPx","./ru/build_format_locale/index.js":"UUBw","./ru/index.js":"nz/o","./sk/build_distance_in_words_locale/index.js":"q2Bs","./sk/build_format_locale/index.js":"9sxn","./sk/index.js":"Wqan","./sl/build_distance_in_words_locale/index.js":"mlv2","./sl/build_format_locale/index.js":"vHkZ","./sl/index.js":"KYSo","./sr/build_distance_in_words_locale/index.js":"LlkS","./sr/build_format_locale/index.js":"RhjJ","./sr/index.js":"7mU3","./sv/build_distance_in_words_locale/index.js":"UNBN","./sv/build_format_locale/index.js":"zTNB","./sv/index.js":"hxgj","./th/build_distance_in_words_locale/index.js":"XAGa","./th/build_format_locale/index.js":"We2s","./th/index.js":"Pk+z","./tr/build_distance_in_words_locale/index.js":"aFZF","./tr/build_format_locale/index.js":"jh7A","./tr/index.js":"3ZWG","./zh_cn/build_distance_in_words_locale/index.js":"KdB7","./zh_cn/build_format_locale/index.js":"l4EP","./zh_cn/index.js":"8tMq","./zh_tw/build_distance_in_words_locale/index.js":"vyyr","./zh_tw/build_format_locale/index.js":"uYH7","./zh_tw/index.js":"QPlQ"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="nw0P"},pZg0:function(e,t){e.exports={name:"Coach CO2",slug:"coachco2",icon:"icon.svg",categories:[],version:"0.4.0",licence:"AGPL-3.0",editor:"Cozy Cloud",source:"https://github.com/cozy/coachCO2.git@build",developer:{name:"cozy",url:""},routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},settings:{description:"Required by the cozy-bar to display Claudy and know which applications are coming soon",type:"io.cozy.settings",verbs:["GET"]},accounts:{description:"Required to get konnector account",type:"io.cozy.accounts",verbs:["GET"]},files:{description:"Required to access the files for saved your export of trips",type:"io.cozy.files",verbs:["ALL"]},"geojson-timeseries":{description:"Required to display geojson timeseries",type:"io.cozy.timeseries.geojson"}}}},qxfp:function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"i",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"M",(function(){return u})),n.d(t,"P",(function(){return l})),n.d(t,"R",(function(){return s})),n.d(t,"Q",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"S",(function(){return m})),n.d(t,"F",(function(){return b})),n.d(t,"G",(function(){return j})),n.d(t,"o",(function(){return v})),n.d(t,"A",(function(){return O})),n.d(t,"l",(function(){return y})),n.d(t,"k",(function(){return C})),n.d(t,"B",(function(){return g})),n.d(t,"z",(function(){return _})),n.d(t,"E",(function(){return h})),n.d(t,"D",(function(){return x})),n.d(t,"C",(function(){return E})),n.d(t,"H",(function(){return w})),n.d(t,"p",(function(){return L})),n.d(t,"O",(function(){return k})),n.d(t,"N",(function(){return M})),n.d(t,"c",(function(){return D})),n.d(t,"e",(function(){return S})),n.d(t,"h",(function(){return P})),n.d(t,"x",(function(){return I})),n.d(t,"w",(function(){return N})),n.d(t,"v",(function(){return A})),n.d(t,"y",(function(){return T})),n.d(t,"L",(function(){return B})),n.d(t,"q",(function(){return R})),n.d(t,"m",(function(){return z})),n.d(t,"t",(function(){return F})),n.d(t,"s",(function(){return H})),n.d(t,"r",(function(){return V})),n.d(t,"u",(function(){return Z})),n.d(t,"K",(function(){return q})),n.d(t,"J",(function(){return U})),n.d(t,"I",(function(){return Q})),n.d(t,"g",(function(){return W}));var r="io.cozy.timeseries.geojson",a="io.cozy.accounts",o="AIR_OR_HSR",c="BICYCLING",i="CAR",u="SUBWAY",l="TRAIN",s="WALKING",d="UNKNOWN",f="BUS",p="HOME",m="WORK",b="SCHOOL",j="SHOPPING",v="MEAL",O="PERSONAL_MED",y="EXERCISE",C="ENTERTAINMENT",g="PICK_DROP",_="OTHER_PURPOSE",h=.258,x=.187,E=.152,w=1e3,L=3500,k=.00529,M=.00472,D=.137,S=.192,P=74.25,I=2,N=3.5,A=5,T=7,B=3,R=5,z=6.5,F=5.8,H=8,V=10,Z=15.8,q=15,U=22.4,Q=25.6,W={tripId:"Trip_Id",tripStartDisplayName:"Trip_Start_Display_Name",tripArrivalDisplayName:"Trip_Arrival_Display_Name",tripPurpose:"Trip_Purpose",tripStartDate:"Trip_Start_Date",tripEndDate:"Trip_End_Date",sectionStartDate:"Section_Start_Date",sectionEndDate:"Section_End_Date",sectionDuration:"Section_Duration",sectionDistance:"Section_Distance",sectionMode:"Section_Mode",sectionCoordinates:"Section_Coordinates",sectionDistances:"Section_Distances",sectionTimestamps:"Section_Timestamps",sectionSpeeds:"Section_Speeds"}},uPPc:function(e,t,n){"use strict";var r=n("J4zp"),a=n.n(r),o=n("q1tI"),c=n.n(o),i=n("PsJY"),u=n("buk/"),l=n("MSWZ"),s=n("1I/2"),d=n("9xVj"),f=n("lSNA"),p=n.n(f),m=n("TSYQ"),b=n.n(m),j=n("R/WZ"),v=n("OvNQ"),O=n("djpt"),y=n("8aGg"),C=n("CKDk"),g=n("mPFD"),_=n("c8ah"),h=Object(j.a)((function(e){return{dotStart:{marginTop:"9px"},dot:{marginBottom:"-1px"},connector:{width:"6px",backgroundColor:e.palette.primary.main},item:{marginTop:"-9px",paddingLeft:"11px","&::before":{padding:0,flexGrow:0}},contentWrapper:{display:"flex",marginLeft:"11px"},endLabel:{fontWeight:700}}})),x=function(e){var t,n=e.label,r=e.endLabel,a=e.type,i=h(),u=Object(o.useMemo)((function(){return"end"!==a}),[a]),l=Object(o.useMemo)((function(){return"start"===a}),[a]);return c.a.createElement(v.a,{className:i.item},c.a.createElement(O.a,null,c.a.createElement(g.a,{className:b()((t={},p()(t,i.dot,u),p()(t,i.dotStart,l),t)),color:"primary",variant:"outlined"}),u&&c.a.createElement(y.a,{className:i.connector})),c.a.createElement(C.a,null,c.a.createElement("div",{className:i.contentWrapper},c.a.createElement(_.a,{className:"u-flex-grow-1",variant:"body1"},n),c.a.createElement(_.a,{className:i.endLabel,variant:"body2",component:"div"},r))))},E=c.a.memo(x),w=n("BuRe"),L=Object(j.a)((function(e){return{iconItem:{marginTop:"-14px",cursor:"pointer","&::before":{padding:0,flexGrow:0}},iconDot:{backgroundColor:e.palette.background.paper,borderWidth:"1px",borderColor:e.palette.border.main,margin:0,padding:0,boxShadow:"none"},icon:{color:e.palette.primary.main,backgroundColor:e.palette.background.paper},connector:{width:"6px",backgroundColor:e.palette.primary.main}}})),k=function(e){var t=e.icon,n=e.label,r=e.endLabel,a=e.onClick,o=L();return c.a.createElement(v.a,{className:o.iconItem,onClick:a},c.a.createElement(O.a,null,c.a.createElement(g.a,{className:o.iconDot},c.a.createElement(w.a,{icon:t,className:o.icon,size:32})),c.a.createElement(y.a,{className:o.connector})),c.a.createElement(C.a,{className:"u-flex"},c.a.createElement(_.a,{className:"u-flex-grow-1",variant:"body2",color:"textSecondary"},n),c.a.createElement(_.a,{className:o.endLabel,variant:"body2",component:"div"},r)))},M=c.a.memo(k),D=n("6ibL"),S=n("6k9G"),P=n("yXPU"),I=n.n(P),N=n("o0o1"),A=n.n(N),T=n("SH7X"),B=n("c6Mf"),R=n("D1y2"),z=n.n(R),F=n("BkRI"),H=n.n(F),V=function(e){var t=e.geojson,n=e.sectionId,r=e.mode,a=t.series.flatMap((function(e,t){return e.features.flatMap((function(e,r){if(e.features)return e.features.flatMap((function(e,a){if(e.id===n)return{feature:e,serieIndex:t,firstIndex:r,secondIndex:a}}))}))})).find((function(e){return e}));if(a){var o=a.feature,c=a.serieIndex,i=a.firstIndex,u=a.secondIndex,l=z()(H()(o),"properties.manual_mode",r);return z()(H()(t),"series[".concat(c,"].features[").concat(i,"].features[").concat(u,"]"),l)}return t},Z=n("P5cT"),q=n("I4yF"),U=function(e){return{children:S.b.map((function(t){return{id:t,title:e("trips.modes.".concat(t)),icon:c.a.createElement(Z.a,{icon:Object(S.c)(t),color:Object(S.a)(t),faded:!0})}}))}},Q=function(e){var t=e.section,n=e.onClose,r=Object(u.e)().t,a=Object(T.useClient)(),i=Object(q.b)().geojson,l=Object(o.useCallback)(function(){var e=I()(A.a.mark((function e(r){var o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=V({geojson:i,sectionId:t.id,mode:r.id}),e.next=3,a.save(o);case 3:n();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,i,n,t.id]),s=Object(o.useMemo)((function(){return function(e){return e.id===t.mode}}),[t.mode]);return c.a.createElement(B.a,{title:r("tripEdit.selectMode"),onClose:n,onSelect:l,isSelected:s,options:U(r)})},W=c.a.memo(Q),G=function(){var e=Object(q.b)().trip,t=Object(u.e)(),n=t.t,r=t.f,i=t.lang,l=Object(o.useState)(!1),s=a()(l,2),d=s[0],f=s[1],p=Object(o.useState)(null),m=a()(p,2),b=m[0],j=m[1],v=Object(o.useMemo)((function(){return Object(D.k)(e,i)}),[i,e]),O=Object(o.useCallback)((function(e){return function(){j(e),f(!0)}}),[]),y=Object(o.useCallback)((function(){return f(!1)}),[]);return c.a.createElement(c.a.Fragment,null,v.map((function(e,t){return c.a.createElement(M,{key:t,label:"".concat(n("trips.modes.".concat(e.mode))," - ").concat(e.duration," - ").concat(e.distance," - ").concat(e.averageSpeed),endLabel:Object(D.d)({f:r,lang:i,date:new Date(e.endDate)}),icon:Object(S.c)(e.mode),onClick:O(e)})})),d&&c.a.createElement(W,{section:b,onClose:y}))},K=c.a.memo(G),Y=n("cbAs"),J=n("vEVt"),X=n("gPjO"),$=n("4XKp"),ee=n("qxfp"),te=Object(j.a)((function(){return{root:{minWidth:"48px"}}})),ne=function(e){var t=e.purpose,n=e.onClick,r=Object(u.e)().t,a=te();return c.a.createElement(Y.a,null,c.a.createElement(X.a,{className:"u-c-pointer",onClick:n},c.a.createElement($.a,{classes:{root:a.root}},c.a.createElement(Z.a,{icon:Object(S.d)(t),color:Object(S.e)(t)})),c.a.createElement(J.a,{primary:r("purpose"),primaryTypographyProps:{variant:"caption"},secondary:r("trips.purposes.".concat(t)),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}})))};ne.defaultProps={purpose:ee.z};var re=c.a.memo(ne),ae=function(e){var t=e.geojson,n=e.tripId,r=e.purpose,a=t.series.findIndex((function(e){return e.id===n}));if(a>-1){var o=t.series[a],c=z()(H()(o),"properties.manual_purpose",r.toUpperCase());return z()(H()(t),"series[".concat(a,"]"),c)}return t},oe=function(e){return{children:S.f.map((function(t){return{id:t,title:e("trips.purposes.".concat(t)),icon:c.a.createElement(Z.a,{icon:Object(S.d)(t),color:Object(S.e)(t)})}}))}},ce=function(e){var t=e.onClose,n=Object(u.e)().t,r=Object(T.useClient)(),a=Object(q.b)(),i=a.geojson,l=a.trip,s=Object(o.useCallback)(function(){var e=I()(A.a.mark((function e(n){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ae({geojson:i,tripId:l.id,purpose:n.id}),e.next=3,r.save(a);case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,i,t,l.id]),d=Object(o.useMemo)((function(){return function(e){var t=l.properties.manual_purpose;return t?e.id===t:e.id===ee.z}}),[l.properties.manual_purpose]);return c.a.createElement(B.a,{title:n("tripEdit.selectPurpose"),onClose:t,onSelect:s,isSelected:d,options:oe(n)})},ie=c.a.memo(ce),ue={divider:{margin:"-10px -32px 10px"}},le=function(){var e=Object(u.e)(),t=e.f,n=e.lang,r=Object(q.b)().trip,f=Object(s.b)().isDesktop,p=Object(o.useState)(!1),m=a()(p,2),b=m[0],j=m[1],v=Object(o.useMemo)((function(){return Object(D.n)(r)}),[r]),O=Object(o.useMemo)((function(){return Object(D.g)(r)}),[r]),y=Object(o.useMemo)((function(){return Object(D.d)({f:t,lang:n,date:Object(D.m)(r)})}),[t,n,r]),C=Object(o.useMemo)((function(){return Object(D.d)({f:t,lang:n,date:Object(D.f)(r)})}),[t,n,r]),g=Object(o.useMemo)((function(){var e;return null==r||null===(e=r.properties)||void 0===e?void 0:e.manual_purpose}),[r.properties.manual_purpose]),_=Object(o.useCallback)((function(){return j(!0)}),[]),h=Object(o.useCallback)((function(){return j(!1)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{disableGutters:!0},c.a.createElement(i.a,{className:"u-pb-0 u-mb-0"},c.a.createElement(E,{label:v,endLabel:y,type:"start"}),c.a.createElement(K,null),c.a.createElement(E,{label:O,endLabel:C,type:"end"}))),f&&c.a.createElement(l.a,{style:ue.divider}),c.a.createElement(d.a,{disableGutters:!0},c.a.createElement(re,{purpose:g,onClick:_})),b&&c.a.createElement(ie,{onClose:h}))};t.a=c.a.memo(le)},xYwX:function(e,t,n){"use strict";(function(e){var r=n("q1tI"),a=n.n(r),o=n("55Ip"),c=n("Ty5D"),i=n("0cfB"),u=n("jDpt"),l=n("le8I"),s=n("67rm"),d=n("buk/"),f=n("fH6n"),p=n("jEK9"),m=n("dawk"),b=n("B/ud"),j=n("BdYW"),v=n("9muV"),O=function(){var e=Object(d.e)().t;return a.a.createElement(o.a,null,a.a.createElement(u.b,null,a.a.createElement(f.a,null),a.a.createElement(u.c,null,a.a.createElement(u.a,null,a.a.createElement(c.d,null,a.a.createElement(c.b,{path:"/trip/:geojsonId",component:m.a}),a.a.createElement(c.b,{path:"/trips",component:p.a}),a.a.createElement(c.b,{path:"/settings",component:v.a}),a.a.createElement(c.b,{path:"/analysis/modes/:mode",component:b.a}),a.a.createElement(c.b,{path:"/analysis/modes",component:b.a}),a.a.createElement(c.b,{path:"/analysis/purposes/:purpose",component:j.a}),a.a.createElement(c.b,{path:"/analysis/purposes",component:j.a}),a.a.createElement(c.a,{from:"/analysis",to:"/analysis/modes"}),a.a.createElement(c.a,{from:"/",to:"/trips"}),a.a.createElement(c.a,{from:"*",to:"/trips"})))),a.a.createElement(s.a,{t:e}),a.a.createElement(l.a,null)))};t.a=Object(i.hot)(e)(a.a.memo(O))}).call(this,n("3UD+")(e))},zer9:function(e,t,n){},zyvo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n("6ibL"),a=n("qxfp");function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=function(e){var t=0,n=e.distance/1e3;switch(e.mode){case a.a:if(n<=a.H){t+=n*a.E;break}n<=a.p?t+=n*a.D:t+=n*a.C;break;case a.f:t+=n*a.e;break;case a.d:t+=n*a.c;break;case a.M:t+=n*a.N;break;case a.P:t+=n*a.O;break;case a.Q:}return t},u=function(e){var t,n=0,a=o(Object(r.l)(e));try{for(a.s();!(t=a.n()).done;){var c=t.value;n+=i(c)}}catch(u){a.e(u)}finally{a.f()}return n},l=function(e,t){return e*a.h*3.5/200*t},s=function(e){var t,n=0,c=o(Object(r.l)(e));try{for(c.s();!(t=c.n()).done;){var i=t.value,u=i.averageSpeed,s=i.duration/60,d=void 0;switch(i.mode){case a.R:d=u<=a.L?a.x:u<=a.q?a.w:u<=a.m?a.v:a.y;break;case a.b:d=u<=a.K?a.t:u<=a.J?a.s:u<=a.I?a.r:a.u}d&&(n+=l(d,s))}}catch(f){c.e(f)}finally{c.f()}return n}}});