!function(e){function t(t){for(var n,i,c=t[0],l=t[1],s=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var l=a[c];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={0:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([0,1]),a()}({"/KVF":function(e,t,a){var n={"./en":"7dT6","./en.json":"7dT6","./fr":"9pOX","./fr.json":"9pOX"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="/KVF"},"/kYV":function(e,t,a){},0:function(e,t,a){a("Bau7"),a("7NIr"),e.exports=a("LiWt")},1:function(e,t){},"7dT6":function(e){e.exports=JSON.parse('{"nav":{"trips":"Trips","analysis":"Analysis","modes":"Modes of transport","purposes":"Purposes of travel","settings":"Settings"},"folder":{"administrative":"Administrative","coachco2":"Coach CO2"},"devices":{"select":"Select a device","label":"Data source"},"settings":{"services":"Services"},"trips":{"trips":"Trips","from":"Trips from","modes":{"AIR_OR_HSR":"Plane","BICYCLING":"Bike","CAR":"Car","SUBWAY":"Subway","TRAIN":"Train","UNKNOWN":"Unknown","WALKING":"Walking","BUS":"Bus"},"purposes":{"HOME":"Home","WORK":"Work","COMMUTE":"Going to or from work","SCHOOL":"School","SHOPPING":"Shopping","MEAL":"Meal","PERSONAL_MED":"Personal","EXERCISE":"Sport","ENTERTAINMENT":"Entertainment","PICK_DROP":"Pick & drop","OTHER_PURPOSE":"Unknown"},"duration":"Duration","distance":"Distance","calories":"Calories","co2":"CO2"},"loadMore":"Load more trips","tripEdit":{"selectMode":"Modify the transportation mode","selectPurpose":"Modify the travel purpose"},"purpose":"Reason for travel","recurring":{"title":"Recurrence","recurringTrip":"Recurring trip","occasionalTrip":"Occasional trip","confirmDialog":{"title":"Attribute this reason to similar trips?","content":"By answering yes, this trip will be defined as recurring and will be used as a reference to automate the qualification of your similar trips.","confirm":"Yes","decline":"No"},"tooltip":"If this trip is recurring, similar trips will automatically be referenced with the same reason."},"analysis":{"mode":"CO2 emissions","purpose":"CO2 emissions","travels":"%{smart_count} travel |||| %{smart_count} travel","emittedCO2":"emitted CO2"},"export":{"label":"Export","filename":"%{today} - Trips %{accountLabel}.csv","button":"Export trips in CSV","modal":{"button":{"close":"Close","viewInDrive":"View in Drive"},"title":"Exporting","content":{"done":"The \\"%{filename}\\" file was created in the \\"Drive%{pathAppDir}\\" folder of your Cozy.","progress":"The export of your trips is in progress, please wait..."}}},"empty":{"title":"Add your trips","text":"This application is in experimental phase. It works at this stage only if you are a user of the mobile application \\"TraceMob\\" and that you have configured the connector in your Cozy."},"manifest":{"short_description":"Keep track of your trips and analyze their impact on the environment.","long_description":"CoachCO2 is a self data application developed within the framework of the **territory of La Rochelle** and the [Agremob](https://agremob.com/) program.\\n\\n&nbsp;\\n\\nIts ambition is to **help you** :\\n- to **become aware of the issues** related to mobility,\\n- to **question your travel habits**,\\n- and **find more sustainable alternatives** (yes it is possible!).\\n\\nAll this in complete confidentiality, as always in your Cozy: **only you have the right to access your data**, and you have the control to share it with whomever you want, whenever and if YOU want.\\n\\nIts objective is also to **enable the emergence of new ecomobility projects or offers** thanks to the expertise of the program\'s partner structures.\\n\\n&nbsp;\\n\\nToday this application forms a duo with **the mobile application TraceMob** whose connector, also present in the store of your Personal Cloud, collects and saves your mobility tracks at home.\\n\\nTomorrow **other sensors will complete your data**. The application, itself under development, is today focused on mobility, tomorrow other sources of CO2 may extend its scope.\\n\\n&nbsp;\\n\\n[Agremob](https://agremob.com/) makes this application **a common good** that can be used beyond the borders of the La Rochelle agglomeration. If your Cozy\'s host does not offer it in its own store, contact them!","permissions":{"apps":{"description":"Required by the cozy-bar to display the icons of the apps"},"settings":{"description":"Required by the cozy-bar to display Claudy and know which applications are coming soon"},"accounts":{"description":"Required to get konnector account"},"files":{"description":"Required to access the files for saved your export of trips"},"geojson-timeseries":{"description":"Required to display geojson timeseries"},"coachco2.settings":{"description":"Used to manage your Coach CO2 settings"}}},"dacc":{"settings":{"anonymous_participation":"Participate anonymously in the calculation of average CO2 emissions","showAlerter":"Show DACC alerter"},"tripsCard":{"label":"Compare your emissions to the average of other users of the application?","discard":"No, thank you","accept":"Compare"},"compareDialog":{"title":"Compare anonymously","primaryText":"In order to average the emissions of users, and because your Cozy has made a promise to you to never disclose your data without your explicit request, it will ask you for the right to send this data.","secondaryText":"This data will be aggregated and anonymous and will not contain any identifiers or locations.","action":"I understood"},"permissionsDialog":{"title":"Request for permissions","primaryText":"The CO2 Coach application requires the following permissions from your Cozy:","secondaryText":"Once authorized, the permissions can be modified in the settings","why_asking":"Why ask me for these permissions?","export_outside":"Exporting out of Cozy","anonymized_emissions":"My anonymized CO2 emissions","anonymized_bikegoal_progression":"My anonymized progression","accept":"Always allow","refuse":"Refuse"},"reasonsDialog":{"title":"Reasons for permissions","content":"Because your Cozy has made a promise to you to never disclose your private data, it will always ask you for the right to let an application send it out."}},"vericalBarChart":{"title":"CO2 emissions","legend":{"yours":"Your emissions","average":"Average users of the app"}},"bikeGoal":{"title":"Bike to work","goal_progression":"%{days}/%{daysToReach} days \\nper year","achievement_certificate":"Certificate of achievement","goals":"Objectives","about":{"title":"About the goal","intro":{"title":"Introduction","content":"In order to encourage the use of alternative and sustainable modes of transportation, the implementation of the sustainable mobility package came into effect on May 10, 2020.\\n\\nThus, employees who choose an alternative and sustainable mode of transportation for their home-work commute will be able to benefit from a lump sum of %{bountyAmount}€ per year.\\n\\nYour CO2 Coach will help you keep track of your home-work commute by bicycle and will allow you to generate the certificate of success to be transmitted to your employer!"},"how_trips_detected":{"title":"How are my trips detected?","content":"Your home-work bike trips will be automatically detected based on your schedule and speed.\\n\\nIf a trip is not automatically detected as \\"Going to or from work\\", open the trip details and change the trip reason to \\"Going to or from work\\".\\n\\nIf a trip is not automatically detected as \\"bike\\", open the trip detail and change the mode of transportation to \\"bike\\"."},"once_goal_reach":{"title":"What to do once the goal is reached","content":"Once the goal is reached, an email will be sent to you with a certificate to send to your employer to benefit from your %{bountyAmount}€ package 🎉"}},"deactivate":{"deactivate":"Deactivate","title":"Do you really want to stop participating in the goal?","content":"You can always choose to participate again from the application settings.","stop_participate":"No longer participating","cancel":"Cancel"},"alert":{"success":{"text":"Congratulations, you have achieved the “Bike to Work” goal 🎉","action":"Benefit from my %{bountyAmount}€ package"},"title":"Ride your bike to work and receive %{bountyAmount}€!","text":"As part of the Sustainable Mobility Package (SMP) set up by the French government, go to work by bike %{daysToReach} days a year and receive %{bountyAmount}€!","actions":{"participate":"Participate","discard":"No, thank you"}},"edit":{"modify":"Modify","title":"Modify the goal","firstname":"Firstname","lastname":"Lastname","workTime":"Work time","workTime_full":"Full time","workTime_part":"Half-time or part-time","workTimePercentage":"Percentage of working time","compare_progress":"Compare my progress with that %{source}","cancel":"Cancel","submit":"Ok","required":"This field is required"},"settings":{"participation":"Participate to the goal “Bike to work”","showAlerter":"Show bike goals alerter","hideOnboarding":"Hide bike goal onboarding","showAlerterSuccess":"Show the bike goal success alert"},"onboarding":{"title":"\\"Sustainable mobility\\" package","actions":{"finish":"Finish","previous":"Previous","next":"Next"},"steps":{"naming":{"title":"Lastname and firstname","nameLegend":"Fill in the following information:"},"timing":{"timeLegend":"You currently have a employment contract:","percentageLegend":"Fill in the percentage of your working time:","percentage":"Percentage"},"comparison":{"comparisonLegend":"It is possible to display the average progression of the members %{source} who participate in the goal. To do so, you will be asked to also participate in the establishment of this average. Your progression data will be aggregated and sent anonymously, and will not contain any identifiers or locations.","compare":"Compare my progression","doNotCompare":"Do not compare my progression"}}},"certificateGeneration":{"title":"Congratulations, you have achieved the “Bike to Work“ goal","content":"A certificate has been generated as proof of your success for the year %{year}. Forward it now by email to your employer to receive %{bountyAmount}€ !","actions":{"show":"Certificate - Bike to work.pdf","generate":"Generate a new certificate","understood":"Understood"}},"employer":{"my_company":"of my company","your_company":"of your company","my_collectivity":"of my collectivity","your_collectivity":"of your collectivity"}}}')},"9pOX":function(e){e.exports=JSON.parse('{"nav":{"trips":"Déplacements","analysis":"Analyses","modes":"Modes de transport","purposes":"Motifs de déplacement","settings":"Paramètres"},"folder":{"administrative":"Administratif","coachco2":"Coach CO2"},"devices":{"select":"Sélectionnez un appareil","label":"Source des données"},"settings":{"services":"Services"},"trips":{"trips":"Déplacements","from":"Déplacements de","modes":{"AIR_OR_HSR":"Avion","BICYCLING":"Vélo","CAR":"Voiture","SUBWAY":"Métro","TRAIN":"Train","UNKNOWN":"Non reconnu","WALKING":"Marche","BUS":"Bus"},"purposes":{"HOME":"Domicile","WORK":"Travail","COMMUTE":"Aller ou Retour au travail","SCHOOL":"École","SHOPPING":"Achats","MEAL":"Repas","PERSONAL_MED":"Personnel","EXERCISE":"Sport","ENTERTAINMENT":"Loisir","PICK_DROP":"Dépose","OTHER_PURPOSE":"Indéfini"},"duration":"Durée","distance":"Distance","calories":"Calories","co2":"CO2"},"loadMore":"Charger plus de trajets","tripEdit":{"selectMode":"Modifier le mode de transport","selectPurpose":"Modifier le motif du déplacement"},"purpose":"Motif du déplacement","recurring":{"title":"Récurrence","recurringTrip":"Déplacement habituel","occasionalTrip":"Déplacement occasionnel","confirmDialog":{"title":"Attribuer ce motif aux déplacements similaires ?","content":"En répondant oui, ce déplacement sera défini comme habituel et servira de référence pour automatiser la qualification de vos déplacement similaires.","confirm":"Oui","decline":"Non"},"tooltip":"Si ce déplacement est habituel, les déplacements similaires seront automatiquement référencés avec le même motif."},"analysis":{"mode":"Émissions de CO2","purpose":"Émissions de CO2","travels":"%{smart_count} déplacement |||| %{smart_count} déplacements","emittedCO2":"CO2 émis"},"export":{"label":"Export","filename":"%{today} - Déplacements %{accountLabel}.csv","button":"Exporter les déplacements en CSV","modal":{"button":{"close":"Fermer","viewInDrive":"Voir dans Drive"},"title":"Exportation","content":{"done":"Le fichier \\"%{filename}\\" a été créé dans le dossier \\"Drive%{pathAppDir}\\" de votre Cozy.","progress":"L’export de vos déplacements est en cours, merci de patienter..."}}},"empty":{"title":"Ajoutez vos trajets","text":"Cette application est en phase expérimentale. Elle fonctionne à ce stade uniquement si vous êtes utilisateur de l\'application mobile \\"TraceMob\\" et que vous en avez configuré le connecteur dans votre Cozy."},"manifest":{"short_description":"Conservez l\'historique de vos déplacements et analysez leurs impacts sur l\'environnement.","long_description":"CoachCO2 est une application de self data développée dans le cadre du **territoire de la Rochelle** et du programme [Agremob](https://agremob.com/).\\n\\n&nbsp;\\n\\nElle a pour ambition de **vous aider** :\\n- à **prendre conscience des enjeux** liés à la mobilité,\\n- à **questionner vos habitudes** de déplacements,\\n- et **trouver des alternatives** plus durables (oui c’est possible !).\\n\\nCeci en toute confidentialité, comme toujours dans votre Cozy : **vous êtes le seul à avoir le droit d\'accéder à vos données**, et vous avez le contrôle de les partager avec qui vous vous voulez, quand et si VOUS le souhaitez.\\n\\nSon objectif est aussi de **permettre l’émergence de nouveaux projets ou offres d’écomobilité** grâce à l’expertise de structures partenaires du programme.\\n\\n&nbsp;\\n\\nAujourd\'hui cette application forme un duo avec **l\'application mobile TraceMob** dont le connecteur, présent aussi dans le store de votre Cloud Personnel, collecte et sauvegarde vos traces de mobilité chez vous.\\n\\nDemain **d\'autres capteurs compléteront vos données**. L\'application, elle-même en cours de développement, est aujourd\'hui tournée vers la mobilité, demain d\'autres sources de CO2 pourront étendre son champ d\'action.\\n\\n&nbsp;\\n\\n[Agremob](https://agremob.com/) fait de cette application **un bien commun** utilisable au-delà des frontières de l\'agglomération de la Rochelle. Si l\'hébergeur de votre Cozy ne la propose pas dans son propre store, contactez-le !","permissions":{"apps":{"description":"Utilisé par la cozy-bar pour afficher les icônes des applications"},"settings":{"description":"Utilisé par le cozy-bar pour afficher Claudy et savoir quelles applications sont à venir"},"accounts":{"description":"Utilisé pour obtenir un compte konnector"},"files":{"description":"Utilisé pour accéder aux fichiers de sauvegarde de votre exportation de voyages"},"geojson-timeseries":{"description":"Utilisé pour afficher les séries temporelles geojson"},"coachco2.settings":{"description":"Utilisé pour gérer les paramètres de votre Coach CO2"}}},"dacc":{"settings":{"anonymous_participation":"Participer anonymement au calcul des émissions moyennes de CO2","showAlerter":"Emission CO2 : afficher l\'alerter DACC sur la homepage"},"tripsCard":{"label":"Comparez vos émissions à la moyenne des autres utilisateurs de l’application ?","discard":"Non, merci","accept":"Comparer"},"compareDialog":{"title":"Comparez-vous anonymement","primaryText":"Afin de constituer la moyenne des émissions des utilisateurs, et parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos données sans votre demande explicite, il va vous demander le droit d\'envoyer cette donnée.","secondaryText":"Ces données seront agrégées et anonymes, elles ne contiendront aucun identifiant ni lieux.","action":"J\'ai compris"},"permissionsDialog":{"title":"Demande de permissions","primaryText":"L’application Coach CO2 demande les permissions suivantes à votre Cozy :","secondaryText":"Une fois autorisées, les permissions pourront être modifiées dans les paramètres","why_asking":"Pourquoi me demander ces permissions ?","export_outside":"Exporter hors du Cozy","anonymized_emissions":"Mes émissions de CO2 anonymisées","anonymized_bikegoal_progression":"Ma progression de façon anonyme","accept":"Toujours autoriser","refuse":"Refuser"},"reasonsDialog":{"title":"Motifs de permissions","content":"Parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos données privées, il vous demandera toujours le droit de laisser une application les envoyer à l\'extérieur."}},"vericalBarChart":{"title":"Émissions de CO2","legend":{"yours":"Vos émissions","average":"Moyennes des utilisateurs de l\'app"}},"bikeGoal":{"title":"Aller au travail à vélo","goal_progression":"%{days}/%{daysToReach} jours \\npar an","achievement_certificate":"Attestation de réussite","goals":"Objectifs","about":{"title":"À propos de l’objectif","intro":{"title":"Introduction","content":"Afin d’encourager le recours à des modes de transports alternatifs et durables, la mise en œuvre du forfait mobilités durables est entré en vigueur le 10 mai 2020.\\n\\nAinsi, les collaborateurs qui font le choix d’un mode de transport alternatif et durable pour leur trajet domicile-travail pourront bénéficier d’un forfait de %{bountyAmount}€ par an.\\n\\nVotre Coach CO2 vous aide à comptabiliser vos trajets domicile-travail à vélo et vous permet de générer l\'attestation de réussite à transmettre à votre employeur !"},"how_trips_detected":{"title":"Comment sont détectés mes trajets ?","content":"Vos trajets domicile-travail à vélo seront automatiquement détectés à partir de vos horaires et de votre vitesse.\\n\\nSi un trajet n’est pas automatiquement détecté en “Aller ou Retour au travail”, ouvrez le détail du trajet et modifiez le motif du déplacement en “Aller ou Retour au travail”.\\n\\nSi un trajet n’est pas automatiquement détecté en “vélo”, ouvrez le détail du trajet et modifiez le mode de transport en “vélo”."},"once_goal_reach":{"title":"Que faire une fois l’objectif atteint","content":"Une fois l’objectif atteint, un email vous sera envoyé avec un certificat à transmettre à votre employeur pour bénéficier de votre forfait  de %{bountyAmount}€ 🎉"}},"deactivate":{"deactivate":"Désactiver","title":"Souhaitez-vous vraiment ne plus participer à l’objectif ?","content":"Vous pourrez toujours choisir d’y participer à nouveau depuis les paramètres de l’application.","stop_participate":"Ne plus participer","cancel":"Annuler"},"alert":{"success":{"text":"Félicitations, vous avez atteint l’objectif “Aller travailler à vélo” 🎉","action":"Bénéficier de mon forfait de %{bountyAmount}€"},"title":"Allez au bureau à vélo et recevez %{bountyAmount}€ !","text":"Dans le cadre du Forfait Mobilités Durables (FMD) mis en place par le gouvernement Français, allez travailler à vélo %{daysToReach} jours dans l’année et recevez %{bountyAmount}€ !","actions":{"participate":"Participer","discard":"non, merci"}},"edit":{"modify":"Modifier","title":"Modifier l\'objectif","firstname":"Prénom","lastname":"Nom","workTime":"Temps de travail","workTime_full":"Temps plein","workTime_part":"Mi-temps ou temps partiel","workTimePercentage":"Pourcentage du temps de travail","compare_progress":"Comparer ma progression avec celle %{source}","cancel":"Annuler","submit":"Ok","required":"Ce champ est obligatoire"},"settings":{"participation":"Participer à l\'objectif “Aller au travail à vélo”","showAlerter":"Objectif vélo : afficher l\'alerter sur la homepage","hideOnboarding":"Objectif vélo : masquer l\'onboarding","showAlerterSuccess":"Objectif vélo : forcer l\'affichage de l\'alerte de succès sur la homepage"},"onboarding":{"title":"Forfait \\"mobilités durables\\"","actions":{"finish":"Terminer","previous":"Précédent","next":"Suivant"},"steps":{"naming":{"title":"Nom et prénom","nameLegend":"Renseignez les informations suivantes :"},"timing":{"timeLegend":"Vous disposez actuellement d’un contrat de travail à :","percentageLegend":"Renseignez le pourcentage de votre temps de travail :","percentage":"Pourcentage"},"comparison":{"comparisonLegend":"Il vous est possible d’afficher la progression moyenne des membres %{source} qui participent à l’objectif. Pour cela, il vous sera demandé de participer également à la constitution de cette moyenne.\\n\\nVos données de progression seront agrégées et envoyées anonymement, elles ne contiendront aucun identifiant ni lieux.","compare":"Comparer ma progression","doNotCompare":"Ne pas comparer ma progression"}}},"certificateGeneration":{"title":"Félicitations, vous avez atteint l’objectif “Aller travailler à vélo”","content":"Une attestation a été générée pour attester de votre succès pour l’année %{year}. Transférez-la dès maintenant par email à votre employeur pour recevoir %{bountyAmount}€ !","actions":{"show":"Certificat - Aller travailler à vélo.pdf","generate":"Générer une nouvelle attestation","understood":"J\'ai compris"}},"employer":{"my_company":"de mon entreprise","your_company":"de votre entreprise","my_collectivity":"de ma collectivité","your_collectivity":"de votre collectivité"}}}')},"G0/2":function(e,t,a){var n={"./en.json":"6wRk","./fr.json":"wNxD"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="G0/2"},LiWt:function(e,t,a){"use strict";a.r(t);a("/8/d"),a("llna"),a("/kYV");var n=a("q1tI"),r=a.n(n),o=a("EbEg"),i=a("44Ds"),c=a.n(i),l=a("QCzH"),s=a("SH7X"),u=a.n(s),d=a("pZg0"),m=a.n(d),p="io.cozy.timeseries.geojson",f="io.cozy.coachco2.settings",b={timeseries:{doctype:p,attributes:{},relationships:{}},files:{doctype:"io.cozy.files",attributes:{},relationships:{}},settings:{doctype:f,attributes:{},relationships:{}}},v=function(e,t){return/^\{\{\..*\}\}$/.test(e)?t:e},g=function(e){var t=e.app,n=e.locale,r={appIconDefault:a("ZAKO"),appNamePrefixDefault:m.a.name_prefix,appNameDefault:m.a.name,appLocaleDefault:"en"};return{appName:v(t.name,r.appNameDefault),appNamePrefix:v(t.prefix,r.appNamePrefixDefault),iconPath:v(t.icon,r.appIconDefault),lang:v(n,r.appLocaleDefault)}},h=a("mgfL"),y=a.n(h),E=a("oJ5p"),O=c()((function(){var e,t,n,r,o=document.querySelector("[role=application]"),i=g(JSON.parse(o.dataset.cozy)),c=i.lang,s=i.appName,d=Object(l.a)(c,(function(e){return a("/KVF")("./".concat(e))})),p=(e=document.querySelector("[role=application]"),t=JSON.parse(e.dataset.cozy),n=window.location.protocol,r="".concat(n,"//").concat(t.domain),new u.a({uri:r,token:t.token,appMetadata:{slug:m.a.name,version:m.a.version},schema:b,store:!1}));return p.registerPlugin(y.a.plugin),p.registerPlugin(E.RealtimePlugin),function(e){var t=e.client,a=e.container,n=e.lang,r=e.appName,o=g(JSON.parse(a.dataset.cozy)),i=o.appNamePrefix,c=o.iconPath;cozy.bar.init({appName:r,appNamePrefix:i,cozyClient:t,iconPath:c,lang:n,replaceTitleOnMobile:!1})}({client:p,container:o,lang:c,appName:s}),{container:o,client:p,lang:c,polyglot:d}})),j=a("ZsYx"),w=a("Mn8i"),x=a("XK56"),C=a("qvEe"),k=a("buk/"),_=a("xIbs"),D=a("1I/2"),P=a("QILm"),M=a.n(P),N=a("J4zp"),S=a.n(N),A=a("lSNA"),T=a.n(A);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(e){var t=e.client,a=e.setting,n=e.account;return t.save(Z(Z({},a),{},{account:n,_type:f}))},F=function(e){var t,a=null==e||null===(t=e.aggregation)||void 0===t?void 0:t.sections;if(!a)return e;var n=a.sort((function(e,t){return new Date(e.startDate).getTime()-new Date(t.startDate).getTime()})),r=Z({},e);return r.aggregation.sections=n,r},z=function(e,t,a){var n=Object(s.useClient)();if(e.isLoading||t.isLoading)return null;if(null===a){var r=e.data[0];if(r)return r.account;var o=t.data[0];return o?(L({client:n,setting:r,account:o}),o):null}return a},B=a("yXPU"),G=a.n(B),I=a("o0o1"),q=a.n(I),U=a("jKzE"),H=a("9ig3"),Q=a("sdC+"),W="HOME",V="WORK",Y="Trip_Id",K="Trip_Start_Display_Name",J="Trip_Arrival_Display_Name",X="Trip_Purpose",$="Trip_Start_Date",ee="Trip_End_Date",te="Section_Start_Date",ae="Section_End_Date",ne="Section_Duration",re="Section_Distance",oe="Section_Mode",ie="Section_Coordinates",ce="Section_Distances",le="Section_Timestamps",se="Section_Speeds";Object.freeze({is_tracemob_expe:!0});function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){var t=e.accountId,a=e.limitBy;return{definition:Object(s.Q)(p).where({"cozyMetadata.sourceAccount":t}).partialIndex({aggregation:{$exists:!0}}).select(["cozyMetadata.sourceAccount","startDate","endDate","aggregation"]).indexFields(["cozyMetadata.sourceAccount","startDate","endDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(a),options:{as:"".concat(p,"/sourceAccount/").concat(t,"/limitedBy/").concat(a),fetchPolicy:u.a.fetchPolicies.olderThan(3e4)}}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.limit,r=void 0===n?1e3:n,o=Object(H.a)(e)||null,i=Object(U.a)(e)||null,c=e?"".concat(o.getFullYear(),"-").concat(o.getMonth()):"noDate",l=Object(s.Q)(p).where(de({"cozyMetadata.sourceAccount":t},e&&{startDate:{$gte:o.toISOString(),$lte:i.toISOString()}})).partialIndex({aggregation:{$exists:!0}}).select(["aggregation","cozyMetadata.sourceAccount","startDate","endDate"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).limitBy(r);return{definition:l,options:{as:"".concat(p,"/sourceAccount/").concat(t,"/date/").concat(c,"/limitedBy/").concat(r),fetchPolicy:u.a.fetchPolicies.olderThan(3e4),enabled:Boolean(e)&&Boolean(t)}}},fe=function(e,t){var a=e.accountId;return{definition:Object(s.Q)("io.cozy.timeseries.geojson").where({"cozyMetadata.sourceAccount":a,startDate:{$gt:null},"aggregation.purpose":"COMMUTE","aggregation.modes":{$elemMatch:{$eq:"BICYCLING"}}}).select(["startDate","endDate","aggregation","aggregation.modes","aggregation.purpose","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate","aggregation.purpose","aggregation.modes"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(p,"/sourceAccount/").concat(a,"/BikeCommute/"),fetchPolicy:u.a.fetchPolicies.olderThan(1e8),enabled:t}}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?100:t,n=e.withOnlyLogin,r=void 0===n||n,o=Object(s.Q)("io.cozy.accounts").where({account_type:"tracemob"}).indexFields(["account_type"]).limitBy(a);return r&&o.select(["auth.login","account_type"]),{definition:o,options:{as:"".concat("io.cozy.accounts","/account_type/limitedBy/").concat(a,"/withOnlyLogin/").concat(r),fetchPolicy:u.a.fetchPolicies.olderThan(3e4)}}},ve=function(){return{definition:Object(s.Q)(f),options:{as:f,fetchPolicy:u.a.fetchPolicies.olderThan(1e8)}}},ge=["data"],he=["data"],ye=Object(n.createContext)(),Ee=function(){var e=Object(n.useContext)(ye);if(!e)throw new Error("useAccountContext must be used within a AccountProvider");return e},Oe=function(e){return e.auth.login},je=function(e){var t=e.children,a=Object(n.useState)(null),o=S()(a,2),i=o[0],c=o[1],l=Object(s.useClient)(),u=ve(),d=Object(s.useQuery)(u.definition,u.options),m=d.data,p=M()(d,ge),f=Object(s.isQueryLoading)(p),b=be(),v=Object(s.useQuery)(b.definition,b.options),g=v.data,h=M()(v,he),y=Object(s.isQueryLoading)(h),E=z({data:m,isLoading:f},{data:g,isLoading:y},i),O=f||y,j=Object(n.useCallback)((function(e){L({client:l,setting:m[0],account:e}),c(e)}),[l,m]),w=Object(n.useMemo)((function(){return{accounts:g,account:i,setAccount:j,isAccountLoading:O}}),[g,O,i,j]);return Object(n.useEffect)((function(){(null==E?void 0:E._id)!==(null==i?void 0:i._id)&&c(E)}),[E,i]),r.a.createElement(ye.Provider,{value:w},t)},we=Object(n.createContext)(),xe=function(){var e=Object(n.useContext)(we);if(!e)throw new Error("useSelectDatesContext must be used within a SelectDatesProvider");return e},Ce=function(e){var t=e.children,a=Object(n.useState)(null),o=S()(a,2),i=o[0],c=o[1],l=Object(n.useMemo)((function(){return{selectedDate:i,setSelectedDate:c}}),[i]);return r.a.createElement(we.Provider,{value:l},t)},ke=Object(w.a)({disableGlobal:!0}),_e=function(e){var t=e.client,a=e.lang,n=e.polyglot,o=e.children;return r.a.createElement(C.WebviewIntentProvider,null,r.a.createElement(x.b,{generateClassName:ke},r.a.createElement(s.CozyProvider,{client:t},r.a.createElement(s.RealTimeQueries,{doctype:p}),r.a.createElement(s.RealTimeQueries,{doctype:f}),r.a.createElement(je,null,r.a.createElement(Ce,null,r.a.createElement(k.b,{lang:a,polyglot:n},r.a.createElement(_.a,null,r.a.createElement(D.a,null,o))))))))},De=a("CodD"),Pe=a("QS0n"),Me=a("jDpt"),Ne=a("le8I"),Se=a("67rm"),Ae=a("9VR2"),Te=a("fSd/"),Re=a("rDu+"),Ze=a("Ratv"),Le=a("HAAP"),Fe=a("WVRf"),ze=Object(Te.e)(Pe.b),Be=function(){var e=Object(k.e)().t;return r.a.createElement(Ae.a,null,r.a.createElement(Te.d,null,r.a.createElement(Te.b,null,r.a.createElement(ze,{to:"/trips"},r.a.createElement(Te.a,{icon:Re.a}),r.a.createElement(Te.c,null,e("nav.trips")))),r.a.createElement(Te.b,null,r.a.createElement(ze,{to:"/analysis"},r.a.createElement(Te.a,{icon:Le.a}),r.a.createElement(Te.c,null,e("nav.analysis")))),r.a.createElement(Te.b,{secondary:!0},r.a.createElement(ze,{to:"/analysis/modes"},r.a.createElement(Te.c,null,e("nav.modes")))),r.a.createElement(Te.b,{secondary:!0},r.a.createElement(ze,{to:"/analysis/purposes"},r.a.createElement(Te.c,null,r.a.createElement(Fe.a,{whiteSpace:"nowrap"},e("nav.purposes"))))),r.a.createElement(Te.b,null,r.a.createElement(ze,{to:"/settings"},r.a.createElement(Te.a,{icon:Ze.a}),r.a.createElement(Te.c,null,e("nav.settings"))))))},Ge=function(){var e=Object(k.e)().t;return r.a.createElement(Me.b,null,r.a.createElement(Be,null),r.a.createElement(Me.c,null,r.a.createElement(Me.a,null,r.a.createElement(De.b,null))),r.a.createElement(Se.a,{t:e}),r.a.createElement(Ne.a,null))},Ie=a("ZLzk"),qe=a("MSWZ"),Ue=a("17x9"),He=a.n(Ue),Qe=a("G6Tw"),We=a("cbAs"),Ve=a("1aYg"),Ye=a("c8ah"),Ke=a("vEVt"),Je=a("gPjO"),Xe=a("aN1g"),$e=a("eBdR"),et=a("QaI8"),tt=a("y6ex"),at=a("BuRe"),nt=a("ITxS"),rt=a("6Rff"),ot=a("cStB"),it=a("Tz69"),ct=a("501n"),lt=a("SqOp"),st=a("BP58"),ut=a("c/95"),dt=a("5YfE"),mt=a("c8rA"),pt=a("NrOZ"),ft=a("a/QU"),bt=a("kJHp"),vt=a("KoZ8"),gt=a("R9Yk"),ht=a("AanQ"),yt=a("CrE2"),Et=["AIR_OR_HSR","BICYCLING","BUS","CAR","SUBWAY","TRAIN","WALKING","UNKNOWN"],Ot=function(e){switch(e){case"AIR_OR_HSR":return it.a;case"BICYCLING":return nt.a;case"CAR":return ot.a;case"BUS":return rt.a;case"SUBWAY":return ct.a;case"TRAIN":return lt.a;case"WALKING":return st.a;case"UNKNOWN":default:return ut.a}},jt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNKNOWN",a=(e={},T()(e,"AIR_OR_HSR","#F05759"),T()(e,"BICYCLING","#15CACD"),T()(e,"BUS","#BA5AE8"),T()(e,"CAR","#FF7B5E"),T()(e,"SUBWAY","#8978FF"),T()(e,"TRAIN","#F1B61E"),T()(e,"WALKING","#21B930"),T()(e,"UNKNOWN","#A4A7AC"),e);return a[t]},wt=["COMMUTE","SCHOOL","SHOPPING","MEAL","PERSONAL_MED","EXERCISE","ENTERTAINMENT","PICK_DROP","OTHER_PURPOSE"],xt=function(e){switch(e){case"COMMUTE":return dt.a;case"SCHOOL":return ht.a;case"SHOPPING":return yt.a;case"MEAL":return vt.a;case"PERSONAL_MED":return bt.a;case"EXERCISE":return mt.a;case"ENTERTAINMENT":return pt.a;case"PICK_DROP":return gt.a;case"OTHER_PURPOSE":default:return ft.a}},Ct=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OTHER_PURPOSE",a=(e={},T()(e,"COMMUTE","#BA5AE8"),T()(e,"SCHOOL","#8978FF"),T()(e,"SHOPPING","#FF7B5E"),T()(e,"MEAL","#15CACD"),T()(e,"PERSONAL_MED","#1CAAE8"),T()(e,"EXERCISE","#21B930"),T()(e,"ENTERTAINMENT","#F85AA8"),T()(e,"PICK_DROP","#C78542"),T()(e,"OTHER_PURPOSE","#A4A7AC"),e);return a[t]},kt=function(e){var t=e.icon,a=e.color,n=e.faded,o=e.ghost,i=function(e){var t=e.faded,a=e.color;return t?{color:a||"var(--primaryColor)",backgroundColor:"var(--paperBackgroundColor)",border:"1px solid var(--borderMainColor)"}:{backgroundColor:a}}({faded:n,color:a});return r.a.createElement(at.a,{style:i,icon:t,size:32,ghost:o})},_t=function(e){var t=e.attribute;return r.a.createElement(kt,{icon:xt(t),color:Ct(t),ghost:"OTHER_PURPOSE"===t})},Dt=function(e){var t=e.attribute;return r.a.createElement(kt,{icon:Ot(t),color:jt(t),faded:!0})},Pt=a("RIqP"),Mt=a.n(Pt),Nt=a("QkVN"),St=a.n(Nt),At=a("QVEU"),Tt=a.n(At),Rt=a("xweI"),Zt=a.n(Rt),Lt=a("O7iK"),Ft=a.n(Lt),zt=a("9UKM"),Bt=a.n(zt),Gt=a("mwIZ"),It=a.n(Gt),qt=a("D1y2"),Ut=a.n(qt),Ht=a("a9jo"),Qt=a.n(Ht),Wt=a("7tbW"),Vt=a.n(Wt),Yt=a("phiu"),Kt=a("FVam"),Jt=a("Da6A"),Xt=function(e){var t=0,a=e.distance/1e3;switch(e.mode){case"AIR_OR_HSR":if(a<=1e3){t+=.258*a;break}t+=a<=3500?.187*a:.152*a;break;case"CAR":t+=.192*a;break;case"BUS":t+=.137*a;break;case"SUBWAY":t+=.00472*a;break;case"TRAIN":t+=.00529*a}return t},$t=function(e){var t,a=e.averageSpeed,n=e.duration/60;switch(e.mode){case"WALKING":t=a<=3?2:a<=5?3.5:a<=6.5?5:7;break;case"BICYCLING":t=a<=15?5.8:a<=22.4?8:a<=25.6?10:15.8}return t?function(e,t){return 74.25*e*3.5/200*t}(t,n):0},ea=a("jxQj"),ta=a.n(ea),aa=function(e){var t="m",a=e;return e>1e3&&(t="km",a=e/1e3),"".concat(Math.round(a)," ").concat(t)},na=function(e){return"".concat(Math.round(100*e)/100," kg")},ra=function(e,t){var a=["fr","en"].includes(t)?t:"en";return ta()(1e3*e,{delimiter:" ",largest:2,round:!0,units:["h","m"],language:a,languages:{fr:{d:function(){return"j"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}},en:{d:function(){return"d"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}}}})},oa=function(e){var t=e.f,a=e.lang,n=e.date;return t(n,"fr"===a?"HH[h]mm":"HH:mm")},ia=function(e){return 3.6*(e.reduce((function(e,t){return e+t}),0)/e.length)},ca=function(e){return[W,V].includes(e)?"COMMUTE":e},la=function(e){return It()(e,"properties.manual_purpose")},sa=function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.automatic_purpose},ua=function(e){var t=It()(e,"properties.manual_mode","").toUpperCase(),a=It()(e,"properties.sensed_mode","").toUpperCase(),n=Et.includes(t),r=a.split("PREDICTEDMODETYPES.")[1],o=Et.includes(r);return n&&t||o&&r||"UNKNOWN"},da=function(e){return e.features.map((function(e){var t=It()(e,"properties.start_fmt_time"),a=It()(e,"properties.end_fmt_time"),n=It()(e,"properties.speeds");return{id:e.id,mode:ua(e),coordinates:It()(e,"geometry.coordinates"),timestamps:It()(e,"properties.timestamps"),distance:It()(e,"properties.distance"),distances:It()(e,"properties.distances"),duration:It()(e,"properties.duration"),startDate:t?new Date(t):t,endDate:a?new Date(a):a,speeds:n,averageSpeed:n?ia(n):void 0}}))},ma=c()((function(e){return e.features.filter((function(e){return"FeatureCollection"===e.type})).flatMap(da)}));function pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ba(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return va(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return va(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ga=function(e){return e.flatMap((function(t,a){return t.series.map((function(t){return function(e){var t=e.features,a=e.properties,n=Tt()(t,(function(e){return e.id}));return St()({},e,{properties:{start_place:{data:n[a.start_place.$oid]},end_place:{data:n[a.end_place.$oid]}}})}(fa(fa({},t),{},{timeserieId:e[a]._id}))}))}))},ha=function(e){var t=0;return e.forEach((function(e){var a;t+=(null===(a=e.aggregation)||void 0===a?void 0:a.totalCO2)||0})),t},ya=function(e,t){var a=Bt()(e),n=e[t],r=0===n.timeseries.length&&0===n.totalCO2,o=Zt()(a.filter((function(e){return r?e[0]!==t&&e[1].totalCO2>0:e[1].totalCO2>0})),(function(e){return e[1].totalCO2})).reverse(),i=Zt()(a.filter((function(e){return r?e[0]!==t&&0===e[1].totalCO2:0===e[1].totalCO2})),(function(e){return e[1].timeseries.length})).reverse();return fa(fa(fa({},Ft()(o)),Ft()(i)),r&&T()({},t,n))},Ea=function(e){var t=function(e){var t=Et.reduce((function(e,t){return fa(fa({},e),{},T()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){e.aggregation.sections.forEach((function(a){var n=t[a.mode].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a.mode].totalCO2+=a.CO2}))})),t}(e);return ya(t,"UNKNOWN")},Oa=function(e){var t=It()(e,"aggregation.purpose","").toUpperCase(),a=ca(t);return wt.includes(a)&&a||"OTHER_PURPOSE"},ja=function(e){var t=function(e){var t=wt.reduce((function(e,t){return fa(fa({},e),{},T()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){var a=Oa(e),n=t[a].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a].totalCO2+=e.aggregation.totalCO2})),t}(e);return ya(t,"OTHER_PURPOSE")},wa=function(e){return e.startDate?new Date(e.startDate):null},xa=function(e){return e.endDate?new Date(e.endDate):null},Ca=function(e){return It()(e,"aggregation.startPlaceDisplayName")},ka=function(e){return It()(e,"aggregation.endPlaceDisplayName")},_a=function(e){return It()(e,"series[0]")},Da=function(e){var t=wa(e),a=xa(e);return Object(Kt.a)(a,t)},Pa=function(e){return aa(e.aggregation.totalDistance)},Ma=function(e){var t=function(e){return It()(e,"aggregation.totalCO2","")}(e);return na(t)},Na=function(e){var t,a=function(e){return It()(e,"aggregation.totalCalories","")}(e);return t=a,"".concat(Math.round(t)," kcal")},Sa=function(e,t){var a;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var n=fa({},e);return Ut()(n,"series[0].properties.automatic_purpose",t),Ut()(n,"aggregation.recurring",!0),Ta(n)},Aa=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isRecurringTrip,o=void 0===r?null:r;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var i=fa({},e);return Ut()(i,"series[0].properties.manual_purpose",t.toUpperCase()),null!==o&&Ut()(i,"aggregation.recurring",o),Ta(i)},Ta=function(e){var t,a=e.series[0],n=null!=e&&null!==(t=e.aggregation)&&void 0!==t&&t.recurring&&sa(a)||la(a);return n?fa(fa({},e),{},{aggregation:fa(fa({},e.aggregation),{},{purpose:n})}):e},Ra=function(e,t){var a=function(e,t){var a,n=0,r=ba(e.aggregation.sections);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.mode===t&&(n+=o.CO2)}}catch(i){r.e(i)}finally{r.f()}return n}(e,t);return na(a)},Za=function(e){var t=0,a=Mt()(e).sort((function(e,t){return wa(e)-wa(t)}));return a.forEach((function(e,n){if(0===n)t++;else{var r=wa(e),o=a[n-1],i=wa(o),c=Object(Jt.a)(i,12);r.toDateString()===i.toDateString()||r<c||t++}})),t},La=function(e,t){return e.filter((function(e){return new Date(e.startDate).getFullYear().toString()===t}))},Fa={co2:{fontWeight:700,whiteSpace:"nowrap"},tripIcon:{marginRight:"4px"}},za=function(e){var t=e.tripModeIcons,a=e.duration,n=e.distance;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(tt.a,{key:t,icon:e,size:10,style:Fa.tripIcon})})),"· ".concat(a," · ").concat(n))},Ba=function(e){var t=e.timeserie,a=e.hasDateHeader,o=Object(k.e)().f,i=Object(De.g)(),c=Object(De.h)(),l=Object(De.i)().mode,s=Oa(t),u=Da(t),d=function(e){return Vt()(e.aggregation.sections.sort((function(e,t){return e.distance>t.distance?-1:1})).map((function(e){return e.mode})).filter(Boolean))}(t),m=Pa(t),p=Object(n.useMemo)((function(){return l?Ra(t,l):Ma(t)}),[t,l]),f=Object(n.useMemo)((function(){return d.map((function(e){return Ot(e)}))}),[d]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement($e.a,null,o(wa(t),"dddd DD MMMM")),r.a.createElement(Je.a,{className:"u-pl-1-s u-pl-2",button:!0,onClick:function(){c("".concat(i.pathname,"/").concat(t._id))}},r.a.createElement(Xe.a,null,r.a.createElement(_t,{attribute:s})),r.a.createElement(Ke.a,{primary:ka(t),secondary:r.a.createElement(za,{tripModeIcons:f,duration:u,distance:m})}),r.a.createElement(Ye.a,{className:"u-mh-half",style:Fa.co2,variant:"body2"},p),r.a.createElement(tt.a,{icon:et.a,color:"var(--secondaryTextColor)"})),r.a.createElement(qe.a,null))};Ba.propTypes={timeserie:He.a.object.isRequired,hasDateHeader:He.a.bool.isRequired};var Ga=r.a.memo(Ba,(function(e,t){return e.timeserie._rev===t.timeserie._rev}));Ga.displayName="MemoizedTripItem";var Ia=Ga,qa=function(e){var t=e.timeseries,a=e.noHeader,o=Object(D.b)().isMobile,i=Object(k.e)().t,c=Object(n.useCallback)((function(e,a){return 0===a||!Object(Qe.a)(wa(e),wa(t[a-1]))}),[t]);return r.a.createElement(r.a.Fragment,null,o&&!a&&r.a.createElement(Ve.a,{className:"u-ph-1",style:{height:"4rem",display:"flex",alignItems:"center"},square:!0},r.a.createElement(Ye.a,{variant:"h5"},i("trips.trips"))),r.a.createElement(We.a,null,t.map((function(e,t){return r.a.createElement(Ia,{key:"".concat(e.id).concat(t),timeserie:e,hasDateHeader:c(e,t)})}))))};qa.propTypes={timeseries:He.a.arrayOf(He.a.object).isRequired,noHeader:He.a.bool};var Ua=qa,Ha=a("TSYQ"),Qa=a.n(Ha),Wa=a("wvTK"),Va=a("lEaz"),Ya=a("SjAl"),Ka=function(e){var t=e.label,a=e.subtitle,n=e.onBack,o=Object(D.b)().isMobile,i=cozy.bar,c=i.BarCenter,l=i.BarLeft,s="function"==typeof n?n:void 0;return o?r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(l,null,r.a.createElement(Va.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(tt.a,{icon:Ya.a,size:16}))),r.a.createElement(c,null,r.a.createElement(_.a,null,r.a.createElement(Wa.a,null,t)))):r.a.createElement("div",{className:Qa()(T()({},"u-flex u-flex-items-baseline u-ml-2",s))},s&&r.a.createElement(Va.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(tt.a,{icon:Ya.a,size:16})),r.a.createElement("div",{className:Qa()("u-mv-1-half-s u-ml-1-s u-mv-2",T()({},"u-ml-2",!s))},r.a.createElement(Ye.a,{variant:"h3"},t),a))};Ka.propTypes={label:He.a.string,subtitle:He.a.node,onBack:He.a.func};var Ja=Ka,Xa=a("V2U0"),$a=a("GoJ1"),en=a("4BeY"),tn=a.n(en),an=a("IaFt"),nn=a.n(an),rn=new tn.a({id:"empty_b02f44d5e51464ad11702351c2fec42f",use:"empty_b02f44d5e51464ad11702351c2fec42f-usage",viewBox:"0 0 250 163",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 163" id="empty_b02f44d5e51464ad11702351c2fec42f"><g clip-path="url(#empty_b02f44d5e51464ad11702351c2fec42f_a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M54.535 10.576a25.382 25.382 0 0 1 3.93 0l.154-1.994a27.36 27.36 0 0 0-4.238 0l.154 1.994Zm7.805.61c1.284.307 2.53.713 3.73 1.21l.766-1.847a26.798 26.798 0 0 0-4.031-1.309l-.465 1.945Zm-15.41 1.21c1.2-.497 2.446-.903 3.73-1.21l-.465-1.946a26.798 26.798 0 0 0-4.03 1.309l.765 1.848Zm22.633 1.784a25.08 25.08 0 0 1 3.173 2.309l1.3-1.52a27.097 27.097 0 0 0-3.426-2.493l-1.047 1.704Zm-29.3 2.309a25.08 25.08 0 0 1 3.174-2.309l-1.047-1.704a27.097 27.097 0 0 0-3.426 2.493l1.3 1.52Zm35.248 2.775a25.09 25.09 0 0 1 2.309 3.173l1.704-1.047a27.097 27.097 0 0 0-2.493-3.426l-1.52 1.3ZM35.18 22.437a25.08 25.08 0 0 1 2.309-3.173l-1.52-1.3a27.097 27.097 0 0 0-2.493 3.426l1.704 1.047Zm44.423 3.493c.498 1.2.904 2.446 1.212 3.73l1.945-.465a26.794 26.794 0 0 0-1.309-4.03l-1.847.765Zm-47.418 3.73c.308-1.284.714-2.53 1.212-3.73l-1.848-.766a26.794 26.794 0 0 0-1.309 4.031l1.945.465Zm49.239 3.875a25.382 25.382 0 0 1 0 3.93l1.994.154a27.38 27.38 0 0 0 0-4.238l-1.994.154ZM31.5 35.5c0-.661.026-1.316.076-1.965l-1.994-.154a27.38 27.38 0 0 0 0 4.238l1.994-.154A25.382 25.382 0 0 1 31.5 35.5Zm49.315 5.84a24.793 24.793 0 0 1-1.212 3.73l1.848.766a26.794 26.794 0 0 0 1.309-4.031l-1.945-.465Zm-47.418 3.73a24.798 24.798 0 0 1-1.212-3.73l-1.945.465a26.794 26.794 0 0 0 1.309 4.03l1.848-.765Zm44.423 3.493a25.08 25.08 0 0 1-2.309 3.173l1.52 1.3a27.097 27.097 0 0 0 2.493-3.426l-1.704-1.047Zm-40.331 3.173a25.08 25.08 0 0 1-2.309-3.173l-1.704 1.047a27.097 27.097 0 0 0 2.493 3.426l1.52-1.3Zm5.948 5.084a25.08 25.08 0 0 1-3.173-2.309l-1.3 1.52a27.097 27.097 0 0 0 3.426 2.493l1.047-1.704Zm29.3-2.309a25.09 25.09 0 0 1-3.174 2.309l1.047 1.704a27.097 27.097 0 0 0 3.426-2.493l-1.3-1.52ZM50.66 59.815a24.798 24.798 0 0 1-3.73-1.212l-.766 1.848c1.296.537 2.643.977 4.031 1.309l.465-1.945Zm15.41-1.212c-1.2.498-2.446.904-3.73 1.212l.465 1.945a26.794 26.794 0 0 0 4.03-1.309l-.765-1.848ZM56.5 60.5c-.661 0-1.316-.026-1.965-.076l-.154 1.994a27.38 27.38 0 0 0 4.238 0l-.154-1.994c-.649.05-1.304.076-1.965.076Zm41.93 20.225c-.056.19-.115.382-.173.573-.12.394-.24.788-.347 1.185 1.214-6.1-3.12-12.157-7.465-16.006-.34-.301-.688-.595-1.041-.879a29.72 29.72 0 0 0-1.794-1.582C85.29 62.13 84.5 61.5 82.5 60c-3.081-2.31-4.808.687-3.34 1.465 3.84 2.035 5.51 3.322 8.829 6.36a33.302 33.302 0 0 1 5.699 6.805c1.426 2.262 2.73 4.75 3.227 7.4l.047.394c-.442-.657-.89-1.31-1.338-1.963-.892-1.299-1.783-2.597-2.623-3.929-.945-1.5-2.531-.31-1.442 1.256.25.36.496.724.742 1.088.536.793 1.072 1.585 1.653 2.346 1.21 2.057 2.705 3.945 4.212 5.814.25.308.834.3 1.142-.874.738-2.81 2.265-9.689 2.322-10.002.305-1.692-1.265-1.707-1.56-.725-.26.87-.534 1.735-.807 2.6v.001c-.282.895-.565 1.79-.833 2.689Zm21.312 6.919a21.26 21.26 0 0 1 4.758-.713h.001c1.609.057 3.206.296 4.76.714 8.095 2.176 13.959 8.93 14.941 17.207a1.9 1.9 0 0 0 1.698 1.665c4.401.433 9.102 2.943 12.576 6.713 3.051 3.311 4.841 7.179 5.177 11.187v.002c.118 1.394.04 2.826-.232 4.255l-.015.084c-.261 1.815-1.139 4.798-2.45 7.058-2.952 5.102-7.841 7.909-16.348 9.389-3.908.68-7.61 1.162-19.705 1.162l-.423.001-.382-.001c-12.095 0-15.797-.482-19.705-1.162-8.508-1.48-13.397-4.288-16.35-9.389-1.311-2.261-2.188-5.243-2.449-7.058l-.014-.084a15.713 15.713 0 0 1-.233-4.257c.336-4.008 2.127-7.877 5.179-11.188 3.471-3.769 8.172-6.279 12.574-6.712a1.9 1.9 0 0 0 1.698-1.665c.982-8.277 6.846-15.031 14.944-17.208Zm4.723 62.518h.073l.365-.001c11.292 0 15.714-.41 20.355-1.218 6.464-1.125 14.462-3.415 18.982-11.225 1.667-2.876 2.611-6.298 2.916-8.377.329-1.727.422-3.491.278-5.243-.408-4.855-2.54-9.502-6.168-13.44-3.768-4.089-8.624-6.845-13.514-7.713-1.65-9.154-8.384-16.513-17.504-18.964a24.974 24.974 0 0 0-5.525-.838 1.594 1.594 0 0 0-.228-.01 1.442 1.442 0 0 0-.21.01c-1.88.073-3.74.354-5.53.837-9.122 2.452-15.857 9.81-17.507 18.965-4.892.868-9.748 3.624-13.512 7.713-3.63 3.937-5.763 8.585-6.17 13.442a19.484 19.484 0 0 0 .279 5.241c.305 2.078 1.247 5.499 2.915 8.376 4.52 7.81 12.519 10.102 18.982 11.226 4.641.808 9.064 1.218 20.356 1.218l.367.001Zm12.634-27.383c-.034.619.959 1.873 1.804 2.497.945.698.93 1.899.37 2.656-.345.468-.834.712-1.34.712-.347 0-.703-.115-1.023-.352a8.068 8.068 0 0 1-.796-.677c-3.39 1.879-7.383 2.815-11.373 2.815-4.277 0-8.545-1.076-12.067-3.216-.353.294-.693.547-.981.76l-.003.003a1.65 1.65 0 0 1-.987.343c-.207 0-.414-.044-.612-.13-.564-.243-.976-.82-1.052-1.472a1.783 1.783 0 0 1 .714-1.65c1.188-.884 2.086-1.644 1.951-2.719-.118-.932.474-1.695 1.406-1.812.89-.111 1.939.459 2.08 1.579a4.575 4.575 0 0 1-.423 2.585c5.576 3.333 13.426 3.455 19.331.343-.394-.694-.666-1.466-.614-2.37a1.79 1.79 0 0 1 .985-1.52c.601-.302 1.34-.267 1.884.089.511.336.783.896.746 1.536Z" fill="#297EF1" /><path opacity=".722" fill-rule="evenodd" clip-rule="evenodd" d="M122.535 2.576a25.4 25.4 0 0 1 3.93 0l.154-1.994a27.344 27.344 0 0 0-4.238 0l.154 1.994Zm7.805.61a24.86 24.86 0 0 1 3.73 1.21l.766-1.847a26.826 26.826 0 0 0-4.031-1.309l-.465 1.945Zm-15.41 1.21a24.86 24.86 0 0 1 3.73-1.21l-.465-1.946a26.826 26.826 0 0 0-4.031 1.309l.766 1.847Zm22.633 1.784c1.119.687 2.18 1.46 3.173 2.309l1.3-1.52a27.142 27.142 0 0 0-3.426-2.493l-1.047 1.704Zm-29.299 2.309a25.037 25.037 0 0 1 3.173-2.309l-1.047-1.704a27.143 27.143 0 0 0-3.426 2.493l1.3 1.52Zm35.247 2.775a25.112 25.112 0 0 1 2.309 3.173l1.704-1.047a27.072 27.072 0 0 0-2.493-3.426l-1.52 1.3Zm-40.331 3.173a25.112 25.112 0 0 1 2.309-3.173l-1.52-1.3a27.072 27.072 0 0 0-2.493 3.426l1.704 1.047Zm44.424 3.493a24.9 24.9 0 0 1 1.211 3.73l1.945-.465a26.818 26.818 0 0 0-1.309-4.03l-1.847.765Zm-47.419 3.73a24.9 24.9 0 0 1 1.211-3.73l-1.847-.766a26.794 26.794 0 0 0-1.309 4.031l1.945.465Zm49.239 3.875a25.533 25.533 0 0 1 0 3.93l1.994.154a27.531 27.531 0 0 0 0-4.238l-1.994.154ZM99.5 27.5c0-.661.026-1.317.076-1.965l-1.994-.154a27.38 27.38 0 0 0 0 4.238l1.994-.154A25.382 25.382 0 0 1 99.5 27.5Zm49.315 5.84a24.895 24.895 0 0 1-1.211 3.73l1.847.766a26.818 26.818 0 0 0 1.309-4.031l-1.945-.465Zm-47.419 3.73a24.9 24.9 0 0 1-1.211-3.73l-1.945.465a26.794 26.794 0 0 0 1.309 4.03l1.847-.765Zm44.424 3.493a25.112 25.112 0 0 1-2.309 3.173l1.52 1.3a27.068 27.068 0 0 0 2.493-3.426l-1.704-1.047Zm-40.331 3.173a25.112 25.112 0 0 1-2.309-3.173l-1.704 1.047a27.068 27.068 0 0 0 2.493 3.426l1.52-1.3Zm5.948 5.084a25.032 25.032 0 0 1-3.173-2.309l-1.3 1.52a27.157 27.157 0 0 0 3.426 2.493l1.047-1.704Zm29.299-2.309a25.041 25.041 0 0 1-3.173 2.309l1.047 1.704a27.157 27.157 0 0 0 3.426-2.493l-1.3-1.52Zm-22.076 5.304a24.857 24.857 0 0 1-3.73-1.212l-.766 1.848a26.82 26.82 0 0 0 4.031 1.309l.465-1.945Zm15.41-1.212c-1.2.498-2.446.904-3.73 1.212l.465 1.945a26.82 26.82 0 0 0 4.031-1.309l-.766-1.848ZM124.5 52.5a25.42 25.42 0 0 1-1.965-.076l-.154 1.994a27.363 27.363 0 0 0 4.238 0l-.154-1.994a25.42 25.42 0 0 1-1.965.076Zm68-42c-.661 0-1.316.026-1.965.076l-.154-1.994a27.343 27.343 0 0 1 4.238 0l-.154 1.994a25.42 25.42 0 0 0-1.965-.076Zm9.57 1.896a24.857 24.857 0 0 0-3.73-1.21l.465-1.946c1.388.332 2.735.772 4.031 1.309l-.766 1.848Zm-15.41-1.21c-1.284.307-2.53.713-3.73 1.21l-.766-1.847a26.824 26.824 0 0 1 4.031-1.309l.465 1.945Zm22.076 5.303a25.032 25.032 0 0 0-3.173-2.309l1.047-1.704a27.157 27.157 0 0 1 3.426 2.493l-1.3 1.52Zm-29.299-2.309a25.032 25.032 0 0 0-3.173 2.309l-1.3-1.52a27.157 27.157 0 0 1 3.426-2.493l1.047 1.704Zm34.383 8.257a25.112 25.112 0 0 0-2.309-3.173l1.52-1.3a27.068 27.068 0 0 1 2.493 3.426l-1.704 1.047Zm-40.331-3.173a25.112 25.112 0 0 0-2.309 3.173l-1.704-1.047a27.068 27.068 0 0 1 2.493-3.426l1.52 1.3Zm43.326 10.396a24.9 24.9 0 0 0-1.211-3.73l1.847-.766a26.818 26.818 0 0 1 1.309 4.031l-1.945.465Zm-47.419-3.73a24.9 24.9 0 0 0-1.211 3.73l-1.945-.465a26.818 26.818 0 0 1 1.309-4.03l1.847.765ZM217.5 35.5c0-.661-.026-1.316-.076-1.965l1.994-.154a27.531 27.531 0 0 1 0 4.238l-1.994-.154c.05-.649.076-1.304.076-1.965Zm-49.924-1.965a25.533 25.533 0 0 0 0 3.93l-1.994.154a27.531 27.531 0 0 1 0-4.238l1.994.154Zm48.028 11.535a24.895 24.895 0 0 0 1.211-3.73l1.945.465a26.818 26.818 0 0 1-1.309 4.03l-1.847-.766Zm-47.419-3.73a24.9 24.9 0 0 0 1.211 3.73l-1.847.766a26.818 26.818 0 0 1-1.309-4.031l1.945-.465Zm43.326 10.396a25.112 25.112 0 0 0 2.309-3.173l1.704 1.047a27.068 27.068 0 0 1-2.493 3.426l-1.52-1.3Zm-40.331-3.173a25.112 25.112 0 0 0 2.309 3.173l-1.52 1.3a27.068 27.068 0 0 1-2.493-3.426l1.704-1.047Zm5.084 5.948c.993.85 2.054 1.622 3.173 2.309l-1.047 1.704a27.157 27.157 0 0 1-3.426-2.493l1.3-1.52Zm29.299 2.309a25.041 25.041 0 0 0 3.173-2.309l1.3 1.52a27.157 27.157 0 0 1-3.426 2.493l-1.047-1.704Zm-22.633 1.783c1.2.498 2.446.904 3.73 1.212l-.465 1.945a26.82 26.82 0 0 1-4.031-1.309l.766-1.848Zm15.41 1.212a24.857 24.857 0 0 0 3.73-1.212l.766 1.848a26.82 26.82 0 0 1-4.031 1.309l-.465-1.945Zm-7.805.609a25.42 25.42 0 0 0 3.93 0l.154 1.994a27.363 27.363 0 0 1-4.238 0l.154-1.994ZM222.5 67.5c-.661 0-1.316.026-1.965.076l-.154-1.994a27.363 27.363 0 0 1 4.238 0l-.154 1.994a25.42 25.42 0 0 0-1.965-.076Zm9.57 1.897a24.857 24.857 0 0 0-3.73-1.212l.465-1.945a26.82 26.82 0 0 1 4.031 1.309l-.766 1.847Zm-15.41-1.212c-1.284.308-2.53.714-3.73 1.212l-.766-1.848a26.82 26.82 0 0 1 4.031-1.309l.465 1.945Zm22.076 5.304a25.032 25.032 0 0 0-3.173-2.309l1.047-1.704a27.157 27.157 0 0 1 3.426 2.493l-1.3 1.52Zm-29.299-2.309a25.041 25.041 0 0 0-3.173 2.309l-1.3-1.52a27.157 27.157 0 0 1 3.426-2.493l1.047 1.704Zm34.383 8.257a25.112 25.112 0 0 0-2.309-3.173l1.52-1.3a27.076 27.076 0 0 1 2.493 3.426l-1.704 1.047Zm-40.331-3.173a25.112 25.112 0 0 0-2.309 3.173l-1.704-1.047a27.068 27.068 0 0 1 2.493-3.426l1.52 1.3Zm43.326 10.396a24.895 24.895 0 0 0-1.211-3.73l1.847-.766a26.818 26.818 0 0 1 1.309 4.031l-1.945.465Zm-47.419-3.73a24.895 24.895 0 0 0-1.211 3.73l-1.945-.465a26.818 26.818 0 0 1 1.309-4.03l1.847.765ZM247.5 92.5c0-.661-.026-1.317-.076-1.965l1.994-.154a27.531 27.531 0 0 1 0 4.238l-1.994-.154c.05-.648.076-1.304.076-1.965Zm-49.924-1.965a25.533 25.533 0 0 0 0 3.93l-1.994.154a27.531 27.531 0 0 1 0-4.238l1.994.154Zm48.028 11.535c.497-1.2.903-2.446 1.211-3.73l1.945.465a26.841 26.841 0 0 1-1.309 4.031l-1.847-.766Zm-47.419-3.73c.308 1.284.714 2.53 1.211 3.73l-1.847.766a26.841 26.841 0 0 1-1.309-4.031l1.945-.465Zm43.326 10.396a25.063 25.063 0 0 0 2.309-3.173l1.704 1.047a27.127 27.127 0 0 1-2.493 3.426l-1.52-1.3Zm-40.331-3.173a25.063 25.063 0 0 0 2.309 3.173l-1.52 1.3a27.127 27.127 0 0 1-2.493-3.426l1.704-1.047Zm5.084 5.948a25.063 25.063 0 0 0 3.173 2.309l-1.047 1.704a27.127 27.127 0 0 1-3.426-2.493l1.3-1.52Zm29.299 2.309a25.063 25.063 0 0 0 3.173-2.309l1.3 1.52a27.127 27.127 0 0 1-3.426 2.493l-1.047-1.704Zm-22.633 1.784c1.2.497 2.446.903 3.73 1.211l-.465 1.945a26.844 26.844 0 0 1-4.031-1.309l.766-1.847Zm15.41 1.211a24.96 24.96 0 0 0 3.73-1.211l.766 1.847a26.844 26.844 0 0 1-4.031 1.309l-.465-1.945Zm-7.805.609a25.571 25.571 0 0 0 3.93 0l.154 1.994a27.513 27.513 0 0 1-4.238 0l.154-1.994Zm-72.882-33.432c.309 1.174.893 1.18 1.142.874 1.507-1.87 3.002-3.757 4.213-5.815.575-.754 1.105-1.538 1.636-2.323h.001c.25-.372.501-.743.757-1.111 1.09-1.565-.496-2.755-1.442-1.255-.842 1.338-1.738 2.642-2.634 3.945l-.001.002-.001.002-.002.002v.001c-.443.645-.886 1.29-1.323 1.939l.011-.088.005-.05c.01-.084.02-.17.032-.255.497-2.651 1.8-5.137 3.227-7.4 1.582-2.511 3.476-4.857 5.699-6.806l.613-.54c2.568-2.258 3.662-3.22 6.914-4.614 1.506-.646.463-2.943-1.454-2.184-2.647 1.049-3.31 1.589-5.366 3.263l-.329.267a29.587 29.587 0 0 0-1.793 1.582c-.353.284-.7.577-1.041.879-4.345 3.848-8.68 9.907-7.466 16.006a38.548 38.548 0 0 0-.35-1.192v-.001l-.001-.003a170.679 170.679 0 0 0-1.012-3.284l-.001-.004-.001-.001v-.001c-.269-.853-.538-1.706-.795-2.563-.294-.982-1.865-.967-1.56.726.057.312 1.585 7.192 2.322 10.002Zm14.987 15.75c-.315.099-.719-.176-.391-1.136.784-2.3 2.899-7.795 3.003-8.04.57-1.318 1.668-.604 1.42.215-.215.71-.419 1.423-.624 2.136a140.289 140.289 0 0 1-.746 2.537l-.042.142-.043.143h-.001c-.095.319-.19.638-.294.953 1.972-4.81 7.788-7.03 12.594-7.7.373-.053.752-.095 1.128-.133a27.618 27.618 0 0 1 1.98-.273 24.43 24.43 0 0 1 7.454.404c1.685.353 1.248 2.329-.078 2.01-3.528-.862-5.568-.54-9.088.017l-.309.049a27.539 27.539 0 0 0-7.113 2.108c-2.039.912-4.095 2.046-5.665 3.66-.073.083-.145.168-.216.253.597-.248 1.197-.49 1.797-.732 1.235-.499 2.469-.997 3.683-1.542 1.351-.61 1.905.952.423 1.54-.335.134-.669.27-1.002.408h-.001c-.744.307-1.488.614-2.249.877-1.794.874-3.708 1.499-5.62 2.104Zm-79.49.143.075.252c.094.313.187.626.289.936-1.97-4.808-7.788-7.027-12.592-7.698a24.782 24.782 0 0 0-1.13-.133 25.621 25.621 0 0 0-1.98-.272 24.563 24.563 0 0 0-7.453.4c-1.685.356-.808 2.337.641 2.13 3.5-.5 5.12-.636 8.836-.054a27.895 27.895 0 0 1 7.111 2.109c2.038.915 4.095 2.046 5.667 3.662l.215.254c-.618-.257-1.238-.507-1.858-.757-1.216-.491-2.43-.98-3.623-1.518-1.351-.608-1.906.953-.424 1.54.343.136.685.277 1.026.418.737.303 1.474.607 2.228.868 1.794.873 3.706 1.498 5.619 2.104.315.099.72-.177.39-1.137-.784-2.298-2.896-7.794-3.001-8.038-.57-1.32-1.67-.605-1.422.215.214.706.418 1.415.621 2.123v.001a136.68 136.68 0 0 0 .765 2.595Zm42.699-29.643.001-.001c.406-.625.812-1.249 1.209-1.877.465-.737 1.771-.495 1.137.805-.116.239-2.927 5.479-4.172 7.606-.518.887-1.007.806-1.146.528-.84-1.71-1.664-3.425-2.214-5.24-.309-.677-.574-1.373-.84-2.07a71.682 71.682 0 0 0-.39-1.006c-.558-1.405 1.031-2.118 1.484-.788.409 1.199.869 2.377 1.329 3.556.221.567.442 1.134.658 1.703l.049-.317c.102-1.257-.099-4.488-.28-7.406-.133-2.143-.256-4.117-.24-5.014.045-2.583 1.649-2.768 2.033-.68.532 2.895.617 10.849-.785 13.605.185-.312.381-.62.577-.926l.25-.393c.438-.699.889-1.392 1.34-2.085Zm-32.885 89.264c2.649.927 9.448 1.729 14.93 2.05 14.962.875 35.872.4 44.733-1.213 8.931-1.624 9.331-4.082-13.373-5.301-19.328-1.037-41.89.442-46.716 2.642-1.295.591-1.223 1.247.425 1.822h.001Zm-67.428-91.93a25.382 25.382 0 0 1 3.928 0l.155-1.994a27.38 27.38 0 0 0-4.238 0l.154 1.994Zm7.804.61c1.284.307 2.53.713 3.73 1.21l.766-1.847a26.794 26.794 0 0 0-4.031-1.309l-.465 1.945Zm-15.41 1.21c1.2-.497 2.446-.903 3.73-1.21l-.465-1.946a26.794 26.794 0 0 0-4.03 1.309l.765 1.847Zm22.633 1.784a25.08 25.08 0 0 1 3.173 2.309l1.3-1.52a27.097 27.097 0 0 0-3.426-2.493l-1.047 1.704Zm-29.3 2.309a25.09 25.09 0 0 1 3.174-2.309l-1.047-1.704a27.101 27.101 0 0 0-3.426 2.493l1.3 1.52Zm35.248 2.775a25.09 25.09 0 0 1 2.309 3.173l1.704-1.047a27.105 27.105 0 0 0-2.493-3.426l-1.52 1.3ZM6.18 79.437a25.087 25.087 0 0 1 2.309-3.173l-1.52-1.3a27.082 27.082 0 0 0-2.493 3.426l1.704 1.047Zm44.423 3.493a24.793 24.793 0 0 1 1.212 3.73l1.945-.465a26.794 26.794 0 0 0-1.309-4.03l-1.848.765ZM3.185 86.66c.308-1.284.714-2.53 1.211-3.73l-1.847-.766a26.8 26.8 0 0 0-1.309 4.031l1.945.465Zm49.239 3.876a25.382 25.382 0 0 1 0 3.928l1.994.155a27.38 27.38 0 0 0 0-4.238l-1.994.154ZM2.5 92.5c0-.661.026-1.317.076-1.965l-1.994-.154a27.362 27.362 0 0 0 0 4.238l1.994-.154A25.362 25.362 0 0 1 2.5 92.5Zm49.315 5.84a24.836 24.836 0 0 1-1.212 3.73l1.848.766a26.818 26.818 0 0 0 1.309-4.031l-1.945-.465Zm-47.419 3.73a24.84 24.84 0 0 1-1.21-3.73l-1.946.465a26.824 26.824 0 0 0 1.309 4.031l1.847-.766Zm44.424 3.493a25.032 25.032 0 0 1-2.309 3.173l1.52 1.3a27.157 27.157 0 0 0 2.493-3.426l-1.704-1.047Zm-40.331 3.173a25.037 25.037 0 0 1-2.309-3.173l-1.704 1.047a27.143 27.143 0 0 0 2.493 3.426l1.52-1.3Zm5.948 5.084a25.112 25.112 0 0 1-3.173-2.309l-1.3 1.52a27.072 27.072 0 0 0 3.426 2.493l1.047-1.704Zm29.3-2.309a25.112 25.112 0 0 1-3.174 2.309l1.047 1.704a27.068 27.068 0 0 0 3.426-2.493l-1.3-1.52Zm-22.077 5.304a24.9 24.9 0 0 1-3.73-1.211l-.766 1.847c1.296.537 2.643.977 4.031 1.309l.465-1.945Zm15.41-1.211a24.9 24.9 0 0 1-3.73 1.211l.465 1.945a26.818 26.818 0 0 0 4.03-1.309l-.765-1.847ZM27.5 117.5c-.661 0-1.317-.026-1.965-.076l-.154 1.994a27.531 27.531 0 0 0 4.238 0l-.154-1.994c-.648.05-1.304.076-1.965.076Z" fill="#BBD9FD" /><path fill-rule="evenodd" clip-rule="evenodd" d="M53.388 24.971a3.125 3.125 0 1 1 6.25 0 3.125 3.125 0 0 1-6.25 0m4.378 11.8c1.882-3.2 5.218-9.233 5.218-11.8a6.471 6.471 0 0 0-12.943 0c0 2.567 3.336 8.6 5.218 11.8a1.454 1.454 0 0 0 2.507 0" fill="#335C9E" /><mask id="empty_b02f44d5e51464ad11702351c2fec42f_b" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="47" y="31" width="23" height="20"><path fill-rule="evenodd" clip-rule="evenodd" d="M47.5 31.533h21.973v18.886H47.5V31.533Z" fill="#fff" /></mask><g mask="url(#empty_b02f44d5e51464ad11702351c2fec42f_b)"><path fill-rule="evenodd" clip-rule="evenodd" d="M68.62 46.702a493.936 493.936 0 0 0-4.675-4.122 8.961 8.961 0 0 0 1.58-5.091 8.974 8.974 0 0 0-2.254-5.956l-.059.123a67.632 67.632 0 0 1-1.219 2.405c.624.995.987 2.17.987 3.428a6.474 6.474 0 0 1-6.467 6.467 6.474 6.474 0 0 1-6.468-6.468c0-1.258.363-2.432.987-3.427-.417-.786-.832-1.6-1.219-2.405l-.058-.123a8.975 8.975 0 0 0-2.255 5.956c0 4.97 4.043 9.012 9.013 9.012a8.96 8.96 0 0 0 5.113-1.595c.707.835 3.666 4.327 4.231 4.959.755.844 2.37.666 3.093-.15.656-.741.846-1.953-.33-3.013" fill="#335C9E" /></g><g clip-path="url(#empty_b02f44d5e51464ad11702351c2fec42f_c)"><path d="M176.5 19.5h32v32h-32v-32Z" fill="#0C131F" /><path d="M208.5 26.789V44.21a8.705 8.705 0 0 1-8.711-8.711 8.705 8.705 0 0 1 8.711-8.711Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M176.5 44.211V26.79h12.988c4.811 0 8.701 3.911 8.701 8.721 0 4.81-3.89 8.701-8.701 8.701H176.5Zm12.444-2.489a6.223 6.223 0 1 0 0-12.445 6.223 6.223 0 0 0 0 12.445Z" fill="#8DE8FE" /></g><path fill-rule="evenodd" clip-rule="evenodd" d="M43.319 95.1c-.8-4.933-5.467-8.2-10.4-7.4l1.467-8.267-5.267-.933c-.467 1-2.4 5.533-3.4 10.6 1.933 1.333 3.4 3.4 3.8 5.933.466 2.667-.333 5.267-1.933 7.267.4.467.866.933 1.333 1.333 2.066 1.6 4.533 2.267 6.933 1.8 5-.733 8.334-5.4 7.467-10.333" fill="#054752" /><path fill-rule="evenodd" clip-rule="evenodd" d="m25.652 89.7.134-.533c-1.867-1.267-4.2-1.867-6.6-1.467l1.466-8.2-5.266-.933c-.467 1-2.6 5.866-3.467 11.133-.733 4.267-.667 8.867 1.533 12.067.467.666 1.067 1.333 1.8 1.866 2.067 1.6 4.534 2.267 7 1.8 2.2-.333 4.134-1.533 5.467-3.133l-.4-.533c-2.333-3.2-2.4-7.734-1.667-12.067" fill="#2DBEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M29.586 95.1c-.467-2.533-1.867-4.6-3.8-5.933l-.134.533c-.733 4.267-.666 8.867 1.534 12.067l.4.533c1.667-1.933 2.466-4.533 2-7.2" fill="#9EF769" /><path fill-rule="evenodd" clip-rule="evenodd" d="M126.1 13.211c-3.956 0-7.644 1.778-10.133 4.934a12.673 12.673 0 0 0-2.667 7.777v2.356c0 1.022-.4 2-1.067 2.71-.533.534-1.2.934-1.911 1.112.267.667.889 1.689 2 2.8a11.266 11.266 0 0 0 3.245 2.355v-.044a3.986 3.986 0 0 1 3.377-1.822c.267 0 .489.044.756.089a3.992 3.992 0 0 1 3.156 3.11h3.288c3.423 0 6.667-1.421 9.023-3.733 3.644-3.644 4.755-9.11 2.755-13.822-2-4.755-6.622-7.822-11.822-7.822Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M126.1 11.611c-4.4 0-8.533 1.956-11.333 5.467a14.285 14.285 0 0 0-3.067 8.889v2.31c0 1.2-.844 2.312-2.489 2.4-.4 0-.711.312-.755.712-.045 1.067 1.111 3.067 2.711 4.667 1.111 1.11 2.4 2 3.777 2.71-.444 2.445 1.467 4.667 3.956 4.667h.044a4 4 0 0 0 3.912-3.155h3.333c.355 1.822 1.955 3.155 3.911 3.155.444 0 .933-.089 1.378-.222 1.111-.355 1.955-1.2 2.355-2.311a4.286 4.286 0 0 0 0-2.889c.889-.578 1.689-1.2 2.445-1.956a14.158 14.158 0 0 0 4.222-10.088c0-3.822-1.511-7.378-4.222-10.09-2.711-2.8-6.356-4.266-10.178-4.266Zm0 1.6c5.156 0 9.822 3.111 11.822 7.867 2 4.755.889 10.222-2.755 13.822a12.783 12.783 0 0 1-9.023 3.733h-3.288c-.312-1.6-1.556-2.8-3.156-3.11-.267-.045-.489-.09-.756-.09a4.043 4.043 0 0 0-3.377 1.822v.045c-1.2-.622-2.267-1.422-3.245-2.355-1.111-1.112-1.733-2.178-2-2.8.756-.178 1.378-.578 1.911-1.112.667-.755 1.067-1.689 1.067-2.71v-2.356c0-2.8.933-5.556 2.667-7.778 2.489-3.245 6.177-4.978 10.133-4.978Z" fill="#000" /><path fill-rule="evenodd" clip-rule="evenodd" d="M132.5 21.122c-.889 0-1.6.711-1.6 1.6 0 .89.711 1.6 1.6 1.6.889 0 1.6-.71 1.6-1.6 0-.889-.711-1.6-1.6-1.6ZM122.9 21.122c-.889 0-1.6.711-1.6 1.6 0 .89.711 1.6 1.6 1.6.889 0 1.6-.71 1.6-1.6 0-.889-.711-1.6-1.6-1.6ZM122.633 27.478c-.577 0-.977.577-.711 1.11a6.39 6.39 0 0 0 5.778 3.645 6.39 6.39 0 0 0 5.778-3.644c.222-.534-.134-1.111-.711-1.111a.791.791 0 0 0-.711.444 4.829 4.829 0 0 1-4.312 2.711c-1.866 0-3.555-1.066-4.311-2.71-.177-.267-.444-.445-.8-.445Z" fill="#000" /><path fill-rule="evenodd" clip-rule="evenodd" d="M234.459 103.335c.307 0 .614 0 1.008-.044v4.947c-.832.175-1.488.262-2.408.262-4.202 0-6.829-2.451-6.829-6.61V76.5h5.735v24.427c0 1.882 1.05 2.408 2.494 2.408Zm-16.284-19.13c0 .437 0 .832-.088 1.182h-5.734c.394-.525.568-1.314.568-2.19v-2.976h5.254v3.984Zm-9.675 2.452v5.165h2.189c3.896 0 6.26-2.058 7.18-5.165H208.5Zm10.638 0c-.525 2.232-1.532 3.808-3.546 5.165h6.917v-5.165h-3.371Zm-6.742 6.434v8.756c0 4.158 2.627 6.653 6.829 6.653 2.145 0 3.283-.525 3.283-.525v-4.815c-.306.087-1.094.175-1.794.175-1.664 0-2.54-.613-2.54-2.496v-7.748h-5.778Z" fill="#00D5B5" /></g><defs><clipPath id="empty_b02f44d5e51464ad11702351c2fec42f_a"><path fill="#fff" transform="translate(.5 .5)" d="M0 0h249v162H0z" /></clipPath><clipPath id="empty_b02f44d5e51464ad11702351c2fec42f_c"><path d="M176.5 25.5a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-20Z" fill="#fff" /></clipPath></defs></symbol>'}),on=(nn.a.add(rn),rn),cn=function(){var e=Object(k.e)().t,t=Object(D.b)().isMobile;return r.a.createElement($a.a,{"data-testid":"EmptyContent",className:t?"u-p-1":"u-flex-justify-start u-p-3",icon:on,iconSize:"large",title:e("empty.title"),text:e("empty.text")})},ln=function(e){var t=e.account,a=e.isAccountLoading,n=e.isQueryLoading,o=e.timeseries,i=Object(D.b)().isMobile,c=Object(s.useClient)();return a?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):t?n?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):0===o.length?r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(Ja,{label:c.appMetadata.slug}),r.a.createElement(cn,null)):void 0:r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(Ja,{label:c.appMetadata.slug}),r.a.createElement(cn,null))};ln.propTypes={account:He.a.object,isAccountLoading:He.a.bool,isQueryLoading:He.a.bool,timeseries:He.a.arrayOf(He.a.object)};var sn=ln,un=a("GIza"),dn=["data"];function mn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fn=function(e){var t=Object(s.useClient)(),a=ve(),n=Object(s.useQuery)(a.definition,a.options),r=n.data,o=M()(n,dn),i=Object(s.isQueryLoading)(o);return{isLoading:i,value:i?void 0:r&&r[0]?It()(r[0],e):void 0,save:function(){var a=G()(q.a.mark((function a(n){var o;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=pn(pn({},r[0]),{},{_type:f}),Ut()(o,e,n),a.next=4,t.save(o);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},bn=a("Vggm"),vn=a.n(bn),gn=(a("dLU1"),a("u/yc"),a("sWYD")),hn=function(){var e=G()(q.a.mark((function e(t,a){var n,r,o=arguments;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},r=n.fields,e.next=3,t.collection("io.cozy.jobs").create("service",{name:a,slug:"coachco2",fields:r});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var yn=s.models.dacc,En=(yn.sendMeasureToDACC,yn.fetchAggregatesFromDACC),On=function(){return!0===y()("coachco2.dacc-dev_v2")?"cc.cozycloud.dacc.dev_v2":"cc.cozycloud.dacc_v2"},jn=function(){var e=G()(q.a.mark((function e(t){var a,n,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=On(),n=Object(gn.a)(Object(H.a)(Object(Yt.a)(Date.now(),11)),"yyyy-MM-dd"),e.next=5,En(t,a,{measureName:"co2-emissions-monthly",startDate:n});case 5:return r=e.sent,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),vn()("error","Error while retrieving data from remote-doctype: ".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),wn=function(e){var t=Object(s.useClient)(),a=Object(n.useState)(!1),r=S()(a,2),o=r[0],i=r[1],c=Object(n.useState)(null),l=S()(c,2),u=l[0],d=l[1];return Object(n.useEffect)((function(){e&&function(){var e=G()(q.a.mark((function e(){var a,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,jn(t);case 3:a=e.sent,n=(null==a?void 0:a.length)>0?a.map((function(e){return e.avg})):null,i(!1),d(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,e]),{isLoading:o,data:u}},xn=a("EqKg"),Cn={minHeight:"48px",display:"flex",alignItems:"center"},kn=function(){var e=Object(k.e)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.a,null),r.a.createElement(Ve.a,{style:Cn,className:"u-ph-1-s u-ph-2",square:!0,elevation:0},r.a.createElement(tt.a,{className:"u-mr-half",icon:xn.a,color:"var(--primaryColor)",size:8}),r.a.createElement(Ye.a,{className:"u-mr-1",display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.yours")),r.a.createElement(tt.a,{className:"u-mr-half",icon:xn.a,color:"var(--borderMainColor)",size:8}),r.a.createElement(Ye.a,{display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.average"))))},_n=a("m0r1"),Dn=a("ymym");_n.f.register(_n.e,_n.i,_n.c,_n.n),_n.f.defaults.font={family:"Lato, sans-serif",size:"11",weight:"700"};var Pn=function(e){var t=e.className,a=e.title,n=e.data,o=e.options,i=e.width,c=e.height,l=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{className:"u-mt-1 u-ml-1",variant:"h5"},a),r.a.createElement("div",{style:{width:i,height:c}},r.a.createElement(Dn.a,{className:t,width:i,height:c,options:o,data:n})),l)},Mn=function(e){var t=e.theme,a=e.isMobile,n=e.oneYearOldTimeseries,r=e.sendToDACC,o=e.globalAverages,i=e.f,c=e.t,l=function(e,t){var a=new Date,n=Array.from({length:12},(function(e,t){return Object(H.a)(Object(Yt.a)(a,t))})).reverse();return{months:n.map((function(e){return t(e,"MMM").toUpperCase()})),CO2s:n.map((function(t,a){var r=e.filter((function(e){return new Date(e.startDate)>=t&&new Date(e.startDate)<n[a+1]})),o=Qt()(r,"aggregation.totalCO2");return Math.round(100*o)/100}))}}(n,i),s=l.months,u=l.CO2s,d={labels:s,datasets:[{label:c("vericalBarChart.legend.yours"),backgroundColor:t.palette.primary.main,borderRadius:a?8:4,barThickness:a?r?6:8:24,data:u}]};return r&&d.datasets.push({label:c("vericalBarChart.legend.average"),backgroundColor:t.palette.border.main,borderRadius:a?8:4,barPercentage:a?.55:.85,data:o}),d},Nn=["data"];function Sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function An(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Tn=function(){var e,t,a=Object(k.e)(),n=a.t,o=a.f,i=Object(un.a)(),c=Object(D.b)().isMobile,l=Ee().account,d=fn("CO2Emission.sendToDACC"),m=d.isLoading,f=d.value,b=void 0!==f&&f,v=(e=null==l?void 0:l._id,t=Object(H.a)(Object(Q.a)(new Date,1)),{definition:Object(s.Q)(p).where({"cozyMetadata.sourceAccount":e,startDate:{$gte:t.toISOString()}}).partialIndex({aggregation:{$exists:!0}}).select(["startDate","endDate","aggregation","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"asc"},{startDate:"asc"}]).limitBy(1e3),options:{as:"".concat(p,"/sourceAccount/").concat(e,"/withAggregation/fromDate/").concat(t.getFullYear(),"-").concat(t.getMonth()),fetchPolicy:u.a.fetchPolicies.olderThan(3e4)}}),g=Object(s.useQueryAll)(v.definition,An(An({},v.options),{},{enabled:Boolean(l)})),h=g.data,y=M()(g,Nn),E=wn(b).data;if(!l||Object(s.isQueryLoading)(y)||y.hasMore||0===h.length)return null;var O=!m&&b,j=function(e){return{maintainAspectRatio:!1,scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{color:e.palette.text.secondary}},y:{grid:{color:e.palette.border.main,drawBorder:!1},ticks:{color:e.palette.text.secondary,callback:function(e,t){return t%2==0?"".concat(e," kg"):""}}}},plugins:{tooltip:{displayColors:!1}}}}(i),w=Mn({theme:i,isMobile:c,oneYearOldTimeseries:h,sendToDACC:b,globalAverages:E,f:o,t:n});return r.a.createElement(Pn,{className:"u-mt-1 u-ph-half-s u-ph-2",title:n("vericalBarChart.title"),height:"190px",data:w,options:j},O&&r.a.createElement(kn,null))},Rn=a("dexL"),Zn=a("aR52"),Ln=a("KiAD"),Fn=function(e){var t=e.onDiscard,a=e.onAccept,n=Object(k.e)().t;return r.a.createElement(Rn.a,{className:"u-mh-half-s u-mh-2 u-mb-half-s u-mb-1 u-mt-0-s u-mt-1 u-bdrs-4 u-pv-half u-pr-half",text:n("dacc.tripsCard.label"),icon:r.a.createElement(tt.a,{className:"u-ml-1",style:{marginTop:12,color:"var(--primaryColor)"},icon:Ln.a,size:16}),buttonOne:r.a.createElement(Zn.a,{variant:"text",label:n("dacc.tripsCard.discard"),onClick:t}),buttonTwo:r.a.createElement(Zn.a,{variant:"text",label:n("dacc.tripsCard.accept"),onClick:a}),bgcolor:"#EAF3FF",disableIconStyles:!0})};Fn.propTypes={onDiscard:He.a.func.isRequired,onAccept:He.a.func.isRequired};var zn=Fn,Bn=a("e5eR"),Gn=new tn.a({id:"dacc-compare_095afa7eb600270496978dbb605e6b2d",use:"dacc-compare_095afa7eb600270496978dbb605e6b2d-usage",viewBox:"0 0 200 136",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 136" id="dacc-compare_095afa7eb600270496978dbb605e6b2d"><path fill="#fff" d="M0 0h200v136H0z" /><path d="M161 14.592c-1.888.222-7.568-.664-15.182-5.982-9.518-6.647-13.847-8.724-22.434-4.183C115 8.86 115.227 23.012 115 27M165.844 92c5.431-3.51 16.097-12.334 15.315-19.554-.977-9.025-12.708-11.282-22.81-10.78-10.101.501-17.596 4.512-28.349 1.504M23.495 72c-.329 4.729-2.425 21.765 5.479 27.308 9.88 6.928 23.668-1.244 30.831-5.203C66.97 90.146 79.072 83.217 85 85.527" stroke="#B2D3FF" stroke-width="4" stroke-linecap="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M62 118a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.899c1.777.371 3.182 1.857 3.472 3.649a4.507 4.507 0 0 1-2.828 4.953l-.112.039V117h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L62 113a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.399Z" fill="#38D1D3" /><circle cx="100" cy="64" fill="#297EF2" r="48" /><path fill-rule="evenodd" clip-rule="evenodd" d="M120.91 37.605a2.166 2.166 0 0 1 .235 3.055l-13 15.167a2.166 2.166 0 0 1-2.33.645L93.96 52.52 81.887 62.581a2.167 2.167 0 0 1-2.774-3.329l13-10.833a2.167 2.167 0 0 1 2.072-.391l11.618 3.873 12.052-14.061a2.166 2.166 0 0 1 3.055-.235Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M119.5 42.5a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-26 10.833a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-13 10.834a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm29.25-9.75a3.25 3.25 0 1 1-6.5 0 3.25 3.25 0 0 1 6.5 0ZM117.167 53.333a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V55.333a2 2 0 0 0-2-2h-4.666Zm-26 10.834a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V66.167a2 2 0 0 0-2-2h-4.666ZM78.167 75a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-4.666Zm24-4.5a2 2 0 0 1 2-2h4.666a2 2 0 0 1 2 2V86a2 2 0 0 1-2 2h-4.666a2 2 0 0 1-2-2V70.5Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M43 21a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm1.452-16.349c2.666.557 4.773 2.786 5.208 5.474a6.76 6.76 0 0 1-4.242 7.43l-.168.058V19.5h-4.5v-3.75c0-1.17.893-2.13 2.034-2.24L43 13.5a2.25 2.25 0 1 0-2.24-2.468l-.01.218h-4.5a6.758 6.758 0 0 1 8.202-6.599Z" fill="#72E7E9" /><path fill-rule="evenodd" clip-rule="evenodd" d="M69 19a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L69 16.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 42a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 39.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2ZM20 14a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L20 11.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M26 33a1.125 1.125 0 1 1 0 2.25A1.125 1.125 0 0 1 26 33Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.12 3.715l-.085.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12L26 29.25a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M39 116.5a.938.938 0 1 1 0 1.876.938.938 0 0 1 0-1.876Zm.605-6.812a2.811 2.811 0 0 1 2.17 2.281 2.816 2.816 0 0 1-1.767 3.095l-.07.025v.786h-1.875v-1.563c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 90a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 87.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M184 99a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V98h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L184 94a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M191 64a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M134 18a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.585.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M118 119a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2ZM153 55a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L153 52.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M81 118a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.25 2.25 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L81 115.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M177 124a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M164 75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L164 72.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M92 8.5a.937.937 0 1 1 0 1.875.937.937 0 0 1 0-1.875Zm.605-6.812a2.81 2.81 0 0 1 2.17 2.28 2.817 2.817 0 0 1-1.767 3.096l-.07.025v.786h-1.875V6.312c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#72E7E9" /><circle cx="148" cy="104" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 106c-4.418 0-8-4.029-8-9 0-4.97 3.582-9 8-9s8 4.03 8 9c0 4.971-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 101a1.5 1.5 0 1 1-.001 3.001A1.5 1.5 0 0 1 148 101Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V100h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L148 96a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="148" cy="104" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="24" cy="65" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 67c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9ZM8 77c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4H10c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 62a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V61h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L24 57a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="24" cy="65" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="172" cy="28" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 30c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V24h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L172 20a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="172" cy="28" r="20" stroke="#B9F6F7" stroke-width="8" /><path d="M66.418 133.29a81.818 81.818 0 0 0 16.142 2.244c16.166.948 38.758.424 48.325-1.346 9.567-1.771 10.083-4.465-14.448-5.812-20.925-1.147-45.26.474-50.362 2.894-1.52.648-1.447 1.371.343 2.02Z" fill="#BBD9FD" /></symbol>'}),In=(nn.a.add(Gn),Gn),qn=function(e){var t=e.open,a=e.onClose,n=e.showDaccPermissionsDialog,o=Object(k.e)().t;return r.a.createElement(Bn.a,{open:t,onClose:a,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(tt.a,{className:"u-mv-1",icon:In,width:200,height:136}),r.a.createElement(Ye.a,{variant:"h3"},o("dacc.compareDialog.title")),r.a.createElement(Ye.a,{className:"u-mt-1"},o("dacc.compareDialog.primaryText")),r.a.createElement(Ye.a,{className:"u-mt-1"},o("dacc.compareDialog.secondaryText"))),actions:r.a.createElement(Zn.a,{label:o("dacc.compareDialog.action"),onClick:n})})};qn.propTypes={open:He.a.bool.isRequired,onClose:He.a.func.isRequired,showDaccPermissionsDialog:He.a.func.isRequired};var Un=qn,Hn=a("pVnL"),Qn=a.n(Hn),Wn=a("yFc8"),Vn=new tn.a({id:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d",use:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d-usage",viewBox:"0 0 106 106",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 106 106" id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d"><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a)"><path d="M16 48c0-19.882 16.118-36 36-36s36 16.118 36 36-16.118 36-36 36-36-16.118-36-36Z" fill="#fff" /></g><path d="M65.11 37.39C63.962 31.193 58.53 26.5 52 26.5c-6.53 0-11.962 4.693-13.11 10.89C32.693 38.538 28 43.97 28 50.5c0 7.364 5.97 13.333 13.333 13.333H62.667C70.03 63.833 76 57.863 76 50.5c0-6.53-4.693-11.962-10.89-13.11Z" fill="#B3D3FF" /><path d="M49.569 36c.837 0 1.528.63 1.622 1.443l.011.19v10.941a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-9.308l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v9.308a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-6.042l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v16.33a6.527 6.527 0 0 1-3 5.495V67a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2.615a6.69 6.69 0 0 1-1.022-.78l-8.425-7.824a1.73 1.73 0 0 1-.262-2.226 1.538 1.538 0 0 1 2.075-.463l4.67 2.827V40.9l.012-.19a1.633 1.633 0 0 1 3.244 0l.01.19v7.675a.49.49 0 0 0 .378.477l.112.013h.654c.27 0 .49-.22.49-.49V37.633l.01-.19A1.633 1.633 0 0 1 49.57 36Z" fill="#297EF2" /><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b)"><rect x="58" y="54" width="32" height="32" rx="8" fill="#fff" /><path d="M72.409 77.886c.2-.05.404.072.455.273l.375 1.5c.007.03.011.061.011.091h1.5c0-.03.004-.06.011-.091l.375-1.5a.375.375 0 1 1 .728.182l-.364 1.455v1.454a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-1.454l-.364-1.455a.375.375 0 0 1 .273-.455Z" fill="#F33136" /><path d="M72.5 78.25c-.414 0-.765-.351-.988-.7-.408-.64-1.3-1.334-2.346-2.147C66.746 73.523 63.5 71 63.5 67c0-4.97 4.701-9 10.5-9v20.25h-1.5Z" fill="#F33136" /><path d="M74 78.25h-1.286c0-.838-.654-1.73-1.476-2.847C69.855 73.523 68 71 68 67c0-4.97 2.686-9 6-9v20.25Z" fill="#FC7B0E" /><path d="M75.5 78.25c.414 0 .765-.351.988-.7.408-.64 1.3-1.334 2.346-2.147C81.254 73.523 84.5 71 84.5 67c0-4.97-4.701-9-10.5-9v20.25h1.5Z" fill="#FFD799" /><path d="M74 78.25h1.286c0-.838.654-1.73 1.476-2.847C78.145 73.523 80 71 80 67c0-4.97-2.686-9-6-9v20.25Z" fill="#FFB64F" /></g><defs><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a" x="0" y="0" width="104" height="104" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b" x="42" y="42" width="64" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter></defs></symbol>'}),Yn=(nn.a.add(Vn),Vn),Kn=new tn.a({id:"icon-anonymous_f9180197246a84316517b8157ef006c8",use:"icon-anonymous_f9180197246a84316517b8157ef006c8-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-anonymous_f9180197246a84316517b8157ef006c8"><path d="M4.36 1.24 3 6H1a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2h-2l-1.36-4.76A1.7 1.7 0 0 0 9.062.291L8 1 6.938.292a1.7 1.7 0 0 0-2.578.947Z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.84 13.549A3.502 3.502 0 0 1 0 12.5a3.5 3.5 0 0 1 6.76-1.274A3.49 3.49 0 0 1 8 11c.436 0 .854.08 1.24.226a3.501 3.501 0 1 1-.08 2.323A1.495 1.495 0 0 0 8 13c-.467 0-.883.212-1.16.549ZM3.5 14a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" /></symbol>'}),Jn=(nn.a.add(Kn),Kn),Xn=new tn.a({id:"icon-export_a08eff636b3b69e5d1cfc230029cdad8",use:"icon-export_a08eff636b3b69e5d1cfc230029cdad8-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-export_a08eff636b3b69e5d1cfc230029cdad8"><path d="M7.165 8.244C7.585 6.01 9.581 4.297 12 4.297s4.415 1.713 4.835 3.947l.143.76.76.14c2.295.418 4.012 2.396 4.012 4.748 0 .555-.096 1.089-.272 1.586l1.704 1.704a6.98 6.98 0 0 0 .818-3.29c0-3.222-2.173-5.925-5.131-6.79C17.984 4.17 15.236 2.047 12 2.047c-3.236 0-5.984 2.123-6.869 5.055C2.173 7.967 0 10.67 0 13.892c0 3.926 3.224 7.08 7.167 7.08H8.25v-2.25H7.167c-2.731 0-4.917-2.177-4.917-4.83 0-2.352 1.717-4.33 4.012-4.749l.76-.139.143-.76Z" fill="#1D212A" fill-opacity=".72" /><path d="M19.499 19.567a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1 0-3h2.368l-4.993-4.993a1.508 1.508 0 0 1 2.018-2.236l.114.104 4.993 4.992v-2.367a1.5 1.5 0 1 1 3 0v6Z" fill="#EA3F3F" /></symbol>'}),$n=(nn.a.add(Xn),Xn),er=function(e){var t=e.sharedDataLabel,a=e.open,n=e.onClose,o=e.onRefuse,i=e.onAccept,c=e.showDaccReasonsDialog,l=Object(k.e)().t;return r.a.createElement(Wn.a,{variant:"inverted"},r.a.createElement(Bn.a,{open:a,onClose:n,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(tt.a,{icon:Yn,size:106}),r.a.createElement(Ye.a,{variant:"h4"},l("dacc.permissionsDialog.title")),r.a.createElement(Ye.a,{className:"u-mt-1"},l("dacc.permissionsDialog.primaryText")),r.a.createElement(Wn.a,{variant:"normal"},r.a.createElement(Ve.a,{className:"u-mt-1-half",elevation:0},r.a.createElement(We.a,null,r.a.createElement(Je.a,{divider:!0},r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:$n,size:24})),r.a.createElement(Ke.a,{primary:r.a.createElement(Ye.a,{variant:"h6"},l("dacc.permissionsDialog.export_outside"))})),r.a.createElement(Je.a,{dense:!0},r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:Jn,color:"var(--iconTextColor)"})),r.a.createElement(Ke.a,{primary:r.a.createElement(Ye.a,{variant:"body2"},t)}))))),r.a.createElement(Ye.a,{className:"u-mt-1-half",style:{textDecoration:"underline"},onClick:c},l("dacc.permissionsDialog.why_asking")),r.a.createElement(Ye.a,{className:"u-mt-1-half",variant:"caption",color:"textPrimary"},l("dacc.permissionsDialog.secondaryText"))),actionsLayout:"column",actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zn.a,{label:l("dacc.permissionsDialog.refuse"),onClick:o}),r.a.createElement(Zn.a,{label:l("dacc.permissionsDialog.accept"),onClick:i}))}))};er.propTypes={sharedDataLabel:He.a.string.isRequired,open:He.a.bool.isRequired,onClose:He.a.func.isRequired,onRefuse:He.a.func.isRequired,onAccept:He.a.func.isRequired,showDaccReasonsDialog:He.a.func.isRequired};var tr=er,ar=function(e){var t=e.open,a=e.onClose,n=Object(k.e)().t;return r.a.createElement(Bn.a,{open:t,onClose:a,title:n("dacc.reasonsDialog.title"),content:n("dacc.reasonsDialog.content")})};ar.propTypes={open:He.a.bool.isRequired,onClose:He.a.func.isRequired};var nr=ar,rr=function(e){var t=e.onClose,a=e.onRefuse,o=e.onAccept,i=e.componentProps,c=Object(n.useState)(!1),l=S()(c,2),s=l[0],u=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(tr,Qn()({open:!0,onClose:t,onRefuse:a,onAccept:o,showDaccReasonsDialog:function(){return u(!0)}},i.DaccPermissionsDialog)),s&&r.a.createElement(nr,{open:!0,onClose:function(){return u(!1)}}))};rr.propTypes={onClose:He.a.func.isRequired,onRefuse:He.a.func.isRequired,onAccept:He.a.func.isRequired,componentProps:He.a.shape({DaccPermissionsDialog:He.a.shape({sharedDataLabel:He.a.string.isRequired}).isRequired}).isRequired};var or=rr;function ir(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function cr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ir(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var lr=function(){var e=Object(k.e)().t,t=Object(n.useState)(!1),a=S()(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=S()(c,2),s=l[0],u=l[1],d=fn("CO2Emission"),m=d.isLoading,p=d.value,f=void 0===p?{}:p,b=d.save;if(m)return null;var v=f.showAlert,g=void 0===v||v,h=f.sendToDACC,y=void 0!==h&&h;return r.a.createElement(r.a.Fragment,null,g&&!y&&r.a.createElement(zn,{onDiscard:function(){b(cr(cr({},f),{},{showAlert:!1}))},onAccept:function(){return i(!0)}}),r.a.createElement(Un,{open:o,onClose:function(){return i(!1)},showDaccPermissionsDialog:function(){i(!1),u(!0)}}),s&&r.a.createElement(or,{onClose:function(){return u(!1)},onRefuse:function(){return u(!1)},onAccept:function(){b(cr(cr({},f),{},{showAlert:!1,sendToDACC:!0})),u(!1)},componentProps:{DaccPermissionsDialog:{sharedDataLabel:e("dacc.permissionsDialog.anonymized_emissions")}}}))};lr.propTypes={};var sr=lr,ur=function(){var e,t=null===(e=y()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.daysToReach;if(!t)throw new Error('Flag "coachco2.bikegoal.settings" must be used');return t},dr=function(){var e,t=null===(e=y()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.bountyAmount;if(!t)throw new Error('Flag "coachco2.bikegoal.settings" must be used');return t},mr=function(){var e,t,a=null===(e=y()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.sourceIdentity,n=null===(t=y()("coachco2.bikegoal.settings"))||void 0===t?void 0:t.sourceType,r=["custom","company","collectivity"];if(!n)throw new Error('Flag "coachco2.bikegoal.settings" must be used');if(!r.includes(n))throw new Error('Flag "coachco2.bikegoal.settings"\'s "sourceType" must be one of '.concat(r));if("custom"===n&&!a)throw new Error('Flag "coachco2.bikegoal.settings"\'s "sourceIdentity" must be a string when "sourceType" is set to "custom"');return{sourceType:n,sourceIdentity:"custom"===n?a:null}},pr=function(e){return!(!e||0===e.length)&&Za(e)>=ur()},fr=function(e){if(!e||0===e.length)return 0;var t=Za(e),a=ur();return t<a?t:a},br=a("Bq8i"),vr=a("bmTa"),gr=function(e){var t=e.onDiscard,a=e.onParticipate,n=Object(k.e)().t;return r.a.createElement(br.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,icon:r.a.createElement(tt.a,{icon:Ln.a}),action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zn.a,{variant:"text",label:n("bikeGoal.alert.actions.discard"),onClick:t}),r.a.createElement(Zn.a,{variant:"text",label:n("bikeGoal.alert.actions.participate"),onClick:a}))},r.a.createElement(vr.a,null,n("bikeGoal.alert.title",{bountyAmount:dr()})),n("bikeGoal.alert.text",{bountyAmount:dr(),daysToReach:ur()}))};gr.propTypes={onDiscard:He.a.func,onParticipate:He.a.func};var hr=gr,yr=function(){var e=Object(De.h)(),t=fn("bikeGoal.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save;return a||o?r.a.createElement(hr,{onParticipate:function(){e("bikegoalonboarding")},onDiscard:function(){i(!1)}}):null},Er=a("SZy3"),Or=["timeseries","size"],jr=function(e){var t=e.timeseries,a=e.size,n=M()(e,Or),o=function(e){if(!e)return 100;var t=fr(e),a=ur();return Math.round(t/a*100)}(t),i=function(e){switch(e){case"medium":return"3rem";case"small":return"2.5rem";default:return"4.5rem"}}(a);return r.a.createElement(Er.a,Qn()({size:a,primaryProps:{value:o,color:"#BA5AE8"}},n),r.a.createElement(Fe.a,{fontSize:i},"🚴"))};jr.propTypes={className:He.a.string,timeseries:He.a.arrayOf(He.a.object)};var wr=jr,xr=["data"],Cr=function(){var e=Object(k.e)().t,t=Object(De.h)(),a=Ee(),n=a.account,o=a.isAccountLoading,i=fe({accountId:null==n?void 0:n._id},Boolean(n)),c=Object(s.useQueryAll)(i.definition,i.options),l=c.data,u=M()(c,xr),d=Object(s.isQueryLoading)(u)||u.hasMore;if(o||d)return r.a.createElement(Ve.a,{elevation:2,className:"u-flex u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start"},r.a.createElement(Xa.a,{size:"xlarge",className:"u-m-1"}));var m=(new Date).getFullYear().toString(),p=La(l,m);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,{elevation:2,className:"u-flex u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start u-c-pointer",onClick:function(){return t("/bikegoal/".concat(m,"/trips"))}},r.a.createElement(wr,{timeseries:p,paddingTop:"1rem",paddingLeft:"1.5rem",size:"small"}),r.a.createElement("div",{className:"u-ml-1"},r.a.createElement(Ye.a,{variant:"h6"},e("bikeGoal.title")),r.a.createElement(Ye.a,{variant:"caption",style:{whiteSpace:"pre-line",color:pr(p)&&"var(--successColor)"}},e("bikeGoal.goal_progression",{days:fr(p),daysToReach:ur()})))))},kr=function(){var e=Object(k.e)().t,t=Object(De.h)(),a=fn("bikeGoal.showAlertSuccess").save;return r.a.createElement(br.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,severity:"success",action:r.a.createElement(Zn.a,{variant:"text",color:"success",label:e("bikeGoal.alert.success.action",{bountyAmount:dr()}),onClick:function(){a(!1);var e=(new Date).getFullYear().toString();t("/bikegoal/".concat(e,"/trips/certificate/generate"))}})},e("bikeGoal.alert.success.text"))},_r=["data"],Dr=["data"],Pr={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},Mr=function(){var e,t,a=Object(k.e)().t,n=Object(D.b)().isMobile,o=Ee(),i=o.account,c=o.isAccountLoading,l=ve(),u=Object(s.useQuery)(l.definition,l.options),d=u.data,m=M()(u,_r),p=fe({accountId:null==i?void 0:i._id},Boolean(i)),f=Object(s.useQueryAll)(p.definition,p.options),b=f.data,v=M()(f,Dr),g=Object(s.isQueryLoading)(v)||v.hasMore;if(Object(s.isQueryLoading)(m)||(c||g))return null;var h=(new Date).getFullYear().toString(),y=La(b,h),E=null!==(e=null==d||null===(t=d[0])||void 0===t?void 0:t.bikeGoal)&&void 0!==e?e:{},O=E.activated,j=void 0!==O&&O,w=E.showAlert,x=void 0===w||w,C=E.showAlertSuccess,_=void 0===C?pr(y):C;return j||x?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{className:"u-mb-1-s u-mt-1 u-mb-1-s u-mb-2 u-ml-1",variant:"h5"},a("bikeGoal.goals")),x&&r.a.createElement(yr,null),j&&r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(kr,null),r.a.createElement(Cr,null)),n&&r.a.createElement(qe.a,{style:Pr.divider})):null},Nr=["data"];function Sr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ar(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Tr={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},Rr=function(){var e=Ee(),t=e.account,a=e.isAccountLoading,n=Object(k.e)().t,o=Object(D.b)().isMobile,i=me({accountId:null==t?void 0:t._id,limitBy:50}),c=Object(s.useQuery)(i.definition,Ar(Ar({},i.options),{},{enabled:Boolean(t)})),l=c.data,u=M()(c,Nr),d=Object(s.isQueryLoading)(u)&&!Object(s.hasQueryBeenLoaded)(u);return a||!t||d||0===l.length?r.a.createElement(sn,{account:t,isAccountLoading:a,isQueryLoading:d,timeseries:l}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{label:n("trips.from")+" "+Oe(t)}),y()("coachco2.bikegoal.enabled")&&r.a.createElement(Mr,null),r.a.createElement(Tn,null),r.a.createElement(sr,null),o&&r.a.createElement(qe.a,{style:Tr.divider}),r.a.createElement(Ua,{timeseries:l}),u.hasMore&&r.a.createElement(Ie.a,{label:n("loadMore"),fetchMore:u.fetchMore}))},Zr=a("qFRD"),Lr=r.a.createContext(),Fr=function(){var e=Object(n.useContext)(Lr);if(!e)throw new Error("useTrip must be used within a TripProvider");return e},zr=function(e){var t=e.timeserie,a=e.children,o=Object(n.useMemo)((function(){return{timeserie:F(t)}}),[t]);return r.a.createElement(Lr.Provider,{value:o},a)},Br=r.a.memo(zr),Gr=a("k4gI"),Ir=a("q54A");function qr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ur(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Hr=function(e){var t=e.title,a=e.value,o=e.highlighted,i=Object(n.useMemo)((function(){return function(e){var t=e.highlighted;return{infoBlock:{backgroundColor:t?"var(--primaryColor)":"none",margin:"0.5rem"},typography:Ur({},t&&{color:"var(--primaryContrastTextColor)"})}}({highlighted:o})}),[o]);return r.a.createElement("div",{style:i.infoBlock,className:"u-h-100 u-flex u-flex-column u-flex-items-center u-flex-justify-center u-flex-grow-1  u-bdrs-4"},r.a.createElement(Ye.a,{style:i.typography,variant:"caption"},t),r.a.createElement(Ye.a,{style:i.typography,variant:o?"h6":"body1"},a))},Qr=r.a.memo(Hr),Wr=function(){var e=Fr().timeserie,t=Object(k.e)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qr,{title:t("trips.duration"),value:Da(e)}),r.a.createElement(Qr,{title:t("trips.distance"),value:Pa(e)}),r.a.createElement(Qr,{title:t("trips.calories"),value:Na(e)}),r.a.createElement(Qr,{title:t("trips.co2"),value:Ma(e),highlighted:!0}))},Vr=r.a.memo(Wr),Yr=a("PsJY"),Kr=a("9xVj"),Jr=a("AJnp"),Xr=a("OvNQ"),$r=a("djpt"),eo=a("8aGg"),to=a("CKDk"),ao=a("mPFD"),no=Object(Jr.a)((function(e){return{dotStart:{marginTop:"9px"},dot:{marginBottom:"-1px"},connector:{width:"6px",backgroundColor:e.palette.primary.main},item:{marginTop:"-9px",paddingLeft:"11px","&::before":{padding:0,flexGrow:0}},contentWrapper:{display:"flex",marginLeft:"11px"},endLabel:{fontWeight:700}}})),ro=function(e){var t,a=e.label,o=e.endLabel,i=e.type,c=no(),l=Object(n.useMemo)((function(){return"end"!==i}),[i]),s=Object(n.useMemo)((function(){return"start"===i}),[i]);return r.a.createElement(Xr.a,{className:c.item},r.a.createElement($r.a,null,r.a.createElement(ao.a,{className:Qa()((t={},T()(t,c.dot,l),T()(t,c.dotStart,s),t)),color:"primary",variant:"outlined"}),l&&r.a.createElement(eo.a,{className:c.connector})),r.a.createElement(to.a,null,r.a.createElement("div",{className:c.contentWrapper},r.a.createElement(Ye.a,{className:"u-flex-grow-1"},a),r.a.createElement(Ye.a,{className:c.endLabel,variant:"body2",component:"div"},o))))},oo=r.a.memo(ro),io=Object(Jr.a)((function(e){return{iconItem:{marginTop:"-14px",cursor:"pointer","&::before":{padding:0,flexGrow:0}},iconDot:{backgroundColor:e.palette.background.paper,borderWidth:"1px",borderColor:e.palette.border.main,margin:0,padding:0,boxShadow:"none"},icon:{color:e.palette.primary.main,backgroundColor:e.palette.background.paper},connector:{width:"6px",backgroundColor:e.palette.primary.main}}})),co=function(e){var t=e.icon,a=e.label,n=e.endLabel,o=e.onClick,i=io();return r.a.createElement(Xr.a,{className:i.iconItem,onClick:o},r.a.createElement($r.a,null,r.a.createElement(ao.a,{className:i.iconDot},r.a.createElement(at.a,{icon:t,className:i.icon,size:32})),r.a.createElement(eo.a,{className:i.connector})),r.a.createElement(to.a,{className:"u-flex"},r.a.createElement(Ye.a,{className:"u-flex-grow-1",variant:"body2",color:"textSecondary"},a),r.a.createElement(Ye.a,{className:i.endLabel,variant:"body2",component:"div"},n)))},lo=r.a.memo(co),so=a("c6Mf"),uo=a("BkRI"),mo=a.n(uo),po=function(e){var t,a=e.timeserie,n=e.sectionId,r=e.mode,o=a.series.flatMap((function(e,t){return e.features.flatMap((function(e,a){if(e.features)return e.features.flatMap((function(e,r){if(e.id===n)return{feature:e,serieIndex:t,firstIndex:a,secondIndex:r}}))}))})).find((function(e){return e}));if(o){var i=o.feature,c=o.serieIndex,l=o.firstIndex,s=o.secondIndex,u=Ut()(mo()(i),"properties.manual_mode",r),d=Ut()(mo()(a),"series[".concat(c,"].features[").concat(l,"].features[").concat(s,"]"),u);return(t=[d],t.map((function(e){var t=e.series[0],a=0,n=0,r=0,o=0,i=[],c=ma(t).map((function(e){var t={startDate:e.startDate,endDate:e.endDate,CO2:Xt(e),calories:$t(e),avgSpeed:e.averageSpeed,duration:e.duration,distance:e.distance,mode:e.mode,id:e.id};return a+=t.CO2,n+=t.distance,r+=t.duration,o+=t.calories,i.push(t.mode),t})),l=It()(t,"features[0].properties.display_name"),s=It()(t,"features[1].properties.display_name"),u=ca(la(t)||sa(t));return fa(fa({},e),{},{aggregation:{totalCO2:a,totalDistance:n,totalDuration:r,totalCalories:o,startPlaceDisplayName:l,endPlaceDisplayName:s,purpose:u,modes:i,sections:c}})})))[0]}return a},fo=function(e){return{children:Et.map((function(t){return{id:t,title:e("trips.modes.".concat(t)),icon:r.a.createElement(Dt,{attribute:t})}}))}},bo=function(e){var t=e.section,a=e.onClose,o=Object(k.e)().t,i=Object(s.useClient)(),c=Fr().timeserie,l=Object(n.useCallback)(function(){var e=G()(q.a.mark((function e(n){var r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po({timeserie:c,sectionId:t.id,mode:n.id}),e.next=3,i.save(r);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,c,a,t.id]),u=Object(n.useMemo)((function(){return function(e){return e.id===t.mode}}),[t.mode]);return r.a.createElement(so.a,{title:o("tripEdit.selectMode"),onClose:a,onSelect:l,isSelected:u,options:fo(o)})},vo=r.a.memo(bo),go=function(){var e=Fr().timeserie,t=Object(k.e)(),a=t.t,o=t.f,i=t.lang,c=Object(n.useState)(!1),l=S()(c,2),s=l[0],u=l[1],d=Object(n.useState)(null),m=S()(d,2),p=m[0],f=m[1],b=Object(n.useCallback)((function(e){return function(){f(e),u(!0)}}),[]),v=Object(n.useCallback)((function(){return u(!1)}),[]);return r.a.createElement(r.a.Fragment,null,e.aggregation.sections.map((function(e,t){return r.a.createElement(lo,{key:t,label:"".concat(a("trips.modes.".concat(e.mode))," - ").concat(ra(e.duration)," - ").concat(aa(e.distance)," - ").concat((n=e.avgSpeed,"".concat(Math.round(n)," km/h"))),endLabel:oa({f:o,lang:i,date:new Date(e.endDate)}),icon:Ot(e.mode),onClick:b(e)});var n})),s&&r.a.createElement(vo,{section:p,onClose:v}))},ho=r.a.memo(go),yo=a("4XKp"),Eo=Object(Jr.a)((function(){return{root:{minWidth:"48px"}}})),Oo=function(e){var t=e.purpose,a=e.onClick,n=Object(k.e)().t,o=Eo();return r.a.createElement(Je.a,{button:!0,onClick:a},r.a.createElement(yo.a,{classes:{root:o.root}},r.a.createElement(_t,{attribute:t})),r.a.createElement(Ke.a,{primary:n("purpose"),primaryTypographyProps:{variant:"caption"},secondary:n("trips.purposes.".concat(t)),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))};Oo.defaultProps={purpose:"OTHER_PURPOSE"};var jo=r.a.memo(Oo),wo=a("KXWi");function xo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Co(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xo(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ko=function(){var e=G()(q.a.mark((function e(){var t,a,n,r,o,i,c=arguments;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.isRecurringTrip,i=Co({},n),o&&(i=Sa(i,r)),i=Aa(i,r,{isRecurringTrip:o}),e.next=6,a.save(i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_o=function(){var e=G()(q.a.mark((function e(t){var a,n,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.purpose,e.next=3,ko({client:a,timeserie:n,purpose:r,isRecurringTrip:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Do=function(){var e=G()(q.a.mark((function e(){var t,a,n,r,o,i=arguments;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.oldPurpose,e.next=3,ko({client:a,timeserie:n,purpose:r,isRecurringTrip:!0});case 3:hn(a,"recurringPurposes",{fields:{docId:n._id,oldPurpose:o}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Po=function(e){return{children:wt.map((function(t){return{id:t,title:e("trips.purposes.".concat(t)),icon:r.a.createElement(_t,{attribute:t})}}))}},Mo=function(e){var t=e.onClose,a=Object(n.useState)(!1),o=S()(a,2),i=o[0],c=o[1],l=Object(n.useState)(null),u=S()(l,2),d=u[0],m=u[1],p=Object(k.e)().t,f=Object(s.useClient)(),b=Fr().timeserie,v=Object(n.useCallback)(function(){var e=G()(q.a.mark((function e(a){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(a.id),"OTHER_PURPOSE"===(n=Oa(b))){e.next=5;break}return c(!0),e.abrupt("return");case 5:Do({client:f,timeserie:b,purpose:a.id,oldPurpose:n}),t();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,b,t]),g=Object(n.useMemo)((function(){return function(e){var t=Oa(b);return t?e.id===t:"OTHER_PURPOSE"===e.id}}),[b]);return i?r.a.createElement(Bn.a,{open:i,onClose:t,title:p("recurring.confirmDialog.title"),content:p("recurring.confirmDialog.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(wo.a,{theme:"secondary",label:p("recurring.confirmDialog.decline"),onClick:G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_o({client:f,timeserie:b,purpose:d});case 2:t();case 3:case"end":return e.stop()}}),e)})))}),r.a.createElement(wo.a,{theme:"primary",label:p("recurring.confirmDialog.confirm"),onClick:G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do({client:f,timeserie:b,purpose:d,oldPurpose:Oa(b)});case 2:t();case 3:case"end":return e.stop()}}),e)})))}))}):r.a.createElement(so.a,{title:p("tripEdit.selectPurpose"),onClose:t,onSelect:v,isSelected:g,options:Po(p)})},No=r.a.memo(Mo),So=a("fOha"),Ao=function(e){var t=e.isRecurringTrip,a=e.purpose,n=e.onClick,o=Object(k.e)().t;return"OTHER_PURPOSE"===a?null:r.a.createElement(Je.a,{button:!0,onClick:n},r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:So.a})),r.a.createElement(Ke.a,{primary:o("recurring.title"),primaryTypographyProps:{variant:"caption"},secondary:o("recurring.".concat(t?"recurringTrip":"occasionalTrip")),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))},To=a("SOfb"),Ro=a("oP5z"),Zo=a("JeaN"),Lo=a("FdHV"),Fo=function(){var e=Object(k.e)().t,t=Object(D.b)().isMobile,a=r.a.useState(!1),n=S()(a,2),o=n[0],i=n[1],c=function(){i(!1)};return t?r.a.createElement(We.a,null,r.a.createElement(Je.a,{className:"u-mb-half u-pl-1-half",style:{minHeight:"3rem"}},r.a.createElement(Ke.a,{className:"u-pv-0",primary:e("recurring.title"),primaryTypographyProps:{variant:"h6"}}),r.a.createElement(Zo.a,null,r.a.createElement(Lo.a,{onClickAway:c},r.a.createElement(To.a,{onClose:c,open:o,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:e("recurring.tooltip"),placement:"top-end",arrow:!0},r.a.createElement(Va.a,{onClick:function(){i(!o)}},r.a.createElement(tt.a,{icon:Ro.a}))))))):r.a.createElement("div",{className:"u-pt-1"},e("recurring.title"),r.a.createElement(To.a,{title:e("recurring.tooltip"),placement:"top",arrow:!0},r.a.createElement(Va.a,null,r.a.createElement(tt.a,{icon:Ro.a}))))},zo=a("2HD0"),Bo=function(e){var t=e.recurring,a=e.setRecurring,n=Object(k.e)().t;return r.a.createElement(We.a,{className:"u-pv-half"},r.a.createElement(Je.a,{button:!0,onClick:function(){return a(!1)}},r.a.createElement(Xe.a,null,r.a.createElement(zo.a,{value:"no",checked:!t})),r.a.createElement(Ke.a,{primary:n("recurring.occasionalTrip")})),r.a.createElement(Je.a,{button:!0,onClick:function(){return a(!0)}},r.a.createElement(Xe.a,null,r.a.createElement(zo.a,{value:"yes",checked:t})),r.a.createElement(Ke.a,{primary:n("recurring.recurringTrip")})))},Go=function(e){var t,a,n=e.onClose,o=Object(D.b)().isMobile,i=Fr().timeserie,c=Object(s.useClient)(),l=Oa(i),u=null!==(t=null==i||null===(a=i.aggregation)||void 0===a?void 0:a.recurring)&&void 0!==t&&t,d=function(){var e=G()(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Do({client:c,timeserie:i,purpose:l,oldPurpose:l});case 3:e.next=7;break;case 5:return e.next=7,_o({client:c,timeserie:i,purpose:l});case 7:n();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?r.a.createElement(Gr.a,{onClose:n,backdrop:!0},r.a.createElement(Kr.a,{disableGutters:!0},r.a.createElement(Fo,null),r.a.createElement(qe.a,null),r.a.createElement(Bo,{recurring:u,setRecurring:d}))):r.a.createElement(Bn.a,{open:!0,onClose:n,disableGutters:!0,title:r.a.createElement(Fo,null),content:r.a.createElement(Bo,{recurring:u,setRecurring:d})})},Io={divider:{margin:"-10px -32px 10px"}},qo=function(){var e,t=Object(k.e)(),a=t.f,o=t.lang,i=Fr().timeserie,c=Object(D.b)().isDesktop,l=Object(n.useState)(!1),s=S()(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=S()(m,2),f=p[0],b=p[1],v=Oa(i),g=null==i||null===(e=i.aggregation)||void 0===e?void 0:e.recurring;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr.a,{disableGutters:!0},r.a.createElement(Yr.a,{className:"u-pb-0 u-mb-0"},r.a.createElement(oo,{label:Ca(i),endLabel:oa({f:a,lang:o,date:wa(i)}),type:"start"}),r.a.createElement(ho,null),r.a.createElement(oo,{label:ka(i),endLabel:oa({f:a,lang:o,date:xa(i)}),type:"end"}))),c&&r.a.createElement(qe.a,{style:Io.divider}),r.a.createElement(Kr.a,{disableGutters:!0},r.a.createElement(We.a,{className:"u-pv-half"},r.a.createElement(jo,{purpose:v,onClick:function(){return d(!0)}}),u&&r.a.createElement(No,{onClose:function(){return d(!1)}}),r.a.createElement(qe.a,{variant:"inset",component:"li"}),r.a.createElement(Ao,{isRecurringTrip:g,purpose:v,onClick:function(){return b(!0)}}),f&&r.a.createElement(Go,{onClose:function(){return b(!1)}}))))},Uo=r.a.memo(qo),Ho=a("xaLs"),Qo=(a("bMVF"),a("7HT4")),Wo=a("b6he"),Vo=a("2v/k"),Yo=a("a7NG"),Ko=(a("zer9"),function(){var e=Object(n.useRef)(),t=Object(D.b)().isMobile,a=Object(un.a)(),o=Fr().timeserie,i=Object(Qo.a)(),c=Object(n.useMemo)((function(){return function(e){return{style:function(t){return{weight:"section"===t.properties.feature_type?5:2,color:e.palette.primary.main}},pointToLayer:function(e,t){return Yo.d.marker(t,{icon:Yo.d.divIcon({html:"<div></div>",iconSize:[12,12],className:"cozy-leaflet-markers ".concat("end_place"===e.properties.feature_type?"cozy-leaflet-markers-end":"cozy-leaflet-markers-start")})})}}}(a)}),[a]),l=c.pointToLayer,s=c.style,u=Object(n.useMemo)((function(){return t?$o.mediumHeightRatio:0}),[t]);return Object(n.useEffect)((function(){var t=e.current.getBounds(),a=[16,16],n=[16,16+i.getSize().y*u];i.fitBounds(t,{paddingTopLeft:a,paddingBottomRight:n})}),[i,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Wo.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(Vo.a,{ref:e,data:_a(o),pointToLayer:l,style:s}))}),Jo=[51.505,-.09],Xo=function(){return r.a.createElement(Ho.a,{className:"u-h-100",center:Jo,zoom:13},r.a.createElement(Ko,null))},$o={mediumHeightRatio:.66},ei=function(e){var t=e.titleRef,a=Object(n.useState)(0),o=S()(a,2),i=o[0],c=o[1],l=Object(n.useMemo)((function(){return{height:i}}),[i]),s=Object(n.useMemo)((function(){return function(e){var t=e.toolbarHeight;return{mapContainer:{height:"calc(100vh - ".concat(t,"px - var(--sidebarHeight) - env(safe-area-inset-bottom))")}}}({toolbarHeight:i})}),[i]);return Object(n.useEffect)((function(){null!=t&&t.current&&c(t.current.offsetHeight)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"u-w-100 u-pos-fixed",style:s.mapContainer},r.a.createElement(Xo,null)),r.a.createElement(Gr.a,{settings:$o,toolbarProps:l},r.a.createElement(Ir.a,{className:"u-h-3 u-pb-half"},r.a.createElement(Vr,null)),r.a.createElement(Uo,null)))},ti=r.a.memo(ei),ai=function(){var e=Object(De.i)().timeserieId,t=Fr().timeserie,a=Object(De.g)().pathname,o=Object(De.h)(),i=Object(n.useRef)(null);return r.a.createElement(Zr.a,{open:!0,transitionDuration:0,disableGutters:!0,title:ka(t),titleRef:i,content:r.a.createElement(ti,{titleRef:i}),onBack:function(){return o(a.split("/".concat(e))[0])}})},ni=r.a.memo(ai),ri={map:{height:"400px",margin:"-24px -32px 0"},divider:{margin:"10px -32px 25px"}},oi=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:ri.map},r.a.createElement(Xo,null)),r.a.createElement("div",{className:"u-mt-1 u-h-3 u-flex u-flex-items-center u-pb-half"},r.a.createElement(Vr,null)),r.a.createElement(qe.a,{style:ri.divider}),r.a.createElement(Uo,null))},ii=function(){var e=Object(De.i)().timeserieId,t=Fr().timeserie,a=Object(De.g)().pathname,n=Object(De.h)();return r.a.createElement(Zr.a,{open:!0,size:"large",title:ka(t),content:r.a.createElement(oi,null),onClose:function(){return n(a.split("/".concat(e))[0])}})},ci=r.a.memo(ii),li=["data"],si=function(){var e=Object(D.b)().isMobile,t=Object(De.g)().pathname,a=function(e){return{definition:Object(s.Q)(p).getById(e),options:{as:"".concat(p,"/").concat(e),fetchPolicy:u.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}(Object(n.useMemo)((function(){return t.split("/").pop()}),[t])),o=Object(s.useQuery)(a.definition,a.options),i=o.data,c=M()(o,li);return Object(s.isQueryLoading)(c)?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Br,{timeserie:i},e?r.a.createElement(ni,null):r.a.createElement(ci,null))},ui=r.a.memo(si),di=a("MEii"),mi=function(e,t,a){var n=Object.keys(e),r=Object.values(e),o="modes"===t?jt:Ct,i=r.map((function(e){return e.totalCO2})),c=n.map((function(e){return o(e)}));return{data:{labels:n.map((function(e){return a("trips.".concat(t,".").concat(e))})),datasets:[{id:1,data:i,backgroundColor:c}]},options:{plugins:{tooltip:{displayColors:!1,callbacks:{label:function(e){return"".concat(e.label," ").concat(na(e.raw))}}}}}}},pi={co2:{fontWeight:700}},fi={modes:Dt,purposes:_t},bi=function(e){var t=e.type,a=e.sortedTimeserieKey,n=fi[t];return r.a.createElement(n,{attribute:a})},vi=function(e){var t=e.sortedTimeserie,a=e.totalCO2,n=e.type,o=Object(k.e)().t,i=Object(De.h)(),c=S()(t,2),l=c[0],s=c[1],u=s.timeseries.length,d=s.totalCO2,m=function(e,t){if(0===t)return"0%";var a=(100*e/t).toFixed(2).split("."),n=S()(a,2),r=n[0],o=n[1];return"00"===o?"".concat(r,"%"):"".concat(r,".").concat(o,"%")}(d,a),p=0===u&&0===d;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,{"data-testid":"ListItem",className:"u-pl-1-s u-pl-2",disabled:p,onClick:p?void 0:function(){return i("/analysis/".concat(n,"/").concat(l))},button:!0},r.a.createElement(Xe.a,null,r.a.createElement(bi,{type:n,sortedTimeserieKey:l})),r.a.createElement(Ke.a,{primary:o("trips.".concat(n,".").concat(l)),secondary:"".concat(m," · ").concat(o("analysis.travels",u))}),r.a.createElement(Ye.a,{className:"u-mh-half",style:pi.co2,variant:"body2"},na(d)),!p&&r.a.createElement(tt.a,{icon:et.a,color:"var(--secondaryTextColor)"})),r.a.createElement(qe.a,null))},gi=function(e){var t=e.timeseries,a=Object(De.i)().mode,o=Object(k.e)().t,i=Object(D.b)().isMobile,c=Object(n.useMemo)((function(){return Ea(t)}),[t]),l=ha(t),s=Object(n.useMemo)((function(){return mi(c,"modes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return e.startDate.localeCompare(t.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(Ua,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Qa()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(di.a,{data:u,options:d,primaryText:na(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Fe.a,{marginTop:i?void 0:"6rem"},r.a.createElement(We.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(vi,{key:t,type:"modes",totalCO2:l,sortedTimeserie:e})})))))},hi=["data"],yi=function(){var e=Ee().account,t=xe().selectedDate,a=pe(t,null==e?void 0:e._id),n=Object(s.useQueryAll)(a.definition,a.options),o=n.data,i=M()(n,hi);return Object(s.isQueryLoading)(i)||i.hasMore?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(gi,{timeseries:o})},Ei=a("A52f"),Oi=a("ViDg"),ji=["/analysis/modes","/analysis/purposes"],wi=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},xi=function(){var e=Object(De.h)(),t=Object(De.g)().pathname,a=Object(k.e)().t,n=ji.indexOf(ji.find((function(e){return t.includes(e)})));return r.a.createElement(Ve.a,null,r.a.createElement(Ei.a,{value:n,onChange:function(t,a){e(ji[a])}},r.a.createElement(Oi.a,Qn()({label:a("nav.modes")},wi(0))),r.a.createElement(Oi.a,Qn()({label:a("nav.purposes")},wi(1)))))},Ci=a("N1rN"),ki=Object(Jr.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2]}}})),_i=function(e){var t=e.className,a=ki();return r.a.createElement(Fe.a,{display:"flex",className:t},r.a.createElement(Ve.a,{className:a.paper,elevation:2}),r.a.createElement(Fe.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(Va.a,{className:a.iconButton,disabled:!0,size:"medium"},r.a.createElement(tt.a,{icon:Ci.a})),r.a.createElement(Va.a,{className:Qa()(a.iconButton,"u-ml-half"),disabled:!0,size:"medium"},r.a.createElement(tt.a,{icon:et.a}))))},Di=function(e){return Array(12).fill().map((function(t,a){return new Intl.DateTimeFormat("".concat(e,"-").concat(e.toUpperCase()),{month:"long"}).format(new Date(0,a))}))},Pi=function(e){return new Date(Math.min.apply(null,e))},Mi=function(e){return new Date(Math.max.apply(null,e))},Ni=function(e,t){return e.map((function(e,a){return t.includes(e)?null:a})).filter((function(e){return null!==e}))},Si=function(e,t){var a=function(e){var t=Mi(e).getFullYear(),a=Pi(e).getFullYear(),n=Number(a);return Array(t-a+1).fill().map((function(){return n++})).sort().reverse()}(e),n=function(e){return Mt()(new Set(e.map((function(e){return e.getFullYear()}))))}(e),r=a.indexOf(t.getFullYear());return{years:a,yearSelectedIndex:r,disabledYearsIndexes:Ni(a,n)}},Ai=c()((function(e){var t=e.dates,a=e.selectedDate,n=e.lang,r=Di(n),o=Pi(t),i=Mi(t),c=a.getFullYear(),l=c===i.getFullYear(),s=c===o.getFullYear(),u=12;l?u=i.getMonth()+1:s&&(u=12-o.getMonth());var d,m=function(e){var t=e.monthCount,a=e.allMonthsName,n=e.endToStart;return a.slice(n?a.length-t:0,n?a.length:t)}({monthCount:u,allMonthsName:r,endToStart:s}),p=m.indexOf(r[a.getMonth()]);-1===p&&(l?d=i:s&&(d=o),p=m.indexOf(r[d.getMonth()]));var f=function(e){var t=e.dates,a=e.year,n=e.allMonthsName;return Mt()(new Set(t.map((function(e){return e.getFullYear()===a?n[e.getMonth()]:null})).filter((function(e){return null!==e}))))}({dates:t,year:c,allMonthsName:r});return{months:m,monthSelectedIndex:p,disabledMonthsIndexes:Ni(m,f)}})),Ti=c()((function(e){var t=e.oldDate,a=e.lang,n=e.value,r=e.type,o=e.dates,i=Di(a);if("year"===r){var c=new Date(new Date(t).setFullYear(n)),l=Ai({dates:o,selectedDate:c,lang:a}),s=l.months,u=l.monthSelectedIndex,d=i.indexOf(s[u]);return new Date(new Date(c).setMonth(d))}if("month"===r){var m=i.indexOf(n);return new Date(new Date(t).setMonth(m))}return t})),Ri=a("gd/W"),Zi=a("jjAL"),Li=a("Z3vd"),Fi=a("oCl1"),zi=["children","className","spaceBetween"],Bi=Object(Jr.a)((function(){return{button:{padding:"0 1rem",justifyContent:function(e){return e.spaceBetween?"space-between":"left"}},typography:{textTransform:"capitalize"}}})),Gi=function(e){var t=e.children,a=e.className,n=e.spaceBetween,o=M()(e,zi),i=Bi({spaceBetween:n});return r.a.createElement(Li.a,Qn()({className:Qa()(i.button,a),endIcon:r.a.createElement(tt.a,{icon:Fi.a,size:10})},o),r.a.createElement(Ye.a,{className:i.typography},t))},Ii=["className","type","options","selectedIndex","disabledIndexes","onclick"],qi=Object(Jr.a)((function(){return{paper:{textTransform:"capitalize",width:function(e){var t=e.anchorEl;return t?window.getComputedStyle(t).width:void 0},marginTop:2}}})),Ui=function(e){var t=e.className,a=e.type,o=e.options,i=e.selectedIndex,c=e.disabledIndexes,l=e.onclick,s=M()(e,Ii),u=Object(n.useState)(null),d=S()(u,2),m=d[0],p=d[1],f=Object(n.useState)(i||0),b=S()(f,2),v=b[0],g=b[1],h=qi({anchorEl:m}).paper,y=function(e){return function(){p(null),g(e),l&&l(a,o[e])}};return Object(n.useEffect)((function(){void 0!==i&&g(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Gi,Qn()({"data-testid":"dropdown-button",className:t,onClick:function(e){p(e.currentTarget)}},s),o[v]),r.a.createElement(Ri.a,{"data-testid":"dropdown-menu",classes:{paper:h},anchorEl:m,getContentAnchorEl:null,keepMounted:!0,open:Boolean(m),onClose:function(){p(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},elevation:2},o.map((function(e,t){return r.a.createElement(Zi.a,{"data-testid":"dropdown-menuItem-".concat(t),key:t,onClick:y(t),selected:t===v,disabled:c&&c.includes(t)},e)}))))};Ui.proptypes={className:He.a.string,type:He.a.oneOfType([He.a.string,He.a.number]),options:He.a.array.isRequired,selectedIndex:He.a.number,disabledIndexes:He.a.array,onclick:He.a.func};var Hi=Ui,Qi=Object(Jr.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},leftDropdownButton:{borderTopLeftRadius:1e3,borderBottomLeftRadius:1e3,paddingRight:"2.5rem"},rightDropdownButton:{borderTopRightRadius:1e3,borderBottomRightRadius:1e3,paddingRight:"1.2rem"},divider:{margin:"0.6rem 0"},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2],backgroundColor:e.palette.background.paper}}})),Wi=function(e){var t=e.className,a=e.options,o=e.selectedDate,i=e.setSelectedDate,c=Qi(),l=Object(k.e)().lang,s=Object(n.useMemo)((function(){return Ai({dates:a,selectedDate:o,lang:l})}),[a,o,l]),u=s.months,d=s.monthSelectedIndex,m=s.disabledMonthsIndexes,p=Object(n.useMemo)((function(){return Si(a,o)}),[a,o]),f=p.years,b=p.yearSelectedIndex,v=p.disabledYearsIndexes,g=function(e,t){var n=Ti({oldDate:o,lang:l,value:t,type:e,dates:a});i(n)},h=function(e){return function(){i((function(t){return new Date(t.setMonth(t.getMonth()+e))}))}},y=function(e){return function(e){var t=e.type,a=e.selectedDate,n=e.options,r=new Date(a.getFullYear(),a.getMonth());if("previous"===t){var o=Pi(n);return new Date(o.getFullYear(),o.getMonth()).getTime()===r.getTime()}if("next"===t){var i=Mi(n);return new Date(i.getFullYear(),i.getMonth()).getTime()===r.getTime()}return!1}({type:e,selectedDate:o,options:a})};return r.a.createElement(Fe.a,{display:"flex",className:t},r.a.createElement(Ve.a,{className:c.paper,elevation:2},r.a.createElement(Hi,{"data-testid":"dropdown-button-year",type:"year",className:c.leftDropdownButton,options:f,onclick:g,selectedIndex:b,disabledIndexes:v}),r.a.createElement(qe.a,{className:c.divider,orientation:"vertical",flexItem:!0}),r.a.createElement(Hi,{"data-testid":"dropdown-button-month",type:"month",className:c.rightDropdownButton,fullWidth:!0,spaceBetween:!0,options:u,onclick:g,selectedIndex:d,disabledIndexes:m})),r.a.createElement(Fe.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(Va.a,{"data-testid":"previous-button",className:c.iconButton,onClick:h(-1),disabled:y("previous"),size:"medium"},r.a.createElement(tt.a,{icon:Ci.a})),r.a.createElement(Va.a,{"data-testid":"next-button",className:Qa()(c.iconButton,"u-ml-half"),onClick:h(1),disabled:y("next"),size:"medium"},r.a.createElement(tt.a,{icon:et.a}))))};Wi.proptypes={className:He.a.string,options:He.a.array.isRequired,selectedDate:He.a.number.isRequired,setSelectedDate:He.a.func.isRequired};var Vi=Wi,Yi=function(e){var t=e.className,a=e.options,n=e.isLoading,o=e.selectedDate,i=e.setSelectedDate;return n?r.a.createElement(_i,{className:t}):r.a.createElement(Vi,{className:t,options:a,selectedDate:o,setSelectedDate:i})},Ki=["data"];function Ji(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ji(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $i=function(){var e=xe(),t=e.selectedDate,a=e.setSelectedDate,o=Ee().account,i=me({accountId:null==o?void 0:o._id,limitBy:1e3}),c=Object(s.useQueryAll)(i.definition,Xi(Xi({},i.options),{},{enabled:Boolean(o)})),l=c.data,u=M()(c,Ki),d=!o||Object(s.isQueryLoading)(u)||u.hasMore,m=Object(n.useMemo)((function(){return function(e,t){return e?null:t.map((function(e){return new Date(e.startDate)}))}(d,l)}),[d,l]);return Object(n.useEffect)((function(){m&&null===t&&a(Mi(m))}),[m,t,a]),Object(n.useEffect)((function(){return function(){a(null)}}),[]),r.a.createElement(Yi,{className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2",isLoading:d||null===t,options:m,selectedDate:t,setSelectedDate:a})},ec=function(){var e=Object(k.e)().t,t=Object(De.h)(),a=Object(De.i)().mode,n=Object(D.b)().isMobile,o=e(a?"trips.modes.".concat(a.toUpperCase()):"analysis.mode"),i=a?function(){return t("/analysis/modes")}:void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{label:o,onBack:i}),n&&r.a.createElement(xi,null),r.a.createElement($i,null),r.a.createElement(yi,null))},tc=function(e){var t=e.timeseries,a=Object(De.i)().purpose,o=Object(k.e)().t,i=Object(D.b)().isMobile,c=Object(n.useMemo)((function(){return ja(t)}),[t]),l=ha(t),s=Object(n.useMemo)((function(){return mi(c,"purposes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return e.startDate.localeCompare(t.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(Ua,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Qa()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(di.a,{data:u,options:d,primaryText:na(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Fe.a,{marginTop:i?void 0:"6rem"},r.a.createElement(We.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(vi,{key:t,type:"purposes",totalCO2:l,sortedTimeserie:e})})))))},ac=["data"],nc=function(){var e=Ee().account,t=xe().selectedDate,a=pe(t,null==e?void 0:e._id),n=Object(s.useQueryAll)(a.definition,a.options),o=n.data,i=M()(n,ac);return Object(s.isQueryLoading)(i)||i.hasMore?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(tc,{timeseries:o})},rc=function(){var e=Object(k.e)().t,t=Object(De.h)(),a=Object(De.i)().purpose,n=Object(D.b)().isMobile,o=e(a?"trips.purposes.".concat(a.toUpperCase()):"analysis.purpose"),i=a?function(){return t("/analysis/purposes")}:void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{label:o,onBack:i}),n&&r.a.createElement(xi,null),r.a.createElement($i,null),r.a.createElement(nc,null))},oc=a("w7SU"),ic=s.models.folder,cc=ic.MAGIC_FOLDERS,lc=ic.ensureMagicFolder,sc=ic.getReferencedFolder,uc="".concat("io.cozy.apps","/coachco2"),dc=function(){var e=G()(q.a.mark((function e(t,a){var n,r,o,i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(t,{_id:uc,_type:"io.cozy.apps"});case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,lc(t,cc.ADMINISTRATIVE,"/".concat(a("folder.administrative")));case 9:return r=e.sent,o=r.path,e.next=13,lc(t,cc.COACH_CO2,"".concat(o,"/").concat(a("folder.coachco2")));case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function mc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fc=s.models.file.uploadFileWithConflictStrategy,bc=function(e,t){return t("export.filename",{today:Object(gn.a)(new Date,"yyyy MM dd"),accountLabel:e})},vc=function(e){return[Object.keys(e[0])].concat(Mt()(e)).map((function(e){return Object.values(e).map((function(e){return e?'"'.concat(e,'"'):" "})).toString()})).join("\n")},gc=function(e){var t=e.flatMap((function(e){return ma(e).map((function(t){var a,n,r=(a={},T()(a,te,t.startDate),T()(a,ae,t.endDate),T()(a,ne,t.duration),T()(a,re,t.distance),T()(a,oe,t.mode),T()(a,ie,t.coordinates),T()(a,ce,t.distances),T()(a,le,t.timestamps),T()(a,se,t.speeds),a);return pc(pc({},(n={},T()(n,Y,e.id),T()(n,$,function(e){return new Date(e.properties.start_fmt_time)}(e)),T()(n,ee,function(e){return new Date(e.properties.end_fmt_time)}(e)),T()(n,K,function(e){return It()(e,"properties.start_place.data.properties.display_name")}(e)),T()(n,J,function(e){return It()(e,"properties.end_place.data.properties.display_name")}(e)),T()(n,X,la(e)),n)),r)}))}));return Zt()(t,Y)},hc=function(){var e=G()(q.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.timeseries,o=t.accountName,i=ga(r),c=gc(i),l=vc(c),s=bc(o,n),e.prev=5,e.next=8,dc(a,n);case 8:return u=e.sent,e.next=11,fc(a,l,{name:s,contentType:"text/csv",dirId:u._id,conflictStrategy:"rename"});case 11:return d=e.sent,m=d.data,e.abrupt("return",{appDir:u,fileCreated:m,isLoading:!1});case 16:return e.prev=16,e.t0=e.catch(5),vn()("error",e.t0),e.abrupt("return",{appDir:null,fileCreated:null,isLoading:!0});case 20:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}(),yc=["data"],Ec=function(){var e,t,a,r,o=Object(k.e)().t,i=Object(s.useClient)(),c=Ee().account,l=Object(n.useState)(!1),d=S()(l,2),m=d[0],f=d[1],b=Object(n.useState)({appDir:null,fileCreated:null,isLoading:!0}),v=S()(b,2),g=v[0],h=g.appDir,y=g.fileCreated,E=g.isLoading,O=v[1],j=(e={accountId:null==c?void 0:c._id,limitBy:1e3},t=e.accountId,a=e.date,r=void 0===a?null:a,{definition:Object(s.Q)(p).where({"cozyMetadata.sourceAccount":t,startDate:{$gt:r}}).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(p,"/sourceAccount/").concat(t),fetchPolicy:u.a.fetchPolicies.olderThan(3e4)}}),w=Object(s.useQueryAll)(j.definition,j.options),x=w.data,C=M()(w,yc),_=Object(s.isQueryLoading)(C)||C.hasMore;return Object(n.useEffect)((function(){_||m||h||function(){var e=G()(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,hc({client:i,t:o,timeseries:x,accountName:Oe(c)});case 3:t=e.sent,O(t),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[c,h,i,m,_,o,x]),{isLoading:E,appDir:h,file:y}},Oc=function(e){var t=e.onClose,a=Object(k.e)().t,n=Object(s.useClient)(),o=Ec(),i=o.file,c=o.appDir;if(o.isLoading)return r.a.createElement(Bn.a,{open:!0,title:a("export.modal.title"),content:r.a.createElement(Ye.a,{color:"textPrimary"},a("export.modal.content.progress"))});var l=Object(s.generateWebLink)({slug:"drive",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(c._id)});return r.a.createElement(Bn.a,{open:!0,onClose:t,title:a("export.modal.title"),content:r.a.createElement(Ye.a,{color:"textPrimary"},a("export.modal.content.done",{filename:i.name,pathAppDir:c.path})),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zn.a,{variant:"secondary",onClick:t,label:a("export.modal.button.close")}),r.a.createElement(Zn.a,{href:l,target:"_blank",label:a("export.modal.button.viewInDrive")}))})},jc=["accountName"],wc=function(e){var t=e.accountName,a=M()(e,jc),o=Object(k.e)().t,i=Object(n.useState)(!1),c=S()(i,2),l=c[0],s=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",a,r.a.createElement(oc.a,null,o("export.label")),r.a.createElement(Zn.a,{busy:!1,variant:"secondary",label:o("export.button"),onClick:function(){return s(!0)}})),l&&r.a.createElement(Oc,{onClose:function(){return s(!1)},accountName:t}))},xc=Object(n.memo)(wc),Cc=a("xjMU"),kc=function(e){var t=Object(k.e)().t,a=Ee(),n=a.accounts,o=a.account,i=a.setAccount,c=n.map((function(e){return{label:Oe(e),value:e._id}})),l={label:Oe(o),value:o._id};return r.a.createElement("div",e,r.a.createElement(oc.a,null,t("devices.label")),r.a.createElement(Cc.a,{options:c,value:l,label:t("devices.label"),placeholder:t("devices.select"),onChange:function(e){var t=e.value;return i(n.find((function(e){return e._id===t})))}}))},_c=a("+iqp"),Dc=a("DMTX"),Pc=Object(Jr.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Mc=function(e){var t=e.className,a=Object(k.e)().t,n=Object(D.b)().isMobile,o=Pc(),i=fn("CO2Emission.sendToDACC"),c=i.isLoading,l=i.value,s=void 0!==l&&l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(Dc.a,{classes:o,label:a("dacc.settings.anonymous_participation"),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(_c.a,{color:"primary"})}))},Nc=Object(Jr.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Sc=function(e){var t=e.className,a=Object(k.e)().t,n=Object(D.b)().isMobile,o=Nc(),i=fn("CO2Emission.showAlert"),c=i.isLoading,l=i.value,s=void 0===l||l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(Dc.a,{classes:o,label:r.a.createElement(Ye.a,{style:{color:"var(--infoColor)"}},a("dacc.settings.showAlerter")),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(_c.a,{color:"primary"})}))},Ac=function(){var e=Object(D.b)().isMobile;return r.a.createElement(Fe.a,{color:"var(--infoColor)",position:"fixed",right:"1rem",bottom:"calc(1rem + ".concat(e?"var(--sidebarHeight)":"0rem",")")},d.version)},Tc=Object(Jr.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Rc=function(e){var t=e.className,a=Object(k.e)().t,n=Object(D.b)().isMobile,o=Tc(),i=Object(De.h)(),c=fn("bikeGoal.onboarded"),l=c.isLoading,s=c.value,u=void 0!==s&&s,d=fn("bikeGoal.activated"),m=d.isLoading,p=d.value,f=void 0!==p&&p,b=d.save,v=u&&f,g=l||m,h=function(){var e=G()(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=5;break}return e.next=3,b(t.target.checked);case 3:e.next=6;break;case 5:i("bikegoalonboarding");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:t},r.a.createElement(Dc.a,{classes:o,label:a("bikeGoal.settings.participation"),labelPlacement:n?"start":"end",checked:v,disabled:g,onChange:h,control:r.a.createElement(_c.a,{color:"primary"})}))},Zc=Object(Jr.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Lc=function(e){var t=e.className,a=Object(k.e)().t,n=Object(D.b)().isMobile,o=Zc(),i=fn("bikeGoal.showAlert"),c=i.isLoading,l=i.value,s=void 0===l||l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(Dc.a,{classes:o,label:r.a.createElement(Ye.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.showAlerter")),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(_c.a,{color:"primary"})}))},Fc=Object(Jr.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),zc=function(e){var t=e.className,a=Object(k.e)().t,n=Object(D.b)().isMobile,o=Fc(),i=fn("bikeGoal.onboarded"),c=i.isLoading,l=i.value,s=void 0!==l&&l,u=i.save,d=fn("bikeGoal.activated"),m=d.isLoading,p=d.value,f=void 0!==p&&p,b=d.save,v=s||f,g=c||m,h=function(){var e=G()(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=3;break}return e.next=3,b(t.target.checked);case 3:return e.next=5,u(t.target.checked);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:t},r.a.createElement(Dc.a,{classes:o,label:r.a.createElement(Ye.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.hideOnboarding")),labelPlacement:n?"start":"end",checked:v,disabled:g,onChange:h,control:r.a.createElement(_c.a,{color:"primary"})}))},Bc=Object(Jr.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Gc=function(e){var t=e.className,a=Object(k.e)().t,n=Object(D.b)().isMobile,o=Bc(),i=fn("bikeGoal.showAlertSuccess"),c=i.isLoading,l=i.value,s=i.save;return r.a.createElement("div",{className:t},r.a.createElement(Dc.a,{classes:o,label:r.a.createElement(Ye.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.showAlerterSuccess")),labelPlacement:n?"start":"end",checked:l,disabled:c,onChange:function(e){s(e.target.checked)},control:r.a.createElement(_c.a,{color:"primary"})}))},Ic=function(){var e=Object(k.e)().t,t=Ee().account;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{label:e("nav.settings")}),r.a.createElement("div",{className:"u-mh-1 u-mb-1"},r.a.createElement(kc,{className:"u-mt-1"}),r.a.createElement(oc.a,null,e("settings.services")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(oc.a,null,e("settings.services")),r.a.createElement(Mc,{className:"u-mt-half-s"}),y()("coachco2.bikegoal.enabled")&&r.a.createElement(Rc,{className:"u-mt-1-half-s"}),y()("coachco2.admin-mode")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Sc,{className:"u-mt-1-half-s"}),y()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Lc,{className:"u-mt-1-half-s"}),r.a.createElement(zc,{className:"u-mt-1-half-s"}),r.a.createElement(Gc,{className:"u-mt-1-half-s"})))),r.a.createElement(xc,{className:"u-mt-1",accountName:Oe(t)}),y()("coachco2.admin-mode")&&r.a.createElement(Ac,null))):r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"})},qc=function(e){var t=e.className,a=e.timeseries,n=e.hasMore,o=e.fetchMore,i=Object(k.e)().t;return r.a.createElement("div",{className:t},r.a.createElement(Ua,{timeseries:a,noHeader:!0}),n&&r.a.createElement(Ie.a,{label:i("loadMore"),fetchMore:o}))};qc.propTypes={className:He.a.string,timeseries:He.a.arrayOf(He.a.object).isRequired,hasMore:He.a.bool,fetchMore:He.a.func};var Uc=qc,Hc=a("eOsy"),Qc=a("oyDC"),Wc=function(e){var t=e.className,a=e.timeseries,n=Object(k.e)().t,o=Object(D.b)().isMobile,i=Object(De.h)();return r.a.createElement("div",{className:t},o&&r.a.createElement(Ye.a,{variant:"h3"},n("bikeGoal.title")),r.a.createElement(Ye.a,{className:"u-mt-half",style:{color:pr(a)&&"var(--successColor)"}},n("bikeGoal.goal_progression",{days:fr(a),daysToReach:ur()})),pr(a)&&r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Hc.a,{icon:r.a.createElement(tt.a,{icon:Qc.a,className:"u-ml-half"}),label:n("bikeGoal.achievement_certificate"),color:"success",clickable:!0,onClick:function(){i("certificate/generate")}})))};Wc.propTypes={className:He.a.string,timeseries:He.a.arrayOf(He.a.object).isRequired};var Vc=Wc,Yc=a("UxX4"),Kc=a("qVrW"),Jc=a("t6lw"),Xc=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(D.b)().isMobile?r.a.createElement(Jc.a,{textVariant:"h6",onClick:n},a):r.a.createElement(Zn.a,{ref:t,variant:"secondary",label:a,endIcon:r.a.createElement(tt.a,{icon:Fi.a,size:14}),onClick:n})}));Xc.displayName="ActionButton",Xc.propTypes={label:He.a.string,onClick:He.a.func};var $c=Xc,el=a("AF4N"),tl=function(e){var t=e.timeseries,a=Object(De.i)().year,o=Object(De.h)(),i=Object(n.useRef)(),c=Object(n.useState)(!1),l=S()(c,2),s=l[0],u=l[1],d=Object(n.useMemo)((function(){return function(e){var t=new Date;if(!e||0===e.length)return[t.getFullYear().toString()];var a=new Date(function(e){return e.reduce((function(e,t){return e.startDate<t.startDate?e:t}))}(e).startDate),n=Object(el.a)(t,a);return Array.from({length:n+1},(function(e,a){return Object(Q.a)(t,a).getFullYear().toString()}))}(t)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement($c,{ref:i,label:a,onClick:function(){return u((function(e){return!e}))}}),s&&r.a.createElement(Yc.a,{anchorElRef:i,autoclose:!0,onClose:function(){return u(!1)},popperOptions:{placement:"bottom-end"}},d.map((function(e,t){return r.a.createElement(Kc.a,{key:t,onClick:function(){return o("/bikegoal/".concat(e,"/trips"))}},e)}))))};tl.propTypes={timeseries:He.a.arrayOf(He.a.object).isRequired};var al=r.a.memo(tl),nl=a("Pxjx"),rl=a("KLom"),ol=a("EmGK"),il=a("Tgut"),cl=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(D.b)().isMobile?r.a.createElement(Va.a,{onClick:n},a):r.a.createElement(Zn.a,{ref:t,className:"u-miw-auto u-ml-half",variant:"secondary",label:a,onClick:n})}));cl.displayName="ActionButton",cl.propTypes={label:He.a.node,onClick:He.a.func};var ll=cl,sl=function(e){var t=e.open,a=e.onClose,o=Object(k.e)().t,i=Object(De.h)(),c=fn("bikeGoal.activated"),l=c.isLoading,s=c.save,u=Object(n.useState)(!1),d=S()(u,2),m=d[0],p=d[1];return r.a.createElement(Bn.a,{open:t,title:o("bikeGoal.deactivate.title"),content:o("bikeGoal.deactivate.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zn.a,{variant:"secondary",label:o("bikeGoal.deactivate.cancel"),onClick:a}),r.a.createElement(Zn.a,{color:"error",label:o("bikeGoal.deactivate.stop_participate"),busy:m||l,onClick:function(){p(!0),s(!1),i("/trips")}})),onClose:a})};sl.propTypes={open:He.a.bool.isRequired,onClose:He.a.func.isRequired};var ul=sl,dl=function(){var e=Object(k.e)().t,t=Object(D.b)().isMobile,a=Object(n.useRef)(),o=Object(De.h)(),i=Object(n.useState)(!1),c=S()(i,2),l=c[0],s=c[1],u=Object(n.useState)(!1),d=S()(u,2),m=d[0],p=d[1],f={divider:{borderTop:0,marginLeft:{isMobile:t}.isMobile?"3rem":void 0}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ll,{ref:a,label:r.a.createElement(tt.a,{icon:nl.a}),onClick:function(){return s((function(e){return!e}))}}),l&&r.a.createElement(Yc.a,{anchorElRef:a,autoclose:!0,onClose:function(){return s(!1)},popperOptions:{placement:"bottom-end"}},r.a.createElement(Kc.a,{left:r.a.createElement(tt.a,{icon:il.a}),onClick:function(){return o("edit")}},e("bikeGoal.edit.modify")),r.a.createElement(Kc.a,{left:r.a.createElement(tt.a,{icon:rl.a}),onClick:function(){return o("about")}},e("bikeGoal.about.title")),r.a.createElement(qe.a,{style:f.divider}),r.a.createElement(Kc.a,{left:r.a.createElement(tt.a,{icon:ol.a}),onClick:function(){return p(!0)}},e("bikeGoal.deactivate.deactivate"))),r.a.createElement(ul,{open:m,onClose:function(){return p(!1)}}))};al.propTypes={timeseries:He.a.arrayOf(He.a.object).isRequired};var ml=function(e){var t=e.timeseries,a=Object(D.b)().isMobile,n={actions:{right:{isMobile:a}.isMobile?0:"13rem"}};return r.a.createElement("div",{className:Qa()("u-flex u-flex-justify-end",{"u-pos-absolute u-top-m":!a}),style:n.actions},r.a.createElement(al,{timeseries:t}),r.a.createElement(dl,null))},pl=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=Object(De.h)(),o=Object(De.i)().year,i=La(t,o);return r.a.createElement(Zr.a,{open:!0,onClose:function(){return n("/trips")},disableGutters:!0,componentsProps:{dialogTitle:{className:"u-p-0"}},title:r.a.createElement(ml,{timeseries:t}),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(wr,{display:"flex",paddingTop:"1.5rem",marginTop:"3rem",timeseries:i}),r.a.createElement(Vc,{className:"u-flex u-flex-column u-flex-items-center",timeseries:i}),r.a.createElement(Uc,{className:"u-mt-2",timeseries:i,hasMore:a.hasMore,fetchMore:a.fetchMore}))})};pl.propTypes={timeseries:He.a.arrayOf(He.a.object).isRequired,timeseriesQueryLeft:He.a.object.isRequired};var fl=pl,bl=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=Object(k.e)().t,o=Object(De.h)(),i=Object(De.i)().year,c=La(t,i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{label:n("bikeGoal.title"),subtitle:r.a.createElement(Vc,{timeseries:c}),onBack:function(){return o("/trips")}}),r.a.createElement(ml,{timeseries:t}),r.a.createElement(wr,{display:"flex",position:"absolute",top:"2rem",right:"2rem",timeseries:c}),r.a.createElement(Uc,{className:"u-mt-3",timeseries:c,hasMore:a.hasMore,fetchMore:a.fetchMore}))};bl.propTypes={timeseries:He.a.arrayOf(He.a.object).isRequired,timeseriesQueryLeft:He.a.object.isRequired};var vl=bl,gl=["data"],hl=function(){var e=Ee(),t=e.account,a=e.isAccountLoading,n=Object(D.b)().isMobile,o=fe({accountId:null==t?void 0:t._id},Boolean(t)),i=Object(s.useQueryAll)(o.definition,o.options),c=i.data,l=M()(i,gl),u=Object(s.isQueryLoading)(l)||l.hasMore;return a||!t||u||0===c.length?r.a.createElement(sn,{account:t,isAccountLoading:a,isQueryLoading:u,timeseries:c}):n?r.a.createElement(fl,{timeseries:c,timeseriesQueryLeft:l}):r.a.createElement(vl,{timeseries:c,timeseriesQueryLeft:l})},yl=a("EjJM"),El=a("BRUz"),Ol=a("eTWq"),jl=a("AfPr"),wl=a("/Muz"),xl=function(e){var t=e.onClose,a=e.onRefuse,n=e.onAccept,o=Object(k.e)().t;return r.a.createElement(or,{onClose:t,onRefuse:a,onAccept:n,componentProps:{DaccPermissionsDialog:{sharedDataLabel:o("dacc.permissionsDialog.anonymized_bikegoal_progression")}}})};xl.propTypes={onClose:He.a.func.isRequired,onRefuse:He.a.func.isRequired,onAccept:He.a.func.isRequired};var Cl=xl;function kl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Dl=Object(n.forwardRef)((function(e,t){var a=Object(k.e)().t,o=Object(n.useState)(!1),i=S()(o,2),c=i[0],l=i[1],s=Object(n.useReducer)((function(e){return!e}),!1),u=S()(s,2),d=u[0],m=u[1],p=fn("bikeGoal"),f=p.isLoading,b=p.value,v=void 0===b?{}:b,g=p.save,h=v.onboardingStep,y=void 0===h?0:h,E=v.sendToDACC,O=void 0===E?null:E,j=Object(n.useState)(O),w=S()(j,2),x=w[0],C=w[1],_=mr(),D=_.sourceType,P=_.sourceIdentity,M={typography:{whiteSpace:"pre-line"}},N=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(),e.next=3,g(_l(_l({},v),{},{onboardingStep:y-1}));case 3:m();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(),e.next=3,g(_l(_l({},v),{},{onboardingStep:y+1,sendToDACC:x}));case 3:m();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(El.a,Qn()({},e,{ref:t}),r.a.createElement(Ol.a,null,a("bikeGoal.edit.compare_progress",{source:null!=P?P:a("bikeGoal.employer.my_".concat(D))})),r.a.createElement(jl.a,null,f?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{style:M.typography},a("bikeGoal.onboarding.steps.comparison.comparisonLegend",{source:null!=P?P:a("bikeGoal.employer.your_".concat(D))})),r.a.createElement(wl.a,{className:"u-mt-1"},r.a.createElement(Dc.a,{control:r.a.createElement(zo.a,{checked:!0===x,onClick:function(){return l(!0)}}),label:a("bikeGoal.onboarding.steps.comparison.compare"),className:"u-m-0"}),r.a.createElement(Dc.a,{control:r.a.createElement(zo.a,{checked:!1===x,onClick:function(){return C(!1)}}),label:a("bikeGoal.onboarding.steps.comparison.doNotCompare"),className:"u-m-0"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Zn.a,{onClick:A,label:a("bikeGoal.onboarding.actions.next"),disabled:d||null==x}),r.a.createElement(Zn.a,{onClick:N,label:a("bikeGoal.onboarding.actions.previous"),disabled:d,variant:"text",className:"u-ml-half"}),d&&r.a.createElement(Xa.a,{className:"u-ml-half"}))))),c&&r.a.createElement(Cl,{onClose:function(){return l(!1)},onRefuse:function(){l(!1),C(!1)},onAccept:function(){l(!1),C(!0)}}))}));Dl.displayName="BikeGoalOnboardingComparison";var Pl=Dl;function Ml(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Nl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ml(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Sl=Object(n.forwardRef)((function(e,t){var a=Object(k.e)().t,o=Object(De.h)(),i=Object(n.useReducer)((function(e){return!e}),!1),c=S()(i,2),l=c[0],s=c[1],u=fn("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=dr(),h={typography:{whiteSpace:"pre-line"}},y=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,f(Nl(Nl({},p),{},{onboardingStep:v-1}));case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=G()(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,f(Nl(Nl({},p),{},{onboarded:!0,activated:!0,showAlert:!1}));case 3:s(),t=(new Date).getFullYear().toString(),o("/bikegoal/".concat(t,"/trips"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(El.a,Qn()({},e,{ref:t}),r.a.createElement(Ol.a,null,a("bikeGoal.about.once_goal_reach.title")),r.a.createElement(jl.a,null,d?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{style:h.typography},a("bikeGoal.about.once_goal_reach.content",{bountyAmount:g})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Zn.a,{onClick:E,label:a("bikeGoal.onboarding.actions.finish"),disabled:l}),r.a.createElement(Zn.a,{onClick:y,label:a("bikeGoal.onboarding.actions.previous"),disabled:l,variant:"text",className:"u-ml-half"}),l&&r.a.createElement(Xa.a,{className:"u-ml-half"})))))}));Sl.displayName="BikeGoalOnboardingConclusion";var Al=Sl;function Tl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Rl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tl(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Zl=Object(n.forwardRef)((function(e,t){var a=Object(k.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=S()(o,2),c=i[0],l=i[1],s=fn("bikeGoal"),u=s.isLoading,d=s.value,m=void 0===d?{}:d,p=s.save,f=m.onboardingStep,b=void 0===f?0:f,v={typography:{whiteSpace:"pre-line"}},g=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,p(Rl(Rl({},m),{},{onboardingStep:b-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,p(Rl(Rl({},m),{},{onboardingStep:b+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(El.a,Qn()({},e,{ref:t}),r.a.createElement(Ol.a,null,a("bikeGoal.about.how_trips_detected.title")),r.a.createElement(jl.a,null,u?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{style:v.typography},a("bikeGoal.about.how_trips_detected.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Zn.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),r.a.createElement(Zn.a,{onClick:g,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Xa.a,{className:"u-ml-half"})))))}));Zl.displayName="BikeGoalOnboardingDetection";var Ll=Zl;function Fl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function zl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Bl=Object(n.forwardRef)((function(e,t){var a=Object(k.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=S()(o,2),c=i[0],l=i[1],s=fn("bikeGoal"),u=s.isLoading,d=s.value,m=void 0===d?{}:d,p=s.save,f=m.onboardingStep,b=void 0===f?0:f,v=dr(),g={typography:{whiteSpace:"pre-line"}},h=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,p(zl(zl({},m),{},{onboardingStep:b+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(El.a,Qn()({},e,{ref:t}),r.a.createElement(Ol.a,null,a("bikeGoal.about.intro.title")),r.a.createElement(jl.a,null,u?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{style:g.typography},a("bikeGoal.about.intro.content",{bountyAmount:v})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Zn.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),c&&r.a.createElement(Xa.a,{className:"u-ml-half"})))))}));Bl.displayName="BikeGoalOnboardingIntroduction";var Gl=Bl,Il=a("ERmx");function ql(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ul(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ql(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Hl=Object(n.forwardRef)((function(e,t){var a=Object(k.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=S()(o,2),c=i[0],l=i[1],s=fn("bikeGoal"),u=s.isLoading,d=s.value,m=void 0===d?{}:d,p=s.save,f=m.onboardingStep,b=void 0===f?0:f,v=m.lastname,g=void 0===v?"":v,h=m.firstname,y=void 0===h?"":h,E=Object(n.useState)(g),O=S()(E,2),j=O[0],w=O[1],x=Object(n.useState)(y),C=S()(x,2),_=C[0],D=C[1],P=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,p(Ul(Ul({},m),{},{onboardingStep:b-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,p(Ul(Ul({},m),{},{onboardingStep:b+1,lastname:j,firstname:_}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(El.a,Qn()({},e,{ref:t}),r.a.createElement(Ol.a,null,a("bikeGoal.onboarding.steps.naming.title")),r.a.createElement(jl.a,null,u?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,null,a("bikeGoal.onboarding.steps.naming.nameLegend")),r.a.createElement("div",null,r.a.createElement(Il.a,{variant:"outlined",label:a("bikeGoal.edit.lastname"),defaultValue:j,onChange:function(e){return w(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",null,r.a.createElement(Il.a,{variant:"outlined",label:a("bikeGoal.edit.firstname"),defaultValue:_,onChange:function(e){return D(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Zn.a,{onClick:M,label:a("bikeGoal.onboarding.actions.next"),disabled:c||""===_||""===j}),r.a.createElement(Zn.a,{onClick:P,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Xa.a,{className:"u-ml-half"})))))}));Hl.displayName="BikeGoalOnboardingNaming";var Ql=Hl,Wl=a("7SZd"),Vl=function(e){return e>=0&&e<=100?Math.round(e):null},Yl=Object(n.forwardRef)((function(e,t){return r.a.createElement(Il.a,Qn()({type:"number",inputProps:{min:"0",max:"100",step:"1",inputMode:"numeric"}},e,{ref:t}))}));Yl.displayName="PercentageField";var Kl=Yl;function Jl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $l=Object(n.forwardRef)((function(e,t){var a=Object(k.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=S()(o,2),c=i[0],l=i[1],s=fn("bikeGoal"),u=s.isLoading,d=s.value,m=void 0===d?{}:d,p=s.save,f=m.onboardingStep,b=void 0===f?0:f,v=m.workTime,g=void 0===v?null:v,h=m.workTimePercentage,y=void 0===h?0:h,E=Object(n.useState)(g),O=S()(E,2),j=O[0],w=O[1],x=Object(n.useState)(y),C=S()(x,2),_=C[0],D=C[1],P=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,p(Xl(Xl({},m),{},{onboardingStep:b-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,p(Xl(Xl({},m),{},{onboardingStep:b+1,workTime:j,workTimePercentage:_}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(El.a,Qn()({},e,{ref:t}),r.a.createElement(Ol.a,null,a("bikeGoal.edit.workTime")),r.a.createElement(jl.a,null,u?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,null,a("bikeGoal.onboarding.steps.timing.timeLegend")),r.a.createElement(wl.a,{className:"u-mt-1"},r.a.createElement(Dc.a,{control:r.a.createElement(zo.a,{checked:"full"===j,onClick:function(){return w("full")}}),label:a("bikeGoal.edit.workTime_full"),className:"u-m-0"}),r.a.createElement(Dc.a,{control:r.a.createElement(zo.a,{checked:"part"===j,onClick:function(){return w("part")}}),label:a("bikeGoal.edit.workTime_part"),className:"u-m-0"})),"part"===j&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{className:"u-mt-1"},a("bikeGoal.onboarding.steps.timing.percentageLegend")),r.a.createElement("div",null,r.a.createElement(Kl,{variant:"outlined",label:a("bikeGoal.onboarding.steps.timing.percentage"),defaultValue:_,InputProps:{endAdornment:r.a.createElement(Wl.a,{position:"end"},r.a.createElement(Ye.a,{variant:"body1"},"%"))},onChange:function(e){D(Vl(Number(e.target.value)))},className:"u-w-5 u-mt-1"}))),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Zn.a,{onClick:M,label:a("bikeGoal.onboarding.actions.next"),disabled:c||function(){if(null==j)return!0;if("part"===j){if(null==_)return!0;if(0===_)return!0}return!1}()}),r.a.createElement(Zn.a,{onClick:P,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Xa.a,{className:"u-ml-half"})))))}));$l.displayName="BikeGoalOnboardingTiming";var es=$l,ts=function(){var e=Object(k.e)().t,t=Object(De.h)(),a=fn("bikeGoal.onboardingStep"),n=a.isLoading,o=a.value,i=void 0===o?0:o;return r.a.createElement(Zr.a,{open:!0,disableGutters:!0,title:e("bikeGoal.onboarding.title"),content:r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}),!n&&r.a.createElement(yl.a,{activeStep:i,orientation:"vertical"},r.a.createElement(Gl,null),r.a.createElement(Ql,null),r.a.createElement(es,null),r.a.createElement(Ll,null),r.a.createElement(Pl,null),r.a.createElement(Al,null))),onClose:function(){t("..")}})},as=function(){var e=Object(k.e)().t,t=Object(De.h)(),a=dr(),n={typography:{whiteSpace:"pre-line"}};return r.a.createElement(Zr.a,{open:!0,title:e("bikeGoal.about.title"),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{className:"u-mb-1",variant:"h5"},e("bikeGoal.about.intro.title")),r.a.createElement(Ye.a,{variant:"body1",style:n.typography},e("bikeGoal.about.intro.content",{bountyAmount:a})),r.a.createElement(Ye.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.how_trips_detected.title")),r.a.createElement(Ye.a,{variant:"body1",style:n.typography},e("bikeGoal.about.how_trips_detected.content")),r.a.createElement(Ye.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.once_goal_reach.title")),r.a.createElement(Ye.a,{variant:"body1",style:n.typography},e("bikeGoal.about.once_goal_reach.content",{bountyAmount:a}))),onClose:function(){return t("..")}})},ns=a("TcVC"),rs=a("iYXl"),os=function(e){var t=e.itemName,a=e.value,n=e.setValue,o=Object(k.e)().t,i=!a,c={variant:"outlined",margin:"normal",defaultValue:a,required:!0,fullWidth:!0,error:i,helperText:i?o("bikeGoal.edit.required"):" "};switch(t){case"workTimePercentage":return r.a.createElement(Kl,Qn()({},c,{onChange:function(e){return n(Vl(Number(e.target.value)))}}));case"workTime":return r.a.createElement(wl.a,{"aria-label":"radio",name:"workTimeRadio",value:a,onChange:function(e){return n(e.target.value)}},r.a.createElement(Dc.a,{value:"full",label:o("bikeGoal.edit.workTime_full"),control:r.a.createElement(zo.a,null)}),r.a.createElement(Dc.a,{value:"part",label:o("bikeGoal.edit.workTime_part"),control:r.a.createElement(zo.a,null)}));default:return r.a.createElement(Il.a,Qn()({},c,{onChange:function(e){return n(e.target.value)}}))}};os.propTypes={itemName:He.a.string.isRequired,value:He.a.any.isRequired,setValue:He.a.func.isRequired};var is=os,cs=function(e){var t=e.itemName,a=e.onClose,o=Object(k.e)().t,i=fn("bikeGoal.".concat(t)),c=i.isLoading,l=i.value,s=i.save,u=Object(n.useState)(l),d=S()(u,2),m=d[0],p=d[1],f=Object(n.useState)(!1),b=S()(f,2),v=b[0],g=b[1],h=function(){var e=G()(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,s(m);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Bn.a,{open:!0,title:o("bikeGoal.edit.".concat(t)),content:c?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(is,{itemName:t,value:m,setValue:p}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Zn.a,{variant:"secondary",label:o("bikeGoal.edit.cancel"),onClick:a}),r.a.createElement(Zn.a,{className:"u-miw-4",label:o("bikeGoal.edit.submit"),busy:v,disabled:!m,onClick:h})),onClose:a})};cs.propTypes={itemName:He.a.string.isRequired,onClose:He.a.func.isRequired};var ls=cs;function ss(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function us(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(a),!0).forEach((function(t){T()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ss(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ds=function(){var e=Object(k.e)().t,t=Object(n.useState)(""),a=S()(t,2),o=a[0],i=a[1],c=fn("bikeGoal"),l=c.isLoading,s=c.value,u=c.save,d=mr(),m=d.sourceIdentity,p=d.sourceType,f="part"===s.workTime,b=function(){u(us(us({},s),{},{sendToDACC:!s.sendToDACC}))};return l?r.a.createElement(Xa.a,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,null,r.a.createElement(Je.a,{button:!0,onClick:function(){return i("lastname")}},r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:bt.a})),r.a.createElement(Ke.a,{primary:r.a.createElement(Ye.a,{variant:"caption"},e("bikeGoal.edit.lastname")),secondary:r.a.createElement(Ye.a,{variant:"body1"},s.lastname)})),r.a.createElement(qe.a,{component:"li",variant:"inset"}),r.a.createElement(Je.a,{button:!0,onClick:function(){return i("firstname")}},r.a.createElement(Xe.a,null),r.a.createElement(Ke.a,{primary:r.a.createElement(Ye.a,{variant:"caption"},e("bikeGoal.edit.firstname")),secondary:r.a.createElement(Ye.a,{variant:"body1"},s.firstname)})),r.a.createElement(qe.a,{component:"li",variant:"inset"}),r.a.createElement(Je.a,{button:!0,onClick:function(){return i("workTime")}},r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:dt.a})),r.a.createElement(Ke.a,{primary:r.a.createElement(Ye.a,{variant:"caption"},e("bikeGoal.edit.workTime")),secondary:r.a.createElement(Ye.a,{variant:"body1"},e("bikeGoal.edit.workTime_".concat(s.workTime)))}),r.a.createElement(tt.a,{icon:Fi.a})),r.a.createElement(qe.a,{component:"li",variant:"inset"}),f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,{button:!0,onClick:function(){return i("workTimePercentage")}},r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:rs.a})),r.a.createElement(Ke.a,{primary:r.a.createElement(Ye.a,{variant:"caption"},e("bikeGoal.edit.workTimePercentage")),secondary:r.a.createElement(Ye.a,{variant:"body1"},s.workTimePercentage)}),r.a.createElement(Ye.a,{variant:"body2"},"%")),r.a.createElement(qe.a,{component:"li",variant:"inset"})),r.a.createElement(Je.a,{button:!0,onClick:b},r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:ns.a})),r.a.createElement(Ke.a,{ellipsis:!1,primary:e("bikeGoal.edit.compare_progress",{source:null!=m?m:e("bikeGoal.employer.my_".concat(p))})}),r.a.createElement(Zo.a,null,r.a.createElement(_c.a,{className:"u-w-auto",color:"primary",checked:s.sendToDACC,onChange:b})))),Boolean(o)&&r.a.createElement(ls,{itemName:o,onClose:function(){return i("")}}))},ms=function(){var e=Object(k.e)().t,t=Object(De.h)();return r.a.createElement(Zr.a,{open:!0,disableGutters:!0,title:e("bikeGoal.edit.title"),content:r.a.createElement(ds,null),onClose:function(){return t("..")}})},ps=a("9Vgm"),fs=a("viCj"),bs=a.n(fs),vs=function(){var e=Object(k.e)().t,t=Object(D.b)().isMobile,a=Object(De.i)().year;return r.a.createElement("div",{className:bs.a["CertificateGeneration-root"]},r.a.createElement(wr,t&&{size:"medium"}),r.a.createElement(Ye.a,{variant:"h4"},e("bikeGoal.certificateGeneration.title")),r.a.createElement(Ye.a,{variant:"body2",className:"u-mv-1"},e("bikeGoal.certificateGeneration.content",{bountyAmount:dr(),year:a})),r.a.createElement(Ve.a,null,r.a.createElement(We.a,null,r.a.createElement(Je.a,null,r.a.createElement(Xe.a,null,r.a.createElement(tt.a,{icon:ps.a,size:32})),r.a.createElement(Ke.a,{primary:e("bikeGoal.certificateGeneration.actions.show")})))),r.a.createElement(Zn.a,{variant:"text",label:e("bikeGoal.certificateGeneration.actions.generate"),className:"u-mt-half u-fz-xsmall",onClick:function(){}}))},gs=a("mFUP"),hs=a.n(gs),ys=function(){var e=Object(De.h)(),t=Object(D.b)().isMobile,a=Object(k.e)().t;return r.a.createElement(Zr.a,Qn()({open:!0,background:"var(--paperBackgroundColor) repeat-x url(".concat(hs.a,")"),content:r.a.createElement(vs,null)},t?{onBack:function(){return e("..")}}:{onClose:function(){return e("..")}},{actions:r.a.createElement(Zn.a,{label:a("bikeGoal.certificateGeneration.actions.understood"),onClick:function(){return e("..")}}),actionsLayout:"column"}))},Es=function(e){var t=e.Component;return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,null),r.a.createElement(De.b,null))},Os=function(){var e=(new Date).getFullYear();return r.a.createElement(Pe.a,null,r.a.createElement(De.e,null,r.a.createElement(De.c,{path:"/",element:r.a.createElement(Ge,null)},r.a.createElement(De.c,{path:"trips",element:r.a.createElement(Es,{Component:Rr})},r.a.createElement(De.c,{path:":timeserieId",element:r.a.createElement(ui,null)}),y()("coachco2.bikegoal.enabled")&&r.a.createElement(De.c,{path:"bikegoalonboarding",element:r.a.createElement(ts,null)})),r.a.createElement(De.c,{path:"settings",element:r.a.createElement(Es,{Component:Ic})},y()("coachco2.bikegoal.enabled")&&r.a.createElement(De.c,{path:"bikegoalonboarding",element:r.a.createElement(ts,null)})),r.a.createElement(De.c,{path:"analysis/modes",element:r.a.createElement(Es,{Component:ec})}),r.a.createElement(De.c,{path:"analysis/modes/:mode",element:r.a.createElement(Es,{Component:ec})},r.a.createElement(De.c,{path:":timeserieId",element:r.a.createElement(ui,null)})),r.a.createElement(De.c,{path:"analysis/purposes",element:r.a.createElement(Es,{Component:rc})}),r.a.createElement(De.c,{path:"analysis/purposes/:purpose",element:r.a.createElement(Es,{Component:rc})},r.a.createElement(De.c,{path:":timeserieId",element:r.a.createElement(ui,null)})),y()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(De.c,{path:"bikegoal/:year/trips",element:r.a.createElement(Es,{Component:hl})},r.a.createElement(De.c,{path:":timeserieId",element:r.a.createElement(ui,null)}),r.a.createElement(De.c,{path:"edit",element:r.a.createElement(ms,null)}),r.a.createElement(De.c,{path:"about",element:r.a.createElement(as,null)}),r.a.createElement(De.c,{path:"certificate/generate",element:r.a.createElement(ys,null)}))),r.a.createElement(De.c,{path:"analysis",element:r.a.createElement(De.a,{replace:!0,to:"/analysis/modes"})}),y()("coachco2.bikegoal.enabled")&&r.a.createElement(De.c,{path:"bikegoal",element:r.a.createElement(De.a,{replace:!0,to:"/bikegoal/".concat(e,"/trips")})}),r.a.createElement(De.c,{path:"/",element:r.a.createElement(De.a,{replace:!0,to:"/trips"})}),r.a.createElement(De.c,{path:"*",element:r.a.createElement(De.a,{replace:!0,to:"/trips"})}))))};Object(j.a)(),document.addEventListener("DOMContentLoaded",(function(){var e,t,a,n,i;e=O(),t=e.container,a=e.client,n=e.lang,i=e.polyglot,Object(o.createRoot)(t).render(r.a.createElement(_e,{client:a,lang:n,polyglot:i},r.a.createElement(Os,null)))}))},ZAKO:function(e,t){e.exports="/img/icon.aa5e3ec7c4ab374b229f92d96f796ca6.svg"},ZKCX:function(e,t,a){var n={"./_lib/build_formatting_tokens_reg_exp/index.js":"5WgL","./ar/build_distance_in_words_locale/index.js":"GeLF","./ar/build_format_locale/index.js":"ST2C","./ar/index.js":"1yQK","./be/build_distance_in_words_locale/index.js":"KI/A","./be/build_format_locale/index.js":"cRUB","./be/index.js":"j/pv","./bg/build_distance_in_words_locale/index.js":"AQhF","./bg/build_format_locale/index.js":"K5Lv","./bg/index.js":"q/K+","./ca/build_distance_in_words_locale/index.js":"O/Lo","./ca/build_format_locale/index.js":"AaPh","./ca/index.js":"kD0B","./cs/build_distance_in_words_locale/index.js":"3Xfl","./cs/build_format_locale/index.js":"LXrJ","./cs/index.js":"3JvM","./da/build_distance_in_words_locale/index.js":"hcRL","./da/build_format_locale/index.js":"KLvQ","./da/index.js":"ULTP","./de/build_distance_in_words_locale/index.js":"wCnQ","./de/build_format_locale/index.js":"mx47","./de/index.js":"acCb","./el/build_distance_in_words_locale/index.js":"O683","./el/build_format_locale/index.js":"xvNu","./el/index.js":"uGGn","./en/build_distance_in_words_locale/index.js":"tI3Q","./en/build_format_locale/index.js":"k/jG","./en/index.js":"3DnJ","./eo/build_distance_in_words_locale/index.js":"BDYA","./eo/build_format_locale/index.js":"hwqp","./eo/index.js":"0Smw","./es/build_distance_in_words_locale/index.js":"LaF2","./es/build_format_locale/index.js":"N5PC","./es/index.js":"5H4U","./fi/build_distance_in_words_locale/index.js":"CIfh","./fi/build_format_locale/index.js":"mlvl","./fi/index.js":"5PpD","./fil/build_distance_in_words_locale/index.js":"7/gU","./fil/build_format_locale/index.js":"ZUJP","./fil/index.js":"H3+A","./fr/build_distance_in_words_locale/index.js":"m3OY","./fr/build_format_locale/index.js":"xQ0/","./fr/index.js":"DqMG","./hr/build_distance_in_words_locale/index.js":"guXL","./hr/build_format_locale/index.js":"e631","./hr/index.js":"ZSBf","./hu/build_distance_in_words_locale/index.js":"f9p0","./hu/build_format_locale/index.js":"k3KY","./hu/index.js":"Q64p","./id/build_distance_in_words_locale/index.js":"GAiw","./id/build_format_locale/index.js":"UYaz","./id/index.js":"uImW","./is/build_distance_in_words_locale/index.js":"CuMw","./is/build_format_locale/index.js":"Z74A","./is/index.js":"Z1Qv","./it/build_distance_in_words_locale/index.js":"qMw3","./it/build_format_locale/index.js":"Aizw","./it/index.js":"yA73","./ja/build_distance_in_words_locale/index.js":"J7hD","./ja/build_format_locale/index.js":"TFi6","./ja/index.js":"5law","./ko/build_distance_in_words_locale/index.js":"vgtj","./ko/build_format_locale/index.js":"IGpS","./ko/index.js":"spHP","./mk/build_distance_in_words_locale/index.js":"5ajx","./mk/build_format_locale/index.js":"b/+p","./mk/index.js":"N7tQ","./nb/build_distance_in_words_locale/index.js":"yH+i","./nb/build_format_locale/index.js":"5Zji","./nb/index.js":"17+V","./nl/build_distance_in_words_locale/index.js":"5Kip","./nl/build_format_locale/index.js":"ZWjp","./nl/index.js":"pd9o","./pl/build_distance_in_words_locale/index.js":"tGBV","./pl/build_format_locale/index.js":"NJct","./pl/index.js":"6P2M","./pt/build_distance_in_words_locale/index.js":"ajCN","./pt/build_format_locale/index.js":"KevG","./pt/index.js":"7TKb","./ro/build_distance_in_words_locale/index.js":"PIDo","./ro/build_format_locale/index.js":"qTOb","./ro/index.js":"xfrR","./ru/build_distance_in_words_locale/index.js":"VnGx","./ru/build_format_locale/index.js":"+EGV","./ru/index.js":"yilQ","./sk/build_distance_in_words_locale/index.js":"Ac7o","./sk/build_format_locale/index.js":"wn1Z","./sk/index.js":"HxmB","./sl/build_distance_in_words_locale/index.js":"UyP2","./sl/build_format_locale/index.js":"neWQ","./sl/index.js":"xuwk","./sr/build_distance_in_words_locale/index.js":"R4TP","./sr/build_format_locale/index.js":"B9sc","./sr/index.js":"/Yuz","./sv/build_distance_in_words_locale/index.js":"fPTk","./sv/build_format_locale/index.js":"5WLe","./sv/index.js":"yMTq","./th/build_distance_in_words_locale/index.js":"/+Lo","./th/build_format_locale/index.js":"7KJG","./th/index.js":"PU3I","./tr/build_distance_in_words_locale/index.js":"xH5m","./tr/build_format_locale/index.js":"6Adc","./tr/index.js":"+vG6","./zh_cn/build_distance_in_words_locale/index.js":"51Qv","./zh_cn/build_format_locale/index.js":"mSWR","./zh_cn/index.js":"pwWN","./zh_tw/build_distance_in_words_locale/index.js":"IWZz","./zh_tw/build_format_locale/index.js":"dVRu","./zh_tw/index.js":"Wiv3"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="ZKCX"},ZsYx:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var n=Boolean(window.location.hostname.endsWith("cozy.localhost")||window.location.hostname.endsWith("cozy.tools"));function r(t){if("serviceWorker"in navigator){if(new URL(e.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="/service-worker.js";n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(e,t)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,a("8oxB"))},mFUP:function(e,t){e.exports="/img/background.ada7027117d5bc0de6d2c11f52c6e096.png"},pZg0:function(e,t){e.exports={name:"Coach CO2",slug:"coachco2",icon:"icon.svg",categories:[],version:"0.10.0",licence:"AGPL-3.0",editor:"Cozy Cloud",source:"https://github.com/cozy/coachCO2.git@build",developer:{name:"Cozy Cloud",url:"https://cozy.io"},default_locale:"fr",langs:["fr","en"],routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},settings:{description:"Required by the cozy-bar to display Claudy and know which applications are coming soon",type:"io.cozy.settings",verbs:["GET"]},accounts:{description:"Required to get konnector account",type:"io.cozy.accounts",verbs:["GET","PUT"]},files:{description:"Required to access the files for saved your export of trips",type:"io.cozy.files",verbs:["ALL"]},"geojson-timeseries":{description:"Required to display geojson timeseries",type:"io.cozy.timeseries.geojson"},"coachco2.settings":{description:"Used to manage your Coach CO2 settings",type:"io.cozy.coachco2.settings",verbs:["GET","POST","PUT"]},jobs:{description:"Used in services to start other services",type:"io.cozy.jobs",verbs:["POST"]},dacc:{type:"cc.cozycloud.dacc_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions"},"dacc-dev":{type:"cc.cozycloud.dacc.dev_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions, for developement purposes"}},services:{timeseriesWithoutAggregateMigration:{type:"node",file:"services/timeseriesWithoutAggregateMigration/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED,UPDATED",debounce:"1m"},dacc:{type:"node",file:"services/dacc/coachco2.js",trigger:"@every 720h"},recurringPurposes:{type:"node",file:"services/recurringPurposes/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED",debounce:"2m"}}}},viCj:function(e,t,a){e.exports={"CertificateGeneration-root":"CertificateGeneration-root--wWT2w"}},zer9:function(e,t,a){e.exports={"cozy-leaflet-markers":"cozy-leaflet-markers--3tOnD","cozy-leaflet-markers-end":"cozy-leaflet-markers-end--G0e6q","cozy-leaflet-markers-start":"cozy-leaflet-markers-start--1JdEL"}}});