!function(e){function t(t){for(var n,i,c=t[0],l=t[1],s=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var l=a[c];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={1:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([3,0]),a()}({0:function(e,t){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},2:function(e,t){},"2maa":function(e){e.exports=JSON.parse('{"nav":{"trips":"Trips","analysis":"Analysis","modes":"Modes of transport","purposes":"Purposes of travel","settings":"Settings"},"folder":{"administrative":"Administrative","coachco2":"Coach CO2"},"devices":{"select":"Select a device","label":"Data source"},"settings":{"services":"Services","debug":"Demo & debug mode"},"trips":{"default":"default","trips":"Trips","from":"Trips from","modes":{"AIR_OR_HSR":"Plane","BICYCLING_ELECTRIC":"Electric bike","BICYCLING":"Bike","BUS_ELECTRIC":"Electric bus","BUS":"Bus","CAR_ELECTRIC":"Electric car","CAR":"Car","IN_VEHICLE":"Vehicle","CARPOOL_ELECTRIC":"Electric carpooling","CARPOOL":"Carpooling","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Electric scooter","MOPED":"Moped","SUBWAY":"Subway","TRAIN":"Train","UNKNOWN":"Unknown","WALKING":"Walking","ON_FOOT":"Walking","RUNNING":"Running","categories":{"BICYCLING_CATEGORY":"Bike, scooter","CAR_CATEGORY":"Car, motorcycle, moped","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Going to or from work","WORK":"Profressional travel","SHOPPING":"Going shopping","PERSONAL_MED":"Personal travel","PICK_DROP":"Pick & drop someone","SPORT":"Going to or from sport","EXERCISE":"Physical activity / sport","ENTERTAINMENT":"Going out, leisure","TRAVEL":"Travel","OTHER_PURPOSE":"Unknown"},"duration":"Duration","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Save the starting point?","saveEndPlace":"Save the arrival point?","tooltip":"To automate this categorisation in the future, save this address in a contact record","submit":"Save","delete":"Delete","cancel":"Cancel","dismiss":"No, thanks","contact":"Save as contact","label":"Label","noLabel":"No label","custom":"Customised","customLabel":"Custom label","home":"Home","work":"Work","error":"Specify which contact to save the address under","addSuccess":"The addresses have been registered","removeSuccess":"The addresses have been deleted","atHome":"At home","lat":"lat.","long":"long."},"loadMore":"Load more trips","tripEdit":{"selectMode":"Modify the transportation mode","modeTooltip":"The CO2 values in grams per kilometre (g/km) displayed may not always be representative of reality and may vary. It is important to take the CO2 values displayed with caution and to consider them as a general indication rather than an accurate representation of reality. Driving conditions, driver behaviour and other factors can lead to significant variations from the laboratory values, making it difficult to make a true comparison between different vehicles in terms of CO2 emissions.","selectPurpose":"Modify the travel purpose"},"purpose":"Reason for travel","recurring":{"title":"Recurrence","recurringTrip":"Recurring trip","occasionalTrip":"Occasional trip","confirmDialog":{"title":"Attribute this reason to similar trips?","content":"By answering yes, this trip will be defined as recurring and will be used as a reference to automate the qualification of your similar trips.","confirm":"Yes","decline":"No"},"tooltip":"If this trip is recurring, similar trips will automatically be referenced with the same reason."},"analysis":{"mode":"CO2 emissions","purpose":"CO2 emissions","travels":"%{smart_count} travel |||| %{smart_count} travel","emittedCO2":"emitted CO2"},"export":{"label":"Export","filename":"%{today} - Trips %{accountLabel}.csv","button":"Export trips in CSV","modal":{"button":{"close":"Close","viewInDrive":"View in Drive"},"title":"Exporting","content":{"done":"The \\"%{filename}\\" file was created in the \\"Drive%{pathAppDir}\\" folder of your Cozy.","progress":"The export of your trips is in progress, please wait..."}}},"emptyContent":{"welcome":{"title":"Welcome to your CO2¬†Coach","text":"This application is currently being tested. It will allow you to record your journeys and view your CO2 emissions.","action":"Let\'s go!"},"installKonnector":{"title":"Welcome to your CO2¬†Coach","text":"Before using the application, you must first install and configure the OpenPath connector in your Cozy."},"installApp":{"title":"Detect your movements\\nwith the Cozy Cloud app","text":"Install the Cozy Cloud application on your mobile phone to record all your journeys, understand their impact in terms of CO2 emissions, keep track of your journeys by bike, etc.","action":"Install the app"},"GPSStandby":{"title":"Location detected","text":"Your first travel will be posted here about two hours after you make it."},"changeAccount":{"title":"No travel","text":"No travel has yet been detected from the selected data source.","action":"Changing the data source"}},"manifest":{"short_description":"Keep track of your trips and analyze their impact on the environment.","long_description":"CoachCO2 is a self data application developed within the framework of the **territory of La Rochelle** and the [Agremob](https://agremob.com/) program.\\n\\n&nbsp;\\n\\nIts ambition is to **help you** :\\n- to **become aware of the issues** related to mobility,\\n- to **question your travel habits**,\\n- and **find more sustainable alternatives** (yes it is possible!).\\n\\nAll this in complete confidentiality, as always in your Cozy: **only you have the right to access your data**, and you have the control to share it with whomever you want, whenever and if YOU want.\\n\\nIts objective is also to **enable the emergence of new ecomobility projects or offers** thanks to the expertise of the program\'s partner structures.\\n\\n&nbsp;\\n\\nToday this application forms a duo with **the mobile application TraceMob** whose connector, also present in the store of your Personal Cloud, collects and saves your mobility tracks at home.\\n\\nTomorrow **other sensors will complete your data**. The application, itself under development, is today focused on mobility, tomorrow other sources of CO2 may extend its scope.\\n\\n&nbsp;\\n\\n[Agremob](https://agremob.com/) makes this application **a common good** that can be used beyond the borders of the La Rochelle agglomeration. If your Cozy\'s host does not offer it in its own store, contact them!","permissions":{"apps":{"description":"Required by the cozy-bar to display the icons of the apps"},"settings":{"description":"Required by the cozy-bar to display Claudy and know which applications are coming soon"},"accounts":{"description":"Required to get konnector account"},"files":{"description":"Required to access the files for saved your export of trips"},"geojson-timeseries":{"description":"Required to display geojson timeseries"},"coachco2.settings":{"description":"Used to manage your Coach CO2 settings"}}},"dacc":{"settings":{"anonymous_participation":"Participate anonymously in the calculation of average CO2 emissions","showAlerter":"Show DACC alerter"},"tripsCard":{"label":"Compare your emissions to the average of other users of the application?","discard":"No, thank you","accept":"Compare"},"compareDialog":{"title":"Compare anonymously","primaryText":"In order to average the emissions of users, and because your Cozy has made a promise to you to never disclose your data without your explicit request, it will ask you for the right to send this data.","secondaryText":"This data will be aggregated and anonymous and will not contain any identifiers or locations.","action":"I understood"},"permissionsDialog":{"title":"Request for permissions","primaryText":"The CO2 Coach application requires the following permissions from your Cozy:","secondaryText":"Once authorized, the permissions can be modified in the settings","why_asking":"Why ask me for these permissions?","export_outside":"Exporting out of Cozy","anonymized_emissions":"My anonymized CO2 emissions","anonymized_bikegoal_progression":"My anonymized progression","accept":"Always allow","refuse":"Refuse"},"reasonsDialog":{"title":"Reasons for permissions","content":"Because your Cozy has made a promise to you to never disclose your private data, it will always ask you for the right to let an application send it out."}},"vericalBarChart":{"title":"CO2 emissions","legend":{"yours":"Your emissions","average":"Average users of the app"}},"bikeGoal":{"title":"Bike to work","yearly_goal_progression":"%{days}/%{daysToReach} days \\nper year","goal_progression":"%{days}/%{daysToReach} days","my_progression":"My¬†yearly progression","average_progression":"Avg. progress of my organisation","achievement_certificate":"Certificate of achievement","goal":"Objective","goals":"Objectives","days":"days","about":{"title":"About the goal","intro":{"title":"Introduction","content":"In order to encourage the use of alternative and sustainable modes of transport, the sustainable mobility package came into force on 10 May 2020.\\n\\nEmployees and agents who choose an alternative and sustainable mode of transport for their home-to-work journey will be able to receive a sum from their employer if the latter implements this scheme."},"how_trips_detected":{"title":"How are my trips detected?","content":"Your home-to-work journeys by bike will be automatically detected on the basis of your timetable and your speed.\\n\\nIf a journey is not automatically classified as a ‚ÄúJourney to and from work‚Äú, open the details of the journey and change the reason for the journey.\\n\\nIf the mode of transport for a journey is not automatically detected as ‚Äúbike‚Äú, open the journey details and change the mode of transport to ‚Äúbike‚Äú."},"once_goal_reach":{"title":"What to do once the goal is reached?","optional":"Last step","content":"Once you\'ve reached your target, you can congratulate yourself! You\'ll then be able to generate a certificate of honour that you can send to your employer."}},"deactivate":{"deactivate":"Deactivate","title":"Do you really want to stop participating in the goal?","content":"You can always choose to participate again from the application settings.","stop_participate":"No longer participating","cancel":"Cancel"},"alert":{"success":{"text":"Congratulations, you have achieved the ‚ÄúBike to Work‚Äù goal üéâ","action":"Benefit from my %{bountyAmount}‚Ç¨ package"},"title":"Be part of the change: cycle to work!","text":"Track your trips and generate a certificate for your employer if they offer the Sustainable Mobility Package (SMP) bonus.","actions":{"participate":"Participate","discard":"No,¬†thank you"}},"edit":{"modify":"Modify","title":"Modify the goal","firstname":"Firstname","lastname":"Lastname","daysToReach":"Days to reach","compare_progress":"Compare my progress with that of my organisation","cancel":"Cancel","submit":"Ok","required":"This field is required"},"settings":{"participation":"Participate to the goal ‚ÄúBike to work‚Äù","showAlerter":"Bike goal: Show bike goals alerter","hideOnboarding":"Bike goal: Hide bike goal onboarding","sendToDACC":"Bike goal: activate DACC","showAlerterSuccess":"Bike goal: Show the bike goal success alert"},"onboarding":{"title":"Objective: To cycle to work","actions":{"finish":"Finish","previous":"Previous","next":"Next"},"steps":{"naming":{"title":"Lastname and firstname","nameLegend":"Fill in the following details to generate a certificate of achievement in your name:"},"daysToReach":{"title":"Set yourself a goal","legend":"Set a number of days for your home-to-work journeys by bike or scooter and track your progress with your CO2 Coach.\\n\\nOnce you\'ve reached your target, you\'ll receive an alert and a certificate of achievement to send to your employer.","error":"Set a more realistic goal. Enter a value greater than 0."},"comparison":{"comparisonLegend":"You can display the average progress of the members of your organisation %{source} who are participating in the objective. To do this, you will be asked to participate in the creation of this average.\\n\\nYour progress data will be aggregated and sent anonymously, and will not contain any identifiers or locations.","compare":"Compare my progression","doNotCompare":"Do not compare my progression"}}},"certificateGeneration":{"title":"Congratulations, you have achieved the ‚ÄúBike¬†to¬†Work‚Äú¬†goal","content":"A certificate has been generated as proof of your success for the year %{year}. Forward it now by email to your employer to receive %{bountyAmount}‚Ç¨ !","actions":{"show":"Certificate - Bike to work.pdf","generate":"Generate a certificate","regenerate":"Generate a new certificate","understood":"Understood"}}},"geolocationTracking":{"locationRefusedDialog":{"description":"To record your movements, you need to give Cozy access to your \\"location\\" and \\"physical activity\\". You will be redirected to the app settings.\\n\\nYour Cozy needs to always be authorised to access your phone\'s location in order to memorise and help you analyse your movements, even when the app is not in use.\\n\\nIt will NEVER be passed on to anyone without your request."},"installOpenPathKonnectorDialog":{"description":"This feature requires the OpenPath connector to be installed","cancel":"Cancel","install":"Install"},"settings":{"enable":"Memorise my journeys","sendLogs":"Send Geoloc logs","forceUploadData":"Force Upload Data","copyIdentifier":"Copy OpenPATH Identifier","createdOn":"created on"}},"Modes":{"DefaultDialog":{"primary":"Set as default transport for this category?","secondary":"The transport mode will automatically be selected as default for all future trips detected for this transport type.","actions":{"save":"Save","cancel":"Cancel"}}},"PDF":{"name":"Certificate - Cycling to work (%{year}).pdf","title":"Certificate on honor\\n of the success of the objective\\n of the Sustainable Mobility Package","date":"%{currentDateFormatted} at %{currentTimeFormatted}","recipient":"Employer : %{sourceIdentity}","paragraph01":"I, %{username}, certify on my honor that I have achieved the %{daysToReach} days sustainable mobility package objective by traveling from home to work by bike from January 1 to %{year}.","paragraph02":"In addition to this certificate, I provide my employer with any useful proof of actual use of the bicycle, such as invoice or payment statements, insurance or maintenance of my bicycle.","paragraph03":"Made to serve and assert what is right.","signature":"Signature : %{username}"}}')},3:function(e,t,a){a("MQ8b"),a("jI5P"),e.exports=a("nXPL")},4:function(e,t){},5:function(e,t){},"5z4W":function(e,t){e.exports={name:"Coach CO2",slug:"coachco2",icon:"icon.svg",categories:[],version:"0.11.0",licence:"AGPL-3.0",editor:"Cozy Cloud",source:"https://github.com/cozy/coachCO2.git@build",developer:{name:"Cozy Cloud",url:"https://cozy.io"},default_locale:"fr",langs:["fr","en"],routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},settings:{description:"Required by the cozy-bar to display Claudy and know which applications are coming soon",type:"io.cozy.settings",verbs:["GET"]},accounts:{description:"Required to get konnector account",type:"io.cozy.accounts",verbs:["GET","POST","PUT"]},konnectors:{description:"Required to create your mobility konnector account and to display additional information in the viewer for files automatically retrieved by services",type:"io.cozy.konnectors",verbs:["GET"]},triggers:{description:"Required to create your mobility konnector account and to display additional information in the viewer and for the notification service",type:"io.cozy.triggers",verbs:["GET","POST"]},files:{description:"Required to access the files for saved your export of trips",type:"io.cozy.files",verbs:["ALL"]},sharings:{description:"Required to have access to the sharings in realtime",type:"io.cozy.sharings",verbs:["ALL"]},"geojson-timeseries":{description:"Required to display geojson timeseries",type:"io.cozy.timeseries.geojson"},"coachco2.settings":{description:"Used to manage your Coach CO2 settings",type:"io.cozy.coachco2.settings",verbs:["GET","POST","PUT"]},jobs:{description:"Used in services to start other services",type:"io.cozy.jobs",verbs:["POST"]},dacc:{type:"cc.cozycloud.dacc_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions"},"dacc-dev":{type:"cc.cozycloud.dacc.dev_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions, for developement purposes"},contacts:{type:"io.cozy.contacts.*",verbs:["GET","POST","PUT","DELETE"],description:"Used to link contacts to geojson timeseries and sharing documents"}},services:{timeseriesWithoutAggregateMigration:{type:"node",file:"services/timeseriesWithoutAggregateMigration/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED,UPDATED",debounce:"1m"},dacc:{type:"node",file:"services/dacc/coachco2.js",trigger:"@every 720h"},recurringPurposes:{type:"node",file:"services/recurringPurposes/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED",debounce:"2m"}}}},6:function(e,t){},7:function(e,t){},"7SaY":function(e,t,a){},"7z1u":function(e,t,a){var n={"./_lib/build_formatting_tokens_reg_exp/index.js":"5XOE","./ar/build_distance_in_words_locale/index.js":"qs6D","./ar/build_format_locale/index.js":"80pQ","./ar/index.js":"n4NV","./be/build_distance_in_words_locale/index.js":"b7Vp","./be/build_format_locale/index.js":"STnx","./be/index.js":"ka/z","./bg/build_distance_in_words_locale/index.js":"fyh8","./bg/build_format_locale/index.js":"STBG","./bg/index.js":"BBHR","./ca/build_distance_in_words_locale/index.js":"4d8B","./ca/build_format_locale/index.js":"a88X","./ca/index.js":"Nz94","./cs/build_distance_in_words_locale/index.js":"70Ht","./cs/build_format_locale/index.js":"R/Ak","./cs/index.js":"oAfY","./da/build_distance_in_words_locale/index.js":"HjC7","./da/build_format_locale/index.js":"G0Zw","./da/index.js":"CJpN","./de/build_distance_in_words_locale/index.js":"DD2N","./de/build_format_locale/index.js":"pnJo","./de/index.js":"eBmD","./el/build_distance_in_words_locale/index.js":"tFqT","./el/build_format_locale/index.js":"twcE","./el/index.js":"m1rb","./en/build_distance_in_words_locale/index.js":"bjbr","./en/build_format_locale/index.js":"EW2Y","./en/index.js":"VkMk","./eo/build_distance_in_words_locale/index.js":"ujJO","./eo/build_format_locale/index.js":"S5Gq","./eo/index.js":"nn7U","./es/build_distance_in_words_locale/index.js":"h+mB","./es/build_format_locale/index.js":"Q4jc","./es/index.js":"4yJR","./fi/build_distance_in_words_locale/index.js":"Fpie","./fi/build_format_locale/index.js":"LTnX","./fi/index.js":"G/Qn","./fil/build_distance_in_words_locale/index.js":"VRy5","./fil/build_format_locale/index.js":"syEd","./fil/index.js":"k8V/","./fr/build_distance_in_words_locale/index.js":"nJeE","./fr/build_format_locale/index.js":"DeP4","./fr/index.js":"+owv","./hr/build_distance_in_words_locale/index.js":"Fs/O","./hr/build_format_locale/index.js":"ZlNX","./hr/index.js":"Kj+b","./hu/build_distance_in_words_locale/index.js":"8okG","./hu/build_format_locale/index.js":"lk8B","./hu/index.js":"+KHA","./id/build_distance_in_words_locale/index.js":"50BR","./id/build_format_locale/index.js":"18Vb","./id/index.js":"anKN","./is/build_distance_in_words_locale/index.js":"qUeK","./is/build_format_locale/index.js":"IcCt","./is/index.js":"4QE/","./it/build_distance_in_words_locale/index.js":"PCcA","./it/build_format_locale/index.js":"V71f","./it/index.js":"qK4z","./ja/build_distance_in_words_locale/index.js":"5vSx","./ja/build_format_locale/index.js":"CAsz","./ja/index.js":"XcQu","./ko/build_distance_in_words_locale/index.js":"jKsw","./ko/build_format_locale/index.js":"UEmh","./ko/index.js":"zOJj","./mk/build_distance_in_words_locale/index.js":"fcCd","./mk/build_format_locale/index.js":"re9F","./mk/index.js":"FDmM","./nb/build_distance_in_words_locale/index.js":"aEqN","./nb/build_format_locale/index.js":"pNMw","./nb/index.js":"mR4k","./nl/build_distance_in_words_locale/index.js":"7u2d","./nl/build_format_locale/index.js":"3riD","./nl/index.js":"06P9","./pl/build_distance_in_words_locale/index.js":"rygU","./pl/build_format_locale/index.js":"july","./pl/index.js":"vOlg","./pt/build_distance_in_words_locale/index.js":"sLR+","./pt/build_format_locale/index.js":"ZP65","./pt/index.js":"vSZg","./ro/build_distance_in_words_locale/index.js":"eJyG","./ro/build_format_locale/index.js":"fLwW","./ro/index.js":"OuEP","./ru/build_distance_in_words_locale/index.js":"KjgK","./ru/build_format_locale/index.js":"Tqgg","./ru/index.js":"T3Gn","./sk/build_distance_in_words_locale/index.js":"38t1","./sk/build_format_locale/index.js":"myxh","./sk/index.js":"In70","./sl/build_distance_in_words_locale/index.js":"Mhi5","./sl/build_format_locale/index.js":"yfgk","./sl/index.js":"D9r0","./sr/build_distance_in_words_locale/index.js":"I8h+","./sr/build_format_locale/index.js":"0FXG","./sr/index.js":"lQaB","./sv/build_distance_in_words_locale/index.js":"z6xu","./sv/build_format_locale/index.js":"jmSq","./sv/index.js":"SMJc","./th/build_distance_in_words_locale/index.js":"qHE1","./th/build_format_locale/index.js":"+W4l","./th/index.js":"5DsP","./tr/build_distance_in_words_locale/index.js":"0z6Z","./tr/build_format_locale/index.js":"NK/q","./tr/index.js":"OevD","./zh_cn/build_distance_in_words_locale/index.js":"SBqD","./zh_cn/build_format_locale/index.js":"219J","./zh_cn/index.js":"QhI5","./zh_tw/build_distance_in_words_locale/index.js":"7Fp2","./zh_tw/build_format_locale/index.js":"l09L","./zh_tw/index.js":"TDp1"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="7z1u"},8:function(e,t){},"8Bbg":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var n=Boolean(window.location.hostname.endsWith("cozy.localhost")||window.location.hostname.endsWith("cozy.tools"));function r(t){if("serviceWorker"in navigator){if(new URL(e.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="/service-worker.js";n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(e,t)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,a("JtWf"))},"8IOV":function(e,t,a){e.exports={"cozy-leaflet-markers":"cozy-leaflet-markers--3tOnD","cozy-leaflet-markers-end":"cozy-leaflet-markers-end--G0e6q","cozy-leaflet-markers-start":"cozy-leaflet-markers-start--1JdEL"}},9:function(e,t){},DZbK:function(e,t,a){e.exports=a.p+"Courgette.ttf"},Ev3x:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"j",(function(){return c})),a.d(t,"h",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"i",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return m}));var n="io.cozy.apps",r="io.cozy.files",o="io.cozy.timeseries.geojson",i="io.cozy.accounts",c="io.cozy.coachco2.settings",l="io.cozy.jobs",s="io.cozy.contacts",u="io.cozy.konnectors",d="cc.cozycloud.dacc_v2",m="cc.cozycloud.dacc.dev_v2";t.k={timeseries:{doctype:o,attributes:{},relationships:{startPlaceContact:{type:"has-one",doctype:s},endPlaceContact:{type:"has-one",doctype:s}}},files:{doctype:r,attributes:{},relationships:{}},settings:{doctype:c,attributes:{},relationships:{}}}},Hsuv:function(e){e.exports=JSON.parse('{"nav":{"trips":"D√©placements","analysis":"Analyses","modes":"Modes de transport","purposes":"Motifs de d√©placement","settings":"Param√®tres"},"folder":{"administrative":"Administratif","coachco2":"Coach CO2"},"devices":{"select":"S√©lectionnez un appareil","label":"Source des donn√©es"},"settings":{"services":"Services","debug":"Mode d√©mo & d√©bug"},"trips":{"trips":"D√©placements","from":"D√©placements de","modes":{"default":"d√©faut","AIR_OR_HSR":"Avion","BICYCLING_ELECTRIC":"V√©lo √©lectrique","BICYCLING":"V√©lo","BUS_ELECTRIC":"Bus √©lectrique","BUS":"Bus","CAR_ELECTRIC":"Voiture √©lectrique","CAR":"Voiture","IN_VEHICLE":"V√©hicule","CARPOOL_ELECTRIC":"Covoiturage √©lectrique","CARPOOL":"Covoiturage","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Trottinette √©lectrique","MOPED":"Cyclomoteur","SUBWAY":"M√©tro","TRAIN":"Train","UNKNOWN":"Non reconnu","WALKING":"Marche","ON_FOOT":"Marche","RUNNING":"Course","categories":{"BICYCLING_CATEGORY":"V√©lo, trotinette","CAR_CATEGORY":"Voiture, moto, scooter","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Aller-retour au travail","WORK":"D√©placement professionel","SHOPPING":"Aller faire les courses","PERSONAL_MED":"D√©placement personnel","PICK_DROP":"D√©poser quelqu\'un","SPORT":"Aller-retour au sport","EXERCISE":"Activit√© physique / sportive","ENTERTAINMENT":"Sortie, loisirs","TRAVEL":"Voyage","OTHER_PURPOSE":"Ind√©fini"},"duration":"Dur√©e","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Enregistrer le point de d√©part ?","saveEndPlace":"Enregistrer le point d\'arriv√©e ?","tooltip":"Pour automatiser cette cat√©gorisation √† l\'avenir, enregistrer cette adresse dans une fiche contact","submit":"Enregistrer","delete":"Supprimer","cancel":"Annuler","dismiss":"Non, merci","contact":"Enregistrer dans une fiche contact","label":"Libell√©","noLabel":"Aucun libell√©","custom":"Personnalis√©","customLabel":"Libell√© personnalis√©","home":"Domicile","work":"Travail","error":"Pr√©ciser sous quel contact enregistrer l\'adresse","addSuccess":"Les adresses ont bien √©t√© enregistr√©es","removeSuccess":"Les adresses ont bien √©t√© supprim√©es","atHome":"Chez moi","lat":"lat.","long":"long."},"loadMore":"Charger plus de trajets","tripEdit":{"selectMode":"Modifier le mode de transport","modeTooltip":"Les valeurs de CO2 en grammes par kilom√®tre (g/km) affich√©es peuvent parfois ne pas √™tre repr√©sentatives de la r√©alit√© et peuvent varier. Il est important de prendre les valeurs de CO2 affich√©es avec pr√©caution et de les consid√©rer comme une indication g√©n√©rale plut√¥t qu\'une repr√©sentation pr√©cise de la r√©alit√©. Les conditions de conduite, le comportement du conducteur et d\'autres facteurs peuvent entra√Æner des variations significatives par rapport aux valeurs de laboratoire, ce qui rend difficile la comparaison r√©elle entre diff√©rents v√©hicules en termes d\'√©missions de CO2.","selectPurpose":"Modifier le motif du d√©placement"},"purpose":"Motif du d√©placement","recurring":{"title":"R√©currence","recurringTrip":"D√©placement habituel","occasionalTrip":"D√©placement occasionnel","confirmDialog":{"title":"Attribuer ce motif aux d√©placements similaires ?","content":"En r√©pondant oui, ce d√©placement sera d√©fini comme habituel et servira de r√©f√©rence pour automatiser la qualification de vos d√©placement similaires.","confirm":"Oui","decline":"Non"},"tooltip":"Si ce d√©placement est habituel, les d√©placements similaires seront automatiquement r√©f√©renc√©s avec le m√™me motif."},"analysis":{"mode":"√âmissions de CO2","purpose":"√âmissions de CO2","travels":"%{smart_count} d√©placement |||| %{smart_count} d√©placements","emittedCO2":"CO2 √©mis"},"export":{"label":"Export","filename":"%{today} - D√©placements %{accountLabel}.csv","button":"Exporter les d√©placements en CSV","modal":{"button":{"close":"Fermer","viewInDrive":"Voir dans Drive"},"title":"Exportation","content":{"done":"Le fichier \\"%{filename}\\" a √©t√© cr√©√© dans le dossier \\"Drive%{pathAppDir}\\" de votre Cozy.","progress":"L‚Äôexport de vos d√©placements est en cours, merci de patienter..."}}},"emptyContent":{"welcome":{"title":"Bienvenue sur votre Coach¬†CO2","text":"Cette application est en phase exp√©rimentale. Elle vous permettra d\'enregistrer vos d√©placements et de visualiser vos √©missions de CO2.","action":"C\'est parti !"},"installKonnector":{"title":"Bienvenue sur votre Coach¬†CO2","text":"Avant d\'utiliser l\'application, vous devez tout d\'abord installer et configurer le connecteur OpenPath dans votre Cozy."},"installApp":{"title":"D√©tecter vos d√©placements\\navec l\'app Cozy Cloud","text":"Installer l\'application Cozy Cloud sur votre mobile pour enregistrer tous vos d√©placements, en comprendre l\'impact en √©mission de CO2, comptabiliser vos trajets en v√©lo, etc.","action":"Installer l\'app"},"GPSStandby":{"title":"Localisation d√©tect√©e","text":"Votre premier trajet sera affich√©s ici environ deux heures apr√®s que vous l\'ayez effectu√©."},"changeAccount":{"title":"Aucun d√©placement","text":"Aucun d√©placement n‚Äôa encore √©t√© d√©tect√© depuis la source de donn√©es s√©lectionn√©e.","action":"Changer la source de donn√©es"}},"manifest":{"short_description":"Conservez l\'historique de vos d√©placements et analysez leurs impacts sur l\'environnement.","long_description":"CoachCO2 est une application de self data d√©velopp√©e dans le cadre du **territoire de la Rochelle** et du programme [Agremob](https://agremob.com/).\\n\\n&nbsp;\\n\\nElle a pour ambition de **vous aider** :\\n- √† **prendre conscience des enjeux** li√©s √† la mobilit√©,\\n- √† **questionner vos habitudes** de d√©placements,\\n- et **trouver des alternatives** plus durables (oui c‚Äôest possible !).\\n\\nCeci en toute confidentialit√©, comme toujours dans votre Cozy : **vous √™tes le seul √† avoir le droit d\'acc√©der √† vos donn√©es**, et vous avez le contr√¥le de les partager avec qui vous vous voulez, quand et si VOUS le souhaitez.\\n\\nSon objectif est aussi de **permettre l‚Äô√©mergence de nouveaux projets ou offres d‚Äô√©comobilit√©** gr√¢ce √† l‚Äôexpertise de structures partenaires du programme.\\n\\n&nbsp;\\n\\nAujourd\'hui cette application forme un duo avec **l\'application mobile TraceMob** dont le connecteur, pr√©sent aussi dans le store de votre Cloud Personnel, collecte et sauvegarde vos traces de mobilit√© chez vous.\\n\\nDemain **d\'autres capteurs compl√©teront vos donn√©es**. L\'application, elle-m√™me en cours de d√©veloppement, est aujourd\'hui tourn√©e vers la mobilit√©, demain d\'autres sources de CO2 pourront √©tendre son champ d\'action.\\n\\n&nbsp;\\n\\n[Agremob](https://agremob.com/) fait de cette application **un bien commun** utilisable au-del√† des fronti√®res de l\'agglom√©ration de la Rochelle. Si l\'h√©bergeur de votre Cozy ne la propose pas dans son propre store, contactez-le !","permissions":{"apps":{"description":"Utilis√© par la cozy-bar pour afficher les ic√¥nes des applications"},"settings":{"description":"Utilis√© par le cozy-bar pour afficher Claudy et savoir quelles applications sont √† venir"},"accounts":{"description":"Utilis√© pour obtenir un compte konnector"},"files":{"description":"Utilis√© pour acc√©der aux fichiers de sauvegarde de votre exportation de voyages"},"geojson-timeseries":{"description":"Utilis√© pour afficher les s√©ries temporelles geojson"},"coachco2.settings":{"description":"Utilis√© pour g√©rer les param√®tres de votre Coach CO2"}}},"dacc":{"settings":{"anonymous_participation":"Participer anonymement au calcul des √©missions moyennes de CO2","showAlerter":"Emission CO2 : afficher l\'alerter DACC sur la homepage"},"tripsCard":{"label":"Comparez vos √©missions √† la moyenne des autres utilisateurs de l‚Äôapplication ?","discard":"Non, merci","accept":"Comparer"},"compareDialog":{"title":"Comparez-vous anonymement","primaryText":"Afin de constituer la moyenne des √©missions des utilisateurs, et parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos donn√©es sans votre demande explicite, il va vous demander le droit d\'envoyer cette donn√©e.","secondaryText":"Ces donn√©es seront agr√©g√©es et anonymes, elles ne contiendront aucun identifiant ni lieux.","action":"J\'ai compris"},"permissionsDialog":{"title":"Demande de permissions","primaryText":"L‚Äôapplication Coach CO2 demande les permissions suivantes √† votre Cozy :","secondaryText":"Une fois autoris√©es, les permissions pourront √™tre modifi√©es dans les param√®tres","why_asking":"Pourquoi me demander ces permissions ?","export_outside":"Exporter hors du Cozy","anonymized_emissions":"Mes √©missions de CO2 anonymis√©es","anonymized_bikegoal_progression":"Ma progression de fa√ßon anonyme","accept":"Toujours autoriser","refuse":"Refuser"},"reasonsDialog":{"title":"Motifs de permissions","content":"Parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos donn√©es priv√©es, il vous demandera toujours le droit de laisser une application les envoyer √† l\'ext√©rieur."}},"vericalBarChart":{"title":"√âmissions de CO2","legend":{"yours":"Vos √©missions","average":"Moyennes des utilisateurs de l\'app"}},"bikeGoal":{"title":"Aller au travail √† v√©lo","yearly_goal_progression":"%{days}/%{daysToReach} jours \\npar an","goal_progression":"%{days}/%{daysToReach} jours","my_progression":"Ma¬†progression annuelle","average_progression":"Progression moy. de mon organisation","achievement_certificate":"Attestation de r√©ussite","goal":"Objectif","goals":"Objectifs","days":"jours","about":{"title":"√Ä propos de l‚Äôobjectif","intro":{"title":"Introduction","content":"Afin d‚Äôencourager le recours √† des modes de transports alternatifs et durables, la mise en ≈ìuvre du forfait mobilit√©s durables est entr√© en vigueur le 10 mai 2020.\\n\\nAinsi les collaborateurs et agent qui font le choix d\'un mode de transport alternatif et durable pour leur trajet domicile-travail pourront recevoir une somme de leur employeur si celui-ci met en place ce dispositif."},"how_trips_detected":{"title":"Comment sont d√©tect√©s mes trajets ?","content":"Vos trajets domicile-travail √† v√©lo seront automatiquement d√©tect√©s √† partir de vos horaires et de votre vitesse.\\n\\nSi un trajet n‚Äôest pas automatiquement qualifi√© en ‚ÄúAller-retour au travail‚Äù, ouvrez le d√©tail du trajet et modifiez le motif du d√©placement.\\n\\nSi le mode de transport d‚Äôun trajet n‚Äôest pas automatiquement d√©tect√© en ‚Äúv√©lo‚Äù, ouvrez le d√©tail du trajet et modifiez le mode de transport en ‚Äúv√©lo‚Äù."},"once_goal_reach":{"title":"Que faire une fois l‚Äôobjectif atteint¬†?","optional":"Derni√®re √©tape","content":"Une fois l\'objectif atteint, vous pourrez vous en f√©liciter ! Et il vous sera alors possible de g√©n√©rer une attestation sur l\'honneur que vous pourrez transmettre √† votre employeur."}},"deactivate":{"deactivate":"D√©sactiver","title":"Souhaitez-vous vraiment ne plus participer √† l‚Äôobjectif ?","content":"Vous pourrez toujours choisir d‚Äôy participer √† nouveau depuis les param√®tres de l‚Äôapplication.","stop_participate":"Ne plus participer","cancel":"Annuler"},"alert":{"success":{"text":"F√©licitations, vous avez atteint l‚Äôobjectif ‚ÄúAller travailler √† v√©lo‚Äù üéâ","action":"B√©n√©ficier de mon forfait de %{bountyAmount}‚Ç¨"},"title":"Soyez acteur du changement, allez travailler √† v√©lo¬†!","text":"Suivez vos trajets et g√©n√©rez une attestation √† destination de votre employeur s\'il propose la prime Forfait Mobilit√© Durable (FMD).","actions":{"participate":"Participer","discard":"non,¬†merci"}},"edit":{"modify":"Modifier","title":"Modifier l\'objectif","firstname":"Pr√©nom","lastname":"Nom","daysToReach":"Objectif √† atteindre","compare_progress":"Comparer ma progression avec celle de mon organisation","cancel":"Annuler","submit":"Ok","required":"Ce champ est obligatoire"},"settings":{"participation":"Participer √† l\'objectif ‚ÄúAller au travail √† v√©lo‚Äù","showAlerter":"Objectif v√©lo : afficher l\'infobulle de participation sur la homepage","hideOnboarding":"Objectif v√©lo : masquer l\'onboarding","sendToDACC":"Objectif v√©lo : activer le DACC","showAlerterSuccess":"Objectif v√©lo : forcer l\'affichage de l\'alerte de succ√®s sur la homepage"},"onboarding":{"title":"Objectif : Aller travailler √† v√©lo","actions":{"finish":"Terminer","previous":"Pr√©c√©dent","next":"Suivant"},"steps":{"naming":{"title":"Nom et pr√©nom","nameLegend":"Renseigner les informations suivantes afin de g√©n√©rer l‚Äôattestation de r√©ussite √† votre nom¬†:"},"daysToReach":{"title":"Fixez-vous un objectif","legend":"D√©finissez un nombre de jours √† v√©lo ou trottinette pour vos trajets domicile-travail et suivez votre avancement avec votre Coach CO2.\\n\\nUne fois votre objectif atteint, vous recevrez une alerte ainsi qu‚Äôune attestation de r√©ussite √† transmettre √† votre employeur.","error":"D√©finissez un objectif plus r√©aliste. Entrer une valeur sup√©rieure √† 0."},"comparison":{"comparisonLegend":"Il vous est possible d‚Äôafficher la progression moyenne des membres de votre organisation %{source} qui participent √† l‚Äôobjectif. Pour cela, il vous sera demand√© de participer √©galement √† la constitution de cette moyenne.\\n\\nVos donn√©es de progression seront agr√©g√©es et envoy√©es anonymement, elles ne contiendront aucun identifiant ni lieux.","compare":"Comparer ma progression","doNotCompare":"Ne pas comparer ma progression"}}},"certificateGeneration":{"title":"F√©licitations, vous¬†avez¬†atteint¬†l‚Äôobjectif ‚ÄúAller¬†travailler¬†√†¬†v√©lo‚Äù","content":"Une attestation a √©t√© g√©n√©r√©e pour attester de votre succ√®s pour l‚Äôann√©e %{year}. Transf√©rez-la d√®s maintenant par email √† votre employeur pour recevoir %{bountyAmount}‚Ç¨¬†!","actions":{"show":"Certificat - Aller travailler √† v√©lo.pdf","generate":"G√©n√©rer une attestation","regenerate":"G√©n√©rer une nouvelle attestation","understood":"J\'ai¬†compris"}}},"geolocationTracking":{"locationRefusedDialog":{"description":"Pour enregistrer vos d√©placements, vous devez donner acc√®s √† Cozy √† votre ¬´ position ¬ª et √† votre ¬´ activit√© physique ¬ª. Vous allez √™tre redirig√© vers les param√®tres de l\'app.\\n\\nVotre Cozy a besoin d\'√™tre toujours autoris√© √† acc√©der √† la position de votre t√©l√©phone pour m√©moriser, et vous aider √† analyser vos d√©placements, m√™me lorsque l\'app n\'est pas utilis√©e ou affich√©e.\\n\\nElle ne sera JAMAIS transmise √† qui que ce soit sans votre demande."},"installOpenPathKonnectorDialog":{"description":"Cette fonctionnalit√© demande l\'installation du connecteur OpenPath","cancel":"Annuler","install":"Installer"},"settings":{"enable":"M√©moriser mes d√©placements","sendLogs":"Envoyer les logs de Geoloc","forceUploadData":"Forcer l\'upload des donn√©es","copyIdentifier":"Copier l\'identifiant OpenPATH","createdOn":"cr√©√© le"}},"Modes":{"DefaultDialog":{"primary":"D√©finir comme transport par d√©faut pour cette cat√©gorie ?","secondary":"Le mode de transport sera automatiquement s√©lectionn√© comme par d√©faut pour tous les futurs trajets d√©tect√©s pour ce type de transport.","actions":{"save":"Enregistrer","cancel":"Annuler"}}},"PDF":{"name":"Attestation - Aller travailler √† v√©lo (%{year}).pdf","title":"Attestation sur l\'honneur\\n de le r√©ussite de l\'objectif\\n du forfait mobilit√©s durables","date":"Le %{currentDateFormatted} √† %{currentTimeFormatted}","recipient":"Employeur : %{sourceIdentity}","paragraph01":"Je soussign√©(e) %{username} certifie sur l‚Äôhonneur avoir atteint l\'objectif forfait mobilit√©s durables de %{daysToReach} jours en effectuant mes d√©placements du domicile vers mon travail en v√©lo du 1er janvier au 31 d√©cembre %{year}.","paragraph02":"En plus de cette attestation, je tiens √† disposition de mon employeur tout justificatif utile d\'utilisation effective du v√©lo comme les relev√©s de facture ou de paiement, d‚Äôassurances ou d‚Äôentretien de mon v√©lo.","paragraph03":"Fait pour servir et valoir ce que de droit.","signature":"Signature : %{username}"}}')},IvPY:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"j",(function(){return o})),a.d(t,"k",(function(){return i})),a.d(t,"m",(function(){return c})),a.d(t,"n",(function(){return l})),a.d(t,"v",(function(){return s})),a.d(t,"w",(function(){return u})),a.d(t,"q",(function(){return d})),a.d(t,"r",(function(){return m})),a.d(t,"V",(function(){return p})),a.d(t,"X",(function(){return f})),a.d(t,"jb",(function(){return b})),a.d(t,"T",(function(){return v})),a.d(t,"sb",(function(){return g})),a.d(t,"ub",(function(){return y})),a.d(t,"xb",(function(){return h})),a.d(t,"zb",(function(){return E})),a.d(t,"G",(function(){return O})),a.d(t,"Y",(function(){return j})),a.d(t,"hb",(function(){return C})),a.d(t,"h",(function(){return x})),a.d(t,"t",(function(){return w})),a.d(t,"fb",(function(){return k})),a.d(t,"Bb",(function(){return _})),a.d(t,"y",(function(){return D})),a.d(t,"kb",(function(){return P})),a.d(t,"vb",(function(){return T})),a.d(t,"ab",(function(){return S})),a.d(t,"D",(function(){return M})),a.d(t,"qb",(function(){return N})),a.d(t,"C",(function(){return A})),a.d(t,"bb",(function(){return L})),a.d(t,"Z",(function(){return R})),a.d(t,"F",(function(){return F})),a.d(t,"Ab",(function(){return I})),a.d(t,"eb",(function(){return B})),a.d(t,"db",(function(){return G})),a.d(t,"cb",(function(){return z})),a.d(t,"c",(function(){return q})),a.d(t,"lb",(function(){return Z})),a.d(t,"I",(function(){return U})),a.d(t,"e",(function(){return Q})),a.d(t,"d",(function(){return H})),a.d(t,"b",(function(){return V})),a.d(t,"l",(function(){return Y})),a.d(t,"U",(function(){return W})),a.d(t,"W",(function(){return K})),a.d(t,"s",(function(){return J})),a.d(t,"u",(function(){return X})),a.d(t,"p",(function(){return $})),a.d(t,"o",(function(){return ee})),a.d(t,"g",(function(){return te})),a.d(t,"i",(function(){return ae})),a.d(t,"ib",(function(){return ne})),a.d(t,"S",(function(){return re})),a.d(t,"yb",(function(){return oe})),a.d(t,"wb",(function(){return ie})),a.d(t,"B",(function(){return ce})),a.d(t,"Q",(function(){return le})),a.d(t,"P",(function(){return se})),a.d(t,"O",(function(){return ue})),a.d(t,"R",(function(){return de})),a.d(t,"pb",(function(){return me})),a.d(t,"J",(function(){return pe})),a.d(t,"E",(function(){return fe})),a.d(t,"M",(function(){return be})),a.d(t,"L",(function(){return ve})),a.d(t,"K",(function(){return ge})),a.d(t,"N",(function(){return ye})),a.d(t,"ob",(function(){return he})),a.d(t,"nb",(function(){return Ee})),a.d(t,"mb",(function(){return Oe})),a.d(t,"x",(function(){return je})),a.d(t,"A",(function(){return Ce})),a.d(t,"z",(function(){return xe})),a.d(t,"tb",(function(){return we})),a.d(t,"H",(function(){return ke})),a.d(t,"gb",(function(){return _e})),a.d(t,"rb",(function(){return De}));var n="coachco2",r="AIR_OR_HSR",o="BICYCLING_ELECTRIC",i="BICYCLING",c="BUS_ELECTRIC",l="BUS",s="CAR_ELECTRIC",u="CAR",d="CARPOOL_ELECTRIC",m="CARPOOL",p="MOTO_INF_250",f="MOTO_SUP_250",b="SCOOTER_ELECTRIC",v="MOPED",g="SUBWAY",y="TRAIN",h="UNKNOWN",E="WALKING",O="IN_VEHICLE",j="ON_FOOT",C="RUNNING",x={name:"BICYCLING_CATEGORY",modes:[i,o,b]},w={name:"CAR_CATEGORY",modes:[u,s,m,d,p,f,v]},k={name:"PUBLIC_TRANSPORT_CATEGORY",modes:[l,c,y,g]},_="WORK",D="COMMUTE",P="SHOPPING",T="TRAVEL",S="PERSONAL_MED",M="EXERCISE",N="SPORT",A="ENTERTAINMENT",L="PICK_DROP",R="OTHER_PURPOSE",F="home",I="work",B=.258,G=.187,z=.152,q=[B,G,z],Z=1e3,U=3500,Q=[.00173,.00529,.0248],H=[.0025,.0022,.0041,.00472,.00298],V=[.146,.137,.129],Y=.0217,W=.0604,K=.165,J=.192,X=.0198,$=.0099,ee=.096,te=0,ae=0,ne=0,re=.064,oe=0,ie=0,ce=74.25,le=2,se=3.5,ue=5,de=7,me=3,pe=5,fe=6.5,be=5.8,ve=8,ge=10,ye=15.8,he=15,Ee=22.4,Oe=25.6,je={tripId:"Trip_Id",tripStartDisplayName:"Trip_Start_Display_Name",tripArrivalDisplayName:"Trip_Arrival_Display_Name",tripPurpose:"Trip_Purpose",tripStartDate:"Trip_Start_Date",tripEndDate:"Trip_End_Date",sectionStartDate:"Section_Start_Date",sectionEndDate:"Section_End_Date",sectionDuration:"Section_Duration",sectionDistance:"Section_Distance",sectionMode:"Section_Mode",sectionCoordinates:"Section_Coordinates",sectionDistances:"Section_Distances",sectionTimestamps:"Section_Timestamps",sectionSpeeds:"Section_Speeds"},Ce="co2-emissions-monthly",xe=Object.freeze({is_tracemob_expe:!0}),we="timeseriesWithoutAggregateMigration",ke=12,_e="recurringPurposes",De=50},J3iu:function(e,t){e.exports="/img/icon.aa5e3ec7c4ab374b229f92d96f796ca6.svg"},"PG+o":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return s}));var n=a("HZZ/"),r=a.n(n),o=a("hJxD"),i=a.n(o),c=a("IvPY"),l=a("Ev3x"),s=(a("8XZk"),function(){var e=r()(i.a.mark((function e(t,a){var n,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},r=n.fields,e.next=3,t.collection(l.h).create("service",{name:a,slug:c.f,fields:r});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}).call(this,a("JtWf"))},VDMD:function(e,t){e.exports="/img/background.ada7027117d5bc0de6d2c11f52c6e096.png"},eUFy:function(e,t,a){var n={"./en":"2maa","./en.json":"2maa","./fr":"Hsuv","./fr.json":"Hsuv"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="eUFy"},iC3e:function(e,t,a){var n={"./en.json":"5dwM","./fr.json":"eW7n","./nl_NL.json":"w7vk"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="iC3e"},kyG8:function(e,t,a){e.exports={"CertificateGeneration-root":"CertificateGeneration-root--wWT2w"}},nXPL:function(e,t,a){"use strict";a.r(t);a("k37E"),a("QLHQ"),a("7SaY");var n=a("ivGQ"),r=a.n(n),o=a("iOQm"),i=a("UdSB"),c=a.n(i),l=a("XkwL"),s=a.n(l),u=a("J58c"),d=a.n(u),m=a("Ev3x");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=function(e){var t=e.client,a=e.setting,n=e.account;return t.save(f(f({},a),{},{account:n,_type:m.j}))},v=function(e){var t,a=null==e||null===(t=e.aggregation)||void 0===t?void 0:t.sections;if(!a)return e;var n=a.sort((function(e,t){return new Date(e.startDate).getTime()-new Date(t.startDate).getTime()})),r=f({},e);return r.aggregation.sections=n,r},g=a("xEu0"),y=a.n(g),h=function(e,t,a){var n=Object(g.useClient)();if(e.isLoading||t.isLoading)return null;if(null===a){var r=e.data[0];if(r)return r.account;var o=t.data[0];return o?(b({client:n,setting:r,account:o}),o):null}return a},E=a("HZZ/"),O=a.n(E),j=a("hJxD"),C=a.n(j),x=a("L7Xp"),w=a("rfej"),k=a("HmmB"),_=a("IvPY");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=function(e){var t=e.accountId,a=e.limitBy;return{definition:Object(g.Q)(m.g).where({"cozyMetadata.sourceAccount":t}).partialIndex({aggregation:{$exists:!0}}).select(["cozyMetadata.sourceAccount","startDate","endDate","aggregation"]).indexFields(["cozyMetadata.sourceAccount","startDate","endDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(a),options:{as:"".concat(m.g,"/sourceAccount/").concat(t,"/limitedBy/").concat(a),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.limit,r=void 0===n?1e3:n,o=Object(w.a)(e)||null,i=Object(x.a)(e)||null,c=e?"".concat(o.getFullYear(),"-").concat(o.getMonth()):"noDate",l=Object(g.Q)(m.g).where(P({"cozyMetadata.sourceAccount":t},e&&{startDate:{$gte:o.toISOString(),$lte:i.toISOString()}})).partialIndex({aggregation:{$exists:!0}}).select(["aggregation","cozyMetadata.sourceAccount","startDate","endDate"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).limitBy(r);return{definition:l,options:{as:"".concat(m.g,"/sourceAccount/").concat(t,"/date/").concat(c,"/limitedBy/").concat(r),fetchPolicy:y.a.fetchPolicies.olderThan(3e4),enabled:Boolean(e)&&Boolean(t)}}},M=function(e,t){var a=e.accountId;return{definition:Object(g.Q)(m.g).where({"cozyMetadata.sourceAccount":a,startDate:{$gt:null}}).partialIndex({"aggregation.purpose":_.y,"aggregation.modes":{$in:[_.k,_.j,_.jb]}}).select(["startDate","endDate","aggregation","aggregation.modes","aggregation.purpose","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(m.g,"/sourceAccount/").concat(a,"/BikeCommute/"),fetchPolicy:y.a.fetchPolicies.olderThan(1e8),enabled:t}}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?100:t,n=e.withOnlyLogin,r=void 0===n||n,o=Object(g.Q)(m.a).partialIndex({account_type:{$or:["tracemob","openpath"]}}).limitBy(a);return r&&o.select(["auth.login","account_type"]),{definition:o,options:{as:"".concat(m.a,"/account_type/limitedBy/").concat(a,"/withOnlyLogin/").concat(r),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}},A=function(){return{definition:Object(g.Q)(m.j),options:{as:m.j,fetchPolicy:y.a.fetchPolicies.olderThan(1e8)}}},L=["data"],R=["data"],F=Object(n.createContext)(),I=function(){var e=Object(n.useContext)(F);if(!e)throw new Error("useAccountContext must be used within a AccountProvider");return e},B=function(e){return e.auth.login},G=function(e){var t=e.children,a=Object(n.useState)(null),o=s()(a,2),i=o[0],l=o[1],u=Object(g.useClient)(),d=A(),m=Object(g.useQuery)(d.definition,d.options),p=m.data,f=c()(m,L),v=Object(g.isQueryLoading)(f),y=N(),E=Object(g.useQuery)(y.definition,y.options),O=E.data,j=c()(E,R),C=Object(g.isQueryLoading)(j),x=h({data:p,isLoading:v},{data:O,isLoading:C},i),w=v||C,k=Object(n.useCallback)((function(e){b({client:u,setting:p[0],account:e}),l(e)}),[u,p]),_=Object(n.useMemo)((function(){return{accounts:O,account:i,setAccount:k,isAccountLoading:w}}),[O,w,i,k]);return Object(n.useEffect)((function(){(null==x?void 0:x._id)!==(null==i?void 0:i._id)&&l(x)}),[x,i]),r.a.createElement(F.Provider,{value:_},t)},z=a("CE71"),q=a("/s+K"),Z=a("pSj2"),U=a("Aaol"),Q=function(e){var t=e.setShowOpenPathKonnectorDialog,a=Object(U.e)().t,n=Object(g.useClient)(),o="/discover/openpath?type=konnector",i=new URL(n.getStackClient().uri),c=n.getInstanceOptions().subdomain;return r.a.createElement(Z.a,{open:!0,content:a("geolocationTracking.installOpenPathKonnectorDialog.description"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{variant:"secondary",label:a("geolocationTracking.installOpenPathKonnectorDialog.cancel"),onClick:function(){t(!1)}}),r.a.createElement(z.a,{app:{slug:"store"},nativePath:o,href:Object(g.generateWebLink)({pathname:"/",cozyUrl:i.origin,slug:"store",hash:o,subDomainType:c})},(function(e){var t=e.onClick,n=e.href;return r.a.createElement(q.a,{variant:"primary",label:a("geolocationTracking.installOpenPathKonnectorDialog.install"),onClick:t,href:n})}))),onClose:function(){return t(!1)}})},H=a("Kv7L"),V=a("8ZpT"),Y=a.n(V),W=a("LJzA"),K=a("DIBL"),J=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.lang,o=t.deviceName,i={definition:Object(g.Q)("io.cozy.konnectors").getById("openpath"),options:{as:"".concat(m.i,"/openpath"),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}},e.next=4,a.query(i.definition,i.options);case 4:return c=e.sent,l=c.data.attributes,s=new W.a(a,null,l),e.next=9,X({client:a,t:n,lang:r,deviceName:o});case 9:return u=e.sent,d=Object(K.a)(),e.next=13,s.createAccountSilently({konnector:l,vaultClient:null,cipherId:null,trigger:null,account:null,userCredentials:{login:u,password:d,providerId:"1"}});case 13:return e.abrupt("return",{login:u,password:d});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.lang,o=t.deviceName,i=o,s=o,c={definition:Object(g.Q)(m.a).where({"auth.login":s}).partialIndex({account_type:{$or:["tracemob","openpath"]}}).indexFields(["auth.login"]).select(["auth.login","account_type"]),options:{as:"".concat(m.a,"/account_type/login/").concat(s)}},e.next=5,a.query(c.definition,c.options);case 5:if(l=e.sent,0!==l.data.length){e.next=9;break}return e.abrupt("return",i);case 9:return e.abrupt("return","".concat(o," ").concat(n("geolocationTracking.settings.createdOn")," ").concat((new Date).toLocaleDateString(r)));case 10:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=O()(C.a.mark((function e(t,a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.call("getGeolocationTrackingStatus");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={enabled:!1};case 5:n=e.t0,r=n.enabled,a(r);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=O()(C.a.mark((function e(t,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.call("setGeolocationTracking",!1);case 2:return e.next=4,$(t,a);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),te=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.lang,r=t.t,o=t.webviewIntent,i=t.setIsGeolocationTrackingEnabled,c=t.setShowOpenPathKonnectorDialog,e.next=3,null==o?void 0:o.call("getGeolocationTrackingId");case 3:if(null!==e.sent){e.next=30;break}return e.next=7,null==o?void 0:o.call("getDeviceInfo");case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={deviceName:null};case 10:if(l=e.t0,!(s=l.deviceName)){e.next=30;break}return e.prev=13,e.next=16,J({client:a,t:r,lang:n,deviceName:s});case 16:d=e.sent,u=d.password,e.next=28;break;case 20:if(e.prev=20,e.t1=e.catch(13),m=JSON.parse(e.t1.message),"Application is not installed"!==m.errors[0].detail){e.next=27;break}c(!0),e.next=28;break;case 27:throw e.t1;case 28:return e.next=30,null==o?void 0:o.call("setGeolocationTrackingId",u);case 30:return e.next=32,null==o?void 0:o.call("setGeolocationTracking",!0);case 32:return e.next=34,$(o,i);case 34:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.client,n=t.lang,r=t.t,o=t.setIsGeolocationTrackingEnabled,i=t.permissions,c=t.webviewIntent,l=t.setShowLocationRequestableDialog,s=t.setShowLocationRefusedDialog,u=t.setShowOpenPathKonnectorDialog,e.t1=i,e.t1){e.next=6;break}return e.next=5,null==c?void 0:c.call("checkPermissions","geolocationTracking");case 5:e.t1=e.sent;case 6:if(e.t0=e.t1,e.t0){e.next=9;break}e.t0={};case 9:if(!(d=e.t0).granted){e.next=15;break}return e.next=13,te({client:a,lang:n,t:r,webviewIntent:c,setIsGeolocationTrackingEnabled:o,setShowOpenPathKonnectorDialog:u});case 13:e.next=16;break;case 15:d.canRequest?l(!0):s(!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=Object(H.isFlagshipApp)()&&Y()("coachco2.GPSMemory.enabled"),re=function(){var e=O()(C.a.mark((function e(t,a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=13;break}return e.prev=1,e.next=4,null==t?void 0:t.call("isAvailable","geolocationTracking");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=!1;case 7:n=e.t0,a(n),e.next=13;break;case 11:e.prev=11,e.t1=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.webviewIntent,n=t.client,r=t.lang,o=t.t,i=t.setIsGeolocationTrackingEnabled,c=t.setShowLocationRequestableDialog,l=t.setShowLocationRefusedDialog,s=t.setShowOpenPathKonnectorDialog,e.next=3,null==a?void 0:a.call("requestPermissions","geolocationTracking");case 3:return u=e.sent,e.next=6,ae({client:n,lang:r,t:o,setIsGeolocationTrackingEnabled:i,permissions:u,webviewIntent:a,setShowLocationRequestableDialog:c,setShowLocationRefusedDialog:l,setShowOpenPathKonnectorDialog:s});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=a("HROS"),ce=a("ZOg5"),le=Object(n.createContext)(),se=function(){var e=Object(n.useContext)(le);if(!e)throw new Error("useGeolocationTracking must be used within a GeolocationTrackingProvider");return e},ue=function(e){var t=e.children,a=Object(ie.useWebviewIntent)(),o=Object(g.useClient)(),i=Object(U.e)(),c=i.t,l=i.lang,u=Object(n.useState)(!1),d=s()(u,2),m=d[0],p=d[1],f=Object(n.useState)(!1),b=s()(f,2),v=b[0],y=b[1],h=Object(n.useState)(!1),E=s()(h,2),j=E[0],x=E[1],w=Object(n.useState)(!1),k=s()(w,2),_=k[0],D=k[1],P=Object(n.useState)(!1),T=s()(P,2),S=T[0],M=T[1];Object(n.useEffect)((function(){re(a,p),$(a,y)}),[a]);var N=Object(n.useMemo)((function(){return{isGeolocationTrackingAvailable:m,isGeolocationTrackingEnabled:v,disableGeolocationTracking:function(){return ee(a,y)},checkPermissionsAndEnableTrackingOrShowDialog:function(e){return ae({permissions:e,client:o,lang:l,t:c,setIsGeolocationTrackingEnabled:y,webviewIntent:a,setShowLocationRequestableDialog:x,setShowLocationRefusedDialog:D,setShowOpenPathKonnectorDialog:M})}}}),[m,v,a,o,l,c]);return r.a.createElement(le.Provider,{value:N},t,j&&r.a.createElement(ce.a,{onAllow:O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!1),!Object(H.isAndroid)()){e.next=6;break}return e.next=4,oe({webviewIntent:a,client:o,lang:l,t:c,setIsGeolocationTrackingEnabled:y,setShowLocationRequestableDialog:x,setShowLocationRefusedDialog:D,setShowOpenPathKonnectorDialog:M});case 4:e.next=8;break;case 6:return e.next=8,te({client:o,lang:l,t:c,webviewIntent:a,setIsGeolocationTrackingEnabled:y,setShowOpenPathKonnectorDialog:M});case 8:case"end":return e.stop()}}),e)}))),onClose:function(){x(!1)}}),_&&r.a.createElement(ce.a,{onAllow:O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!1),e.next=3,a.call("openAppOSSettings");case 3:case"end":return e.stop()}}),e)}))),onClose:function(){D(!1)},description:c("geolocationTracking.locationRefusedDialog.description")}),S&&r.a.createElement(Q,{setShowOpenPathKonnectorDialog:M}))},de=Object(n.createContext)(),me=function(){var e=Object(n.useContext)(de);if(!e)throw new Error("useSelectDatesContext must be used within a SelectDatesProvider");return e},pe=function(e){var t=e.children,a=Object(n.useState)(null),o=s()(a,2),i=o[0],c=o[1],l=Object(n.useMemo)((function(){return{selectedDate:i,setSelectedDate:c}}),[i]);return r.a.createElement(de.Provider,{value:l},t)},fe=a("vTbG"),be=a("Rx+m"),ve=a("5LIP"),ge=a("0Lot"),ye=a("BqmN"),he=Object(ge.a)({disableGlobal:!0}),Ee=function(e){var t=e.client,a=e.lang,n=e.polyglot,o=e.children;return r.a.createElement(ie.WebviewIntentProvider,null,r.a.createElement(ye.b,{generateClassName:he},r.a.createElement(g.CozyProvider,{client:t},r.a.createElement(g.RealTimeQueries,{doctype:m.g}),r.a.createElement(g.RealTimeQueries,{doctype:m.j}),r.a.createElement(g.RealTimeQueries,{doctype:m.f}),r.a.createElement(g.RealTimeQueries,{doctype:m.c}),r.a.createElement(G,null,r.a.createElement(pe,null,r.a.createElement(U.b,{lang:a,polyglot:n},r.a.createElement(ve.a,{className:"u-w-100"},r.a.createElement(be.a,null,r.a.createElement(fe.a,null,r.a.createElement(ue,null,o))))))))))},Oe=a("mZuE"),je=a("6Vpj"),Ce=a("+rdD"),xe=a("6WJ3"),we=a("HYTT"),ke=a("Su4X"),_e=a("Gyqq"),De=a("d5dM"),Pe=Object(_e.e)(je.b),Te=function(){var e=Object(U.e)().t;return r.a.createElement(De.a,null,r.a.createElement(_e.d,null,r.a.createElement(_e.b,null,r.a.createElement(Pe,{to:"/trips"},r.a.createElement(_e.a,{icon:xe.a}),r.a.createElement(_e.c,null,e("nav.trips")))),r.a.createElement(_e.b,null,r.a.createElement(Pe,{to:"/analysis"},r.a.createElement(_e.a,{icon:we.a}),r.a.createElement(_e.c,null,e("nav.analysis")))),r.a.createElement(_e.b,{secondary:!0},r.a.createElement(Pe,{to:"/analysis/modes"},r.a.createElement(_e.c,null,e("nav.modes")))),r.a.createElement(_e.b,{secondary:!0},r.a.createElement(Pe,{to:"/analysis/purposes"},r.a.createElement(_e.c,null,r.a.createElement(Ce.a,{whiteSpace:"nowrap"},e("nav.purposes"))))),r.a.createElement(_e.b,null,r.a.createElement(Pe,{to:"/settings"},r.a.createElement(_e.a,{icon:ke.a}),r.a.createElement(_e.c,null,e("nav.settings"))))))},Se=a("9Y1u"),Me=a("WY6r"),Ne=a("N8wp"),Ae=function(){var e=Object(U.e)().t;return r.a.createElement(Me.b,null,r.a.createElement(Te,null),r.a.createElement(Me.c,null,r.a.createElement(Me.a,null,r.a.createElement(Oe.b,null))),r.a.createElement(Ne.a,{t:e}),r.a.createElement(Se.a,null))},Le=a("LGLP"),Re=a.n(Le),Fe=a("VDMD"),Ie=a.n(Fe),Be=a("ii0b"),Ge=a.n(Be),ze=a("QGb3"),qe=a.n(ze),Ze=a("qmdU"),Ue=a("0r57"),Qe=a("8wm5"),He=a("C+aL"),Ve=a.n(He),Ye=a("/yh+"),We=a.n(Ye),Ke=a("3UCn"),Je=a.n(Ke),Xe=a("wXrU"),$e=a.n(Xe),et=a("XA6X"),tt=a.n(et),at=a("PpCK"),nt=a.n(at),rt=a("nVpl"),ot=a.n(rt),it=a("FpXT"),ct=a.n(it),lt=a("efAt"),st=a.n(lt),ut=a("Jb16"),dt=a.n(ut),mt=a("gSRL"),pt=a.n(mt),ft=a("DWnN");function bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function vt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var gt=function(e){return"start"===e?"startPlaceContact":"end"===e?"endPlaceContact":null},yt=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return{address:null==n||null===(t=n.address)||void 0===t?void 0:t.find((function(e,t){var n,i,c;if(e.id===(null===(n=r.relationships[gt(o)])||void 0===n||null===(i=n.data)||void 0===i||null===(c=i.metadata)||void 0===c?void 0:c.addressId))return a=t,e})),index:a}},ht=function(e){var t,a,n,r=e.contact,o=e.timeserie,i=e.type;return null===(t=yt({contact:r,timeserie:o,type:i}))||void 0===t||null===(a=t.address)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.cozyCategory},Et=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return null===(t=yt({contact:n,timeserie:r,type:o}))||void 0===t||null===(a=t.address)||void 0===a?void 0:a.type},Ot=function(e,t){return e[gt(t)]},jt=function(e,t){var a;return!(null===(a=Ot(e,t))||void 0===a||!a.data)},Ct=function(e){var t,a=e.timeserie,n=e.type,r=e.t,o=null===(t=Ot(a,n))||void 0===t?void 0:t.data;if(!o)return null;var i=!!o.me,c=ht({timeserie:a,type:n,contact:o}),l=Et({timeserie:a,type:n,contact:o}),s=Object(ft.getDisplayName)(o);return c===_.F&&i?r("contactToPlace.atHome"):l?i?l:"".concat(s," (").concat(l,")"):s},xt=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.type,o=t.t,i=t.contact,c=yt({contact:i,timeserie:n,type:r}),l=c.address,dt()(i.address,(function(e){return e.id&&e.id===l.id})),e.next=5,a.save(i);case 5:return e.next=7,Ot(n,r).remove();case 7:return s=e.sent,u=s.data,pt()(u,"relationships.".concat(gt(r),".data.metadata.addressId")),tt()(u,"aggregation.automaticTitle",Ra(vt(vt({},u),{},{startPlaceContact:n.startPlaceContact,endPlaceContact:n.endPlaceContact}),o)),e.next=13,a.save(u);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wt=function(e){var t=e.contact,a=e.addressId,n=e.label,r=e.timeserie,o=e.type,i=e.category;return vt(vt({},t),{},{address:[].concat(qe()(t.address||[]),[{id:a,type:n,formattedAddress:Va(r,o),geo:{geo:Ya(r,o),cozyCategory:i}}])})},kt=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m,p,f;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=t.t,s=Object(K.a)(),u=wt({contact:n,addressId:s,label:i,timeserie:r,type:o,category:c}),e.next=5,a.save(u);case 5:return d=e.sent,m=d.data,e.next=9,Ot(r,o).add(m);case 9:return p=e.sent,f=p.data,tt()(f,"relationships.".concat(gt(o),".data.metadata"),{addressId:s}),tt()(f,"aggregation.automaticTitle",Ra(vt(vt({},f),{},{startPlaceContact:r.startPlaceContact,endPlaceContact:r.endPlaceContact}),l)),e.next=15,a.save(f);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=t.t,s=yt({contact:n,timeserie:r,type:o}),u=s.index,tt()(n,"address[".concat(u,"].type"),i),tt()(n,"address[".concat(u,"].geo.cozyCategory"),c),e.next=6,a.save(n);case 6:return tt()(r,"aggregation.automaticTitle",Ra(r,l)),e.next=9,a.save(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dt=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.type,r=t.timeserie,o=t.contact,i=t.label,c=t.isSameContact,l=t.category,s=t.t,u=yt({contact:o,timeserie:r,type:n}),d=u.address,e.abrupt("return",c&&d?_t({client:a,contact:o,timeserie:r,type:n,label:i,isSameContact:c,category:l,t:s}):kt({client:a,contact:o,timeserie:r,type:n,label:i,category:l,t:s}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pt=a("rUPj"),Tt=a.n(Pt),St=a("QVGT"),Mt=a("rinC"),Nt=a("uywR"),At=a("eBtv"),Lt=a("Dzzq"),Rt=a("6CkU"),Ft=a("x9kU"),It=a("Dt6a"),Bt=a("tLIM"),Gt=a("GLkt"),zt=a("Npr/"),qt=a("t+nR"),Zt=a("4+jE"),Ut=a("P6yu"),Qt=a("XAJ7"),Ht=a("B7lc"),Vt=a("P/GF"),Yt=a("I46i"),Wt=a("KeZy"),Kt=a("u/Gg"),Jt=a("Ins2"),Xt=a("B6UP"),$t=a("keV2"),ea=a("6+xZ"),ta=[_.a,_.j,_.k,_.m,_.n,_.v,_.w,_.G,_.q,_.r,_.V,_.X,_.jb,_.T,_.sb,_.ub,_.zb,_.Y,_.hb,_.xb],aa=function e(t){switch(t){case _.a:return Ht.a;case _.j:return Ft.a;case _.k:return St.a;case _.m:return Mt.a;case _.w:case _.G:return Nt.a;case _.n:return Mt.a;case _.v:case _.q:return It.a;case _.r:return At.a;case _.V:case _.X:return qt.a;case _.jb:return Bt.a;case _.T:return zt.a;case _.sb:return Kt.a;case _.ub:return Jt.a;case _.zb:case _.Y:case _.hb:return $t.a;case _.xb:return Xt.a;default:return Tt()("info","Unknown mode ".concat(t),"pickModeIcon"),e(_.xb)}},na=function e(t){switch(t){case _.a:return"#F05759";case _.j:return"#B3BF26";case _.k:return"#15CACD";case _.jb:return"#84C6AA";case _.m:return"#F85AA8";case _.n:return"#BA5AE8";case _.v:return"#FC881C";case _.w:case _.G:return"#FF7B5E";case _.q:return"#80A5E1";case _.r:return"#1CAAE8";case _.V:return"#C78542";case _.X:return"#C8A76F";case _.T:return"#E3BE7D";case _.sb:return"#8978FF";case _.ub:return"#F1B61E";case _.xb:return"#A4A7AC";case _.zb:case _.Y:case _.hb:return"#21B930";default:return Tt()("info","Unknown mode ".concat(t),"modeToColor"),e(_.xb)}},ra=[_.y,_.Bb,_.kb,_.ab,_.bb,_.qb,_.D,_.C,_.vb,_.Z],oa=function e(t){switch(t){case _.y:return Rt.a;case _.Bb:return ea.a;case _.kb:return Yt.a;case _.vb:return Zt.a;case _.ab:return Qt.a;case _.D:return Gt.a;case _.C:return Lt.a;case _.bb:return Vt.a;case _.qb:return Wt.a;case _.Z:return Ut.a;default:return Tt()("info","Unknown purpose ".concat(t),"pickPurposeIcon"),e(_.Z)}},ia=function e(t){switch(t){case _.y:return"#BA5AE8";case _.Bb:return"#8978FF";case _.kb:return"#FF7B5E";case _.vb:return"#15CACD";case _.ab:return"#1CAAE8";case _.D:return"#21B930";case _.C:return"#F85AA8";case _.bb:return"#C78542";case _.qb:return"#B3BF26";case _.Z:return"#A4A7AC";default:return Tt()("info","Unknown purpose ".concat(t),"purposeToColor"),e(_.Z)}},ca=function(e){var t=function(e){return parseFloat((e.reduce((function(e,t){return e+t}),0)/e.length).toFixed(5))};switch(e){case _.a:return t(_.c);case _.j:return _.i;case _.k:return _.g;case _.m:return _.l;case _.n:return t(_.b);case _.v:return _.u;case _.w:case _.G:return _.s;case _.q:return _.p;case _.r:return _.o;case _.V:return _.U;case _.X:return _.W;case _.jb:return _.ib;case _.T:return _.S;case _.sb:return t(_.d);case _.ub:return t(_.e);case _.xb:return _.wb;case _.zb:case _.Y:case _.hb:return _.yb;default:return _.wb}},la=function(e){return 1e3*parseFloat(e)},sa=function(e){return e===_.a?"(".concat(la(_.cb),"~").concat(la(_.eb),") g/km"):"".concat(ua(e)," g/km")},ua=function(e){return Math.round(la(ca(e)))},da=function e(t){switch(t){case _.a:case _.zb:case _.Y:case _.hb:case _.xb:return null;case _.j:case _.k:case _.jb:return _.h.name;case _.m:case _.n:case _.sb:case _.ub:return _.fb.name;case _.v:case _.w:case _.G:case _.q:case _.r:case _.V:case _.X:case _.T:return _.t.name;default:return Tt()("info","Unknown mode ".concat(t),"modeToCategory"),e(_.xb)}},ma=a("e0b0"),pa=a.n(ma),fa=function(e){var t="m",a=e;return e>1e3&&(t="km",a=e/1e3),"".concat(Math.round(a)," ").concat(t)},ba=function(e){return"".concat(Math.round(100*e)/100," kg")},va=function(e,t){var a=["fr","en"].includes(t)?t:"en";return pa()(1e3*e,{delimiter:" ",largest:2,round:!0,units:["h","m"],language:a,languages:{fr:{d:function(){return"j"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}},en:{d:function(){return"d"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}}}})},ga=function(e){var t=e.f,a=e.lang,n=e.date;return t(n,"fr"===a?"HH[h]mm":"HH:mm")},ya=function(e){return 3.6*(e.reduce((function(e,t){return e+t}),0)/e.length)},ha=function(e){var t=0,a=e.distance/1e3;switch(e.mode){case _.a:if(a<=_.lb){t+=a*_.eb;break}a<=_.I?t+=a*_.db:t+=a*_.cb;break;case _.j:t+=a*_.i;break;case _.k:t+=a*_.g;break;case _.m:t+=a*_.l;break;case _.n:t+=a*ca(_.n);break;case _.v:t+=a*_.u;break;case _.w:case _.G:t+=a*_.s;break;case _.q:t+=a*_.p;break;case _.r:t+=a*_.o;break;case _.V:t+=a*_.U;break;case _.X:t+=a*_.W;break;case _.jb:t+=a*_.ib;break;case _.T:t+=a*_.S;break;case _.sb:t+=a*ca(_.sb);break;case _.ub:t+=a*ca(_.ub);break;case _.xb:t+=a*_.wb;break;case _.zb:case _.hb:case _.Y:t+=a*_.yb}return t},Ea=function(e){var t,a=e.averageSpeed,n=e.duration/60;switch(e.mode){case _.zb:case _.Y:case _.hb:t=a<=_.pb?_.Q:a<=_.J?_.P:a<=_.E?_.O:_.R;break;case _.k:t=a<=_.ob?_.M:a<=_.nb?_.L:a<=_.mb?_.K:_.N}return t?function(e,t){return e*_.B*3.5/200*t}(t,n):0},Oa=a("euuj"),ja=a.n(Oa),Ca=function(e){return We()(e,"properties.manual_purpose")},xa=function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.automatic_purpose},wa=function(e){return We()(e,"properties.start_place.data.properties.display_name")},ka=function(e){return We()(e,"properties.end_place.data.properties.display_name")},_a=function(e,t){var a=(t||{}).defaultTransportModeByGroup,n=We()(e,"properties.sensed_mode","").toUpperCase(),r=n.split("PREDICTEDMODETYPES.")[1]||n.split("MOTIONTYPES.")[1],o=ta.includes(r),i=ta.find((function(e){return(null==a?void 0:a[da(r)])===e}));return!!i&&i||o&&r||_.xb},Da=ja()((function(e,t){return e.features.filter((function(e){return"FeatureCollection"===e.type})).flatMap((function(e){return function(e,t){return e.features.map((function(e){var a=We()(e,"properties.start_fmt_time"),n=We()(e,"properties.end_fmt_time"),r=We()(e,"properties.speeds");return{id:e.id,mode:_a(e,t),coordinates:We()(e,"geometry.coordinates"),timestamps:We()(e,"properties.timestamps"),distance:We()(e,"properties.distance"),distances:We()(e,"properties.distances"),duration:We()(e,"properties.duration"),startDate:a?new Date(a):a,endDate:n?new Date(n):n,speeds:r,avgSpeed:r?ya(r):void 0}}))}(e,t)}))})),Pa=function(e){return new Date(e.properties.start_fmt_time)},Ta=function(e){return new Date(e.properties.end_fmt_time)};function Sa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ma(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Na(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Aa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Aa(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}g.models.geo.geodesicDistance;var La=function(e){return e.flatMap((function(t,a){return t.series.map((function(t){return function(e){var t=e.features,a=e.properties,n=Je()(t,(function(e){return e.id}));return $e()({},e,{properties:{start_place:{data:n[a.start_place.$oid]},end_place:{data:n[a.end_place.$oid]}}})}(Ma(Ma({},t),{},{timeserieId:e[a]._id}))}))}))},Ra=function(e,t){var a,n,r,o,i,c,l=Ct({timeserie:e,type:"start",t:t}),s=Ct({timeserie:e,type:"end",t:t}),u=(null===(a=Qa(e))||void 0===a||null===(n=a.split(","))||void 0===n||null===(r=n[1])||void 0===r?void 0:r.trim())||"",d=(null===(o=Ha(e))||void 0===o||null===(i=o.split(","))||void 0===i||null===(c=i[1])||void 0===c?void 0:c.trim())||"";if(l||s){var m=l||Qa(e),p=s||Ha(e);return"".concat(m," > ").concat(p)}return(u||d)&&u!==d?"".concat(u," > ").concat(d).trim():Ha(e)},Fa=function(e){var t=0;return e.forEach((function(e){var a;t+=(null===(a=e.aggregation)||void 0===a?void 0:a.totalCO2)||0})),t},Ia=function(e,t){var a=ct()(e),n=e[t],r=0===n.timeseries.length&&0===n.totalCO2,o=nt()(a.filter((function(e){return r?e[0]!==t&&e[1].totalCO2>0:e[1].totalCO2>0})),(function(e){return e[1].totalCO2})).reverse(),i=nt()(a.filter((function(e){return r?e[0]!==t&&0===e[1].totalCO2:0===e[1].totalCO2})),(function(e){return e[1].timeseries.length})).reverse();return Ma(Ma(Ma({},Ve()(o)),Ve()(i)),r&&d()({},t,n))},Ba=function(e){var t=function(e){var t=ta.reduce((function(e,t){return Ma(Ma({},e),{},d()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){e.aggregation.sections.forEach((function(a){var n=t[a.mode].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a.mode].totalCO2+=a.CO2}))})),t}(e);return Ia(t,_.xb)},Ga=function(e){var t=We()(e,"aggregation.purpose","").toUpperCase();return ra.includes(t)&&t||_.Z},za=function(e){var t=function(e){var t=ra.reduce((function(e,t){return Ma(Ma({},e),{},d()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){var a=Ga(e),n=t[a].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a].totalCO2+=e.aggregation.totalCO2})),t}(e);return Ia(t,_.Z)},qa=function(e){return e.startDate?new Date(e.startDate):null},Za=function(e){return e.endDate?new Date(e.endDate):null},Ua=function(e,t){return"start"===t?qa(e):"end"===t?Za(e):null},Qa=function(e){return We()(e,"aggregation.startPlaceDisplayName")||We()(e.series[0],"features[0].properties.display_name")},Ha=function(e){return We()(e,"aggregation.endPlaceDisplayName")||We()(e.series[0],"features[1].properties.display_name")},Va=function(e,t){return"start"===t?Qa(e):"end"===t?Ha(e):null},Ya=function(e,t){var a=Ka(e);return qe()(a.properties["".concat(t,"_loc")].coordinates)},Wa=function(e){var t=e.timeserie,a=e.type,n=e.t;return"".concat(n("contactToPlace.lat"),": ")+Ya(t,a).reverse().toString().replace(",",", ".concat(n("contactToPlace.long"),": "))},Ka=function(e){return We()(e,"series[0]")},Ja=function(e,t){var a=We()(e,"aggregation.automaticTitle");if(!a)return null;if(!t)return a;var n=a.split(">"),r=s()(n,2),o=r[0],i=r[1];return o.length>12&&i?"".concat(o.slice(0,12).trim(),"... > ").concat(i.trim()):a},Xa=function(e){var t=qa(e),a=Za(e);return Object(Ue.a)(a,t)},$a=function(e){return fa(e.aggregation.totalDistance)},en=function(e){var t=function(e){return We()(e,"aggregation.totalCO2","")}(e);return ba(t)},tn=function(e){var t,a=function(e){return We()(e,"aggregation.totalCalories","")}(e);return t=a,"".concat(Math.round(t)," kcal")},an=function(e,t){var a=t(qa(e),"dddd D MMMM YYYY");return a.charAt(0).toUpperCase()+a.slice(1)},nn=function(e,t){var a;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var n=Ma({},e);return tt()(n,"series[0].properties.automatic_purpose",t),tt()(n,"aggregation.recurring",!0),on(n)},rn=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isRecurringTrip,o=void 0===r?null:r;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var i=Ma({},e);return tt()(i,"series[0].properties.manual_purpose",t.toUpperCase()),null!==o&&tt()(i,"aggregation.recurring",o),on(i)},on=function(e){var t,a=e.series[0],n=null!=e&&null!==(t=e.aggregation)&&void 0!==t&&t.recurring&&xa(a)||Ca(a);return n?Ma(Ma({},e),{},{aggregation:Ma(Ma({},e.aggregation),{},{purpose:n})}):e},cn=function(e,t){var a=function(e,t){var a,n=0,r=Na(e.aggregation.sections);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.mode===t&&(n+=o.CO2)}}catch(i){r.e(i)}finally{r.f()}return n}(e,t);return ba(a)},ln=function(e){var t=0,a=qe()(e).sort((function(e,t){return qa(e)-qa(t)}));return a.forEach((function(e,n){if(0===n)t++;else{var r=qa(e),o=a[n-1],i=qa(o),c=Object(Ze.a)(i,12);r.toDateString()===i.toDateString()||r<c||t++}})),t},sn=function(e,t){return e.filter((function(e){return new Date(e.startDate).getFullYear().toString()===t}))},un=function(e){var t,a,n,r,o,i,c,l,s,u;return{lon:null==e||null===(t=e.series)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.properties)||void 0===n||null===(r=n.start_loc)||void 0===r||null===(o=r.coordinates)||void 0===o?void 0:o[0],lat:null==e||null===(i=e.series)||void 0===i||null===(c=i[0])||void 0===c||null===(l=c.properties)||void 0===l||null===(s=l.start_loc)||void 0===s||null===(u=s.coordinates)||void 0===u?void 0:u[1]}},dn=function(e){var t,a,n,r,o,i,c,l,s,u;return{lon:null==e||null===(t=e.series)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.properties)||void 0===n||null===(r=n.end_loc)||void 0===r||null===(o=r.coordinates)||void 0===o?void 0:o[0],lat:null==e||null===(i=e.series)||void 0===i||null===(c=i[0])||void 0===c||null===(l=c.properties)||void 0===l||null===(s=l.end_loc)||void 0===s||null===(u=s.coordinates)||void 0===u?void 0:u[1]}},mn=function(e){var t,a,n=null==e||null===(t=e[0].bikeGoal)||void 0===t?void 0:t.daysToReach,r=null===(a=Y()("coachco2.bikegoal.settings"))||void 0===a?void 0:a.daysToReach;return n||r||100},pn=function(){var e,t=null===(e=Y()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.bountyAmount;if(!t)throw new Error('Flag "coachco2.bikegoal.settings" must be used');return t},fn=function(){var e,t,a=null===(e=Y()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.sourceIdentity;return{sourceType:null===(t=Y()("coachco2.bikegoal.settings"))||void 0===t?void 0:t.sourceType,sourceIdentity:a}},bn=function(e,t){return!(!e||0===e.length)&&ln(e)>=mn(t)},vn=function(e,t){if(!e||0===e.length)return 0;var a=ln(e),n=mn(t);return a<n?a:n},gn=function(e){var t=mn(e),a=.5>t?t:.5;return Math.round(a/t*100)},yn=a("gQ+z"),hn=["timeseries","sendToDACC","size"],En=["data"],On=function(e){var t=e.timeseries,a=e.sendToDACC,n=e.size,o=c()(e,hn),i=A(),l=Object(g.useQuery)(i.definition,i.options),s=l.data,u=c()(l,En);if(Object(g.isQueryLoading)(u))return null;var d=function(e,t){if(!e)return 100;var a=vn(e),n=mn(t);return Math.round(a/n*100)}(t,s),m=function(e){switch(e){case"medium":return"3rem";case"small":return"2.5rem";default:return"4.5rem"}}(n);return r.a.createElement(yn.a,Re()({size:n,primaryProps:{value:d,color:"#BA5AE8"}},a&&{secondaryProps:{value:gn(s),color:"#BA5AE83D"}},o),r.a.createElement(Ce.a,{fontSize:m},"üö¥"))};On.propTypes={className:Ge.a.string,timeseries:Ge.a.arrayOf(Ge.a.object)};var jn=On,Cn=a("kyG8"),xn=a.n(Cn),wn=a("i0pn"),kn=a("DZbK"),_n=a.n(kn),Dn=a("vVt6"),Pn=a.n(Dn),Tn=a("v5t+"),Sn=a.n(Tn),Mn=function(){return r.a.createElement(wn.h,{viewBox:"0 0 409 757"},r.a.createElement(wn.f,{d:"M386.752 16.07C386.752 22.7658 392.18 28.1938 398.876 28.1938C403.363 28.1938 407 31.8309 407 36.3175L407 720.682C407 725.169 403.363 728.806 398.876 728.806C392.18 728.806 386.752 734.234 386.752 740.93L386.752 743.903C386.752 750.032 381.784 755 375.656 755L33.3444 755C27.2158 755 22.2475 750.032 22.2475 743.903L22.2475 740.93C22.2475 734.234 16.8195 728.806 10.1237 728.806C5.63715 728.806 2 725.169 2 720.682L2.00003 36.3175C2.00003 31.8309 5.63718 28.1938 10.1238 28.1938C16.8195 28.1938 22.2476 22.7658 22.2476 16.07L22.2476 13.0969C22.2476 6.96822 27.2158 1.99998 33.3444 1.99998L375.656 2C381.784 2 386.752 6.96825 386.752 13.0969L386.752 16.07Z",fill:"white",stroke:"#297EF2",strokeWidth:"4"}),r.a.createElement(wn.f,{d:"M386.926 8.8584C395.21 8.8584 401.926 15.5741 401.926 23.8584L401.926 736.142C401.926 742.77 396.553 748.142 389.926 748.142L19.0743 748.142C12.4468 748.142 7.07429 742.77 7.07429 736.142L7.07431 20.8584C7.07431 14.231 12.4469 8.85838 19.0743 8.85838L386.926 8.8584Z",stroke:"#297EF2",strokeWidth:"2"}),r.a.createElement(wn.c,{cx:"404.951",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(wn.c,{cx:"404.951",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(wn.c,{cx:"4.04962",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(wn.c,{cx:"4.04962",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}))},Nn=function(){return r.a.createElement(wn.h,{width:"72",height:"72",viewBox:"0 0 72 72"},r.a.createElement(wn.f,{d:"M31.2945 5.16468C33.8194 2.39335 38.1806 2.39335 40.7055 5.16468C42.3805 7.00311 44.9728 7.6977 47.3426 6.94307C50.9149 5.8055 54.6918 7.98608 55.4928 11.6486C56.0241 14.0782 57.9218 15.9759 60.3514 16.5072C64.0139 17.3082 66.1945 21.0851 65.0569 24.6574C64.3023 27.0272 64.9969 29.6195 66.8353 31.2945C69.6067 33.8194 69.6067 38.1806 66.8353 40.7055C64.9969 42.3805 64.3023 44.9728 65.0569 47.3426C66.1945 50.9149 64.0139 54.6918 60.3514 55.4928C57.9218 56.0241 56.0241 57.9218 55.4928 60.3514C54.6918 64.0139 50.9149 66.1945 47.3426 65.0569C44.9728 64.3023 42.3805 64.9969 40.7055 66.8353C38.1806 69.6067 33.8194 69.6067 31.2945 66.8353C29.6195 64.9969 27.0272 64.3023 24.6574 65.0569C21.0851 66.1945 17.3082 64.0139 16.5072 60.3514C15.9759 57.9218 14.0782 56.0241 11.6486 55.4928C7.98608 54.6918 5.8055 50.9149 6.94307 47.3426C7.6977 44.9728 7.00311 42.3805 5.16468 40.7055C2.39335 38.1806 2.39335 33.8194 5.16468 31.2945C7.00311 29.6195 7.6977 27.0272 6.94307 24.6574C5.8055 21.0851 7.98608 17.3082 11.6486 16.5072C14.0782 15.9759 15.9759 14.0782 16.5072 11.6486C17.3082 7.98608 21.0851 5.8055 24.6574 6.94307C27.0272 7.6977 29.6195 7.00311 31.2945 5.16468Z",fill:"#297EF2"}),r.a.createElement(wn.a,{cx:"36",cy:"36",r:"26",fill:"white"}),r.a.createElement(wn.f,{d:"M33.8789 46.515C34.1467 46.4481 34.4182 46.611 34.4852 46.8789L34.9852 48.8789C34.9953 48.9194 35.0002 48.9601 35.0002 49.0001H37C37 48.9601 37.0049 48.9194 37.015 48.8789L37.515 46.8789C37.582 46.611 37.8535 46.4481 38.1214 46.515C38.3893 46.582 38.5522 46.8535 38.4852 47.1214L38.0001 49.0617V51.0001C38.0001 51.5524 37.5524 52.0001 37.0001 52.0001H35.0001C34.4478 52.0001 34.0001 51.5524 34.0001 51.0001V49.0617L33.515 47.1214C33.4481 46.8535 33.611 46.582 33.8789 46.515Z",fill:"#297EF2"}),r.a.createElement(wn.f,{d:"M34 47C33.4477 47 32.9798 46.5318 32.6829 46.0661C32.1387 45.2125 30.95 44.2886 29.5553 43.2046C26.3288 40.6968 22 37.3322 22 32C22 25.3726 28.268 20 36 20V47H34Z",fill:"#297EF2"}),r.a.createElement(wn.f,{d:"M36 47H34.2857C34.2857 45.882 33.4127 44.6945 32.3173 43.2046C30.4736 40.6968 28 37.3322 28 32C28 25.3726 31.5817 20 36 20V47Z",fill:"#579EFF"}),r.a.createElement(wn.f,{d:"M38 47C38.5523 47 39.0202 46.5318 39.3171 46.0661C39.8613 45.2125 41.05 44.2886 42.4447 43.2046C45.6712 40.6968 50 37.3322 50 32C50 25.3726 43.732 20 36 20V47H38Z",fill:"#B3D3FF"}),r.a.createElement(wn.f,{d:"M36 47H37.7143C37.7143 45.882 38.5873 44.6945 39.6827 43.2046C41.5264 40.6968 44 37.3322 44 32C44 25.3726 40.4183 20 36 20V47Z",fill:"#91BFFF"}),r.a.createElement(wn.a,{cx:"36",cy:"36",r:"23",stroke:"#297EF2",strokeWidth:"2"}))},An=function(){return r.a.createElement(wn.h,{width:"74",height:"32",viewBox:"0 0 74 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement(wn.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M57.1068 13.6515L58.8382 18.2742L60.4808 13.6515H62.3782L59.6788 20.5655C59.1822 21.8522 58.3415 22.5275 57.3102 22.5275C56.7628 22.5275 56.1002 22.3622 55.6548 22.1202L56.0488 20.8468C56.3675 21.0242 56.6988 21.1388 56.9155 21.1388C57.2708 21.1388 57.5522 21.0242 57.6928 20.7822L57.9222 20.2982L55.1835 13.6515H57.1068ZM45.1202 13.5208C47.0682 13.5208 48.6982 15.0868 48.6982 16.9588C48.6982 18.8308 47.0682 20.4095 45.1202 20.4095C43.1588 20.4095 41.5162 18.8308 41.5162 16.9588C41.5162 15.0868 43.1588 13.5208 45.1202 13.5208ZM37.9802 11.3335C39.3042 11.3335 40.5268 11.8948 41.3802 12.7988L40.0182 14.0208C39.5082 13.4355 38.7828 13.0408 37.9802 13.0408C36.5162 13.0408 35.2675 14.3395 35.2675 15.8542C35.2675 17.3822 36.5162 18.6815 37.9808 18.6815C38.7828 18.6815 39.5082 18.2868 40.0182 17.7008L41.3802 18.9242C40.5268 19.8148 39.3042 20.3882 37.9802 20.3882C35.4728 20.3882 33.3335 18.3122 33.3335 15.8548C33.3335 13.3975 35.4735 11.3335 37.9802 11.3335ZM54.7055 13.6522V14.9642L51.3948 18.6562H54.7315V20.2348H48.9762V18.9235L52.2868 15.2302H49.0655V13.6522H54.7055ZM45.1188 15.0868C44.1255 15.0868 43.2988 15.9402 43.2988 16.9588C43.2988 17.9782 44.1255 18.8435 45.1188 18.8435C46.1002 18.8435 46.9275 17.9782 46.9275 16.9588C46.9275 15.9402 46.1008 15.0868 45.1195 15.0868H45.1188Z",fill:"#297EF2"}),r.a.createElement(wn.f,{d:"M20.0002 26.6668C25.8912 26.6668 30.6668 21.8912 30.6668 16.0002C30.6668 10.1091 25.8912 5.3335 20.0002 5.3335C14.1091 5.3335 9.3335 10.1091 9.3335 16.0002C9.3335 21.8912 14.1091 26.6668 20.0002 26.6668Z",fill:"#297EF2"}),r.a.createElement(wn.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2092 17.0408C22.1026 17.2075 21.8666 17.2568 21.7032 17.1475C21.6899 17.1395 21.6759 17.1302 21.6632 17.1208C21.1886 17.4928 20.6039 17.6955 19.9966 17.6955C19.3906 17.6955 18.8079 17.4935 18.3339 17.1222C18.3219 17.1315 18.3092 17.1402 18.2966 17.1482C18.1292 17.2575 17.8966 17.2055 17.7906 17.0422C17.6839 16.8775 17.7306 16.6542 17.8946 16.5435C18.0372 16.4502 18.0472 16.2628 18.0472 16.2608C18.0506 16.1628 18.0932 16.0695 18.1646 16.0042C18.2352 15.9375 18.3239 15.9002 18.4219 15.9075C18.6179 15.9122 18.7779 16.0775 18.7739 16.2762C18.7739 16.2788 18.7739 16.3782 18.7379 16.5162C19.4699 17.1235 20.5312 17.1215 21.2606 16.5108C21.2339 16.4048 21.2272 16.3208 21.2252 16.2815C21.2232 16.1795 21.2599 16.0875 21.3279 16.0168C21.3952 15.9482 21.4859 15.9088 21.5826 15.9075H21.5892C21.7852 15.9075 21.9479 16.0655 21.9526 16.2622C21.9526 16.2622 21.9626 16.4502 22.1039 16.5435C22.2686 16.6522 22.3159 16.8748 22.2092 17.0408ZM23.7572 12.7948C23.6526 11.9095 23.2606 11.0908 22.6306 10.4575C21.9086 9.73216 20.9539 9.3335 19.9439 9.3335C18.9339 9.3335 17.9806 9.73216 17.2579 10.4582C16.6259 11.0935 16.2326 11.9168 16.1306 12.8075C15.2632 12.9128 14.4612 13.3162 13.8419 13.9655C13.1352 14.7062 12.7466 15.6855 12.7466 16.7235C12.7466 18.8982 14.4692 20.6668 16.5879 20.6668H23.4119C25.5292 20.6668 27.2532 18.8982 27.2532 16.7235C27.2532 14.6682 25.7132 12.9748 23.7572 12.7948Z",fill:"white"}))};wn.d.register({family:"Lato",src:Pn.a}),wn.d.register({family:"Courgette",src:_n.a}),wn.d.register({family:"PlusJakarta",src:Sn.a});var Ln=wn.g.create({co2CertificateSVG:{margin:"0 auto 10px"},cozySVG:{margin:"0 auto"},page:{padding:8},content:{display:"flex",justifyContent:"space-between",position:"absolute",top:54,left:40,bottom:50,right:40},title:{whiteSpace:"pre-line",fontFamily:"PlusJakarta",fontSize:24,fontStyle:"normal",textAlign:"center",lineHeight:1.2},subTitle:{textAlign:"center",color:"rgba(29, 33, 42, 0.48)",marginTop:20,fontSize:12,fontStyle:"normal",fontWeight:400},name:{fontFamily:"Courgette",textAlign:"center",color:"#297EF2",fontSize:32,fontStyle:"normal",marginTop:20},divider:{width:"100%",height:1,backgroundColor:"rgba(29, 33, 42, 0.12)",margin:"20px 0"},text:{fontFamily:"Lato",textAlign:"left",color:"rgba(29, 33, 42, 0.90)",fontSize:14,fontStyle:"normal",marginTop:20,lineHeight:1.3}}),Rn=function(e){var t=e.t,a=e.username,n=e.daysToReach,o=e.sourceIdentity,i=e.year,c=e.lang,l=new Date,s=l.toLocaleDateString(c,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u=l.toLocaleTimeString(c,{hour12:!1,hour:"2-digit",minute:"2-digit"}).replace(":","h");return r.a.createElement(wn.b,null,r.a.createElement(wn.e,{wrap:!1,style:Ln.page},r.a.createElement(wn.j,null,r.a.createElement(Mn,null)),r.a.createElement(wn.j,{style:Ln.content},r.a.createElement(wn.j,null,r.a.createElement(wn.j,{style:Ln.co2CertificateSVG},r.a.createElement(Nn,null)),r.a.createElement(wn.i,{style:Ln.title},t("PDF.title")),r.a.createElement(wn.i,{style:Ln.subTitle},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(wn.i,{style:Ln.name},a),r.a.createElement(wn.j,{style:Ln.divider}),r.a.createElement(wn.i,{style:Ln.text},t("PDF.recipient",{sourceIdentity:o})),r.a.createElement(wn.i,{style:Ln.text},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(wn.i,{style:Ln.text},t("PDF.paragraph01",{username:a,daysToReach:n,year:i})),r.a.createElement(wn.i,{style:Ln.text},t("PDF.paragraph02")),r.a.createElement(wn.i,{style:Ln.text},t("PDF.paragraph03")),r.a.createElement(wn.i,{style:Ln.text},t("PDF.signature",{username:a}))),r.a.createElement(wn.j,{style:Ln.cozySVG},r.a.createElement(An,null)))))},Fn=g.models.folder,In=Fn.MAGIC_FOLDERS,Bn=Fn.ensureMagicFolder,Gn=Fn.getReferencedFolder,zn="".concat(m.b,"/coachco2"),qn=function(){var e=O()(C.a.mark((function e(t,a){var n,r,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(t,{_id:zn,_type:m.b});case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,Bn(t,In.ADMINISTRATIVE,"/".concat(a("folder.administrative")));case 9:return r=e.sent,o=r.path,e.next=13,Bn(t,In.COACH_CO2,"".concat(o,"/").concat(a("folder.coachco2")));case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Zn=a("0nAg"),Un=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.pdfDocument,o=t.year,e.prev=1,e.next=4,Object(wn.k)(r).toBlob();case 4:return i=e.sent,e.next=7,qn(a,n);case 7:return c=e.sent,l=c._id,e.next=11,Object(Zn.uploadFileWithConflictStrategy)(a,i,{name:n("PDF.name",{year:o}),contentType:"application/pdf",dirId:l,conflictStrategy:"rename"});case 11:return s=e.sent,u=s.data,e.abrupt("return",u);case 16:return e.prev=16,e.t0=e.catch(1),Tt()("error",e.t0,"savePdfCertificate"),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),Qn=function(){var e=O()(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collection(m.c),e.next=3,a.findMyself();case 3:return n=e.sent,r=n.data,e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hn=a("AHiN"),Vn=a("W5TB"),Yn=a("OEPu"),Wn=a("4jS1"),Kn=a("i5f2"),Jn=a("dUf/"),Xn=a("gQXR"),$n=a("9Ub/"),er=["data"],tr=function(e){var t=e.certificate,a=Object(U.e)(),o=a.t,i=a.lang,l=Object(g.useClient)(),u=Object(be.b)().isMobile,d=Object(Oe.i)().year,m=Object(Oe.h)(),p=Object(n.useState)(!1),f=s()(p,2),b=f[0],v=f[1],y=A(),h=Object(g.useQuery)(y.definition,y.options),E=h.data,j=c()(h,er);if(Object(g.isQueryLoading)(j))return null;var x=function(){var e=O()(C.a.mark((function e(){var t,a,n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),t=fn(),a=t.sourceIdentity,e.next=4,Qn(l);case 4:return n=e.sent,c=r.a.createElement(Rn,{t:o,username:Object(ft.getDisplayName)(n),daysToReach:mn(E),sourceIdentity:a,year:d,lang:i}),e.next=8,Un({client:l,t:o,pdfDocument:c,year:d});case 8:v(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=o(t?"bikeGoal.certificateGeneration.actions.regenerate":"bikeGoal.certificateGeneration.actions.generate");return r.a.createElement("div",{className:xn.a["CertificateGeneration-root"]},r.a.createElement(jn,u&&{size:"medium"}),r.a.createElement($n.a,{variant:"h4"},o("bikeGoal.certificateGeneration.title")),r.a.createElement($n.a,{variant:"body2",className:"u-mv-1"},o("bikeGoal.certificateGeneration.content",{bountyAmount:pn(),year:d})),!!t&&!b&&r.a.createElement(Xn.a,{onClick:function(){m({pathname:"../certificate/".concat(t._id)})},className:"u-c-pointer"},r.a.createElement(Yn.a,null,r.a.createElement(Wn.b,null,r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:Vn.a,size:32})),r.a.createElement(Jn.a,{primary:t.name})))),r.a.createElement(q.a,{variant:"text",label:w,className:"u-mt-half u-fz-xsmall",onClick:x,busy:b}))},ar=a("tRUj"),nr=a("bQqJ"),rr=["data"],or=function(){var e=Object(Oe.h)(),t=Object(be.b)().isMobile,a=Object(U.e)().t,n={definition:Object(g.Q)(m.f).partialIndex({"cozyMetadata.createdByApp":"coachco2",class:"pdf",type:"file",trashed:!1}).indexFields(["cozyMetadata.updatedAt"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(1),options:{as:m.f,fetchPolicy:y.a.fetchPolicies.olderThan(1e8)}},o=Object(g.useQuery)(n.definition,n.options),i=o.data,l=c()(o,rr),s=Object(g.isQueryLoading)(l);return r.a.createElement(ar.a,Re()({open:!0,background:"var(--paperBackgroundColor) repeat-x url(".concat(Ie.a,")"),content:s?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(tr,{certificate:i[0]})},t?{onBack:function(){return e("..")}}:{onClose:function(){return e("..")}},{actions:r.a.createElement(q.a,{label:a("bikeGoal.certificateGeneration.actions.understood"),onClick:function(){return e("..")}}),actionsLayout:"column"}))},ir=a("lomp"),cr=a.n(ir),lr=a("nOWK"),sr=a.n(lr),ur=new cr.a({id:"pins-path_2d4c69ec9e779e37080be582b17e8596",use:"pins-path_2d4c69ec9e779e37080be582b17e8596-usage",viewBox:"0 0 96 96",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 96 96" id="pins-path_2d4c69ec9e779e37080be582b17e8596"><g clip-path="url(#pins-path_2d4c69ec9e779e37080be582b17e8596_a)"><path stroke="#FFD799" stroke-linecap="round" stroke-width="8" d="M20 46h9.5C35.851 46 41 51.149 41 57.5v0C41 63.851 35.851 69 29.5 69h-14C9.149 69 4 74.149 4 80.5v0C4 86.851 9.149 92 15.5 92H72" /><path fill="#FFB64F" d="M96 48c0 11.267-17.34 32.28-22.542 38.33a1.908 1.908 0 0 1-2.916 0C65.341 80.28 48 59.268 48 48c0-13.255 10.745-24 24-24s24 10.745 24 24ZM35 16c0 7.19-10.594 20.336-14.541 24.984a1.904 1.904 0 0 1-2.918 0C13.594 36.336 3 23.19 3 16 3 7.163 10.163 0 19 0s16 7.163 16 16Z" /><circle cx="72" cy="48" r="8" fill="#F33136" /><circle cx="19" cy="16" r="5.333" fill="#F33136" /></g><defs><clipPath id="pins-path_2d4c69ec9e779e37080be582b17e8596_a"><path fill="#fff" d="M0 0h96v96H0z" /></clipPath></defs></symbol>'}),dr=(sr.a.add(ur),ur),mr=a("uRLs"),pr=a.n(mr),fr=a("Jbzi"),br=a("HCvV"),vr=a("ebeN"),gr=function(e){var t=e.label,a=e.subtitle,n=e.onBack,o=Object(be.b)().isMobile,i=cozy.bar,c=i.BarCenter,l=i.BarLeft,s="function"==typeof n?n:void 0;return o?r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(l,null,r.a.createElement(br.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(Hn.a,{icon:vr.a,size:16}))),r.a.createElement(c,null,r.a.createElement(ve.a,{className:"u-w-100"},r.a.createElement(fr.a,null,t)))):r.a.createElement("div",{className:pr()(d()({},"u-flex u-flex-items-baseline u-ml-2",s))},s&&r.a.createElement(br.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(Hn.a,{icon:vr.a,size:16})),r.a.createElement("div",{className:pr()("u-mv-1-half-s u-ml-1-s u-mv-2",d()({},"u-ml-2",!s))},r.a.createElement($n.a,{variant:"h3"},t),a))};gr.propTypes={label:Ge.a.string,subtitle:Ge.a.node,onBack:Ge.a.func};var yr=gr,hr=a("/5Aj"),Er=function(){var e=Object(U.e)().t,t=Object(be.b)().isMobile,a=Object(Oe.h)(),n=I().account;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(yr,{label:e("trips.from")+" "+B(n)}),r.a.createElement(hr.a,{icon:dr,title:e("emptyContent.changeAccount.title"),text:e("emptyContent.changeAccount.text"),centered:!0},r.a.createElement(q.a,{className:"u-mt-1",variant:"secondary",label:e("emptyContent.changeAccount.action"),onClick:function(){return a("/settings")}})))},Or=new cr.a({id:"location-detected_c862fbaed6fc77b32a0bbb165b330a48",use:"location-detected_c862fbaed6fc77b32a0bbb165b330a48-usage",viewBox:"0 0 128 128",content:'<symbol viewBox="0 0 128 128" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="location-detected_c862fbaed6fc77b32a0bbb165b330a48">\n<style>#location-detected_c862fbaed6fc77b32a0bbb165b330a48 .Ellipse_4_512 {\n\tanimation: 2s linear 0s infinite normal forwards running Ellipse_4_512;\n\t\trx: 48px;\n\t\try: 48px;\n\t\topacity: 0.08;\n}\n@keyframes Ellipse_4_512 {\n\t0% {\n\t\trx: 48px;\n\t\try: 48px;\n\t\topacity: 0.08;\n\t}\n\t100% {\n\t\trx: 64px;\n\t\try: 64px;\n\t\topacity: 0;\n\t}\n}#location-detected_c862fbaed6fc77b32a0bbb165b330a48 .Ellipse_3_966 {\n\tanimation: 2s linear 0s infinite normal forwards running Ellipse_3_966;\n\t\trx: 32px;\n\t\try: 32px;\n\t\topacity: 0.32;\n}\n@keyframes Ellipse_3_966 {\n\t0% {\n\t\trx: 32px;\n\t\try: 32px;\n\t\topacity: 0.32;\n\t}\n\t100% {\n\t\trx: 48px;\n\t\try: 48px;\n\t\topacity: 0.08;\n\t}\n}#location-detected_c862fbaed6fc77b32a0bbb165b330a48 .Ellipse_2_820 {\n\tanimation: 2s linear 0s infinite normal forwards running Ellipse_2_820;\n\t\trx: 16px;\n\t\try: 16px;\n\t\topacity: 1;\n}\n@keyframes Ellipse_2_820 {\n\t0% {\n\t\trx: 16px;\n\t\try: 16px;\n\t\topacity: 1;\n\t}\n\t100% {\n\t\trx: 32px;\n\t\try: 32px;\n\t\topacity: 0.32;\n\t}\n}#location-detected_c862fbaed6fc77b32a0bbb165b330a48 .Ellipse_1_774 {\n\tanimation: 2s linear 0s infinite normal forwards running Ellipse_1_774;\n\t\trx: 0px;\n\t\try: 0px;\n\t\topacity: 1;\n}\n@keyframes Ellipse_1_774 {\n\t0% {\n\t\trx: 0px;\n\t\try: 0px;\n\t\topacity: 1;\n\t}\n\t100% {\n\t\trx: 16px;\n\t\try: 16px;\n\t\topacity: 1;\n\t}\n}\n</style>\n<g width="128" height="128" data-name="illustrations/location-detected">\n\t<ellipse opacity="0.03656" fill="#297EF2" data-name="Ellipse 4" class="Ellipse_4_512" transform="translate(64 64)" rx="56.69" ry="56.69" />\n\t<ellipse opacity="0.18968" fill="#297EF2" data-name="Ellipse 3" class="Ellipse_3_966" transform="translate(64 64)" rx="40.69" ry="40.69" />\n\t<ellipse opacity="0.63076" fill="#297EF2" data-name="Ellipse 2" class="Ellipse_2_820" transform="translate(64 64)" rx="24.69" ry="24.69" />\n\t<ellipse fill="#297EF2" data-name="Ellipse 1" class="Ellipse_1_774" transform="translate(64 64)" rx="8.69" ry="8.69" />\n</g>\n</symbol>'}),jr=(sr.a.add(Or),Or),Cr=function(){var e=Object(U.e)().t,t=Object(be.b)().isMobile,a=I().account;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(yr,{label:e("trips.from")+" "+B(a)}),r.a.createElement(hr.a,{icon:jr,iconSize:"medium",title:e("emptyContent.GPSStandby.title"),text:e("emptyContent.GPSStandby.text"),centered:!0}))},xr=new cr.a({id:"cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a",use:"cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a-usage",viewBox:"0 0 128 96",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 128 96" id="cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a"><path fill="#BBD9FD" fill-rule="evenodd" d="M38.15 93.955c2.147.763 7.653 1.424 12.09 1.688 12.119.722 29.052.33 36.23-.998 7.231-1.34 7.553-3.364-10.83-4.366-15.654-.854-33.926.363-37.833 2.175-1.049.487-.991 1.028.343 1.5Z" clip-rule="evenodd" /><path fill="#297EF1" fill-rule="evenodd" d="M68.641 13.698 42.583 19.09c-3.788.788-6.22 4.474-5.436 8.242l10.852 51.938c.784 3.773 4.493 6.186 8.278 5.413l26.062-5.413a6.962 6.962 0 0 0 5.432-8.242l-10.848-51.93c-.788-3.769-4.493-6.19-8.282-5.401Z" clip-rule="evenodd" /><path fill="#BBD9FD" fill-rule="evenodd" d="m80.66 62.672-29.485 6.115-8.385-40.122 29.493-6.106 8.377 40.113Zm-10.502 12.15a2.636 2.636 0 0 1-3.638.748 2.6 2.6 0 0 1-.748-3.618 2.72 2.72 0 0 1 3.634-.756 2.607 2.607 0 0 1 .76 3.618l-.008.008Z" clip-rule="evenodd" /><path fill="#fff" d="M97.828 0c-14.083 0-25.5 11.417-25.5 25.5l.003.345a25.496 25.496 0 0 0 13.273 22.04l.18.096.071-.122c-.38.64-.617 1.306-.617 1.967 0 1.424.679 2.62 2.05 3.099l.23.077c2.601.819 4.952.042 7.797-1.95l.217-.155.561.045a25.8 25.8 0 0 0 1.735.058c14.084 0 25.5-11.417 25.5-25.5S111.912 0 97.828 0Z" /><path fill="#BBD9FD" d="M97.828 0c-14.083 0-25.5 11.417-25.5 25.5l.003.345a25.496 25.496 0 0 0 13.273 22.04l.18.096.071-.122c-.38.64-.617 1.306-.617 1.967 0 1.424.679 2.62 2.05 3.099l.23.077c2.601.819 4.952.042 7.797-1.95l.217-.155.561.045a25.8 25.8 0 0 0 1.735.058c14.084 0 25.5-11.417 25.5-25.5S111.912 0 97.828 0Zm0 3c12.427 0 22.5 10.074 22.5 22.5S110.255 48 97.828 48c-.856 0-1.705-.048-2.547-.142l-.579-.066-.893.65c-2.24 1.608-3.823 2.172-5.372 1.703l-.16-.052c-.037-.013-.04-.018-.04-.267 0-.029.068-.218.181-.409l.061-.097a5.366 5.366 0 0 0 .723-1.677l.294-1.2-1.12-.518A22.501 22.501 0 0 1 75.328 25.5c0-12.426 10.074-22.5 22.5-22.5Z" /><path fill="#297EF2" d="M84 22.2c0-3.92 0-5.88.763-7.378a7 7 0 0 1 3.06-3.059C89.318 11 91.28 11 95.2 11h5.6c3.92 0 5.881 0 7.378.763a7 7 0 0 1 3.059 3.06C112 16.318 112 18.28 112 22.2v5.6c0 3.92 0 5.88-.763 7.378a7 7 0 0 1-3.059 3.059C106.681 39 104.72 39 100.8 39h-5.6c-3.92 0-5.88 0-7.378-.763a7 7 0 0 1-3.059-3.06C84 33.682 84 31.72 84 27.8v-5.6Z" /><path fill="#fff" fill-rule="evenodd" d="M101.07 27.836a.515.515 0 0 1-.759.11c-.66.518-1.471.8-2.316.8-.842 0-1.652-.281-2.31-.796l-.052.035a.516.516 0 0 1-.703-.147.507.507 0 0 1 .144-.693c.198-.13.212-.39.212-.393a.514.514 0 0 1 .163-.357.467.467 0 0 1 .358-.134.504.504 0 0 1 .49.512c0 .004-.001.142-.051.333a2.737 2.737 0 0 0 3.506-.007 1.637 1.637 0 0 1-.05-.318.505.505 0 0 1 .497-.52h.009c.273 0 .499.22.505.493 0 0 .015.261.211.39.229.152.294.461.146.692Zm2.151-5.9a5.5 5.5 0 0 0-1.565-3.249 5.237 5.237 0 0 0-7.466.001 5.5 5.5 0 0 0-1.568 3.265 5.26 5.26 0 0 0-3.18 1.609 5.528 5.528 0 0 0-1.522 3.833c0 3.022 2.394 5.48 5.338 5.48h9.483c2.943 0 5.339-2.458 5.339-5.48 0-2.856-2.14-5.21-4.859-5.46Z" clip-rule="evenodd" /></symbol>'}),wr=(sr.a.add(xr),xr),kr=a("aCpG"),_r=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(U.e)().t,c=Object(be.b)().isMobile,l=Object(g.useClient)();return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement(yr,{label:l.appMetadata.slug}),r.a.createElement(hr.a,{icon:wr,title:i("emptyContent.installApp.title"),text:i("emptyContent.installApp.text"),centered:!0},r.a.createElement(q.a,{className:"u-mt-1",label:i("emptyContent.installApp.action"),onClick:function(){return o(!0)}})),a&&r.a.createElement(kr.a,{onClose:function(){return o(!1)}}))},Dr=a("eCKa"),Pr=function(){var e=Object(U.e)().t,t=Object(be.b)().isMobile,a=Object(g.useClient)(),n=se().checkPermissionsAndEnableTrackingOrShowDialog;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(yr,{label:a.appMetadata.slug}),r.a.createElement(hr.a,{"data-testid":"EmptyContent",className:t?"u-p-1":"u-flex-justify-start u-p-3",icon:r.a.createElement(Dr.a,{app:"coachco2"}),iconSize:"large",title:e("emptyContent.welcome.title"),text:e("emptyContent.welcome.text"),centered:!0},r.a.createElement(q.a,{className:"u-mt-1",label:e("emptyContent.welcome.action"),onClick:O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))})))};function Tr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Sr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Mr=function(e){return e.map((function(e){return e._id})).reduce((function(e,t){var a,n=(a=t,{definition:Object(g.Q)(m.g).where({"cozyMetadata.sourceAccount":a}).select(["cozyMetadata.sourceAccount"]).limitBy(1),options:{as:"".concat(m.g,"/hasTimeseries/sourceAccount/").concat(a),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}});return e[t]=Sr(Sr({},n.options),{},{query:n.definition}),e}),{})},Nr=function(e){var t=e.account,a=e.accounts,n=se(),o=n.isGeolocationTrackingAvailable,i=n.isGeolocationTrackingEnabled,c=a.filter((function(e){return e._id!==t._id})),l=Mr(c),s=Object(g.useQueries)(l);return Object(g.isQueriesLoading)(s)?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):Object.values(s).some((function(e){return e.data.length>0}))?r.a.createElement(Er,null):o?i?r.a.createElement(Cr,null):r.a.createElement(Pr,null):r.a.createElement(_r,null)},Ar=function(){var e=Object(U.e)().t,t=Object(be.b)().isMobile,a=Object(g.useClient)();return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(yr,{label:a.appMetadata.slug}),r.a.createElement(hr.a,{className:t?"u-p-1":"u-flex-justify-start u-p-3",icon:r.a.createElement(Dr.a,{app:"coachco2"}),iconSize:"large",title:e("emptyContent.installKonnector.title"),text:e("emptyContent.installKonnector.text"),centered:!0}))},Lr=function(e){var t=e.account,a=e.accounts,n=e.isAccountLoading,o=e.isTimeseriesLoading,i=e.timeseries;return n||o?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):0===a.length?r.a.createElement(Ar,null):0===i.length?r.a.createElement(Nr,{account:t,accounts:a}):void 0};Lr.propTypes={account:Ge.a.object,isAccountLoading:Ge.a.bool,isTimeseriesLoading:Ge.a.bool,timeseries:Ge.a.arrayOf(Ge.a.object)};var Rr=Lr,Fr=a("eson"),Ir=["days","label","color","isSuccess","body1"],Br=["data"],Gr=function(e){return{color:e&&"var(--successColor)"}},zr=function(e){var t=e.days,a=e.label,n=e.color,o=e.isSuccess,i=e.body1,l=c()(e,Ir),s=Object(U.e)().t,u=A(),d=Object(g.useQuery)(u.definition,u.options),m=d.data,p=c()(d,Br);return Object(g.isQueryLoading)(p)?null:r.a.createElement("div",l,r.a.createElement(Hn.a,{className:"u-mr-half",icon:Fr.a,color:n,size:8}),r.a.createElement($n.a,{display:"inline",variant:i?"body1":"caption",color:"textPrimary",style:Gr(o)},s("bikeGoal.goal_progression",{days:t,daysToReach:mn(m)})),r.a.createElement($n.a,{variant:"caption",style:Gr(o)},a))};zr.defaultProps={color:"#BA5AE8"};var qr=zr,Zr=a("xr2j"),Ur=["data"],Qr=function(e){var t=e.className,a=e.timeseries,n=e.body1,o=e.componentsProps,i=Object(U.e)().t,l=A(),s=Object(g.useQuery)(l.definition,l.options),u=s.data,d=c()(s,Ur);return Object(g.isQueryLoading)(d)?null:r.a.createElement("div",{className:"u-flex ".concat(t)},r.a.createElement(qr,Re()({},o.BikeGoalSummaryItem,{days:vn(a,u),label:i("bikeGoal.my_progression"),isSuccess:bn(a,u),body1:n})),r.a.createElement(Zr.a,{className:"u-mh-1",style:{marginTop:4},orientation:"vertical",flexItem:!0}),r.a.createElement(qr,Re()({},o.BikeGoalSummaryItem,{days:.5,label:i("bikeGoal.average_progression"),color:"#BA5AE83D",body1:n})))};Qr.defaultProps={className:"",componentsProps:{}};var Hr=Qr,Vr=["data"],Yr=function(e){var t=e.timeseriesByYear,a=e.settings;return{whiteSpace:e.preLine&&"pre-line",color:bn(t,a)&&"var(--successColor)"}},Wr=function(e){var t=e.className,a=e.timeseriesByYear,n=e.variant,o=e.preLine,i=Object(U.e)().t,l=A(),s=Object(g.useQuery)(l.definition,l.options),u=s.data,d=c()(s,Vr);return Object(g.isQueryLoading)(d)?null:r.a.createElement($n.a,{className:t,variant:n,style:Yr({timeseriesByYear:a,settings:u,preLine:o})},i("bikeGoal.yearly_goal_progression",{days:vn(a,u),daysToReach:mn(u)}))},Kr=a("Yb2N"),Jr=a("PExr"),Xr=["data"],$r={BikeGoalSummaryItem:{flex:"1 1 0"}},eo=function(e){var t=e.className,a=e.timeseries,n=e.sendToDACC,o=Object(U.e)().t,i=Object(be.b)().isMobile,l=Object(Oe.h)(),s=A(),u=Object(g.useQuery)(s.definition,s.options),d=u.data,m=c()(u,Xr);if(Object(g.isQueryLoading)(m))return null;return r.a.createElement("div",{className:t},i&&r.a.createElement($n.a,{className:"u-mb-half",variant:"h3"},o("bikeGoal.title")),n?r.a.createElement(Hr,{className:pr()("u-mt-half",{"u-ph-1 u-ta-center":i}),timeseries:a,body1:i,componentsProps:{BikeGoalSummaryItem:$r.BikeGoalSummaryItem}}):r.a.createElement(Wr,{className:"u-mt-half",timeseriesByYear:a}),bn(a,d)&&r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Kr.a,{icon:r.a.createElement(Hn.a,{icon:Jr.a,className:"u-ml-half"}),label:o("bikeGoal.achievement_certificate"),color:"success",clickable:!0,onClick:function(){l("certificate/generate")}})))};eo.propTypes={className:Ge.a.string,timeseries:Ge.a.arrayOf(Ge.a.object).isRequired};var to=eo,ao=a("J14j"),no=a("o1F1"),ro=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(be.b)().isMobile?r.a.createElement(ao.a,{textVariant:"h6",onClick:n},a):r.a.createElement(q.a,{ref:t,variant:"secondary",label:a,endIcon:r.a.createElement(Hn.a,{icon:no.a,size:14}),onClick:n})}));ro.displayName="ActionButton",ro.propTypes={label:Ge.a.string,onClick:Ge.a.func};var oo=ro,io=a("lAlC"),co=a("/gvb"),lo=a("hAvo"),so=function(e){var t=e.timeseries,a=Object(Oe.i)().year,o=Object(Oe.h)(),i=Object(n.useRef)(),c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=Object(n.useMemo)((function(){return function(e){var t=new Date;if(!e||0===e.length)return[t.getFullYear().toString()];var a=new Date(function(e){return e.reduce((function(e,t){return e.startDate<t.startDate?e:t}))}(e).startDate),n=Object(io.a)(t,a);return Array.from({length:n+1},(function(e,a){return Object(k.a)(t,a).getFullYear().toString()}))}(t)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(oo,{ref:i,label:a,onClick:function(){return d((function(e){return!e}))}}),u&&r.a.createElement(co.a,{anchorElRef:i,autoclose:!0,onClose:function(){return d(!1)},popperOptions:{placement:"bottom-end"}},m.map((function(e,t){return r.a.createElement(lo.a,{key:t,onClick:function(){return o("/bikegoal/".concat(e,"/trips"))}},e)}))))};so.propTypes={timeseries:Ge.a.arrayOf(Ge.a.object).isRequired};var uo=r.a.memo(so),mo=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(be.b)().isMobile?r.a.createElement(br.a,{onClick:n},a):r.a.createElement(q.a,{ref:t,className:"u-miw-auto u-ml-half",variant:"secondary",label:a,onClick:n})}));mo.displayName="ActionButton",mo.propTypes={label:Ge.a.node,onClick:Ge.a.func};var po=mo,fo=["data"];function bo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function vo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bo(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var go=function(e){var t=Object(g.useClient)(),a=A(),n=Object(g.useQuery)(a.definition,a.options),r=n.data,o=c()(n,fo),i=Object(g.isQueryLoading)(o);return{isLoading:i,value:i?void 0:r&&r[0]?We()(r[0],e):void 0,save:function(){var a=O()(C.a.mark((function a(n){var o;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=vo(vo({},r[0]),{},{_type:m.j}),tt()(o,e,n),a.next=4,t.save(o);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},yo=function(e){var t=e.open,a=e.onClose,o=Object(U.e)().t,i=Object(Oe.h)(),c=go("bikeGoal.activated"),l=c.isLoading,u=c.save,d=Object(n.useState)(!1),m=s()(d,2),p=m[0],f=m[1];return r.a.createElement(Z.a,{open:t,title:o("bikeGoal.deactivate.title"),content:o("bikeGoal.deactivate.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{variant:"secondary",label:o("bikeGoal.deactivate.cancel"),onClick:a}),r.a.createElement(q.a,{color:"error",label:o("bikeGoal.deactivate.stop_participate"),busy:p||l,onClick:function(){f(!0),u(!1),i("/trips")}})),onClose:a})};yo.propTypes={open:Ge.a.bool.isRequired,onClose:Ge.a.func.isRequired};var ho=yo,Eo=a("vc9t"),Oo=a("jMeN"),jo=a("KsnS"),Co=a("QRbe"),xo=function(){var e=Object(U.e)().t,t=Object(be.b)().isMobile,a=Object(n.useRef)(),o=Object(Oe.h)(),i=Object(n.useState)(!1),c=s()(i,2),l=c[0],u=c[1],d=Object(n.useState)(!1),m=s()(d,2),p=m[0],f=m[1],b={divider:{borderTop:0,marginLeft:{isMobile:t}.isMobile?"3rem":void 0}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(po,{ref:a,label:r.a.createElement(Hn.a,{icon:Eo.a}),onClick:function(){return u((function(e){return!e}))}}),l&&r.a.createElement(co.a,{anchorElRef:a,autoclose:!0,onClose:function(){return u(!1)},popperOptions:{placement:"bottom-end"}},r.a.createElement(lo.a,{left:r.a.createElement(Hn.a,{icon:Co.a}),onClick:function(){return o("edit")}},e("bikeGoal.edit.modify")),r.a.createElement(lo.a,{left:r.a.createElement(Hn.a,{icon:jo.a}),onClick:function(){return o("about")}},e("bikeGoal.about.title")),r.a.createElement(Zr.a,{style:b.divider}),r.a.createElement(lo.a,{left:r.a.createElement(Hn.a,{icon:Oo.a}),onClick:function(){return f(!0)}},e("bikeGoal.deactivate.deactivate"))),r.a.createElement(ho,{open:p,onClose:function(){return f(!1)}}))};uo.propTypes={timeseries:Ge.a.arrayOf(Ge.a.object).isRequired};var wo=function(e){var t=e.timeseries,a=Object(be.b)().isMobile,n={actions:{right:{isMobile:a}.isMobile?0:"13rem"}};return r.a.createElement("div",{className:pr()("u-flex u-flex-justify-end",{"u-pos-absolute u-top-m":!a}),style:n.actions},r.a.createElement(uo,{timeseries:t}),r.a.createElement(xo,null))},ko=a("Ht4I"),_o=a("Qugh"),Do=a("kjpz"),Po=function(e){var t=e.icon,a=e.color,n=e.faded,o=e.ghost,i=function(e){var t=e.faded,a=e.color;return t?{color:a||"var(--primaryColor)",backgroundColor:"var(--paperBackgroundColor)",border:"1px solid var(--borderMainColor)"}:{backgroundColor:a}}({faded:n,color:a});return r.a.createElement(_o.b,{style:i,icon:t,size:32,ghost:o})},To=function(e){var t=e.attribute;return r.a.createElement(Po,{icon:oa(t),color:ia(t),ghost:t===_.Z})},So=function(e){var t=e.attribute,a=e.defaultColor,n=Object(Do.a)();return r.a.createElement(Po,{icon:aa(t),color:a?n.palette.primary.main:na(t),faded:!0})},Mo=a("Mb5X"),No=a("MRub"),Ao={co2:{fontWeight:700,whiteSpace:"nowrap",marginRight:"-1rem"},tripIcon:{marginRight:"4px"}},Lo=function(e){var t=e.tripModeIcons,a=e.duration,n=e.distance;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(Hn.a,{key:t,icon:e,size:10,style:Ao.tripIcon})})),"¬∑ ".concat(a," ¬∑ ").concat(n))},Ro=function(e){var t=e.timeserie,a=e.hasDateHeader,o=Object(U.e)().f,i=Object(Oe.g)(),c=Object(Oe.h)(),l=Object(Oe.i)().mode,s=Object(be.c)().isMobile,u=Ga(t),d=Xa(t),m=function(e){return st()(e.aggregation.sections.sort((function(e,t){return e.distance>t.distance?-1:1})).map((function(e){return e.mode})).filter(Boolean))}(t),p=$a(t),f=Object(n.useMemo)((function(){return l?cn(t,l):en(t)}),[t,l]),b=Object(n.useMemo)((function(){return m.map((function(e){return aa(e)}))}),[m]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(No.a,null,o(qa(t),"dddd DD MMMM")),r.a.createElement(Wn.b,{button:!0,onClick:function(){c("".concat(i.pathname,"/").concat(t._id))}},r.a.createElement(Kn.a,null,r.a.createElement(To,{attribute:u})),r.a.createElement(Jn.a,{primary:Ja(t,s)||Ha(t),secondary:r.a.createElement(Lo,{tripModeIcons:b,duration:d,distance:p})}),r.a.createElement($n.a,{style:Ao.co2,variant:"body2"},f),r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:Mo.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Zr.a,null))};Ro.propTypes={timeserie:Ge.a.object.isRequired,hasDateHeader:Ge.a.bool.isRequired};var Fo=r.a.memo(Ro,(function(e,t){return e.timeserie._rev===t.timeserie._rev}));Fo.displayName="MemoizedTripItem";var Io=Fo,Bo=function(e){var t=e.timeseries,a=e.noHeader,o=Object(be.b)().isMobile,i=Object(U.e)().t,c=Object(n.useCallback)((function(e,a){return 0===a||!Object(ko.a)(qa(e),qa(t[a-1]))}),[t]);return r.a.createElement(r.a.Fragment,null,o&&!a&&r.a.createElement(Xn.a,{className:"u-ph-1",style:{height:"4rem",display:"flex",alignItems:"center"},square:!0},r.a.createElement($n.a,{variant:"h5"},i("trips.trips"))),r.a.createElement(Yn.a,null,t.map((function(e,t){return r.a.createElement(Io,{key:"".concat(e.id).concat(t),timeserie:e,hasDateHeader:c(e,t)})}))))};Bo.propTypes={timeseries:Ge.a.arrayOf(Ge.a.object).isRequired,noHeader:Ge.a.bool};var Go=Bo,zo=a("13md"),qo=function(e){var t=e.className,a=e.timeseries,n=e.hasMore,o=e.fetchMore,i=Object(U.e)().t;return r.a.createElement("div",{className:t},r.a.createElement(Go,{timeseries:a,noHeader:!0}),n&&r.a.createElement(zo.a,{label:i("loadMore"),fetchMore:o}))};qo.propTypes={className:Ge.a.string,timeseries:Ge.a.arrayOf(Ge.a.object).isRequired,hasMore:Ge.a.bool,fetchMore:Ge.a.func};var Zo=qo,Uo=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(Oe.h)(),i=Object(Oe.i)().year,c=sn(t,i);return r.a.createElement(ar.a,{open:!0,onClose:function(){return o("/trips")},disableGutters:!0,componentsProps:{dialogTitle:{className:"u-p-0"}},title:r.a.createElement(wo,{timeseries:t}),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(jn,{display:"flex",paddingTop:"1.5rem",marginTop:"3rem",timeseries:c,sendToDACC:n}),r.a.createElement(to,{className:"u-flex u-flex-column u-flex-items-center",timeseries:c,sendToDACC:n}),r.a.createElement(Zo,{className:"u-mt-2",timeseries:c,hasMore:a.hasMore,fetchMore:a.fetchMore}))})};Uo.propTypes={timeseries:Ge.a.arrayOf(Ge.a.object).isRequired,timeseriesQueryLeft:Ge.a.object.isRequired};var Qo=Uo,Ho=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(U.e)().t,i=Object(Oe.h)(),c=Object(Oe.i)().year,l=sn(t,c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(yr,{label:o("bikeGoal.title"),subtitle:r.a.createElement(to,{timeseries:l,sendToDACC:n}),onBack:function(){return i("/trips")}}),r.a.createElement(wo,{timeseries:t}),r.a.createElement(jn,{display:"flex",position:"absolute",top:"2rem",right:"2rem",timeseries:l,sendToDACC:n}),r.a.createElement(Zo,{className:"u-mt-3",timeseries:l,hasMore:a.hasMore,fetchMore:a.fetchMore}))};Ho.propTypes={timeseries:Ge.a.arrayOf(Ge.a.object).isRequired,timeseriesQueryLeft:Ge.a.object.isRequired};var Vo=Ho,Yo=["data"],Wo=["data"],Ko=function(){var e,t=I(),a=t.account,n=t.accounts,o=t.isAccountLoading,i=Object(be.b)().isMobile,l=A(),s=Object(g.useQuery)(l.definition,l.options),u=s.data,d=c()(s,Yo),m=Object(g.isQueryLoading)(d),p=M({accountId:null==a?void 0:a._id},Boolean(a)),f=Object(g.useQueryAll)(p.definition,p.options),b=f.data,v=c()(f,Wo),y=Object(g.isQueryLoading)(v)||v.hasMore;if(m||o||!a||y||0===b.length)return r.a.createElement(Rr,{account:a,accounts:n,isAccountLoading:o,isTimeseriesLoading:y,timeseries:b});var h=!(null==u||null===(e=u[0].bikeGoal)||void 0===e||!e.sendToDACC);return i?r.a.createElement(Qo,{timeseries:b,timeseriesQueryLeft:v,sendToDACC:h}):r.a.createElement(Vo,{timeseries:b,timeseriesQueryLeft:v,sendToDACC:h})},Jo=function(){var e=Object(U.e)().t,t=Object(Oe.h)(),a=pn(),n={typography:{whiteSpace:"pre-line"}};return r.a.createElement(ar.a,{open:!0,title:e("bikeGoal.about.title"),content:r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{className:"u-mb-1",variant:"h5"},e("bikeGoal.about.intro.title")),r.a.createElement($n.a,{variant:"body1",style:n.typography},e("bikeGoal.about.intro.content",{bountyAmount:a})),r.a.createElement($n.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.how_trips_detected.title")),r.a.createElement($n.a,{variant:"body1",style:n.typography},e("bikeGoal.about.how_trips_detected.content")),r.a.createElement($n.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.once_goal_reach.title")),r.a.createElement($n.a,{variant:"body1",style:n.typography},e("bikeGoal.about.once_goal_reach.content"))),onClose:function(){return t("..")}})},Xo=a("UuKj"),$o=function(e){var t=e.itemName,a=e.onClose,o=Object(U.e)().t,i=go("bikeGoal.".concat(t)),c=i.isLoading,l=i.value,u=i.save,d=Object(n.useState)(l),m=s()(d,2),p=m[0],f=m[1],b=Object(n.useState)(!1),v=s()(b,2),g=v[0],y=v[1],h="daysToReach"===t,E=!p||h&&p<=0,j=!p||h&&p<=0,x=p?h&&j?o("bikeGoal.onboarding.steps.daysToReach.error"):" ":o("bikeGoal.edit.required"),w=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,u(p);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Z.a,{open:!0,title:o("bikeGoal.edit.".concat(t)),content:c?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Xo.a,{variant:"outlined",marging:"normal",type:h?"number":void 0,inputProps:h?{min:"1",step:"1"}:void 0,defaultValue:p,required:!0,fullWidth:!0,error:j,helperText:x,onChange:function(e){return f(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{variant:"secondary",label:o("bikeGoal.edit.cancel"),onClick:a}),r.a.createElement(q.a,{className:"u-miw-4",label:o("bikeGoal.edit.submit"),busy:g,disabled:E,onClick:w})),onClose:a})};$o.propTypes={itemName:Ge.a.string.isRequired,onClose:Ge.a.func.isRequired};var ei=$o,ti=a("uiSW"),ai=a("MzjA"),ni=a("EMSc");function ri(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ri(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ii=function(){var e=Object(U.e)().t,t=Object(n.useState)(""),a=s()(t,2),o=a[0],i=a[1],c=go("bikeGoal"),l=c.isLoading,u=c.value,d=c.save,m=function(){d(oi(oi({},u),{},{sendToDACC:!u.sendToDACC}))};return l?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Yn.a,null,r.a.createElement(Wn.b,{button:!0,onClick:function(){return i("lastname")}},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:Qt.a})),r.a.createElement(Jn.a,{primary:r.a.createElement($n.a,{variant:"caption"},e("bikeGoal.edit.lastname")),secondary:r.a.createElement($n.a,{variant:"body1"},u.lastname)})),r.a.createElement(Zr.a,{component:"li",variant:"inset"}),r.a.createElement(Wn.b,{button:!0,onClick:function(){return i("firstname")}},r.a.createElement(Kn.a,null),r.a.createElement(Jn.a,{primary:r.a.createElement($n.a,{variant:"caption"},e("bikeGoal.edit.firstname")),secondary:r.a.createElement($n.a,{variant:"body1"},u.firstname)})),r.a.createElement(Zr.a,{component:"li",variant:"inset"}),r.a.createElement(Wn.b,{button:!0,onClick:function(){return i("daysToReach")}},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:Rt.a})),r.a.createElement(Jn.a,{primary:r.a.createElement($n.a,{variant:"caption"},e("bikeGoal.edit.daysToReach")),secondary:r.a.createElement($n.a,{variant:"body1"},u.daysToReach)})),r.a.createElement(Zr.a,{component:"li",variant:"inset"}),r.a.createElement(Wn.b,{ellipsis:!1,button:!0,onClick:m},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:ti.a})),r.a.createElement(Jn.a,{primary:e("bikeGoal.edit.compare_progress")}),r.a.createElement(ai.a,null,r.a.createElement(ni.a,{className:"u-w-auto",color:"primary",checked:u.sendToDACC,onChange:m})))),Boolean(o)&&r.a.createElement(ei,{itemName:o,onClose:function(){return i("")}}))},ci=function(){var e=Object(U.e)().t,t=Object(Oe.h)();return r.a.createElement(ar.a,{open:!0,disableGutters:!0,title:e("bikeGoal.edit.title"),content:r.a.createElement(ii,null),onClose:function(){return t("..")}})},li=new cr.a({id:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d",use:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d-usage",viewBox:"0 0 106 106",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 106 106" id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d"><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a)"><path d="M16 48c0-19.882 16.118-36 36-36s36 16.118 36 36-16.118 36-36 36-36-16.118-36-36Z" fill="#fff" /></g><path d="M65.11 37.39C63.962 31.193 58.53 26.5 52 26.5c-6.53 0-11.962 4.693-13.11 10.89C32.693 38.538 28 43.97 28 50.5c0 7.364 5.97 13.333 13.333 13.333H62.667C70.03 63.833 76 57.863 76 50.5c0-6.53-4.693-11.962-10.89-13.11Z" fill="#B3D3FF" /><path d="M49.569 36c.837 0 1.528.63 1.622 1.443l.011.19v10.941a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-9.308l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v9.308a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-6.042l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v16.33a6.527 6.527 0 0 1-3 5.495V67a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2.615a6.69 6.69 0 0 1-1.022-.78l-8.425-7.824a1.73 1.73 0 0 1-.262-2.226 1.538 1.538 0 0 1 2.075-.463l4.67 2.827V40.9l.012-.19a1.633 1.633 0 0 1 3.244 0l.01.19v7.675a.49.49 0 0 0 .378.477l.112.013h.654c.27 0 .49-.22.49-.49V37.633l.01-.19A1.633 1.633 0 0 1 49.57 36Z" fill="#297EF2" /><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b)"><rect x="58" y="54" width="32" height="32" rx="8" fill="#fff" /><path d="M72.409 77.886c.2-.05.404.072.455.273l.375 1.5c.007.03.011.061.011.091h1.5c0-.03.004-.06.011-.091l.375-1.5a.375.375 0 1 1 .728.182l-.364 1.455v1.454a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-1.454l-.364-1.455a.375.375 0 0 1 .273-.455Z" fill="#F33136" /><path d="M72.5 78.25c-.414 0-.765-.351-.988-.7-.408-.64-1.3-1.334-2.346-2.147C66.746 73.523 63.5 71 63.5 67c0-4.97 4.701-9 10.5-9v20.25h-1.5Z" fill="#F33136" /><path d="M74 78.25h-1.286c0-.838-.654-1.73-1.476-2.847C69.855 73.523 68 71 68 67c0-4.97 2.686-9 6-9v20.25Z" fill="#FC7B0E" /><path d="M75.5 78.25c.414 0 .765-.351.988-.7.408-.64 1.3-1.334 2.346-2.147C81.254 73.523 84.5 71 84.5 67c0-4.97-4.701-9-10.5-9v20.25h1.5Z" fill="#FFD799" /><path d="M74 78.25h1.286c0-.838.654-1.73 1.476-2.847C78.145 73.523 80 71 80 67c0-4.97-2.686-9-6-9v20.25Z" fill="#FFB64F" /></g><defs><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a" x="0" y="0" width="104" height="104" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b" x="42" y="42" width="64" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter></defs></symbol>'}),si=(sr.a.add(li),li),ui=new cr.a({id:"icon-anonymous_f9180197246a84316517b8157ef006c8",use:"icon-anonymous_f9180197246a84316517b8157ef006c8-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-anonymous_f9180197246a84316517b8157ef006c8"><path d="M4.36 1.24 3 6H1a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2h-2l-1.36-4.76A1.7 1.7 0 0 0 9.062.291L8 1 6.938.292a1.7 1.7 0 0 0-2.578.947Z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.84 13.549A3.502 3.502 0 0 1 0 12.5a3.5 3.5 0 0 1 6.76-1.274A3.49 3.49 0 0 1 8 11c.436 0 .854.08 1.24.226a3.501 3.501 0 1 1-.08 2.323A1.495 1.495 0 0 0 8 13c-.467 0-.883.212-1.16.549ZM3.5 14a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" /></symbol>'}),di=(sr.a.add(ui),ui),mi=new cr.a({id:"icon-export_a08eff636b3b69e5d1cfc230029cdad8",use:"icon-export_a08eff636b3b69e5d1cfc230029cdad8-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-export_a08eff636b3b69e5d1cfc230029cdad8"><path d="M7.165 8.244C7.585 6.01 9.581 4.297 12 4.297s4.415 1.713 4.835 3.947l.143.76.76.14c2.295.418 4.012 2.396 4.012 4.748 0 .555-.096 1.089-.272 1.586l1.704 1.704a6.98 6.98 0 0 0 .818-3.29c0-3.222-2.173-5.925-5.131-6.79C17.984 4.17 15.236 2.047 12 2.047c-3.236 0-5.984 2.123-6.869 5.055C2.173 7.967 0 10.67 0 13.892c0 3.926 3.224 7.08 7.167 7.08H8.25v-2.25H7.167c-2.731 0-4.917-2.177-4.917-4.83 0-2.352 1.717-4.33 4.012-4.749l.76-.139.143-.76Z" fill="#1D212A" fill-opacity=".72" /><path d="M19.499 19.567a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1 0-3h2.368l-4.993-4.993a1.508 1.508 0 0 1 2.018-2.236l.114.104 4.993 4.992v-2.367a1.5 1.5 0 1 1 3 0v6Z" fill="#EA3F3F" /></symbol>'}),pi=(sr.a.add(mi),mi),fi=function(e){var t=e.sharedDataLabel,a=e.open,n=e.onClose,o=e.onRefuse,i=e.onAccept,c=e.showDaccReasonsDialog,l=Object(U.e)().t;return r.a.createElement(ve.a,{variant:"inverted"},r.a.createElement(Z.a,{open:a,onClose:n,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(Hn.a,{icon:si,size:106}),r.a.createElement($n.a,{variant:"h4"},l("dacc.permissionsDialog.title")),r.a.createElement($n.a,{className:"u-mt-1"},l("dacc.permissionsDialog.primaryText")),r.a.createElement(ve.a,{variant:"normal"},r.a.createElement(Xn.a,{className:"u-mt-1-half",elevation:0},r.a.createElement(Yn.a,null,r.a.createElement(Wn.b,{divider:!0},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:pi,size:24})),r.a.createElement(Jn.a,{primary:r.a.createElement($n.a,{variant:"h6"},l("dacc.permissionsDialog.export_outside"))})),r.a.createElement(Wn.b,{dense:!0},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:di,color:"var(--iconTextColor)"})),r.a.createElement(Jn.a,{primary:r.a.createElement($n.a,{variant:"body2"},t)}))))),r.a.createElement($n.a,{className:"u-mt-1-half",style:{textDecoration:"underline"},onClick:c},l("dacc.permissionsDialog.why_asking")),r.a.createElement($n.a,{className:"u-mt-1-half",variant:"caption",color:"textPrimary"},l("dacc.permissionsDialog.secondaryText"))),actionsLayout:"column",actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{label:l("dacc.permissionsDialog.refuse"),onClick:o}),r.a.createElement(q.a,{label:l("dacc.permissionsDialog.accept"),onClick:i}))}))};fi.propTypes={sharedDataLabel:Ge.a.string.isRequired,open:Ge.a.bool.isRequired,onClose:Ge.a.func.isRequired,onRefuse:Ge.a.func.isRequired,onAccept:Ge.a.func.isRequired,showDaccReasonsDialog:Ge.a.func.isRequired};var bi=fi,vi=function(e){var t=e.open,a=e.onClose,n=Object(U.e)().t;return r.a.createElement(Z.a,{open:t,onClose:a,title:n("dacc.reasonsDialog.title"),content:n("dacc.reasonsDialog.content")})};vi.propTypes={open:Ge.a.bool.isRequired,onClose:Ge.a.func.isRequired};var gi=vi,yi=function(e){var t=e.onClose,a=e.onRefuse,o=e.onAccept,i=e.componentProps,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(bi,Re()({open:!0,onClose:t,onRefuse:a,onAccept:o,showDaccReasonsDialog:function(){return d(!0)}},i.DaccPermissionsDialog)),u&&r.a.createElement(gi,{open:!0,onClose:function(){return d(!1)}}))};yi.propTypes={onClose:Ge.a.func.isRequired,onRefuse:Ge.a.func.isRequired,onAccept:Ge.a.func.isRequired,componentProps:Ge.a.shape({DaccPermissionsDialog:Ge.a.shape({sharedDataLabel:Ge.a.string.isRequired}).isRequired}).isRequired};var hi=yi,Ei=function(e){var t=e.onClose,a=e.onRefuse,n=e.onAccept,o=Object(U.e)().t;return r.a.createElement(hi,{onClose:t,onRefuse:a,onAccept:n,componentProps:{DaccPermissionsDialog:{sharedDataLabel:o("dacc.permissionsDialog.anonymized_bikegoal_progression")}}})};Ei.propTypes={onClose:Ge.a.func.isRequired,onRefuse:Ge.a.func.isRequired,onAccept:Ge.a.func.isRequired};var Oi=Ei,ji=a("VXtb"),Ci=a("gHOe"),xi=a("5Q3L"),wi=a("7EAA"),ki=a("lwqu"),_i=a("BxMJ");function Di(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Pi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Di(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ti=Object(n.forwardRef)((function(e,t){var a=Object(U.e)().t,o=Object(n.useState)(!1),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useReducer)((function(e){return!e}),!1),d=s()(u,2),m=d[0],p=d[1],f=go("bikeGoal"),b=f.isLoading,v=f.value,g=void 0===v?{}:v,y=f.save,h=g.onboardingStep,E=void 0===h?0:h,j=g.sendToDACC,x=void 0===j?null:j,w=Object(n.useState)(x),k=s()(w,2),_=k[0],D=k[1],P=fn().sourceIdentity,T={typography:{whiteSpace:"pre-line"}},S=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,y(Pi(Pi({},g),{},{onboardingStep:E-1}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,y(Pi(Pi({},g),{},{onboardingStep:E+1,sendToDACC:_}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ki.a,Re()({},e,{ref:t}),r.a.createElement(_i.a,null,a("bikeGoal.edit.compare_progress")),r.a.createElement(wi.a,null,b?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{style:T.typography},a("bikeGoal.onboarding.steps.comparison.comparisonLegend",{source:P})),r.a.createElement(Ci.a,{className:"u-mt-1"},r.a.createElement(ji.a,{control:r.a.createElement(xi.a,{checked:!0===_,onClick:function(){return l(!0)}}),label:a("bikeGoal.onboarding.steps.comparison.compare"),className:"u-m-0"}),r.a.createElement(ji.a,{control:r.a.createElement(xi.a,{checked:!1===_,onClick:function(){return D(!1)}}),label:a("bikeGoal.onboarding.steps.comparison.doNotCompare"),className:"u-m-0"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(q.a,{onClick:M,label:a("bikeGoal.onboarding.actions.next"),disabled:m||null==_}),r.a.createElement(q.a,{onClick:S,label:a("bikeGoal.onboarding.actions.previous"),disabled:m,variant:"text",className:"u-ml-half"}),m&&r.a.createElement(nr.b,{className:"u-ml-half"}))))),c&&r.a.createElement(Oi,{onClose:function(){return l(!1)},onRefuse:function(){l(!1),D(!1)},onAccept:function(){l(!1),D(!0)}}))}));Ti.displayName="BikeGoalOnboardingComparison";var Si=Ti;function Mi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ni(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ai=Object(n.forwardRef)((function(e,t){var a=Object(U.e)().t,o=Object(Oe.h)(),i=Object(n.useReducer)((function(e){return!e}),!1),c=s()(i,2),l=c[0],u=c[1],d=go("bikeGoal"),m=d.isLoading,p=d.value,f=void 0===p?{}:p,b=d.save,v=f.onboardingStep,g=void 0===v?0:v,y={typography:{whiteSpace:"pre-line"}},h=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,b(Ni(Ni({},f),{},{onboardingStep:g-1}));case 3:u();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=O()(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,b(Ni(Ni({},f),{},{onboarded:!0,activated:!0,showAlert:!1}));case 3:u(),t=(new Date).getFullYear().toString(),o("/bikegoal/".concat(t,"/trips"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ki.a,Re()({},e,{ref:t}),r.a.createElement(_i.a,{optional:r.a.createElement($n.a,{variant:"caption"},a("bikeGoal.about.once_goal_reach.optional"))},a("bikeGoal.about.once_goal_reach.title")),r.a.createElement(wi.a,null,m?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{style:y.typography},a("bikeGoal.about.once_goal_reach.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(q.a,{onClick:E,label:a("bikeGoal.onboarding.actions.finish"),disabled:l}),r.a.createElement(q.a,{onClick:h,label:a("bikeGoal.onboarding.actions.previous"),disabled:l,variant:"text",className:"u-ml-half"}),l&&r.a.createElement(nr.b,{className:"u-ml-half"})))))}));Ai.displayName="BikeGoalOnboardingConclusion";var Li=Ai,Ri=a("0JGJ");function Fi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ii(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Bi=Object(n.forwardRef)((function(e,t){var a=Object(U.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=go("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=p.daysToReach,y=void 0===g?100:g,h=Object(n.useState)(y),E=s()(h,2),j=E[0],x=E[1],w={typography:{whiteSpace:"pre-line"}},k=""===j||j<=0,_=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(Ii(Ii({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(Ii(Ii({},p),{},{onboardingStep:v+1,daysToReach:j}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ki.a,Re()({},e,{ref:t}),r.a.createElement(_i.a,null,a("bikeGoal.onboarding.steps.daysToReach.title")),r.a.createElement(wi.a,null,d?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{style:w.typography},a("bikeGoal.onboarding.steps.daysToReach.legend")),r.a.createElement("div",null,r.a.createElement(Xo.a,{className:"u-w-5 u-mt-1",variant:"outlined",type:"number",label:a("bikeGoal.goal"),defaultValue:j,error:k,helperText:k?a("bikeGoal.onboarding.steps.daysToReach.error"):" ",inputProps:{min:"1",step:"1"},InputProps:{endAdornment:r.a.createElement(Ri.a,{position:"end"},a("bikeGoal.days"))},onChange:function(e){return x(e.target.value)}})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(q.a,{onClick:D,label:a("bikeGoal.onboarding.actions.next"),disabled:c||!!k}),r.a.createElement(q.a,{onClick:_,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(nr.b,{className:"u-ml-half"})))))}));Bi.displayName="BikeGoalOnboardingDaysToReach";var Gi=Bi;function zi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Zi=Object(n.forwardRef)((function(e,t){var a=Object(U.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=go("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g={typography:{whiteSpace:"pre-line"}},y=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(qi(qi({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(qi(qi({},p),{},{onboardingStep:v+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ki.a,Re()({},e,{ref:t}),r.a.createElement(_i.a,null,a("bikeGoal.about.how_trips_detected.title")),r.a.createElement(wi.a,null,d?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{style:g.typography},a("bikeGoal.about.how_trips_detected.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(q.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),r.a.createElement(q.a,{onClick:y,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(nr.b,{className:"u-ml-half"})))))}));Zi.displayName="BikeGoalOnboardingDetection";var Ui=Zi;function Qi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Hi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Vi=Object(n.forwardRef)((function(e,t){var a=Object(U.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=go("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=pn(),y={typography:{whiteSpace:"pre-line"}},h=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(Hi(Hi({},p),{},{onboardingStep:v+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ki.a,Re()({},e,{ref:t}),r.a.createElement(_i.a,null,a("bikeGoal.about.intro.title")),r.a.createElement(wi.a,null,d?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{style:y.typography},a("bikeGoal.about.intro.content",{bountyAmount:g})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(q.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),c&&r.a.createElement(nr.b,{className:"u-ml-half"})))))}));Vi.displayName="BikeGoalOnboardingIntroduction";var Yi=Vi;function Wi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ki(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ji=Object(n.forwardRef)((function(e,t){var a=Object(U.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=go("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=p.lastname,y=void 0===g?"":g,h=p.firstname,E=void 0===h?"":h,j=Object(n.useState)(y),x=s()(j,2),w=x[0],k=x[1],_=Object(n.useState)(E),D=s()(_,2),P=D[0],T=D[1],S=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(Ki(Ki({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(Ki(Ki({},p),{},{onboardingStep:v+1,lastname:w,firstname:P}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ki.a,Re()({},e,{ref:t}),r.a.createElement(_i.a,null,a("bikeGoal.onboarding.steps.naming.title")),r.a.createElement(wi.a,null,d?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,null,a("bikeGoal.onboarding.steps.naming.nameLegend")),r.a.createElement("div",null,r.a.createElement(Xo.a,{variant:"outlined",label:a("bikeGoal.edit.lastname"),defaultValue:w,onChange:function(e){return k(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",null,r.a.createElement(Xo.a,{variant:"outlined",label:a("bikeGoal.edit.firstname"),defaultValue:P,onChange:function(e){return T(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(q.a,{onClick:M,label:a("bikeGoal.onboarding.actions.next"),disabled:c||""===P||""===w}),r.a.createElement(q.a,{onClick:S,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(nr.b,{className:"u-ml-half"})))))}));Ji.displayName="BikeGoalOnboardingNaming";var Xi=Ji,$i=a("pFWb"),ec=function(){var e=Object(U.e)().t,t=Object(Oe.h)(),a=go("bikeGoal.onboardingStep"),n=a.isLoading,o=a.value,i=void 0===o?0:o;return r.a.createElement(ar.a,{open:!0,disableGutters:!0,title:e("bikeGoal.onboarding.title"),content:r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}),!n&&r.a.createElement($i.a,{activeStep:i,orientation:"vertical"},r.a.createElement(Yi,null),r.a.createElement(Gi,null),r.a.createElement(Xi,null),r.a.createElement(Ui,null),r.a.createElement(Si,null),r.a.createElement(Li,null))),onClose:function(){t("..")}})},tc={co2:{fontWeight:700}},ac={modes:So,purposes:To},nc=function(e){var t=e.type,a=e.sortedTimeserieKey,n=ac[t];return r.a.createElement(n,{attribute:a})},rc=function(e){var t=e.sortedTimeserie,a=e.totalCO2,n=e.type,o=Object(U.e)().t,i=Object(Oe.h)(),c=s()(t,2),l=c[0],u=c[1],d=u.timeseries.length,m=u.totalCO2,p=function(e,t){if(0===t)return"0%";var a=(100*e/t).toFixed(2).split("."),n=s()(a,2),r=n[0],o=n[1];return"00"===o?"".concat(r,"%"):"".concat(r,".").concat(o,"%")}(m,a);return 0===d&&0===m?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(Wn.b,{"data-testid":"ListItem",onClick:function(){return i("/analysis/".concat(n,"/").concat(l))},button:!0},r.a.createElement(Kn.a,null,r.a.createElement(nc,{type:n,sortedTimeserieKey:l})),r.a.createElement(Jn.a,{primary:o("trips.".concat(n,".").concat(l)),secondary:"".concat(p," ¬∑ ").concat(o("analysis.travels",d))}),r.a.createElement($n.a,{style:tc.co2,variant:"body2"},ba(m)),r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:Mo.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Zr.a,null))},oc=function(e,t,a){var n=Object.keys(e),r=Object.values(e),o="modes"===t?na:ia,i=r.map((function(e){return e.totalCO2})),c=n.map((function(e){return o(e)}));return{data:{labels:n.map((function(e){return a("trips.".concat(t,".").concat(e))})),datasets:[{id:1,data:i,backgroundColor:c}]},options:{plugins:{tooltip:{displayColors:!1,callbacks:{label:function(e){return"".concat(e.label," ").concat(ba(e.raw))}}}}}}},ic=a("kTYB"),cc=function(e){var t=e.timeseries,a=Object(Oe.i)().mode,o=Object(U.e)().t,i=Object(be.b)().isMobile,c=Object(n.useMemo)((function(){return Ba(t)}),[t]),l=Fa(t),s=Object(n.useMemo)((function(){return oc(c,"modes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(Go,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:pr()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(ic.a,{data:u,options:d,primaryText:ba(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Ce.a,{marginTop:i?void 0:"6rem"},r.a.createElement(Yn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(rc,{key:t,type:"modes",totalCO2:l,sortedTimeserie:e})})))))},lc=["data"],sc=function(){var e=I().account,t=me().selectedDate,a=S(t,null==e?void 0:e._id),n=Object(g.useQueryAll)(a.definition,a.options),o=n.data,i=c()(n,lc);return Object(g.isQueryLoading)(i)||i.hasMore?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(cc,{timeseries:o})},uc=a("XfNG"),dc=a("GXf6"),mc=["/analysis/modes","/analysis/purposes"],pc=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},fc=function(){var e=Object(Oe.h)(),t=Object(Oe.g)().pathname,a=Object(U.e)().t,n=mc.indexOf(mc.find((function(e){return t.includes(e)})));return r.a.createElement(Xn.a,null,r.a.createElement(uc.a,{value:n,onChange:function(t,a){e(mc[a])}},r.a.createElement(dc.a,Re()({label:a("nav.modes")},pc(0))),r.a.createElement(dc.a,Re()({label:a("nav.purposes")},pc(1)))))},bc=a("K4g+"),vc=a("/ENz"),gc=Object(vc.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2]}}})),yc=function(e){var t=e.className,a=gc();return r.a.createElement(Ce.a,{display:"flex",className:t},r.a.createElement(Xn.a,{className:a.paper,elevation:2}),r.a.createElement(Ce.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(br.a,{className:a.iconButton,disabled:!0,size:"medium"},r.a.createElement(Hn.a,{icon:bc.a})),r.a.createElement(br.a,{className:pr()(a.iconButton,"u-ml-half"),disabled:!0,size:"medium"},r.a.createElement(Hn.a,{icon:Mo.a}))))},hc=a("7u78"),Ec=["children","className","spaceBetween"],Oc=Object(vc.a)((function(){return{button:{padding:"0 1rem",justifyContent:function(e){return e.spaceBetween?"space-between":"left"}},typography:{textTransform:"capitalize"}}})),jc=function(e){var t=e.children,a=e.className,n=e.spaceBetween,o=c()(e,Ec),i=Oc({spaceBetween:n});return r.a.createElement(hc.a,Re()({className:pr()(i.button,a),endIcon:r.a.createElement(Hn.a,{icon:no.a,size:10})},o),r.a.createElement($n.a,{className:i.typography},t))},Cc=a("gtDA"),xc=a("1Crc"),wc=["className","type","options","selectedIndex","disabledIndexes","onclick"],kc=Object(vc.a)((function(){return{paper:{textTransform:"capitalize",width:function(e){var t=e.anchorEl;return t?window.getComputedStyle(t).width:void 0},marginTop:2}}})),_c=function(e){var t=e.className,a=e.type,o=e.options,i=e.selectedIndex,l=e.disabledIndexes,u=e.onclick,d=c()(e,wc),m=Object(n.useState)(null),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useState)(i||0),g=s()(v,2),y=g[0],h=g[1],E=kc({anchorEl:f}).paper,O=function(e){return function(){b(null),h(e),u&&u(a,o[e])}};return Object(n.useEffect)((function(){void 0!==i&&h(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(jc,Re()({"data-testid":"dropdown-button",className:t,onClick:function(e){b(e.currentTarget)}},d),o[y]),r.a.createElement(Cc.a,{"data-testid":"dropdown-menu",classes:{paper:E},anchorEl:f,getContentAnchorEl:null,keepMounted:!0,open:Boolean(f),onClose:function(){b(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},elevation:2},o.map((function(e,t){return r.a.createElement(xc.a,{"data-testid":"dropdown-menuItem-".concat(t),key:t,onClick:O(t),selected:t===y,disabled:l&&l.includes(t)},e)}))))};_c.proptypes={className:Ge.a.string,type:Ge.a.oneOfType([Ge.a.string,Ge.a.number]),options:Ge.a.array.isRequired,selectedIndex:Ge.a.number,disabledIndexes:Ge.a.array,onclick:Ge.a.func};var Dc=_c,Pc=function(e){return Array(12).fill().map((function(t,a){return new Intl.DateTimeFormat("".concat(e,"-").concat(e.toUpperCase()),{month:"long"}).format(new Date(0,a))}))},Tc=function(e){return new Date(Math.min.apply(null,e))},Sc=function(e){return new Date(Math.max.apply(null,e))},Mc=function(e,t){return e.map((function(e,a){return t.includes(e)?null:a})).filter((function(e){return null!==e}))},Nc=function(e,t){var a=function(e){var t=Sc(e).getFullYear(),a=Tc(e).getFullYear(),n=Number(a);return Array(t-a+1).fill().map((function(){return n++})).sort().reverse()}(e),n=function(e){return qe()(new Set(e.map((function(e){return e.getFullYear()}))))}(e),r=a.indexOf(t.getFullYear());return{years:a,yearSelectedIndex:r,disabledYearsIndexes:Mc(a,n)}},Ac=ja()((function(e){var t=e.dates,a=e.selectedDate,n=e.lang,r=Pc(n),o=Tc(t),i=Sc(t),c=a.getFullYear(),l=c===i.getFullYear(),s=c===o.getFullYear(),u=12;l?u=i.getMonth()+1:s&&(u=12-o.getMonth());var d,m=function(e){var t=e.monthCount,a=e.allMonthsName,n=e.endToStart;return a.slice(n?a.length-t:0,n?a.length:t)}({monthCount:u,allMonthsName:r,endToStart:s}),p=m.indexOf(r[a.getMonth()]);-1===p&&(l?d=i:s&&(d=o),p=m.indexOf(r[d.getMonth()]));var f=function(e){var t=e.dates,a=e.year,n=e.allMonthsName;return qe()(new Set(t.map((function(e){return e.getFullYear()===a?n[e.getMonth()]:null})).filter((function(e){return null!==e}))))}({dates:t,year:c,allMonthsName:r});return{months:m,monthSelectedIndex:p,disabledMonthsIndexes:Mc(m,f)}})),Lc=ja()((function(e){var t=e.oldDate,a=e.lang,n=e.value,r=e.type,o=e.dates,i=Pc(a);if("year"===r){var c=new Date(new Date(t).setFullYear(n)),l=Ac({dates:o,selectedDate:c,lang:a}),s=l.months,u=l.monthSelectedIndex,d=i.indexOf(s[u]);return new Date(new Date(c).setMonth(d))}if("month"===r){var m=i.indexOf(n);return new Date(new Date(t).setMonth(m))}return t})),Rc=Object(vc.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},leftDropdownButton:{borderTopLeftRadius:1e3,borderBottomLeftRadius:1e3,paddingRight:"2.5rem"},rightDropdownButton:{borderTopRightRadius:1e3,borderBottomRightRadius:1e3,paddingRight:"1.2rem"},divider:{margin:"0.6rem 0"},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2],backgroundColor:e.palette.background.paper}}})),Fc=function(e){var t=e.className,a=e.options,o=e.selectedDate,i=e.setSelectedDate,c=Rc(),l=Object(U.e)().lang,s=Object(n.useMemo)((function(){return Ac({dates:a,selectedDate:o,lang:l})}),[a,o,l]),u=s.months,d=s.monthSelectedIndex,m=s.disabledMonthsIndexes,p=Object(n.useMemo)((function(){return Nc(a,o)}),[a,o]),f=p.years,b=p.yearSelectedIndex,v=p.disabledYearsIndexes,g=function(e,t){var n=Lc({oldDate:o,lang:l,value:t,type:e,dates:a});i(n)},y=function(e){return function(){i((function(t){return new Date(t.setMonth(t.getMonth()+e))}))}},h=function(e){return function(e){var t=e.type,a=e.selectedDate,n=e.options,r=new Date(a.getFullYear(),a.getMonth());if("previous"===t){var o=Tc(n);return new Date(o.getFullYear(),o.getMonth()).getTime()===r.getTime()}if("next"===t){var i=Sc(n);return new Date(i.getFullYear(),i.getMonth()).getTime()===r.getTime()}return!1}({type:e,selectedDate:o,options:a})};return r.a.createElement(Ce.a,{display:"flex",className:t},r.a.createElement(Xn.a,{className:c.paper,elevation:2},r.a.createElement(Dc,{"data-testid":"dropdown-button-year",type:"year",className:c.leftDropdownButton,options:f,onclick:g,selectedIndex:b,disabledIndexes:v}),r.a.createElement(Zr.a,{className:c.divider,orientation:"vertical",flexItem:!0}),r.a.createElement(Dc,{"data-testid":"dropdown-button-month",type:"month",className:c.rightDropdownButton,fullWidth:!0,spaceBetween:!0,options:u,onclick:g,selectedIndex:d,disabledIndexes:m})),r.a.createElement(Ce.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(br.a,{"data-testid":"previous-button",className:c.iconButton,onClick:y(-1),disabled:h("previous"),size:"medium"},r.a.createElement(Hn.a,{icon:bc.a})),r.a.createElement(br.a,{"data-testid":"next-button",className:pr()(c.iconButton,"u-ml-half"),onClick:y(1),disabled:h("next"),size:"medium"},r.a.createElement(Hn.a,{icon:Mo.a}))))};Fc.proptypes={className:Ge.a.string,options:Ge.a.array.isRequired,selectedDate:Ge.a.number.isRequired,setSelectedDate:Ge.a.func.isRequired};var Ic=Fc,Bc=function(e){var t=e.className,a=e.options,n=e.isLoading,o=e.selectedDate,i=e.setSelectedDate;return n?r.a.createElement(yc,{className:t}):r.a.createElement(Ic,{className:t,options:a,selectedDate:o,setSelectedDate:i})},Gc=["data"];function zc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zc(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Zc=function(){var e=me(),t=e.selectedDate,a=e.setSelectedDate,o=I().account,i=T({accountId:null==o?void 0:o._id,limitBy:1e3}),l=Object(g.useQueryAll)(i.definition,qc(qc({},i.options),{},{enabled:Boolean(o)})),s=l.data,u=c()(l,Gc),d=!o||Object(g.isQueryLoading)(u)||u.hasMore,m=Object(n.useMemo)((function(){return function(e,t){return e?null:t.map((function(e){return new Date(e.startDate)}))}(d,s)}),[d,s]);return Object(n.useEffect)((function(){m&&null===t&&a(Sc(m))}),[m,t,a]),Object(n.useEffect)((function(){return function(){a(null)}}),[]),r.a.createElement(Bc,{className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2",isLoading:d||null===t,options:m,selectedDate:t,setSelectedDate:a})},Uc=function(){var e=Object(U.e)().t,t=Object(Oe.h)(),a=Object(Oe.i)().mode,n=Object(be.b)().isMobile,o=e(a?"trips.modes.".concat(a.toUpperCase()):"analysis.mode"),i=a?function(){return t("/analysis/modes")}:void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(yr,{label:o,onBack:i}),n&&r.a.createElement(fc,null),r.a.createElement(Zc,null),r.a.createElement(sc,null))},Qc=function(e){var t=e.timeseries,a=Object(Oe.i)().purpose,o=Object(U.e)().t,i=Object(be.b)().isMobile,c=Object(n.useMemo)((function(){return za(t)}),[t]),l=Fa(t),s=Object(n.useMemo)((function(){return oc(c,"purposes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(Go,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:pr()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(ic.a,{data:u,options:d,primaryText:ba(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Ce.a,{marginTop:i?void 0:"6rem"},r.a.createElement(Yn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(rc,{key:t,type:"purposes",totalCO2:l,sortedTimeserie:e})})))))},Hc=["data"],Vc=function(){var e=I().account,t=me().selectedDate,a=S(t,null==e?void 0:e._id),n=Object(g.useQueryAll)(a.definition,a.options),o=n.data,i=c()(n,Hc);return Object(g.isQueryLoading)(i)||i.hasMore?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Qc,{timeseries:o})},Yc=function(){var e=Object(U.e)().t,t=Object(Oe.h)(),a=Object(Oe.i)().purpose,n=Object(be.b)().isMobile,o=e(a?"trips.purposes.".concat(a.toUpperCase()):"analysis.purpose"),i=a?function(){return t("/analysis/purposes")}:void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(yr,{label:o,onBack:i}),n&&r.a.createElement(fc,null),r.a.createElement(Zc,null),r.a.createElement(Vc,null))},Wc=a("8kh3"),Kc=a("bS3/"),Jc=function(e){var t=Object(U.e)().t,a=I(),n=a.accounts,o=a.account,i=a.setAccount,c=n.map((function(e){return{label:B(e),value:e._id}})),l={label:B(o),value:o._id};return r.a.createElement("div",e,r.a.createElement(Wc.a,null,t("devices.label")),r.a.createElement(Kc.a,{options:c,value:l,label:t("devices.label"),placeholder:t("devices.select"),onChange:function(e){var t=e.value;return i(n.find((function(e){return e._id===t})))}}))},Xc=a("5z4W"),$c=a.n(Xc),el=function(){var e=Object(be.b)().isMobile;return r.a.createElement(Ce.a,{color:"var(--infoColor)",position:"fixed",right:"1rem",bottom:"calc(1rem + ".concat(e?"var(--sidebarHeight)":"0rem",")")},Xc.version)},tl=Object(vc.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),al=function(e){var t=e.className,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=tl(),i=go("CO2Emission.showAlert"),c=i.isLoading,l=i.value,s=void 0===l||l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:o,label:r.a.createElement($n.a,{style:{color:"var(--infoColor)"}},a("dacc.settings.showAlerter")),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(ni.a,{color:"primary"})}))},nl=Object(vc.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),rl=function(e){var t=e.className,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=nl(),i=go("CO2Emission.sendToDACC"),c=i.isLoading,l=i.value,s=void 0!==l&&l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:o,label:a("dacc.settings.anonymous_participation"),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(ni.a,{color:"primary"})}))},ol=a("ro7u");function il(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function cl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?il(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):il(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ll=g.models.file.uploadFileWithConflictStrategy,sl=function(e,t){return t("export.filename",{today:Object(ol.a)(new Date,"yyyy MM dd"),accountLabel:e})},ul=function(e){return[Object.keys(e[0])].concat(qe()(e)).map((function(e){return Object.values(e).map((function(e){return e?'"'.concat(e,'"'):" "})).toString()})).join("\n")},dl=function(){var e=O()(C.a.mark((function e(t,a){var n,r,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchQueryAndGetFromState(A());case 2:return n=e.sent,r=n.data,o=(null==r?void 0:r[0])||{},i=a.flatMap((function(e){return Da(e,o).map((function(t){var a,n,r=(a={},d()(a,_.x.sectionStartDate,t.startDate),d()(a,_.x.sectionEndDate,t.endDate),d()(a,_.x.sectionDuration,t.duration),d()(a,_.x.sectionDistance,t.distance),d()(a,_.x.sectionMode,t.mode),d()(a,_.x.sectionCoordinates,t.coordinates),d()(a,_.x.sectionDistances,t.distances),d()(a,_.x.sectionTimestamps,t.timestamps),d()(a,_.x.sectionSpeeds,t.speeds),a);return cl(cl({},(n={},d()(n,_.x.tripId,e.id),d()(n,_.x.tripStartDate,Pa(e)),d()(n,_.x.tripEndDate,Ta(e)),d()(n,_.x.tripStartDisplayName,wa(e)),d()(n,_.x.tripArrivalDisplayName,ka(e)),d()(n,_.x.tripPurpose,Ca(e)),n)),r)}))})),e.abrupt("return",nt()(i,_.x.tripId));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ml=function(){var e=O()(C.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.timeseries,o=t.accountName,e.prev=1,i=La(r),e.next=5,dl(a,i);case 5:return c=e.sent,l=ul(c),s=sl(o,n),e.next=10,qn(a,n);case 10:return u=e.sent,e.next=13,ll(a,l,{name:s,contentType:"text/csv",dirId:u._id,conflictStrategy:"rename"});case 13:return d=e.sent,m=d.data,e.abrupt("return",{appDir:u,fileCreated:m,isLoading:!1});case 18:return e.prev=18,e.t0=e.catch(1),Tt()("error",e.t0),e.abrupt("return",{appDir:null,fileCreated:null,isLoading:!0});case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),pl=["data"],fl=function(){var e,t,a,r,o=Object(U.e)().t,i=Object(g.useClient)(),l=I().account,u=Object(n.useState)(!1),d=s()(u,2),p=d[0],f=d[1],b=Object(n.useState)({appDir:null,fileCreated:null,isLoading:!0}),v=s()(b,2),h=v[0],E=h.appDir,j=h.fileCreated,x=h.isLoading,w=v[1],k=(e={accountId:null==l?void 0:l._id,limitBy:1e3},t=e.accountId,a=e.date,r=void 0===a?null:a,{definition:Object(g.Q)(m.g).where({"cozyMetadata.sourceAccount":t,startDate:{$gt:r}}).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(m.g,"/sourceAccount/").concat(t),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}),_=Object(g.useQueryAll)(k.definition,k.options),D=_.data,P=c()(_,pl),T=Object(g.isQueryLoading)(P)||P.hasMore;return Object(n.useEffect)((function(){T||p||E||function(){var e=O()(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,ml({client:i,t:o,timeseries:D,accountName:B(l)});case 3:t=e.sent,w(t),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,E,i,p,T,o,D]),{isLoading:x,appDir:E,file:j}},bl=function(e){var t=e.onClose,a=Object(U.e)().t,n=Object(g.useClient)(),o=fl(),i=o.file,c=o.appDir;if(o.isLoading)return r.a.createElement(Z.a,{open:!0,title:a("export.modal.title"),content:r.a.createElement($n.a,{color:"textPrimary"},a("export.modal.content.progress"))});var l=Object(g.generateWebLink)({slug:"drive",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(c._id)});return r.a.createElement(Z.a,{open:!0,onClose:t,title:a("export.modal.title"),content:r.a.createElement($n.a,{color:"textPrimary"},a("export.modal.content.done",{filename:i.name,pathAppDir:c.path})),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{variant:"secondary",onClick:t,label:a("export.modal.button.close")}),r.a.createElement(q.a,{href:l,target:"_blank",label:a("export.modal.button.viewInDrive")}))})},vl=["accountName"],gl=function(e){var t=e.accountName,a=c()(e,vl),o=Object(U.e)().t,i=Object(n.useState)(!1),l=s()(i,2),u=l[0],d=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",a,r.a.createElement(Wc.a,null,o("export.label")),r.a.createElement(q.a,{busy:!1,variant:"secondary",label:o("export.button"),onClick:function(){return d(!0)}})),u&&r.a.createElement(bl,{onClose:function(){return d(!1)},accountName:t}))},yl=Object(n.memo)(gl),hl=a("MN1e"),El=function(){var e=se().getGeolocationTrackingId,t=Object(U.e)().t,a=Object(ie.useWebviewIntent)(),n=function(){var t=O()(C.a.mark((function t(){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:(a=t.sent)&&Object(hl.a)(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"u-mt-1"},r.a.createElement("div",{className:"u-flex u-flex-column"},r.a.createElement("div",null,r.a.createElement(q.a,{label:t("geolocationTracking.settings.sendLogs"),variant:"secondary",onClick:O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("sendGeolocationTrackingLogs");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:"u-mb-1"})),r.a.createElement("div",null,r.a.createElement(q.a,{label:t("geolocationTracking.settings.forceUploadData"),variant:"secondary",onClick:O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("forceUploadGeolocationTrackingData");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:"u-mb-1"})),r.a.createElement("div",null,r.a.createElement(q.a,{label:t("geolocationTracking.settings.copyIdentifier"),variant:"secondary",onClick:n,className:"u-mb-1"}))))},Ol=Object(vc.a)({root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}),jl=function(e){var t=e.className,a=se(),n=a.disableGeolocationTracking,o=a.checkPermissionsAndEnableTrackingOrShowDialog,i=a.isGeolocationTrackingEnabled,c=Object(be.b)().isMobile,l=Object(U.e)().t,s=Ol(),u=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.next=3,n();case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:s,label:l("geolocationTracking.settings.enable"),labelPlacement:c?"start":"end",checked:i,onChange:function(){return u()},control:r.a.createElement(ni.a,{color:"primary"})}))},Cl=Object(vc.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),xl=function(e){var t=e.className,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=Cl(),i=go("bikeGoal.showAlertSuccess"),c=i.isLoading,l=i.value,s=i.save;return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:o,label:r.a.createElement($n.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.showAlerterSuccess")),labelPlacement:n?"start":"end",checked:l,disabled:c,onChange:function(e){s(e.target.checked)},control:r.a.createElement(ni.a,{color:"primary"})}))},wl=Object(vc.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),kl=function(e){var t=e.className,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=wl(),i=go("bikeGoal.showAlert"),c=i.isLoading,l=i.value,s=void 0===l||l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:o,label:r.a.createElement($n.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.showAlerter")),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(ni.a,{color:"primary"})}))},_l=Object(vc.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Dl=function(e){var t=e.className,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=_l(),i=go("bikeGoal.sendToDACC"),c=i.isLoading,l=i.value,s=i.save;return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:o,label:r.a.createElement($n.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.sendToDACC")),labelPlacement:n?"start":"end",checked:!!l,disabled:c,onChange:function(e){s(e.target.checked)},control:r.a.createElement(ni.a,{color:"primary"})}))},Pl=Object(vc.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Tl=function(e){var t=e.className,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=Pl(),i=go("bikeGoal.onboarded"),c=i.isLoading,l=i.value,s=void 0!==l&&l,u=i.save,d=go("bikeGoal.activated"),m=d.isLoading,p=d.value,f=void 0!==p&&p,b=d.save,v=s||f,g=c||m,y=function(){var e=O()(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=3;break}return e.next=3,b(t.target.checked);case 3:return e.next=5,u(t.target.checked);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:o,label:r.a.createElement($n.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.hideOnboarding")),labelPlacement:n?"start":"end",checked:v,disabled:g,onChange:y,control:r.a.createElement(ni.a,{color:"primary"})}))},Sl=Object(vc.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),Ml=function(e){var t=e.className,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=Sl(),i=Object(Oe.h)(),c=go("bikeGoal.onboarded"),l=c.isLoading,s=c.value,u=void 0!==s&&s,d=go("bikeGoal.activated"),m=d.isLoading,p=d.value,f=void 0!==p&&p,b=d.save,v=u&&f,g=l||m,y=function(){var e=O()(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=5;break}return e.next=3,b(t.target.checked);case 3:e.next=6;break;case 5:i("bikegoalonboarding");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:t},r.a.createElement(ji.a,{classes:o,label:a("bikeGoal.settings.participation"),labelPlacement:n?"start":"end",checked:v,disabled:g,onChange:y,control:r.a.createElement(ni.a,{color:"primary"})}))},Nl=function(){var e=Object(U.e)().t,t=se().isGeolocationTrackingAvailable,a=I().account;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(yr,{label:e("nav.settings")}),r.a.createElement("div",{className:"u-mh-1 u-mb-1"},r.a.createElement(Jc,{className:"u-mt-1"}),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Wc.a,null,e("settings.services")),t&&r.a.createElement(jl,{className:"u-mt-half-s"}),r.a.createElement(rl,{className:"u-mt-half-s"}),Y()("coachco2.bikegoal.enabled")&&r.a.createElement(Ml,{className:"u-mt-1-half-s"})),r.a.createElement(yl,{className:"u-mt-1",accountName:B(a)}),Y()("coachco2.admin-mode")&&r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Wc.a,null,e("settings.debug")),r.a.createElement(r.a.Fragment,null,r.a.createElement(al,{className:"u-mt-1-half-s"}),Y()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(kl,{className:"u-mt-1-half-s"}),r.a.createElement(Tl,{className:"u-mt-1-half-s"}),r.a.createElement(xl,{className:"u-mt-1-half-s"}),r.a.createElement(Dl,{className:"u-mt-1-half-s"})))),t&&Y()("coachco2.admin-mode")&&r.a.createElement(El,null),Y()("coachco2.admin-mode")&&r.a.createElement(el,null))):r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"})},Al=a("13ub"),Ll=a.n(Al),Rl=r.a.createContext(),Fl=function(){var e=Object(n.useContext)(Rl);if(!e)throw new Error("useTrip must be used within a TripProvider");return e},Il=function(e){var t=e.timeserie,a=e.children,o=Object(n.useMemo)((function(){return{timeserie:v(t)}}),[t]);return r.a.createElement(Rl.Provider,{value:o},a)},Bl=r.a.memo(Il),Gl=a("whoR"),zl=a("JaZj"),ql=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=ws(),c=i.type,l=i.isSameContact,u=i.contact,d=i.setType,m=i.label,p=i.category,f=Object(U.e)().t,b=Fl().timeserie,v=Object(g.useClient)(),y=Object(fe.b)().showAlert,h=function(){return d()},E=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",o(!0));case 2:return y(f("contactToPlace.addSuccess"),"success"),"start"!==c||jt(b,"end")?h():d("end"),e.next=6,Dt({client:v,type:c,timeserie:b,contact:u,label:m,isSameContact:l,category:p,t:f});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){return o(!1)},x=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(f("contactToPlace.removeSuccess"),"success"),h(),e.next=4,xt({client:v,timeserie:b,type:c,t:f,contact:u});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,l?r.a.createElement(q.a,{variant:"secondary",label:f("contactToPlace.delete"),color:"error",onClick:x}):r.a.createElement(q.a,{variant:"secondary",label:f("contactToPlace.dismiss"),onClick:h}),r.a.createElement(q.a,{label:f("contactToPlace.submit"),onClick:E}),r.a.createElement(zl.a,{open:a,onClose:j},r.a.createElement(Gl.a,{variant:"filled",elevation:6,severity:"error",onClose:j},f("contactToPlace.error"))))},Zl=a("DPrj"),Ul=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(U.e)().t,c=ws(),l=c.contact,u=c.setContact,d=c.setLabel,m=c.setCategory;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wn.b,{button:!0,gutters:"disabled",onClick:function(){return o(!0)}},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:Qt.a})),r.a.createElement(Jn.a,Re()({primary:l?Object(ft.getDisplayName)(l):i("contactToPlace.contact")},!l&&{primaryTypographyProps:{color:"textSecondary"}})),r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:no.a}))),a&&r.a.createElement(Zl.a,{dismissAction:function(){return o(!1)},onItemClick:function(e){u(e),d(i("contactToPlace.home")),m(_.F)}}))},Ql=(a("2nE9"),a("SdDE")),Hl=a("MWqS"),Vl=a("/rN/"),Yl=a("vZHb"),Wl=new cr.a({id:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35",use:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35-usage",viewBox:"0 0 32 33",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 33" id="location_5cb8a90cd75b6b5e8e203a5e2d5f9e35"><path fill="#97ECA1" d="M26 10c0 5.764-6.78 17.628-9.174 21.64a.955.955 0 0 1-1.652 0C12.78 27.628 6 15.763 6 10 6 4.477 10.477 0 16 0s10 4.477 10 10Z" /><circle cx="16" cy="10" r="4" fill="#09AE1C" /></symbol>'}),Kl=(sr.a.add(Wl),Wl),Jl=[51.505,-.09],Xl={height:128,borderRadius:8},$l=Object(vc.a)({icon:{filter:"drop-shadow(0 5px 8px rgba(29,33,42,0.12))"}}),es=function(){var e=Object(n.useState)(),t=s()(e,2),a=t[0],o=t[1],i=Object(n.useState)({x:0,y:0}),c=s()(i,2),l=c[0],u=c[1],d=Fl().timeserie,m=ws().type,p=Object(Ql.a)(),f=$l();return Object(n.useEffect)((function(){!function(e){var t=e.map,a=e.timeserie,n=e.type,r=e.setBounds,o=e.setSVGPositions,i=qe()(Ka(a).properties["".concat(n,"_loc")].coordinates).reverse();t.setView(i);var c=t.getBounds(),l=t.getSize(),s=l.x,u=l.y;r(c),o({x:s/2-24,y:u/2-48})}({map:p,timeserie:d,type:m,setBounds:o,setSVGPositions:u})}),[d,p,m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Hl.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'¬© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),a&&r.a.createElement(Vl.a,{bounds:a},r.a.createElement(Hn.a,{className:f.icon,icon:Kl,size:48,x:l.x,y:l.y})))},ts=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yl.a,{style:Xl,center:Jl,zoom:17,zoomControl:!1,doubleClickZoom:!1,boxZoom:!1,scrollWheelZoom:!1},r.a.createElement(es,null)))},as=function(e){var t=e.onClose,a=Object(n.useState)(),o=s()(a,2),i=o[0],c=o[1],l=Object(U.e)().t,u=ws(),d=u.setLabel,m=u.setCategory;return r.a.createElement(Z.a,{open:!0,title:l("contactToPlace.customLabel"),content:r.a.createElement(Xo.a,{className:"u-mt-half",variant:"outlined",fullWidth:!0,autoFocus:!0,onChange:function(e){return c(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{variant:"secondary",label:l("contactToPlace.cancel"),onClick:t}),r.a.createElement(q.a,{label:l("contactToPlace.submit"),onClick:function(){d(i),m(),t()}})),onClose:t})},ns=a("INxB"),rs=function(e){var t=e.showCustomLabelModal,a=Object(n.forwardRef)((function(e,t){var a=Object(U.e)().t,n=ws().label,o=![a("contactToPlace.work"),a("contactToPlace.home"),void 0].includes(n);return r.a.createElement(ns.a,Re()({},e,{ref:t}),r.a.createElement(Kn.a,null,r.a.createElement(xi.a,{checked:o})),r.a.createElement(Jn.a,{primary:a("contactToPlace.custom")}))}));return a.displayName="CustomLabelActionComponent",{name:"customLabel",action:function(){t()},Component:a}},os=["onClick"],is=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,os),o=Object(U.e)().t,i=ws(),l=i.label,s=i.setLabel,u=i.setCategory,d=o("contactToPlace.home");return r.a.createElement(ns.a,Re()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:s,setCategory:u})}}),r.a.createElement(Kn.a,null,r.a.createElement(xi.a,{checked:l===d})),r.a.createElement(Jn.a,{primary:d}))}));return e.displayName="HomeComponent",{name:_.F,action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r(_.F)},Component:e}},cs=["onClick"],ls=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,cs),o=Object(U.e)().t,i=ws(),l=i.label,s=i.setLabel,u=i.setCategory;return r.a.createElement(ns.a,Re()({},n,{ref:t,onClick:function(){return a({setLabel:s,setCategory:u})}}),r.a.createElement(Kn.a,null,r.a.createElement(xi.a,{checked:void 0===l})),r.a.createElement(Jn.a,{primary:o("contactToPlace.noLabel")}))}));return e.displayName="NoLabelActionComponent",{name:"noLabel",action:function(e,t){var a=t.setLabel,n=t.setCategory;a(),n()},Component:e}},ss=["onClick"],us=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,ss),o=Object(U.e)().t,i=ws(),l=i.label,s=i.setLabel,u=i.setCategory,d=o("contactToPlace.work");return r.a.createElement(ns.a,Re()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:s,setCategory:u})}}),r.a.createElement(Kn.a,null,r.a.createElement(xi.a,{checked:l===d})),r.a.createElement(Jn.a,{primary:d}))}));return e.displayName="WorkActionComponent",{name:_.Ab,action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r(_.Ab)},Component:e}},ds=a("zLZg"),ms=a("ZpM7"),ps=a("4aAG"),fs=a("Nvei"),bs=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=s()(i,2),l=c[0],u=c[1],d=Object(n.useRef)(null),m=Object(U.e)().t,p=ws().label,f=Object(ms.c)([ls,is,us,rs],{showCustomLabelModal:function(){return o(!0)}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wn.b,{ref:d,"aria-controls":"simple-menu","aria-haspopup":"true",button:!0,gutters:"disabled",onClick:function(){return u(!0)}},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:fs.a})),r.a.createElement(Jn.a,{primary:p||m("contactToPlace.noLabel")}),r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:no.a}))),r.a.createElement(ds.a,{ref:d,open:l,actions:f,onClose:function(){return u(!1)}},r.a.createElement(ps.a,null,r.a.createElement(Jn.a,{primary:m("contactToPlace.label"),primaryTypographyProps:{variant:"h6",align:"center"}}))),a&&r.a.createElement(as,{onClose:function(){return o(!1)}}))},vs=a("nUfk"),gs=a("LFaT"),ys=function(){var e=Fl().timeserie,t=ws(),a=t.type,n=t.contact,o=Object(vs.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ts,null),r.a.createElement(Yn.a,null,r.a.createElement(Wn.b,{gutters:"disabled"},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:gs.a})),r.a.createElement(Jn.a,{primary:Va(e,a),secondary:Wa({timeserie:e,type:a,t:o})})),r.a.createElement(Zr.a,{className:"u-ml-3"}),r.a.createElement(Ul,null),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Zr.a,{className:"u-ml-3"}),r.a.createElement(bs,null))))},hs=a("uol1"),Es=a("0pj4"),Os=a("aoYa"),js=function(e){var t=e.isLoading,a=Object(n.useState)(!1),o=s()(a,2),i=o[0],c=o[1],l=ws(),u=l.type,d=l.setType,m=Object(U.e)().t;return r.a.createElement(Z.a,{open:!0,title:r.a.createElement(r.a.Fragment,null,m("contactToPlace.save".concat(Ll()(u),"Place")),r.a.createElement(hs.a,{onClickAway:function(){return c(!1)}},r.a.createElement(Os.a,{onClose:function(){return c(!1)},open:i,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:m("contactToPlace.tooltip"),placement:"top-end",arrow:!0},r.a.createElement(Kn.a,null,r.a.createElement(br.a,{onClick:function(){return c((function(e){return!e}))}},r.a.createElement(Hn.a,{icon:Es.a})))))),content:t?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(ys,null),actions:r.a.createElement(ql,null),onClose:function(){return d()}})},Cs=["data"],xs=r.a.createContext(),ws=function(){var e=Object(n.useContext)(xs);if(!e)throw new Error("useContactToPlace must be used within a ContactToPlaceProvider");return e},ks=function(e){var t,a,o=e.children,i=Object(n.useState)(),l=s()(i,2),u=l[0],d=l[1],p=Object(n.useState)(),f=s()(p,2),b=f[0],v=f[1],h=Object(n.useState)(),E=s()(h,2),O=E[0],j=E[1],C=Object(n.useState)(),x=s()(C,2),w=x[0],k=x[1],_=Fl().timeserie,D=function(e){return{definition:Object(g.Q)(m.c).getById(e),options:{as:"".concat(m.c,"/").concat(e),fetchPolicy:y.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}((null===(t=Ot(_,u))||void 0===t||null===(a=t.data)||void 0===a?void 0:a._id)||" "),P=Object(g.useQuery)(D.definition,D.options),T=P.data,S=c()(P,Cs),M=Object(g.isQueryLoading)(S),N=Object(n.useMemo)((function(){return T&&T._id===(null==b?void 0:b._id)}),[b,T]),A=Object(n.useMemo)((function(){return{type:u,setType:d,contact:b,setContact:v,label:O,setLabel:j,isSameContact:N,category:w,setCategory:k}}),[u,b,O,N,w]);return Object(n.useEffect)((function(){v(T),j(Et({contact:T,timeserie:_,type:u})),k(ht({contact:T,timeserie:_,type:u}))}),[u,null==T?void 0:T._id,null==_?void 0:_._id]),r.a.createElement(xs.Provider,{value:A},o,!!u&&r.a.createElement(js,{isLoading:M}))},_s=r.a.memo(ks),Ds=a("IW7p"),Ps=a.n(Ds),Ts=function(e){var t=e.timeserie,a=e.selectedPurpose,n=e.setContactToPlaceType,r=e.onClose;a===_.y&&(jt(t,"start")?jt(t,"end")||n("end"):n("start")),r()},Ss=a("PG+o");function Ms(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ns(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ms(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var As=function(){var e=O()(C.a.mark((function e(){var t,a,n,r,o,i,c=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.isRecurringTrip,i=Ns({},n),o&&(i=nn(i,r)),i=rn(i,r,{isRecurringTrip:o}),e.next=6,a.save(i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ls=function(){var e=O()(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.purpose,e.next=3,As({client:a,timeserie:n,purpose:r,isRecurringTrip:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rs=function(){var e=O()(C.a.mark((function e(){var t,a,n,r,o,i=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.oldPurpose,e.next=3,As({client:a,timeserie:n,purpose:r,isRecurringTrip:!0});case 3:Object(Ss.a)(a,_.gb,{fields:{docId:n._id,oldPurpose:o}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fs=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.icon,r=a.withDescription,o=a.withInfo,i=a.action,c=a.children,l=a.defaultModes,s=void 0===l?{}:l,u=Object.values(s).some((function(e){return e===t})),d=u?"".concat(e("trips.modes.".concat(t))," (").concat(e("trips.modes.default"),")"):e("trips.modes.".concat(t));return Ns(Ns(Ns(Ns({id:t,title:d,isChecked:!1,icon:So({attribute:n||t,defaultColor:!0})},r&&{description:sa(t)}),o&&{info:sa(t)}),i&&{action:i}),c&&{children:c})},Is=a("IW7r"),Bs=a("/dlN"),Gs=function(e){return{children:ra.map((function(t){return{id:t,title:e("trips.purposes.".concat(t)),icon:r.a.createElement(To,{attribute:t})}}))}},zs=function(e){var t=e.onClose,a=Object(n.useState)(!1),o=s()(a,2),i=o[0],c=o[1],l=Object(n.useState)(null),u=s()(l,2),d=u[0],m=u[1],p=Object(U.e)().t,f=Object(g.useClient)(),b=Fl().timeserie,v=ws(),y=v.type,h=v.setType,E=function(){var e=O()(C.a.mark((function e(a){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(a.id),(n=Ga(b))===_.Z){e.next=6;break}c(!0),e.next=9;break;case 6:return e.next=8,Rs({client:f,timeserie:b,purpose:a.id,oldPurpose:n});case 8:Ts({timeserie:b,selectedPurpose:a.id,setContactToPlaceType:h,onClose:t});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=Object(n.useMemo)((function(){return function(e){var t=Ga(b);return t?e.id===t:e.id===_.Z}}),[b]);return i?r.a.createElement(Z.a,{open:!0,title:p("recurring.confirmDialog.title"),content:p("recurring.confirmDialog.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Bs.a,{theme:"secondary",label:p("recurring.confirmDialog.decline"),onClick:O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ls({client:f,timeserie:b,purpose:d});case 2:Ts({timeserie:b,selectedPurpose:d,setContactToPlaceType:h,onClose:t});case 3:case"end":return e.stop()}}),e)})))}),r.a.createElement(Bs.a,{theme:"primary",label:p("recurring.confirmDialog.confirm"),onClick:O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rs({client:f,timeserie:b,purpose:d,oldPurpose:Ga(b)});case 2:Ts({timeserie:b,selectedPurpose:d,setContactToPlaceType:h,onClose:t});case 3:case"end":return e.stop()}}),e)})))})),onClose:t}):y?r.a.createElement(js,{onClose:t}):r.a.createElement(Is.a,{title:p("tripEdit.selectPurpose"),onClose:t,onSelect:E,isSelected:j,options:Gs(p)})},qs=r.a.memo(zs),Zs=function(e){var t=e.recurring,a=e.setRecurring,n=Object(U.e)().t;return r.a.createElement(Yn.a,null,r.a.createElement(Wn.b,{button:!0,onClick:function(){return a(!1)}},r.a.createElement(Kn.a,null,r.a.createElement(xi.a,{value:"no",checked:!t})),r.a.createElement(Jn.a,{primary:n("recurring.occasionalTrip")})),r.a.createElement(Wn.b,{button:!0,onClick:function(){return a(!0)}},r.a.createElement(Kn.a,null,r.a.createElement(xi.a,{value:"yes",checked:t})),r.a.createElement(Jn.a,{primary:n("recurring.recurringTrip")})))},Us=function(){var e=Object(U.e)().t,t=Object(be.b)().isMobile,a=r.a.useState(!1),n=s()(a,2),o=n[0],i=n[1],c=function(){i(!1)};return t?r.a.createElement(Yn.a,null,r.a.createElement(Wn.b,{className:"u-mb-half u-pl-1-half",style:{minHeight:"3rem"}},r.a.createElement(Jn.a,{className:"u-pv-0",primary:e("recurring.title"),primaryTypographyProps:{variant:"h6"}}),r.a.createElement(ai.a,null,r.a.createElement(hs.a,{onClickAway:c},r.a.createElement(Os.a,{onClose:c,open:o,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:e("recurring.tooltip"),placement:"top-end",arrow:!0},r.a.createElement(br.a,{onClick:function(){i(!o)}},r.a.createElement(Hn.a,{icon:Es.a}))))))):r.a.createElement("div",{className:"u-pt-1"},e("recurring.title"),r.a.createElement(Os.a,{title:e("recurring.tooltip"),placement:"top",arrow:!0},r.a.createElement(br.a,null,r.a.createElement(Hn.a,{icon:Es.a}))))},Qs=a("/h+6"),Hs=a("epof"),Vs=function(e){var t,a,n=e.onClose,o=Object(be.b)().isMobile,i=Fl().timeserie,c=Object(g.useClient)(),l=Ga(i),s=null!==(t=null==i||null===(a=i.aggregation)||void 0===a?void 0:a.recurring)&&void 0!==t&&t,u=function(){var e=O()(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Rs({client:c,timeserie:i,purpose:l,oldPurpose:l});case 3:e.next=7;break;case 5:return e.next=7,Ls({client:c,timeserie:i,purpose:l});case 7:n();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?r.a.createElement(Qs.a,{onClose:n,backdrop:!0},r.a.createElement(Hs.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(Us,null),r.a.createElement(Zr.a,null),r.a.createElement(Zs,{recurring:s,setRecurring:u}))):r.a.createElement(Z.a,{open:!0,onClose:n,disableGutters:!0,title:r.a.createElement(Us,null),content:r.a.createElement(Zs,{recurring:s,setRecurring:u})})},Ys=a("bnOl"),Ws=a("ee3C"),Ks=a("Vc4F"),Js=a("ksij"),Xs=a("86gN"),$s=Object(vc.a)((function(e){return{dotStart:{marginTop:"9px"},dot:{marginBottom:"-1px"},connector:{width:"6px",backgroundColor:e.palette.primary.main},item:{marginTop:"-9px",paddingLeft:"11px","&::before":{padding:0,flexGrow:0},cursor:function(e){return e.isCommute?"pointer":void 0}},contentWrapper:{display:"flex",marginLeft:"11px"},endLabel:{fontWeight:700}}})),eu=function(e){var t,a=e.type,o=Object(U.e)(),i=o.t,c=o.f,l=o.lang,s=ws().setType,u=Fl().timeserie,m=Ga(u)===_.y,p=$s({isCommute:m}),f=Object(n.useMemo)((function(){return"end"!==a}),[a]),b=Object(n.useMemo)((function(){return"start"===a}),[a]),v=Ct({timeserie:u,type:a,t:i}),g=v||Va(u,a),y=v?Va(u,a):null;return r.a.createElement(Js.a,{className:p.item,onClick:m?function(){return s(a)}:void 0},r.a.createElement(Xs.a,null,r.a.createElement(Ks.a,{className:pr()((t={},d()(t,p.dot,f),d()(t,p.dotStart,b),t)),color:"primary",variant:"outlined"}),f&&r.a.createElement(Ys.a,{className:p.connector})),r.a.createElement(Ws.a,null,r.a.createElement("div",{className:p.contentWrapper},r.a.createElement("div",{className:"u-flex-grow-1"},r.a.createElement($n.a,null,g),y&&r.a.createElement($n.a,{variant:"caption"},y)),r.a.createElement($n.a,{className:p.endLabel,variant:"body2",component:"div"},ga({f:c,lang:l,date:Ua(u,a)})))))},tu=r.a.memo(eu),au=a("2Kpg");function nu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ru(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ou=function(e){var t,a=e.item,o=e.onClose,i=e.onConfirm,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],m=l[1],p=Object(n.useState)(!1),f=s()(p,2),b=f[0],v=f[1],y=Object(n.useState)(!1),h=s()(y,2),E=h[0],j=h[1],x=Object(be.b)().isDesktop,w=Object(U.e)().t,k=Object(g.useClient)(),_=A(),D=Object(g.useQuery)(_.definition,_.options).data,P=null===(t=D[0])||void 0===t?void 0:t.defaultTransportModeByGroup,T=null==P?void 0:P[da(a.id)];Object(n.useEffect)((function(){m(T===a.id)}),[P,T,a.id]),Object(n.useEffect)((function(){var e=T&&T===a.id;v(u===!e)}),[T,u,a.id]);var S=function(){var e=O()(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,k.save(ru(ru({},D[0]),{},{defaultTransportModeByGroup:ru(ru({},P),{},d()({},da(a.id),u?a.id:""))}));case 3:i();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ar.a,{open:!0,title:a.title,size:"large",disableGutters:!0,content:r.a.createElement(Yn.a,null,r.a.createElement(Wn.b,{ellipsis:!1,button:!0,onClick:function(){m((function(e){return!e}))}},r.a.createElement(Kn.a,null,r.a.createElement(au.a,{checked:u})),r.a.createElement(Jn.a,{primary:w("Modes.DefaultDialog.primary"),secondary:w("Modes.DefaultDialog.secondary")}))),onClose:o,actions:r.a.createElement("div",{className:pr()("u-flex",{"u-w-100 u-ph-1":!x,"u-p-1":x}),style:{gap:"1rem"}},r.a.createElement(q.a,{label:w("Modes.DefaultDialog.actions.cancel"),variant:"secondary",onClick:o}),r.a.createElement(q.a,{label:w("Modes.DefaultDialog.actions.save"),busy:E,onClick:S,disabled:!b}))})},iu=function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=e.t,o=t.series.flatMap((function(e,t){return e.features.flatMap((function(e,n){if(e.features)return e.features.flatMap((function(e,r){if(e.id===a)return{feature:e,serieIndex:t,firstIndex:n,secondIndex:r}}))}))})).find((function(e){return e}));if(o){var i=o.feature,c=o.serieIndex,l=o.firstIndex,s=o.secondIndex,u=tt()(Ps()(i),"properties.manual_mode",n);return function(e){var t=e.timeseries,a=e.makeSections,n=e.t;return t.map((function(e){var t=e.series[0],r=0,o=0,i=0,c=0,l=[],s=a(e).map((function(e){var t={startDate:e.startDate,endDate:e.endDate,CO2:ha(e),calories:Ea(e),avgSpeed:e.avgSpeed,duration:e.duration,distance:e.distance,mode:e.mode,id:e.id};return r+=t.CO2,o+=t.distance,i+=t.duration,c+=t.calories,l.push(t.mode),t}));return Ma(Ma({},e),{},{aggregation:{automaticTitle:Ra(e,n),totalCO2:r,totalDistance:o,totalDuration:i,totalCalories:c,startPlaceDisplayName:Qa(e),endPlaceDisplayName:Ha(e),coordinates:{startPoint:un(e),endPoint:dn(e)},purpose:Ca(t)||xa(t),modes:l,sections:s}})}))}({timeseries:[tt()(Ps()(t),"series[".concat(c,"].features[").concat(l,"].features[").concat(s,"]"),u)],makeSections:function(e){return function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=t.aggregation.sections,o=r.find((function(e){return e.id===a})),i=Object.assign({},o,{mode:n});return r.map((function(e){return e.id===a?i:e}))}({timeserie:e,sectionId:a,mode:n})},t:r})[0]}return t},cu=function(e){var t=e.item,a=e.onClick;return r.a.createElement(ai.a,null,r.a.createElement(br.a,{onClick:function(){return a({item:t})}},r.a.createElement(Hn.a,{icon:ke.a})))},lu=function(e){var t=e.section,a=e.onClose,o=Object(n.useState)(null),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useState)(!1),d=s()(u,2),m=d[0],p=d[1],f=Object(U.e)().t,b=Object(g.useClient)(),v=Fl().timeserie,y=A(),h=Object(g.useQuery)(y.definition,y.options).data,E=Object(n.useMemo)((function(){return(null==h?void 0:h[0])||{}}),[h]),j=null==E?void 0:E.defaultTransportModeByGroup,x=Object(n.useCallback)(function(){var e=O()(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=iu({timeserie:v,sectionId:t.id,mode:n.id,t:f}),e.next=3,b.save(r);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b,v,a,t.id,f]),w=Object(n.useMemo)((function(){return function(e){return e.id===t.mode}}),[t.mode]),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.defaultModes,n=t.action;return{children:[Fs(e,_.zb,{withInfo:!0}),Fs(e,"categories.".concat(_.h.name),{icon:_.k,children:_.h.modes.map((function(t){return Fs(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),Fs(e,"categories.".concat(_.t.name),{icon:_.w,children:_.t.modes.map((function(t){return Fs(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),Fs(e,"categories.".concat(_.fb.name),{icon:_.n,children:_.fb.modes.map((function(t){return Fs(e,t,{withDescription:!0})}))}),Fs(e,_.a,{withInfo:!0}),Fs(e,_.xb,{withInfo:!0})]}}(f,{defaultModes:j,action:{Component:cu,props:{onClick:function(e){var t=e.item;l(t)}}}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Is.a,{title:r.a.createElement(r.a.Fragment,null,f("tripEdit.selectMode"),r.a.createElement(hs.a,{onClickAway:function(){return p(!1)}},r.a.createElement(Os.a,{open:m,title:f("tripEdit.modeTooltip"),disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,placement:"top-end",arrow:!0,onClose:function(){return p(!1)}},r.a.createElement(br.a,{onClick:function(){return p((function(e){return!e}))}},r.a.createElement(Hn.a,{icon:Es.a}))))),onClose:a,onSelect:x,isSelected:w,options:k,ellipsis:!1}),!!c&&r.a.createElement(ou,{item:c,onClose:function(){return l(null)},onConfirm:a}))},su=r.a.memo(lu),uu=Object(vc.a)((function(e){return{iconItem:{marginTop:"-14px",cursor:"pointer","&::before":{padding:0,flexGrow:0}},iconDot:{backgroundColor:e.palette.background.paper,borderWidth:"1px",borderColor:e.palette.border.main,margin:0,padding:0,boxShadow:"none"},icon:{color:e.palette.primary.main,backgroundColor:e.palette.background.paper},connector:{width:"6px",backgroundColor:e.palette.primary.main}}})),du=function(e){var t=e.icon,a=e.label,n=e.endLabel,o=e.onClick,i=uu();return r.a.createElement(Js.a,{className:i.iconItem,onClick:o},r.a.createElement(Xs.a,null,r.a.createElement(Ks.a,{className:i.iconDot},r.a.createElement(_o.b,{icon:t,className:i.icon,size:32})),r.a.createElement(Ys.a,{className:i.connector})),r.a.createElement(Ws.a,{className:"u-flex"},r.a.createElement($n.a,{className:"u-flex-grow-1",variant:"body2",color:"textSecondary"},a),r.a.createElement($n.a,{className:i.endLabel,variant:"body2",component:"div"},n)))},mu=r.a.memo(du),pu=function(){var e=Fl().timeserie,t=Object(U.e)(),a=t.t,o=t.f,i=t.lang,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=Object(n.useState)(null),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useCallback)((function(e){return function(){b(e),d(!0)}}),[]),g=Object(n.useCallback)((function(){return d(!1)}),[]);return r.a.createElement(r.a.Fragment,null,e.aggregation.sections.map((function(e,t){return r.a.createElement(mu,{key:t,label:"".concat(a("trips.modes.".concat(e.mode))," - ").concat(va(e.duration)," - ").concat(fa(e.distance)," - ").concat((n=e.avgSpeed,"".concat(Math.round(n)," km/h"))),endLabel:ga({f:o,lang:i,date:new Date(e.endDate)}),icon:aa(e.mode),onClick:v(e)});var n})),u&&r.a.createElement(su,{section:f,onClose:g}))},fu=r.a.memo(pu),bu=function(e){var t=e.purpose,a=e.onClick,n=Object(U.e)().t;return r.a.createElement(Wn.b,{button:!0,onClick:a},r.a.createElement(Kn.a,null,r.a.createElement(To,{attribute:t})),r.a.createElement(Jn.a,{primary:n("purpose"),primaryTypographyProps:{variant:"caption"},secondary:n("trips.purposes.".concat(t)),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))};bu.defaultProps={purpose:_.Z};var vu=r.a.memo(bu),gu=a("JKPP"),yu=a("UR0v"),hu=function(e){var t=e.isRecurringTrip,a=e.purpose,n=e.onClick,o=Object(U.e)().t;return a===_.Z?null:r.a.createElement(Wn.b,{button:!0,onClick:n},r.a.createElement(Kn.a,null,r.a.createElement(Hn.a,{icon:yu.a})),r.a.createElement(Jn.a,{primary:o("recurring.title"),primaryTypographyProps:{variant:"caption"},secondary:o("recurring.".concat(t?"recurringTrip":"occasionalTrip")),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))},Eu={divider:{margin:"-10px -32px 10px"}},Ou=function(){var e,t=Fl().timeserie,a=Object(be.b)().isDesktop,o=Object(n.useState)(!1),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useState)(!1),d=s()(u,2),m=d[0],p=d[1],f=Ga(t),b=null==t||null===(e=t.aggregation)||void 0===e?void 0:e.recurring;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Hs.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(gu.a,{className:"u-pb-0 u-mb-0"},r.a.createElement(tu,{type:"start"}),r.a.createElement(fu,null),r.a.createElement(tu,{type:"end"}))),a&&r.a.createElement(Zr.a,{style:Eu.divider}),r.a.createElement(Hs.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(Yn.a,{className:"u-pv-half"},r.a.createElement(vu,{purpose:f,onClick:function(){return l(!0)}}),c&&r.a.createElement(qs,{onClose:function(){return l(!1)}}),r.a.createElement(Zr.a,{variant:"inset",component:"li"}),r.a.createElement(hu,{isRecurringTrip:b,purpose:f,onClick:function(){return p(!0)}}),m&&r.a.createElement(Vs,{onClose:function(){return p(!1)}}))))},ju=r.a.memo(Ou);function Cu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var wu=function(e){var t=e.title,a=e.value,o=e.highlighted,i=Object(n.useMemo)((function(){return function(e){var t=e.highlighted;return{infoBlock:{backgroundColor:t?"var(--primaryColor)":"none",flex:"1 1 0"},typography:xu({},t&&{color:"var(--primaryContrastTextColor)"})}}({highlighted:o})}),[o]);return r.a.createElement("div",{style:i.infoBlock,className:"u-h-100 u-flex u-flex-column u-flex-items-center u-flex-justify-center u-ta-center u-bdrs-4"},r.a.createElement($n.a,{style:i.typography,variant:"caption"},t),r.a.createElement($n.a,{style:i.typography,variant:o?"h6":"body1"},a))},ku=r.a.memo(wu),_u=function(){var e=Fl().timeserie,t=Object(U.e)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ku,{title:t("trips.duration"),value:Xa(e)}),r.a.createElement(ku,{title:t("trips.distance"),value:$a(e)}),r.a.createElement(ku,{title:t("trips.calories"),value:tn(e)}),r.a.createElement(ku,{title:t("trips.co2"),value:en(e),highlighted:!0}))},Du=r.a.memo(_u),Pu=a("bOJc"),Tu=a("l149"),Su={mediumHeightRatio:.66},Mu=Object(vc.a)({mapContainer:{height:function(e){var t=e.toolbarHeight;return"calc(100vh - ".concat(t,"px - var(--sidebarHeight) - env(safe-area-inset-bottom))")}},bottomSheetHeader:{gap:"0.5rem"}}),Nu=function(e){var t=e.titleRef,a=Object(n.useState)(0),o=s()(a,2),i=o[0],c=o[1],l=Mu({toolbarHeight:i}),u=Object(n.useMemo)((function(){return{height:i}}),[i]);return Object(n.useEffect)((function(){null!=t&&t.current&&c(t.current.offsetHeight)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"u-w-100 u-pos-fixed ".concat(l.mapContainer)},r.a.createElement(Gu,null)),r.a.createElement(Qs.a,{settings:Su,toolbarProps:u},r.a.createElement(Tu.a,{className:"u-h-3 u-pb-half u-ph-half ".concat(l.bottomSheetHeader)},r.a.createElement(Du,null)),r.a.createElement(ju,null)))},Au=r.a.memo(Nu),Lu=a("CUq/"),Ru=a("8IOV"),Fu=a.n(Ru),Iu=function(){var e=Object(n.useRef)(),t=Object(be.b)().isMobile,a=Object(Do.a)(),o=Fl().timeserie,i=Object(Ql.a)(),c=Object(n.useMemo)((function(){return function(e){return{style:function(t){return{weight:"section"===t.properties.feature_type?5:2,color:e.palette.primary.main}},pointToLayer:function(e,t){return Lu.f.marker(t,{icon:Lu.f.divIcon({html:"<div></div>",iconSize:[12,12],className:"".concat(Fu.a["cozy-leaflet-markers"]," ").concat("end_place"===e.properties.feature_type?"".concat(Fu.a["cozy-leaflet-markers-end"]):"".concat(Fu.a["cozy-leaflet-markers-start"]))})})},markerIcon:function(e,t){return Lu.f.marker(e,{icon:Lu.f.divIcon({html:"".concat(t())})})}}}(a)}),[a]),l=c.pointToLayer,s=c.style,u=Object(n.useMemo)((function(){return t?Su.mediumHeightRatio:0}),[t]);return Object(n.useEffect)((function(){var t=e.current.getBounds(),a=[16,16],n=[16,16+i.getSize().y*u];i.fitBounds(t,{paddingTopLeft:a,paddingBottomRight:n})}),[i,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Hl.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'¬© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(Pu.a,{ref:e,data:Ka(o),pointToLayer:l,style:s}))},Bu=[51.505,-.09],Gu=function(){return r.a.createElement(Yl.a,{className:"u-h-100",center:Bu,zoom:13},r.a.createElement(Iu,null))},zu={map:{height:"400px",margin:"-24px -32px 0"},divider:{margin:"10px -32px 25px"},bottomSheetHeader:{gap:"0.5rem"}},qu=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:zu.map},r.a.createElement(Gu,null)),r.a.createElement("div",{style:zu.bottomSheetHeader,className:"u-mt-1 u-h-3 u-flex u-flex-items-center u-pb-half"},r.a.createElement(Du,null)),r.a.createElement(Zr.a,{style:zu.divider}),r.a.createElement(ju,null))},Zu=function(){var e=Object(U.e)().f,t=Object(be.c)().isMobile,a=Object(Oe.i)().timeserieId,o=Fl().timeserie,i=Object(Oe.g)().pathname,c=Object(Oe.h)(),l=Object(n.useRef)(null);return r.a.createElement(ar.a,{open:!0,size:t?void 0:"large",transitionDuration:t?0:void 0,disableGutters:t,title:r.a.createElement(r.a.Fragment,null,Ja(o,t)||Ha(o),r.a.createElement($n.a,{className:"u-mt-half",variant:"caption",align:t?"center":void 0},an(o,e))),titleRef:l,content:t?r.a.createElement(Au,{titleRef:l}):r.a.createElement(qu,null),onClose:function(){return c(i.split("/".concat(a))[0])}})},Uu=r.a.memo(Zu),Qu=["data"],Hu=function(){var e=Object(Oe.g)().pathname,t=function(e){return{definition:Object(g.Q)(m.g).getById(e).include(["startPlaceContact","endPlaceContact"]),options:{as:"".concat(m.g,"/").concat(e),fetchPolicy:y.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}(Object(n.useMemo)((function(){return e.split("/").pop()}),[e])),a=Object(g.useQuery)(t.definition,t.options),o=a.data,i=c()(a,Qu);return Object(g.isQueryLoading)(i)?r.a.createElement(nr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Bl,{timeserie:o},r.a.createElement(_s,null,r.a.createElement(Uu,null)))},Vu=r.a.memo(Hu),Yu=a("PKog"),Wu={minHeight:"48px",display:"flex",alignItems:"center"},Ku=function(){var e=Object(U.e)().t,t=Object(Do.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zr.a,null),r.a.createElement(Xn.a,{style:Wu,className:"u-ph-1-s u-ph-2",square:!0,elevation:0},r.a.createElement(Hn.a,{className:"u-mr-half",icon:Fr.a,color:"var(--primaryColor)",size:8}),r.a.createElement($n.a,{className:"u-mr-1",display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.yours")),r.a.createElement(Hn.a,{className:"u-mr-half",icon:Fr.a,color:Object(Yu.a)(t.palette.primary.main,.24),size:8}),r.a.createElement($n.a,{display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.average"))))},Ju=a("HO4k"),Xu=a("DmLS");Ju.f.register(Ju.e,Ju.i,Ju.c,Ju.n),Ju.f.defaults.font={family:"Lato, sans-serif",size:"11",weight:"700"};var $u=function(e){var t=e.className,a=e.title,n=e.data,o=e.options,i=e.width,c=e.height,l=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{className:"u-mt-1 u-ml-1",variant:"h5"},a),r.a.createElement("div",{style:{width:i,height:c}},r.a.createElement(Xu.a,{className:t,width:i,height:c,options:o,data:n})),l)},ed=function(e){var t=e.theme,a=e.isMobile,n=e.oneYearOldTimeseries,r=e.sendToDACC,o=e.globalAverages,i=e.f,c=e.t,l=function(e,t){var a=new Date,n=Array.from({length:12},(function(e,t){return Object(w.a)(Object(Qe.a)(a,t))})).reverse();return{months:n.map((function(e){return t(e,"MMM").toUpperCase()})),CO2s:n.map((function(t,a){var r=a===n.length-1,o=e.filter((function(e){return new Date(e.startDate)>=t&&(!!r||new Date(e.startDate)<n[a+1])})),i=ot()(o,"aggregation.totalCO2");return Math.round(100*i)/100}))}}(n,i),s=l.months,u=l.CO2s,d={labels:s,datasets:[{label:c("vericalBarChart.legend.yours"),backgroundColor:t.palette.primary.main,borderRadius:a?8:4,barThickness:a?r?6:8:24,data:u}]};return r&&d.datasets.push({label:c("vericalBarChart.legend.average"),backgroundColor:Object(Yu.a)(t.palette.primary.main,.24),borderRadius:a?8:4,barPercentage:a?.55:.85,data:Y()("coachco2.fake-dacc-datas.enabled")?u:o}),d};a("NhwE"),a("8tKC");var td=g.models.dacc,ad=(td.sendMeasureToDACC,td.fetchAggregatesFromDACC),nd=function(){return!0===Y()("coachco2.dacc-dev_v2")?m.e:m.d},rd=function(){var e=O()(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=nd(),n=Object(ol.a)(Object(w.a)(Object(Qe.a)(Date.now(),11)),"yyyy-MM-dd"),e.next=5,ad(t,a,{measureName:_.A,startDate:n});case 5:return r=e.sent,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),Tt()("error","Error while retrieving data from remote-doctype: ".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),od=function(e){var t=Object(g.useClient)(),a=Object(n.useState)(!1),r=s()(a,2),o=r[0],i=r[1],c=Object(n.useState)(null),l=s()(c,2),u=l[0],d=l[1];return Object(n.useEffect)((function(){e&&function(){var e=O()(C.a.mark((function e(){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,rd(t);case 3:a=e.sent,n=(null==a?void 0:a.length)>0?a.map((function(e){return e.avg})):null,i(!1),d(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,e]),{isLoading:o,data:u}},id=["data"];function cd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ld(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?cd(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var sd=function(){var e,t,a=Object(U.e)(),n=a.t,o=a.f,i=Object(Do.a)(),l=Object(be.b)().isMobile,s=I().account,u=go("CO2Emission.sendToDACC"),d=u.isLoading,p=u.value,f=void 0!==p&&p,b=(e=null==s?void 0:s._id,t=Object(w.a)(Object(k.a)(new Date,1)),{definition:Object(g.Q)(m.g).where({"cozyMetadata.sourceAccount":e,startDate:{$gte:t.toISOString()}}).partialIndex({aggregation:{$exists:!0}}).select(["startDate","endDate","aggregation","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"asc"},{startDate:"asc"}]).limitBy(1e3),options:{as:"".concat(m.g,"/sourceAccount/").concat(e,"/withAggregation/fromDate/").concat(t.getFullYear(),"-").concat(t.getMonth()),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}),v=Object(g.useQueryAll)(b.definition,ld(ld({},b.options),{},{enabled:Boolean(s)})),h=v.data,E=c()(v,id),O=od(f).data;if(!s||Object(g.isQueryLoading)(E)||E.hasMore||0===h.length)return null;var j=!d&&f,C=function(e){return{maintainAspectRatio:!1,scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{color:e.palette.text.secondary}},y:{grid:{color:e.palette.border.main,drawBorder:!1},ticks:{color:e.palette.text.secondary,callback:function(e,t){return t%2==0?"".concat(e," kg"):""}}}},plugins:{tooltip:{displayColors:!1}}}}(i),x=ed({theme:i,isMobile:l,oneYearOldTimeseries:h,sendToDACC:f,globalAverages:O,f:o,t:n});return r.a.createElement($u,{className:"u-mt-1 u-ph-half-s u-ph-2",title:n("vericalBarChart.title"),height:"190px",data:x,options:C},j&&r.a.createElement(Ku,null))},ud=a("33AU"),dd=a("N0Ji"),md=function(e){var t=e.onDiscard,a=e.onAccept,n=Object(U.e)().t;return r.a.createElement(ud.a,{className:"u-mh-half-s u-mh-2 u-mb-half-s u-mb-1 u-mt-0-s u-mt-1 u-bdrs-4 u-pv-half u-pr-half",text:n("dacc.tripsCard.label"),icon:r.a.createElement(Hn.a,{className:"u-ml-1",style:{marginTop:12,color:"var(--primaryColor)"},icon:dd.a,size:16}),buttonOne:r.a.createElement(q.a,{variant:"text",label:n("dacc.tripsCard.discard"),onClick:t}),buttonTwo:r.a.createElement(q.a,{variant:"text",label:n("dacc.tripsCard.accept"),onClick:a}),bgcolor:"#EAF3FF",disableIconStyles:!0})};md.propTypes={onDiscard:Ge.a.func.isRequired,onAccept:Ge.a.func.isRequired};var pd=md,fd=new cr.a({id:"dacc-compare_095afa7eb600270496978dbb605e6b2d",use:"dacc-compare_095afa7eb600270496978dbb605e6b2d-usage",viewBox:"0 0 200 136",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 136" id="dacc-compare_095afa7eb600270496978dbb605e6b2d"><path fill="#fff" d="M0 0h200v136H0z" /><path d="M161 14.592c-1.888.222-7.568-.664-15.182-5.982-9.518-6.647-13.847-8.724-22.434-4.183C115 8.86 115.227 23.012 115 27M165.844 92c5.431-3.51 16.097-12.334 15.315-19.554-.977-9.025-12.708-11.282-22.81-10.78-10.101.501-17.596 4.512-28.349 1.504M23.495 72c-.329 4.729-2.425 21.765 5.479 27.308 9.88 6.928 23.668-1.244 30.831-5.203C66.97 90.146 79.072 83.217 85 85.527" stroke="#B2D3FF" stroke-width="4" stroke-linecap="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M62 118a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.899c1.777.371 3.182 1.857 3.472 3.649a4.507 4.507 0 0 1-2.828 4.953l-.112.039V117h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L62 113a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.399Z" fill="#38D1D3" /><circle cx="100" cy="64" fill="#297EF2" r="48" /><path fill-rule="evenodd" clip-rule="evenodd" d="M120.91 37.605a2.166 2.166 0 0 1 .235 3.055l-13 15.167a2.166 2.166 0 0 1-2.33.645L93.96 52.52 81.887 62.581a2.167 2.167 0 0 1-2.774-3.329l13-10.833a2.167 2.167 0 0 1 2.072-.391l11.618 3.873 12.052-14.061a2.166 2.166 0 0 1 3.055-.235Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M119.5 42.5a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-26 10.833a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-13 10.834a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm29.25-9.75a3.25 3.25 0 1 1-6.5 0 3.25 3.25 0 0 1 6.5 0ZM117.167 53.333a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V55.333a2 2 0 0 0-2-2h-4.666Zm-26 10.834a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V66.167a2 2 0 0 0-2-2h-4.666ZM78.167 75a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-4.666Zm24-4.5a2 2 0 0 1 2-2h4.666a2 2 0 0 1 2 2V86a2 2 0 0 1-2 2h-4.666a2 2 0 0 1-2-2V70.5Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M43 21a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm1.452-16.349c2.666.557 4.773 2.786 5.208 5.474a6.76 6.76 0 0 1-4.242 7.43l-.168.058V19.5h-4.5v-3.75c0-1.17.893-2.13 2.034-2.24L43 13.5a2.25 2.25 0 1 0-2.24-2.468l-.01.218h-4.5a6.758 6.758 0 0 1 8.202-6.599Z" fill="#72E7E9" /><path fill-rule="evenodd" clip-rule="evenodd" d="M69 19a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L69 16.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 42a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 39.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2ZM20 14a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L20 11.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M26 33a1.125 1.125 0 1 1 0 2.25A1.125 1.125 0 0 1 26 33Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.12 3.715l-.085.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12L26 29.25a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M39 116.5a.938.938 0 1 1 0 1.876.938.938 0 0 1 0-1.876Zm.605-6.812a2.811 2.811 0 0 1 2.17 2.281 2.816 2.816 0 0 1-1.767 3.095l-.07.025v.786h-1.875v-1.563c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 90a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 87.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M184 99a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V98h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L184 94a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M191 64a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M134 18a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.585.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M118 119a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2ZM153 55a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L153 52.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M81 118a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.25 2.25 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L81 115.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M177 124a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M164 75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L164 72.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M92 8.5a.937.937 0 1 1 0 1.875.937.937 0 0 1 0-1.875Zm.605-6.812a2.81 2.81 0 0 1 2.17 2.28 2.817 2.817 0 0 1-1.767 3.096l-.07.025v.786h-1.875V6.312c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#72E7E9" /><circle cx="148" cy="104" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 106c-4.418 0-8-4.029-8-9 0-4.97 3.582-9 8-9s8 4.03 8 9c0 4.971-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 101a1.5 1.5 0 1 1-.001 3.001A1.5 1.5 0 0 1 148 101Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V100h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L148 96a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="148" cy="104" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="24" cy="65" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 67c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9ZM8 77c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4H10c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 62a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V61h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L24 57a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="24" cy="65" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="172" cy="28" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 30c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V24h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L172 20a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="172" cy="28" r="20" stroke="#B9F6F7" stroke-width="8" /><path d="M66.418 133.29a81.818 81.818 0 0 0 16.142 2.244c16.166.948 38.758.424 48.325-1.346 9.567-1.771 10.083-4.465-14.448-5.812-20.925-1.147-45.26.474-50.362 2.894-1.52.648-1.447 1.371.343 2.02Z" fill="#BBD9FD" /></symbol>'}),bd=(sr.a.add(fd),fd),vd=function(e){var t=e.open,a=e.onClose,n=e.showDaccPermissionsDialog,o=Object(U.e)().t;return r.a.createElement(Z.a,{open:t,onClose:a,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(Hn.a,{className:"u-mv-1",icon:bd,width:200,height:136}),r.a.createElement($n.a,{variant:"h3"},o("dacc.compareDialog.title")),r.a.createElement($n.a,{className:"u-mt-1"},o("dacc.compareDialog.primaryText")),r.a.createElement($n.a,{className:"u-mt-1"},o("dacc.compareDialog.secondaryText"))),actions:r.a.createElement(q.a,{label:o("dacc.compareDialog.action"),onClick:n})})};vd.propTypes={open:Ge.a.bool.isRequired,onClose:Ge.a.func.isRequired,showDaccPermissionsDialog:Ge.a.func.isRequired};var gd=vd;function yd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function hd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ed=function(){var e=Object(U.e)().t,t=Object(n.useState)(!1),a=s()(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=go("CO2Emission"),p=m.isLoading,f=m.value,b=void 0===f?{}:f,v=m.save;if(p)return null;var g=b.showAlert,y=void 0===g||g,h=b.sendToDACC,E=void 0!==h&&h;return r.a.createElement(r.a.Fragment,null,y&&!E&&r.a.createElement(pd,{onDiscard:function(){v(hd(hd({},b),{},{showAlert:!1}))},onAccept:function(){return i(!0)}}),r.a.createElement(gd,{open:o,onClose:function(){return i(!1)},showDaccPermissionsDialog:function(){i(!1),d(!0)}}),u&&r.a.createElement(hi,{onClose:function(){return d(!1)},onRefuse:function(){return d(!1)},onAccept:function(){v(hd(hd({},b),{},{showAlert:!1,sendToDACC:!0})),d(!1)},componentProps:{DaccPermissionsDialog:{sharedDataLabel:e("dacc.permissionsDialog.anonymized_emissions")}}}))};Ed.propTypes={};var Od=Ed,jd=a("IJzH"),Cd=function(e){var t=e.onDiscard,a=e.onParticipate,n=Object(U.e)().t;return r.a.createElement(Gl.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,icon:r.a.createElement(Hn.a,{icon:dd.a}),action:r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{variant:"text",label:n("bikeGoal.alert.actions.discard"),onClick:t}),r.a.createElement(q.a,{variant:"text",label:n("bikeGoal.alert.actions.participate"),onClick:a}))},r.a.createElement(jd.a,null,n("bikeGoal.alert.title")),n("bikeGoal.alert.text"))};Cd.propTypes={onDiscard:Ge.a.func,onParticipate:Ge.a.func};var xd=Cd,wd=function(){var e=Object(Oe.h)(),t=go("bikeGoal.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save;return a||o?r.a.createElement(xd,{onParticipate:function(){e("bikegoalonboarding")},onDiscard:function(){i(!1)}}):null},kd=function(){var e=Object(U.e)().t,t=Object(Oe.h)(),a=go("bikeGoal.showAlertSuccess").save;return r.a.createElement(Gl.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,severity:"success",action:r.a.createElement(q.a,{variant:"text",color:"success",label:e("bikeGoal.alert.success.action",{bountyAmount:pn()}),onClick:function(){a(!1);var e=(new Date).getFullYear().toString();t("".concat(e,"/certificate/generate"))}})},e("bikeGoal.alert.success.text"))},_d=["data"],Dd=["data"],Pd={paper:{gap:"1rem"},div:{height:65}},Td=function(){var e,t=Object(U.e)().t,a=Object(Oe.h)(),n=I(),o=n.account,i=n.isAccountLoading,l=A(),s=Object(g.useQuery)(l.definition,l.options),u=s.data,d=c()(s,_d),m=Object(g.isQueryLoading)(d),p=M({accountId:null==o?void 0:o._id},Boolean(o)),f=Object(g.useQueryAll)(p.definition,p.options),b=f.data,v=c()(f,Dd),y=Object(g.isQueryLoading)(v)||v.hasMore;if(i||y||m)return r.a.createElement(Xn.a,{elevation:2,className:"u-flex u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start"},r.a.createElement(nr.b,{size:"xlarge",className:"u-m-1"}));var h=(new Date).getFullYear().toString(),E=sn(b,h),O=!(null==u||null===(e=u[0].bikeGoal)||void 0===e||!e.sendToDACC);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xn.a,{elevation:2,className:"u-flex u-flex-items-start-s u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-p-1 u-c-pointer",style:Pd.paper,onClick:function(){return a("/bikegoal/".concat(h,"/trips"))}},r.a.createElement("div",{style:Pd.div},r.a.createElement(jn,{timeseries:E,sendToDACC:O,size:"small"})),r.a.createElement("div",null,r.a.createElement($n.a,{variant:"h6"},t("bikeGoal.title")),O?r.a.createElement(Hr,{timeseries:E}):r.a.createElement(Wr,{timeseriesByYear:E,variant:"caption",preLine:!0}))))},Sd=["data"],Md=["data"],Nd={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},Ad=function(){var e,t,a=Object(U.e)().t,n=Object(be.b)().isMobile,o=I(),i=o.account,l=o.isAccountLoading,s=A(),u=Object(g.useQuery)(s.definition,s.options),d=u.data,m=c()(u,Sd),p=M({accountId:null==i?void 0:i._id},Boolean(i)),f=Object(g.useQueryAll)(p.definition,p.options),b=f.data,v=c()(f,Md),y=Object(g.isQueryLoading)(v)||v.hasMore;if(Object(g.isQueryLoading)(m)||(l||y))return null;var h=(new Date).getFullYear().toString(),E=sn(b,h),O=null!==(e=null==d||null===(t=d[0])||void 0===t?void 0:t.bikeGoal)&&void 0!==e?e:{},j=O.activated,C=void 0!==j&&j,x=O.showAlert,w=void 0===x||x,k=O.showAlertSuccess,_=void 0===k?bn(E,d):k;return C||w?r.a.createElement(r.a.Fragment,null,r.a.createElement($n.a,{className:"u-mb-1-s u-mt-1 u-mb-1-s u-mb-2 u-ml-1",variant:"h5"},a("bikeGoal.goals")),w&&r.a.createElement(wd,null),C&&r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(kd,null),r.a.createElement(Td,null)),n&&r.a.createElement(Zr.a,{style:Nd.divider})):null},Ld=["data"];function Rd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rd(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Id={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},Bd=function(){var e=I(),t=e.account,a=e.accounts,n=e.isAccountLoading,o=Object(U.e)().t,i=Object(be.b)().isMobile,l=T({accountId:null==t?void 0:t._id,limitBy:50}),s=Object(g.useQuery)(l.definition,Fd(Fd({},l.options),{},{enabled:Boolean(t)})),u=s.data,d=c()(s,Ld),m=Object(g.isQueryLoading)(d)&&!Object(g.hasQueryBeenLoaded)(d);return n||!t||m||0===u.length?r.a.createElement(Rr,{account:t,accounts:a,isAccountLoading:n,isTimeseriesLoading:m,timeseries:u}):r.a.createElement(r.a.Fragment,null,r.a.createElement(yr,{label:o("trips.from")+" "+B(t)}),Y()("coachco2.bikegoal.enabled")&&r.a.createElement(Ad,null),r.a.createElement(sd,null),r.a.createElement(Od,null),i&&r.a.createElement(Zr.a,{style:Id.divider}),r.a.createElement(Go,{timeseries:u}),d.hasMore&&r.a.createElement(zo.a,{label:o("loadMore"),fetchMore:d.fetchMore}))},Gd=a("mJLf"),zd=(a("cRRo"),a("R34t")),qd=a("Qy9h"),Zd=a("BkYy"),Ud=a("hXCt"),Qd=a("yKoJ"),Hd=a("pJCX"),Vd=function(){var e=Object(Oe.i)().fileId,t=Object(Oe.h)(),a=Object(g.useClient)(),n=function(e){return{definition:function(){return Object(g.Q)(m.f).getById(e)},options:{as:"".concat(m.f,"/").concat(e),fetchPolicy:y.a.fetchPolicies.olderThan(1e8)}}}(null!=e?e:null),o=Object(g.useQuery)(n.definition,n.options);return Object(g.hasQueryBeenLoaded)(o)?r.a.createElement(Gd.a,{client:a,doctype:m.f,documentType:"Files"},r.a.createElement(Zd.a,{files:o.data,currentIndex:0,onCloseRequest:function(){return t("..")}},r.a.createElement(Ud.a,null,r.a.createElement(Hd.a,null),r.a.createElement(Qd.a,null)))):r.a.createElement(qd.a,{open:!0},r.a.createElement(zd.a,{open:!0},r.a.createElement(nr.b,{size:"xxlarge",middle:!0,noMargin:!0,color:"var(--primaryContrastTextColor)"})))},Yd=function(e){var t=e.Component;return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,null),r.a.createElement(Oe.b,null))},Wd=function(){var e=(new Date).getFullYear();return r.a.createElement(je.a,null,r.a.createElement(Oe.e,null,r.a.createElement(Oe.c,{path:"/",element:r.a.createElement(Ae,null)},r.a.createElement(Oe.c,{path:"trips",element:r.a.createElement(Yd,{Component:Bd})},r.a.createElement(Oe.c,{path:"certificate/:fileId",element:r.a.createElement(Vd,null)}),r.a.createElement(Oe.c,{path:":year/certificate/generate",element:r.a.createElement(or,null)}),r.a.createElement(Oe.c,{path:":timeserieId",element:r.a.createElement(Vu,null)}),Y()("coachco2.bikegoal.enabled")&&r.a.createElement(Oe.c,{path:"bikegoalonboarding",element:r.a.createElement(ec,null)})),r.a.createElement(Oe.c,{path:"settings",element:r.a.createElement(Yd,{Component:Nl})},Y()("coachco2.bikegoal.enabled")&&r.a.createElement(Oe.c,{path:"bikegoalonboarding",element:r.a.createElement(ec,null)})),r.a.createElement(Oe.c,{path:"analysis/modes",element:r.a.createElement(Yd,{Component:Uc})}),r.a.createElement(Oe.c,{path:"analysis/modes/:mode",element:r.a.createElement(Yd,{Component:Uc})},r.a.createElement(Oe.c,{path:":timeserieId",element:r.a.createElement(Vu,null)})),r.a.createElement(Oe.c,{path:"analysis/purposes",element:r.a.createElement(Yd,{Component:Yc})}),r.a.createElement(Oe.c,{path:"analysis/purposes/:purpose",element:r.a.createElement(Yd,{Component:Yc})},r.a.createElement(Oe.c,{path:":timeserieId",element:r.a.createElement(Vu,null)})),Y()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.c,{path:"bikegoal/:year/trips",element:r.a.createElement(Yd,{Component:Ko})},r.a.createElement(Oe.c,{path:"certificate/:fileId",element:r.a.createElement(Vd,null)}),r.a.createElement(Oe.c,{path:":timeserieId",element:r.a.createElement(Vu,null)}),r.a.createElement(Oe.c,{path:"edit",element:r.a.createElement(ci,null)}),r.a.createElement(Oe.c,{path:"about",element:r.a.createElement(Jo,null)}),r.a.createElement(Oe.c,{path:"certificate/generate",element:r.a.createElement(or,null)}))),r.a.createElement(Oe.c,{path:"analysis",element:r.a.createElement(Oe.a,{replace:!0,to:"/analysis/modes"})}),Y()("coachco2.bikegoal.enabled")&&r.a.createElement(Oe.c,{path:"bikegoal",element:r.a.createElement(Oe.a,{replace:!0,to:"/bikegoal/".concat(e,"/trips")})}),r.a.createElement(Oe.c,{path:"/",element:r.a.createElement(Oe.a,{replace:!0,to:"/trips"})}),r.a.createElement(Oe.c,{path:"*",element:r.a.createElement(Oe.a,{replace:!0,to:"/trips"})}))))},Kd=a("8Bbg"),Jd=function(e,t){return/^\{\{\..*\}\}$/.test(e)?t:e},Xd=function(e){var t=e.app,n=e.locale,r={appIconDefault:a("J3iu"),appNamePrefixDefault:$c.a.name_prefix,appNameDefault:$c.a.name,appLocaleDefault:"en"};return{appName:Jd(t.name,r.appNameDefault),appNamePrefix:Jd(t.prefix,r.appNamePrefixDefault),iconPath:Jd(t.icon,r.appIconDefault),lang:Jd(n,r.appLocaleDefault)}},$d=a("+s1f"),em=a("8XZk"),tm=ja()((function(){var e,t,n,r,o=document.querySelector("[role=application]"),i=Xd(JSON.parse(o.dataset.cozy)),c=i.lang,l=i.appName,s=Object(em.a)(c,(function(e){return a("eUFy")("./".concat(e))})),u=(e=document.querySelector("[role=application]"),t=JSON.parse(e.dataset.cozy),n=window.location.protocol,r="".concat(n,"//").concat(t.domain),new y.a({uri:r,token:t.token,appMetadata:{slug:$c.a.name,version:$c.a.version},schema:m.k,store:!1}));return u.registerPlugin(Y.a.plugin),u.registerPlugin($d.RealtimePlugin),function(e){var t=e.client,a=e.container,n=e.lang,r=e.appName,o=Xd(JSON.parse(a.dataset.cozy)),i=o.appNamePrefix,c=o.iconPath;cozy.bar.init({appName:r,appNamePrefix:i,cozyClient:t,iconPath:c,lang:n,replaceTitleOnMobile:!1})}({client:u,container:o,lang:c,appName:l}),{container:o,client:u,lang:c,polyglot:s}}));Object(Kd.a)(),document.addEventListener("DOMContentLoaded",(function(){var e,t,a,n,i;e=tm(),t=e.container,a=e.client,n=e.lang,i=e.polyglot,Object(o.createRoot)(t).render(r.a.createElement(Ee,{client:a,lang:n,polyglot:i},r.a.createElement(Wd,null)))}))},"v5t+":function(e,t,a){e.exports=a.p+"PlusJakartaSans.ttf"},vVt6:function(e,t,a){e.exports=a.p+"Lato.ttf"}});