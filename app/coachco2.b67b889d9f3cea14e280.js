!function(e){function t(t){for(var n,i,c=t[0],l=t[1],s=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var l=a[c];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={1:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([3,0]),a()}({0:function(e,t){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},2:function(e,t){},"2maa":function(e){e.exports=JSON.parse('{"nav":{"trips":"Trips","analysis":"Analysis","modes":"Modes of transport","purposes":"Purposes of travel","settings":"Settings"},"folder":{"administrative":"Administrative","coachco2":"Coach CO2"},"devices":{"select":"Select a device","label":"Data source"},"settings":{"services":"Services","debug":"Demo & debug mode"},"trips":{"default":"default","trips":"Trips","from":"Trips from","modes":{"AIR_OR_HSR":"Plane","BICYCLING_ELECTRIC":"Electric bike","BICYCLING":"Bike","BUS_ELECTRIC":"Electric bus","BUS":"Bus","CAR_ELECTRIC":"Electric car","CAR":"Car","IN_VEHICLE":"Vehicle","CARPOOL_ELECTRIC":"Electric carpooling","CARPOOL":"Carpooling","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Electric scooter","MOPED":"Moped","SUBWAY":"Subway","TRAIN":"Train","UNKNOWN":"Unknown","WALKING":"Walking","ON_FOOT":"Walking","RUNNING":"Running","categories":{"BICYCLING_CATEGORY":"Bike, scooter","CAR_CATEGORY":"Car, motorcycle, moped","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Going to or from work","WORK":"Profressional travel","SHOPPING":"Going shopping","PERSONAL_MED":"Personal travel","PICK_DROP":"Pick & drop someone","SPORT":"Going to or from sport","EXERCISE":"Physical activity / sport","ENTERTAINMENT":"Going out, leisure","TRAVEL":"Travel","OTHER_PURPOSE":"Unknown"},"duration":"Duration","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Save the starting point?","saveEndPlace":"Save the arrival point?","tooltip":"To automate this categorisation in the future, save this address in a contact record","submit":"Save","delete":"Delete","cancel":"Cancel","dismiss":"No, thanks","contact":"Contact","label":"Label","noLabel":"No label","custom":"Customised","customLabel":"Custom label","home":"Home","work":"Work","error":"Specify which contact to save the address under","addSuccess":"The addresses have been registered","removeSuccess":"The addresses have been deleted","at":"At","atHome":"At home"},"loadMore":"Load more trips","tripEdit":{"selectMode":"Modify the transportation mode","selectPurpose":"Modify the travel purpose"},"purpose":"Reason for travel","recurring":{"title":"Recurrence","recurringTrip":"Recurring trip","occasionalTrip":"Occasional trip","confirmDialog":{"title":"Attribute this reason to similar trips?","content":"By answering yes, this trip will be defined as recurring and will be used as a reference to automate the qualification of your similar trips.","confirm":"Yes","decline":"No"},"tooltip":"If this trip is recurring, similar trips will automatically be referenced with the same reason."},"analysis":{"mode":"CO2 emissions","purpose":"CO2 emissions","travels":"%{smart_count} travel |||| %{smart_count} travel","emittedCO2":"emitted CO2"},"export":{"label":"Export","filename":"%{today} - Trips %{accountLabel}.csv","button":"Export trips in CSV","modal":{"button":{"close":"Close","viewInDrive":"View in Drive"},"title":"Exporting","content":{"done":"The \\"%{filename}\\" file was created in the \\"Drive%{pathAppDir}\\" folder of your Cozy.","progress":"The export of your trips is in progress, please wait..."}}},"empty":{"title":"Add your trips","text":"This application is in experimental phase. It works at this stage only if you are a user of the mobile application \\"TraceMob\\" and that you have configured the connector in your Cozy."},"manifest":{"short_description":"Keep track of your trips and analyze their impact on the environment.","long_description":"CoachCO2 is a self data application developed within the framework of the **territory of La Rochelle** and the [Agremob](https://agremob.com/) program.\\n\\n&nbsp;\\n\\nIts ambition is to **help you** :\\n- to **become aware of the issues** related to mobility,\\n- to **question your travel habits**,\\n- and **find more sustainable alternatives** (yes it is possible!).\\n\\nAll this in complete confidentiality, as always in your Cozy: **only you have the right to access your data**, and you have the control to share it with whomever you want, whenever and if YOU want.\\n\\nIts objective is also to **enable the emergence of new ecomobility projects or offers** thanks to the expertise of the program\'s partner structures.\\n\\n&nbsp;\\n\\nToday this application forms a duo with **the mobile application TraceMob** whose connector, also present in the store of your Personal Cloud, collects and saves your mobility tracks at home.\\n\\nTomorrow **other sensors will complete your data**. The application, itself under development, is today focused on mobility, tomorrow other sources of CO2 may extend its scope.\\n\\n&nbsp;\\n\\n[Agremob](https://agremob.com/) makes this application **a common good** that can be used beyond the borders of the La Rochelle agglomeration. If your Cozy\'s host does not offer it in its own store, contact them!","permissions":{"apps":{"description":"Required by the cozy-bar to display the icons of the apps"},"settings":{"description":"Required by the cozy-bar to display Claudy and know which applications are coming soon"},"accounts":{"description":"Required to get konnector account"},"files":{"description":"Required to access the files for saved your export of trips"},"geojson-timeseries":{"description":"Required to display geojson timeseries"},"coachco2.settings":{"description":"Used to manage your Coach CO2 settings"}}},"dacc":{"settings":{"anonymous_participation":"Participate anonymously in the calculation of average CO2 emissions","showAlerter":"Show DACC alerter"},"tripsCard":{"label":"Compare your emissions to the average of other users of the application?","discard":"No, thank you","accept":"Compare"},"compareDialog":{"title":"Compare anonymously","primaryText":"In order to average the emissions of users, and because your Cozy has made a promise to you to never disclose your data without your explicit request, it will ask you for the right to send this data.","secondaryText":"This data will be aggregated and anonymous and will not contain any identifiers or locations.","action":"I understood"},"permissionsDialog":{"title":"Request for permissions","primaryText":"The CO2 Coach application requires the following permissions from your Cozy:","secondaryText":"Once authorized, the permissions can be modified in the settings","why_asking":"Why ask me for these permissions?","export_outside":"Exporting out of Cozy","anonymized_emissions":"My anonymized CO2 emissions","anonymized_bikegoal_progression":"My anonymized progression","accept":"Always allow","refuse":"Refuse"},"reasonsDialog":{"title":"Reasons for permissions","content":"Because your Cozy has made a promise to you to never disclose your private data, it will always ask you for the right to let an application send it out."}},"vericalBarChart":{"title":"CO2 emissions","legend":{"yours":"Your emissions","average":"Average users of the app"}},"bikeGoal":{"title":"Bike to work","yearly_goal_progression":"%{days}/%{daysToReach} days \\nper year","goal_progression":"%{days}/%{daysToReach} days","my_progression":"My¬†yearly progrsesion","average_progression":"Average group progression","achievement_certificate":"Certificate of achievement","goals":"Objectives","about":{"title":"About the goal","intro":{"title":"Introduction","content":"In order to encourage the use of alternative and sustainable modes of transportation, the implementation of the sustainable mobility package came into effect on May 10, 2020.\\n\\nThus, employees who choose an alternative and sustainable mode of transportation for their home-work commute will be able to benefit from a lump sum of %{bountyAmount}‚Ç¨ per year.\\n\\nYour CO2 Coach will help you keep track of your home-work commute by bicycle and will allow you to generate the certificate of success to be transmitted to your employer!"},"how_trips_detected":{"title":"How are my trips detected?","content":"Your home-work bike trips will be automatically detected based on your schedule and speed.\\n\\nIf a trip is not automatically detected as \\"Going to or from work\\", open the trip details and change the trip reason to \\"Going to or from work\\".\\n\\nIf a trip is not automatically detected as \\"bike\\", open the trip detail and change the mode of transportation to \\"bike\\"."},"once_goal_reach":{"title":"What to do once the goal is reached","content":"Once the goal is reached, you will be able to generate a certificate of achievement to send to your employer to benefit from your %{bountyAmount}‚Ç¨ package üéâ"}},"deactivate":{"deactivate":"Deactivate","title":"Do you really want to stop participating in the goal?","content":"You can always choose to participate again from the application settings.","stop_participate":"No longer participating","cancel":"Cancel"},"alert":{"success":{"text":"Congratulations, you have achieved the ‚ÄúBike to Work‚Äù goal üéâ","action":"Benefit from my %{bountyAmount}‚Ç¨ package"},"title":"Ride your bike to work and receive %{bountyAmount}‚Ç¨!","text":"As part of the Sustainable Mobility Package (SMP) set up by the French government, go to work by bike %{daysToReach} days a year and receive %{bountyAmount}‚Ç¨!","actions":{"participate":"Participate","discard":"No,¬†thank you"}},"edit":{"modify":"Modify","title":"Modify the goal","firstname":"Firstname","lastname":"Lastname","workTime":"Work time","workTime_full":"Full time","workTime_part":"Half-time or part-time","workTimePercentage":"Percentage of working time","compare_progress":"Compare my progress with the group: %{source}","cancel":"Cancel","submit":"Ok","required":"This field is required"},"settings":{"participation":"Participate to the goal ‚ÄúBike to work‚Äù","showAlerter":"Bike goal: Show bike goals alerter","hideOnboarding":"Bike goal: Hide bike goal onboarding","sendToDACC":"Bike goal: activate DACC","showAlerterSuccess":"Bike goal: Show the bike goal success alert"},"onboarding":{"title":"\\"Sustainable mobility\\" package","actions":{"finish":"Finish","previous":"Previous","next":"Next"},"steps":{"naming":{"title":"Lastname and firstname","nameLegend":"The first and last names entered will be used to generate the certificate of achievement once the objective has been reached. Please fill in the following information:"},"timing":{"timeLegend":"You currently have a employment contract:","percentageLegend":"The amount of the bonus depends on the number of hours worked. For part-time employees working 50% or more, the amount of the bonus will be the same as for a full-time employee. For employees working less than 50%, the amount of the bonus will be calculated pro rata to the time worked.\\n\\nFill in the percentage of your working time:","percentage":"Percentage"},"comparison":{"comparisonLegend":"It is possible to display the average progression of the members %{source} who participate in the goal. To do so, you will be asked to also participate in the establishment of this average. Your progression data will be aggregated and sent anonymously, and will not contain any identifiers or locations.","compare":"Compare my progression","doNotCompare":"Do not compare my progression"}}},"certificateGeneration":{"title":"Congratulations, you have achieved the ‚ÄúBike¬†to¬†Work‚Äú¬†goal","content":"A certificate has been generated as proof of your success for the year %{year}. Forward it now by email to your employer to receive %{bountyAmount}‚Ç¨ !","actions":{"show":"Certificate - Bike to work.pdf","generate":"Generate a certificate","regenerate":"Generate a new certificate","understood":"Understood"}},"employer":{"my_company":"of my company","your_company":"of your company","my_collectivity":"of my collectivity","your_collectivity":"of your collectivity"}},"geolocationTracking":{"locationRefusedDialog":{"description":"To record your movements, you need to give Cozy access to your \\"location\\" and \\"physical activity\\". You will be redirected to the app settings."},"settings":{"enable":"Memorise my journeys","sendLogs":"Send Geoloc logs","forceUploadData":"Force Upload Data","copyIdentifier":"Copy OpenPATH Identifier","createdOn":"created on"}},"Modes":{"DefaultDialog":{"primary":"Set as default transport for this category?","secondary":"The transport mode will automatically be selected as default for all future trips detected for this transport type.","actions":{"save":"Save","cancel":"Cancel"}}},"PDF":{"name":"Certificate - Cycling to work (%{year}).pdf","title":"Certificate of Honor\\n of Success of the\\n Sustainable Mobility Package","date":"%{currentDateFormatted} at %{currentTimeFormatted}","recipient":"Recipient : %{sourceIdentity}","paragraph01":"I, %{username}, certify on my honor that I have achieved the %{daysToReach} days sustainable mobility package objective by traveling from home to work by bike from January 1 to %{date}.","paragraph02":"In addition to this certificate, I provide my employer with any useful proof of actual use of the bicycle, such as invoice or payment statements, insurance or maintenance of my bicycle.","paragraph03":"Made to serve and assert what is right.","signature":"Signature : %{username}"}}')},3:function(e,t,a){a("MQ8b"),a("jI5P"),e.exports=a("nXPL")},4:function(e,t){},5:function(e,t){},"5z4W":function(e,t){e.exports={name:"Coach CO2",slug:"coachco2",icon:"icon.svg",categories:[],version:"0.11.0",licence:"AGPL-3.0",editor:"Cozy Cloud",source:"https://github.com/cozy/coachCO2.git@build",developer:{name:"Cozy Cloud",url:"https://cozy.io"},default_locale:"fr",langs:["fr","en"],routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},settings:{description:"Required by the cozy-bar to display Claudy and know which applications are coming soon",type:"io.cozy.settings",verbs:["GET"]},konnectors:{description:"Required to create your mobility konnector account",type:"io.cozy.konnectors",verbs:["GET"]},accounts:{description:"Required to get konnector account",type:"io.cozy.accounts",verbs:["GET","POST","PUT"]},triggers:{description:"Required to display additional information in the viewer and for the notification service",type:"io.cozy.triggers"},files:{description:"Required to access the files for saved your export of trips",type:"io.cozy.files",verbs:["ALL"]},sharings:{description:"Required to have access to the sharings in realtime",type:"io.cozy.sharings",verbs:["ALL"]},"geojson-timeseries":{description:"Required to display geojson timeseries",type:"io.cozy.timeseries.geojson"},"coachco2.settings":{description:"Used to manage your Coach CO2 settings",type:"io.cozy.coachco2.settings",verbs:["GET","POST","PUT"]},jobs:{description:"Used in services to start other services",type:"io.cozy.jobs",verbs:["POST"]},dacc:{type:"cc.cozycloud.dacc_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions"},"dacc-dev":{type:"cc.cozycloud.dacc.dev_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions, for developement purposes"},contacts:{type:"io.cozy.contacts.*",verbs:["GET","POST","PUT","DELETE"],description:"Used to link contacts to geojson timeseries and sharing documents"}},services:{timeseriesWithoutAggregateMigration:{type:"node",file:"services/timeseriesWithoutAggregateMigration/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED,UPDATED",debounce:"1m"},dacc:{type:"node",file:"services/dacc/coachco2.js",trigger:"@every 720h"},recurringPurposes:{type:"node",file:"services/recurringPurposes/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED",debounce:"2m"}}}},6:function(e,t){},7:function(e,t){},"7SaY":function(e,t,a){},"7z1u":function(e,t,a){var n={"./_lib/build_formatting_tokens_reg_exp/index.js":"5XOE","./ar/build_distance_in_words_locale/index.js":"qs6D","./ar/build_format_locale/index.js":"80pQ","./ar/index.js":"n4NV","./be/build_distance_in_words_locale/index.js":"b7Vp","./be/build_format_locale/index.js":"STnx","./be/index.js":"ka/z","./bg/build_distance_in_words_locale/index.js":"fyh8","./bg/build_format_locale/index.js":"STBG","./bg/index.js":"BBHR","./ca/build_distance_in_words_locale/index.js":"4d8B","./ca/build_format_locale/index.js":"a88X","./ca/index.js":"Nz94","./cs/build_distance_in_words_locale/index.js":"70Ht","./cs/build_format_locale/index.js":"R/Ak","./cs/index.js":"oAfY","./da/build_distance_in_words_locale/index.js":"HjC7","./da/build_format_locale/index.js":"G0Zw","./da/index.js":"CJpN","./de/build_distance_in_words_locale/index.js":"DD2N","./de/build_format_locale/index.js":"pnJo","./de/index.js":"eBmD","./el/build_distance_in_words_locale/index.js":"tFqT","./el/build_format_locale/index.js":"twcE","./el/index.js":"m1rb","./en/build_distance_in_words_locale/index.js":"bjbr","./en/build_format_locale/index.js":"EW2Y","./en/index.js":"VkMk","./eo/build_distance_in_words_locale/index.js":"ujJO","./eo/build_format_locale/index.js":"S5Gq","./eo/index.js":"nn7U","./es/build_distance_in_words_locale/index.js":"h+mB","./es/build_format_locale/index.js":"Q4jc","./es/index.js":"4yJR","./fi/build_distance_in_words_locale/index.js":"Fpie","./fi/build_format_locale/index.js":"LTnX","./fi/index.js":"G/Qn","./fil/build_distance_in_words_locale/index.js":"VRy5","./fil/build_format_locale/index.js":"syEd","./fil/index.js":"k8V/","./fr/build_distance_in_words_locale/index.js":"nJeE","./fr/build_format_locale/index.js":"DeP4","./fr/index.js":"+owv","./hr/build_distance_in_words_locale/index.js":"Fs/O","./hr/build_format_locale/index.js":"ZlNX","./hr/index.js":"Kj+b","./hu/build_distance_in_words_locale/index.js":"8okG","./hu/build_format_locale/index.js":"lk8B","./hu/index.js":"+KHA","./id/build_distance_in_words_locale/index.js":"50BR","./id/build_format_locale/index.js":"18Vb","./id/index.js":"anKN","./is/build_distance_in_words_locale/index.js":"qUeK","./is/build_format_locale/index.js":"IcCt","./is/index.js":"4QE/","./it/build_distance_in_words_locale/index.js":"PCcA","./it/build_format_locale/index.js":"V71f","./it/index.js":"qK4z","./ja/build_distance_in_words_locale/index.js":"5vSx","./ja/build_format_locale/index.js":"CAsz","./ja/index.js":"XcQu","./ko/build_distance_in_words_locale/index.js":"jKsw","./ko/build_format_locale/index.js":"UEmh","./ko/index.js":"zOJj","./mk/build_distance_in_words_locale/index.js":"fcCd","./mk/build_format_locale/index.js":"re9F","./mk/index.js":"FDmM","./nb/build_distance_in_words_locale/index.js":"aEqN","./nb/build_format_locale/index.js":"pNMw","./nb/index.js":"mR4k","./nl/build_distance_in_words_locale/index.js":"7u2d","./nl/build_format_locale/index.js":"3riD","./nl/index.js":"06P9","./pl/build_distance_in_words_locale/index.js":"rygU","./pl/build_format_locale/index.js":"july","./pl/index.js":"vOlg","./pt/build_distance_in_words_locale/index.js":"sLR+","./pt/build_format_locale/index.js":"ZP65","./pt/index.js":"vSZg","./ro/build_distance_in_words_locale/index.js":"eJyG","./ro/build_format_locale/index.js":"fLwW","./ro/index.js":"OuEP","./ru/build_distance_in_words_locale/index.js":"KjgK","./ru/build_format_locale/index.js":"Tqgg","./ru/index.js":"T3Gn","./sk/build_distance_in_words_locale/index.js":"38t1","./sk/build_format_locale/index.js":"myxh","./sk/index.js":"In70","./sl/build_distance_in_words_locale/index.js":"Mhi5","./sl/build_format_locale/index.js":"yfgk","./sl/index.js":"D9r0","./sr/build_distance_in_words_locale/index.js":"I8h+","./sr/build_format_locale/index.js":"0FXG","./sr/index.js":"lQaB","./sv/build_distance_in_words_locale/index.js":"z6xu","./sv/build_format_locale/index.js":"jmSq","./sv/index.js":"SMJc","./th/build_distance_in_words_locale/index.js":"qHE1","./th/build_format_locale/index.js":"+W4l","./th/index.js":"5DsP","./tr/build_distance_in_words_locale/index.js":"0z6Z","./tr/build_format_locale/index.js":"NK/q","./tr/index.js":"OevD","./zh_cn/build_distance_in_words_locale/index.js":"SBqD","./zh_cn/build_format_locale/index.js":"219J","./zh_cn/index.js":"QhI5","./zh_tw/build_distance_in_words_locale/index.js":"7Fp2","./zh_tw/build_format_locale/index.js":"l09L","./zh_tw/index.js":"TDp1"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="7z1u"},8:function(e,t){},"8Bbg":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var n=Boolean(window.location.hostname.endsWith("cozy.localhost")||window.location.hostname.endsWith("cozy.tools"));function r(t){if("serviceWorker"in navigator){if(new URL(e.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="/service-worker.js";n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(e,t)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,a("JtWf"))},"8IOV":function(e,t,a){e.exports={"cozy-leaflet-markers":"cozy-leaflet-markers--3tOnD","cozy-leaflet-markers-end":"cozy-leaflet-markers-end--G0e6q","cozy-leaflet-markers-start":"cozy-leaflet-markers-start--1JdEL"}},9:function(e,t){},DZbK:function(e,t,a){e.exports=a.p+"Courgette.ttf"},Hsuv:function(e){e.exports=JSON.parse('{"nav":{"trips":"D√©placements","analysis":"Analyses","modes":"Modes de transport","purposes":"Motifs de d√©placement","settings":"Param√®tres"},"folder":{"administrative":"Administratif","coachco2":"Coach CO2"},"devices":{"select":"S√©lectionnez un appareil","label":"Source des donn√©es"},"settings":{"services":"Services","debug":"Mode d√©mo & d√©bug"},"trips":{"trips":"D√©placements","from":"D√©placements de","modes":{"default":"d√©faut","AIR_OR_HSR":"Avion","BICYCLING_ELECTRIC":"V√©lo √©lectrique","BICYCLING":"V√©lo","BUS_ELECTRIC":"Bus √©lectrique","BUS":"Bus","CAR_ELECTRIC":"Voiture √©lectrique","CAR":"Voiture","IN_VEHICLE":"V√©hicule","CARPOOL_ELECTRIC":"Covoiturage √©lectrique","CARPOOL":"Covoiturage","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Trottinette √©lectrique","MOPED":"Cyclomoteur","SUBWAY":"M√©tro","TRAIN":"Train","UNKNOWN":"Non reconnu","WALKING":"Marche","ON_FOOT":"Marche","RUNNING":"Course","categories":{"BICYCLING_CATEGORY":"V√©lo, trotinette","CAR_CATEGORY":"Voiture, moto, scooter","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Aller-retour au travail","WORK":"D√©placement professionel","SHOPPING":"Aller faire les courses","PERSONAL_MED":"D√©placement personnel","PICK_DROP":"D√©poser quelqu\'un","SPORT":"Aller-retour au sport","EXERCISE":"Activit√© physique / sportive","ENTERTAINMENT":"Sortie, loisirs","TRAVEL":"Voyage","OTHER_PURPOSE":"Ind√©fini"},"duration":"Dur√©e","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Enregistrer le point de d√©part ?","saveEndPlace":"Enregistrer le point d\'arriv√©e ?","tooltip":"Pour automatiser cette cat√©gorisation √† l\'avenir, enregistrer cette adresse dans une fiche contact","submit":"Enregistrer","delete":"Supprimer","cancel":"Annuler","dismiss":"Non, merci","contact":"Contact","label":"Libell√©","noLabel":"Aucun libell√©","custom":"Personnalis√©","customLabel":"Libell√© personnalis√©","home":"Domicile","work":"Travail","error":"Pr√©ciser sous quel contact enregistrer l\'adresse","addSuccess":"Les adresses ont bien √©t√© enregistr√©es","removeSuccess":"Les adresses ont bien √©t√© supprim√©es","at":"Chez","atHome":"Chez moi"},"loadMore":"Charger plus de trajets","tripEdit":{"selectMode":"Modifier le mode de transport","selectPurpose":"Modifier le motif du d√©placement"},"purpose":"Motif du d√©placement","recurring":{"title":"R√©currence","recurringTrip":"D√©placement habituel","occasionalTrip":"D√©placement occasionnel","confirmDialog":{"title":"Attribuer ce motif aux d√©placements similaires ?","content":"En r√©pondant oui, ce d√©placement sera d√©fini comme habituel et servira de r√©f√©rence pour automatiser la qualification de vos d√©placement similaires.","confirm":"Oui","decline":"Non"},"tooltip":"Si ce d√©placement est habituel, les d√©placements similaires seront automatiquement r√©f√©renc√©s avec le m√™me motif."},"analysis":{"mode":"√âmissions de CO2","purpose":"√âmissions de CO2","travels":"%{smart_count} d√©placement |||| %{smart_count} d√©placements","emittedCO2":"CO2 √©mis"},"export":{"label":"Export","filename":"%{today} - D√©placements %{accountLabel}.csv","button":"Exporter les d√©placements en CSV","modal":{"button":{"close":"Fermer","viewInDrive":"Voir dans Drive"},"title":"Exportation","content":{"done":"Le fichier \\"%{filename}\\" a √©t√© cr√©√© dans le dossier \\"Drive%{pathAppDir}\\" de votre Cozy.","progress":"L‚Äôexport de vos d√©placements est en cours, merci de patienter..."}}},"empty":{"title":"Ajoutez vos trajets","text":"Cette application est en phase exp√©rimentale. Elle fonctionne √† ce stade uniquement si vous √™tes utilisateur de l\'application mobile \\"TraceMob\\" et que vous en avez configur√© le connecteur dans votre Cozy."},"manifest":{"short_description":"Conservez l\'historique de vos d√©placements et analysez leurs impacts sur l\'environnement.","long_description":"CoachCO2 est une application de self data d√©velopp√©e dans le cadre du **territoire de la Rochelle** et du programme [Agremob](https://agremob.com/).\\n\\n&nbsp;\\n\\nElle a pour ambition de **vous aider** :\\n- √† **prendre conscience des enjeux** li√©s √† la mobilit√©,\\n- √† **questionner vos habitudes** de d√©placements,\\n- et **trouver des alternatives** plus durables (oui c‚Äôest possible !).\\n\\nCeci en toute confidentialit√©, comme toujours dans votre Cozy : **vous √™tes le seul √† avoir le droit d\'acc√©der √† vos donn√©es**, et vous avez le contr√¥le de les partager avec qui vous vous voulez, quand et si VOUS le souhaitez.\\n\\nSon objectif est aussi de **permettre l‚Äô√©mergence de nouveaux projets ou offres d‚Äô√©comobilit√©** gr√¢ce √† l‚Äôexpertise de structures partenaires du programme.\\n\\n&nbsp;\\n\\nAujourd\'hui cette application forme un duo avec **l\'application mobile TraceMob** dont le connecteur, pr√©sent aussi dans le store de votre Cloud Personnel, collecte et sauvegarde vos traces de mobilit√© chez vous.\\n\\nDemain **d\'autres capteurs compl√©teront vos donn√©es**. L\'application, elle-m√™me en cours de d√©veloppement, est aujourd\'hui tourn√©e vers la mobilit√©, demain d\'autres sources de CO2 pourront √©tendre son champ d\'action.\\n\\n&nbsp;\\n\\n[Agremob](https://agremob.com/) fait de cette application **un bien commun** utilisable au-del√† des fronti√®res de l\'agglom√©ration de la Rochelle. Si l\'h√©bergeur de votre Cozy ne la propose pas dans son propre store, contactez-le !","permissions":{"apps":{"description":"Utilis√© par la cozy-bar pour afficher les ic√¥nes des applications"},"settings":{"description":"Utilis√© par le cozy-bar pour afficher Claudy et savoir quelles applications sont √† venir"},"accounts":{"description":"Utilis√© pour obtenir un compte konnector"},"files":{"description":"Utilis√© pour acc√©der aux fichiers de sauvegarde de votre exportation de voyages"},"geojson-timeseries":{"description":"Utilis√© pour afficher les s√©ries temporelles geojson"},"coachco2.settings":{"description":"Utilis√© pour g√©rer les param√®tres de votre Coach CO2"}}},"dacc":{"settings":{"anonymous_participation":"Participer anonymement au calcul des √©missions moyennes de CO2","showAlerter":"Emission CO2 : afficher l\'alerter DACC sur la homepage"},"tripsCard":{"label":"Comparez vos √©missions √† la moyenne des autres utilisateurs de l‚Äôapplication ?","discard":"Non, merci","accept":"Comparer"},"compareDialog":{"title":"Comparez-vous anonymement","primaryText":"Afin de constituer la moyenne des √©missions des utilisateurs, et parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos donn√©es sans votre demande explicite, il va vous demander le droit d\'envoyer cette donn√©e.","secondaryText":"Ces donn√©es seront agr√©g√©es et anonymes, elles ne contiendront aucun identifiant ni lieux.","action":"J\'ai compris"},"permissionsDialog":{"title":"Demande de permissions","primaryText":"L‚Äôapplication Coach CO2 demande les permissions suivantes √† votre Cozy :","secondaryText":"Une fois autoris√©es, les permissions pourront √™tre modifi√©es dans les param√®tres","why_asking":"Pourquoi me demander ces permissions ?","export_outside":"Exporter hors du Cozy","anonymized_emissions":"Mes √©missions de CO2 anonymis√©es","anonymized_bikegoal_progression":"Ma progression de fa√ßon anonyme","accept":"Toujours autoriser","refuse":"Refuser"},"reasonsDialog":{"title":"Motifs de permissions","content":"Parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos donn√©es priv√©es, il vous demandera toujours le droit de laisser une application les envoyer √† l\'ext√©rieur."}},"vericalBarChart":{"title":"√âmissions de CO2","legend":{"yours":"Vos √©missions","average":"Moyennes des utilisateurs de l\'app"}},"bikeGoal":{"title":"Aller au travail √† v√©lo","yearly_goal_progression":"%{days}/%{daysToReach} jours \\npar an","goal_progression":"%{days}/%{daysToReach} jours","my_progression":"Ma¬†progression annuelle","average_progression":"Progression moyenne du groupe","achievement_certificate":"Attestation de r√©ussite","goals":"Objectifs","about":{"title":"√Ä propos de l‚Äôobjectif","intro":{"title":"Introduction","content":"Afin d‚Äôencourager le recours √† des modes de transports alternatifs et durables, la mise en ≈ìuvre du forfait mobilit√©s durables est entr√© en vigueur le 10 mai 2020.\\n\\nAinsi, les collaborateurs qui font le choix d‚Äôun mode de transport alternatif et durable pour leur trajet domicile-travail pourront b√©n√©ficier d‚Äôun forfait de %{bountyAmount}‚Ç¨ par an.\\n\\nVotre Coach CO2 vous aide √† comptabiliser vos trajets domicile-travail √† v√©lo et vous permet de g√©n√©rer l\'attestation de r√©ussite √† transmettre √† votre employeur !"},"how_trips_detected":{"title":"Comment sont d√©tect√©s mes trajets ?","content":"Vos trajets domicile-travail √† v√©lo seront automatiquement d√©tect√©s √† partir de vos horaires et de votre vitesse.\\n\\nSi un trajet n‚Äôest pas automatiquement d√©tect√© en ‚ÄúAller-retour au travail‚Äù, ouvrez le d√©tail du trajet et modifiez le motif du d√©placement en ‚ÄúAller-retour au travail‚Äù.\\n\\nSi un trajet n‚Äôest pas automatiquement d√©tect√© en ‚Äúv√©lo‚Äù, ouvrez le d√©tail du trajet et modifiez le mode de transport en ‚Äúv√©lo‚Äù."},"once_goal_reach":{"title":"Que faire une fois l‚Äôobjectif atteint","content":"Une fois l‚Äôobjectif atteint, il vous sera possible de g√©n√©rer une attestation de r√©ussite √† transmettre √† votre employeur pour b√©n√©ficier de votre forfait  de %{bountyAmount}‚Ç¨ üéâ"}},"deactivate":{"deactivate":"D√©sactiver","title":"Souhaitez-vous vraiment ne plus participer √† l‚Äôobjectif ?","content":"Vous pourrez toujours choisir d‚Äôy participer √† nouveau depuis les param√®tres de l‚Äôapplication.","stop_participate":"Ne plus participer","cancel":"Annuler"},"alert":{"success":{"text":"F√©licitations, vous avez atteint l‚Äôobjectif ‚ÄúAller travailler √† v√©lo‚Äù üéâ","action":"B√©n√©ficier de mon forfait de %{bountyAmount}‚Ç¨"},"title":"Allez au bureau √† v√©lo et recevez %{bountyAmount}‚Ç¨¬†!","text":"Dans le cadre du Forfait Mobilit√©s Durables¬†(FMD) mis en place par le gouvernement Fran√ßais, allez travailler √† v√©lo %{daysToReach} jours dans l‚Äôann√©e et recevez %{bountyAmount}‚Ç¨¬†!","actions":{"participate":"Participer","discard":"non,¬†merci"}},"edit":{"modify":"Modifier","title":"Modifier l\'objectif","firstname":"Pr√©nom","lastname":"Nom","workTime":"Temps de travail","workTime_full":"Temps plein","workTime_part":"Mi-temps ou temps partiel","workTimePercentage":"Pourcentage du temps de travail","compare_progress":"Comparer ma progression avec le groupe : %{source}","cancel":"Annuler","submit":"Ok","required":"Ce champ est obligatoire"},"settings":{"participation":"Participer √† l\'objectif ‚ÄúAller au travail √† v√©lo‚Äù","showAlerter":"Objectif v√©lo : afficher l\'alerter sur la homepage","hideOnboarding":"Objectif v√©lo : masquer l\'onboarding","sendToDACC":"Objectif v√©lo : activer le DACC","showAlerterSuccess":"Objectif v√©lo : forcer l\'affichage de l\'alerte de succ√®s sur la homepage"},"onboarding":{"title":"Forfait \\"mobilit√©s durables\\"","actions":{"finish":"Terminer","previous":"Pr√©c√©dent","next":"Suivant"},"steps":{"naming":{"title":"Nom et pr√©nom","nameLegend":"Le nom et le pr√©nom renseign√© seront utilis√©s pour g√©n√©rer l\'attestation de r√©ussite une fois l\'objectif atteint. Merci de remplir les informations suivantes¬†:"},"timing":{"timeLegend":"Vous disposez actuellement d‚Äôun contrat de travail √†¬†:","percentageLegend":"Le montant de la prime est modul√© selon le temps de travail. Pour les salari√©s √† temps partiel dont la dur√©e du travail est √©gale ou sup√©rieure √† 50% le montant de la prime sera la m√™me que pour un salari√© √† temps plein. Pour les salari√©s travaillant moins de 50% le montant de la prime sera calcul√© au prorata du temps travaill√©.\\n\\nRenseignez le pourcentage de votre temps de travail¬†:","percentage":"Pourcentage"},"comparison":{"comparisonLegend":"Il vous est possible d‚Äôafficher la progression moyenne des membres %{source} qui participent √† l‚Äôobjectif. Pour cela, il vous sera demand√© de participer √©galement √† la constitution de cette moyenne.\\n\\nVos donn√©es de progression seront agr√©g√©es et envoy√©es anonymement, elles ne contiendront aucun identifiant ni lieux.","compare":"Comparer ma progression","doNotCompare":"Ne pas comparer ma progression"}}},"certificateGeneration":{"title":"F√©licitations, vous¬†avez¬†atteint¬†l‚Äôobjectif ‚ÄúAller¬†travailler¬†√†¬†v√©lo‚Äù","content":"Une attestation a √©t√© g√©n√©r√©e pour attester de votre succ√®s pour l‚Äôann√©e %{year}. Transf√©rez-la d√®s maintenant par email √† votre employeur pour recevoir %{bountyAmount}‚Ç¨¬†!","actions":{"show":"Certificat - Aller travailler √† v√©lo.pdf","generate":"G√©n√©rer une attestation","regenerate":"G√©n√©rer une nouvelle attestation","understood":"J\'ai¬†compris"}},"employer":{"my_company":"de mon entreprise","your_company":"de votre entreprise","my_collectivity":"de ma collectivit√©","your_collectivity":"de votre collectivit√©"}},"geolocationTracking":{"locationRefusedDialog":{"description":"Pour enregistrer vos d√©placements, vous devez donner acc√®s √† Cozy √† votre ¬´ position ¬ª et √† votre ¬´ activit√© physique ¬ª. Vous allez √™tre redirig√© vers les param√®tres de l\'app."},"settings":{"enable":"M√©moriser mes d√©placements","sendLogs":"Envoyer les logs de Geoloc","forceUploadData":"Forcer l\'upload des donn√©es","copyIdentifier":"Copier l\'identifiant OpenPATH","createdOn":"cr√©√© le"}},"Modes":{"DefaultDialog":{"primary":"D√©finir comme transport par d√©faut pour cette cat√©gorie ?","secondary":"Le mode de transport sera automatiquement s√©lectionn√© comme par d√©faut pour tous les futurs trajets d√©tect√©s pour ce type de transport.","actions":{"save":"Enregistrer","cancel":"Annuler"}}},"PDF":{"name":"Attestation - Aller travailler √† v√©lo (%{year}).pdf","title":"Attestation sur l\'Honneur\\n de R√©ussite du Forfait\\n Mobilit√© Durable","date":"Le %{currentDateFormatted} √† %{currentTimeFormatted}","recipient":"Destinataire : %{sourceIdentity}","paragraph01":"Je soussign√©(e) %{username} certifie sur l‚Äôhonneur avoir atteint l\'objectif forfait mobilit√©s durables de %{daysToReach} jours en effectuant mes d√©placements du domicile vers mon travail en v√©lo du 1er janvier au 31 d√©cembre %{year}.","paragraph02":"En plus de cette attestation, je tiens √† disposition de mon employeur tout justificatif utile d\'utilisation effective du v√©lo comme les relev√©s de facture ou de paiement, d‚Äôassurances ou d‚Äôentretien de mon v√©lo.","paragraph03":"Fait pour servir et valoir ce que de droit.","signature":"Signature : %{username}"}}')},J3iu:function(e,t){e.exports="/img/icon.aa5e3ec7c4ab374b229f92d96f796ca6.svg"},VDMD:function(e,t){e.exports="/img/background.ada7027117d5bc0de6d2c11f52c6e096.png"},"b/Qy":function(e,t,a){var n={"./en.json":"22V2","./fr.json":"lIGy"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="b/Qy"},eUFy:function(e,t,a){var n={"./en":"2maa","./en.json":"2maa","./fr":"Hsuv","./fr.json":"Hsuv"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="eUFy"},iC3e:function(e,t,a){var n={"./en.json":"5dwM","./fr.json":"eW7n","./nl_NL.json":"w7vk"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="iC3e"},kyG8:function(e,t,a){e.exports={"CertificateGeneration-root":"CertificateGeneration-root--wWT2w"}},nXPL:function(e,t,a){"use strict";a.r(t);a("k37E"),a("QLHQ"),a("7SaY");var n=a("ivGQ"),r=a.n(n),o=a("iOQm"),i=a("UdSB"),c=a.n(i),l=a("XkwL"),s=a.n(l),u=a("J58c"),d=a.n(u),m="io.cozy.timeseries.geojson",p="io.cozy.coachco2.settings",f={timeseries:{doctype:m,attributes:{},relationships:{startPlaceContact:{type:"has-one",doctype:"io.cozy.contacts"},endPlaceContact:{type:"has-one",doctype:"io.cozy.contacts"}}},files:{doctype:"io.cozy.files",attributes:{},relationships:{}},settings:{doctype:p,attributes:{},relationships:{}}};function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g=function(e){var t=e.client,a=e.setting,n=e.account;return t.save(v(v({},a),{},{account:n,_type:p}))},y=function(e){var t,a=null==e||null===(t=e.aggregation)||void 0===t?void 0:t.sections;if(!a)return e;var n=a.sort((function(e,t){return new Date(e.startDate).getTime()-new Date(t.startDate).getTime()})),r=v({},e);return r.aggregation.sections=n,r},h=a("xEu0"),E=a.n(h),O=function(e,t,a){var n=Object(h.useClient)();if(e.isLoading||t.isLoading)return null;if(null===a){var r=e.data[0];if(r)return r.account;var o=t.data[0];return o?(g({client:n,setting:r,account:o}),o):null}return a},C=a("HZZ/"),j=a.n(C),w=a("hJxD"),x=a.n(w),k=a("L7Xp"),_=a("rfej"),T=a("HmmB"),P="AIR_OR_HSR",D={name:"BICYCLING_CATEGORY",modes:["BICYCLING","BICYCLING_ELECTRIC","SCOOTER_ELECTRIC"]},N={name:"CAR_CATEGORY",modes:["CAR","CAR_ELECTRIC","CARPOOL","CARPOOL_ELECTRIC","MOTO_INF_250","MOTO_SUP_250","MOPED"]},M={name:"PUBLIC_TRANSPORT_CATEGORY",modes:["BUS","BUS_ELECTRIC","TRAIN","SUBWAY"]},S=[.258,.187,.152],A=[.00173,.00529,.0248],R=[.0025,.0022,.0041,.00472,.00298],L=[.146,.137,.129],I="Trip_Id",F="Trip_Start_Display_Name",B="Trip_Arrival_Display_Name",G="Trip_Purpose",z="Trip_Start_Date",Z="Trip_End_Date",U="Section_Start_Date",q="Section_End_Date",H="Section_Duration",Y="Section_Distance",V="Section_Mode",W="Section_Coordinates",Q="Section_Distances",K="Section_Timestamps",J="Section_Speeds";Object.freeze({is_tracemob_expe:!0});function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){var t=e.accountId,a=e.limitBy;return{definition:Object(h.Q)(m).where({"cozyMetadata.sourceAccount":t}).partialIndex({aggregation:{$exists:!0}}).select(["cozyMetadata.sourceAccount","startDate","endDate","aggregation"]).indexFields(["cozyMetadata.sourceAccount","startDate","endDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(a),options:{as:"".concat(m,"/sourceAccount/").concat(t,"/limitedBy/").concat(a),fetchPolicy:E.a.fetchPolicies.olderThan(3e4)}}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.limit,r=void 0===n?1e3:n,o=Object(_.a)(e)||null,i=Object(k.a)(e)||null,c=e?"".concat(o.getFullYear(),"-").concat(o.getMonth()):"noDate",l=Object(h.Q)(m).where($({"cozyMetadata.sourceAccount":t},e&&{startDate:{$gte:o.toISOString(),$lte:i.toISOString()}})).partialIndex({aggregation:{$exists:!0}}).select(["aggregation","cozyMetadata.sourceAccount","startDate","endDate"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).limitBy(r);return{definition:l,options:{as:"".concat(m,"/sourceAccount/").concat(t,"/date/").concat(c,"/limitedBy/").concat(r),fetchPolicy:E.a.fetchPolicies.olderThan(3e4),enabled:Boolean(e)&&Boolean(t)}}},ae=function(e,t){var a=e.accountId;return{definition:Object(h.Q)(m).where({"cozyMetadata.sourceAccount":a,startDate:{$gt:null}}).partialIndex({"aggregation.purpose":"COMMUTE","aggregation.modes":{$in:["BICYCLING","BICYCLING_ELECTRIC","SCOOTER_ELECTRIC"]}}).select(["startDate","endDate","aggregation","aggregation.modes","aggregation.purpose","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(m,"/sourceAccount/").concat(a,"/BikeCommute/"),fetchPolicy:E.a.fetchPolicies.olderThan(1e8),enabled:t}}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?100:t,n=e.withOnlyLogin,r=void 0===n||n,o=Object(h.Q)("io.cozy.accounts").partialIndex({account_type:{$or:["tracemob","openpath"]}}).limitBy(a);return r&&o.select(["auth.login","account_type"]),{definition:o,options:{as:"".concat("io.cozy.accounts","/account_type/limitedBy/").concat(a,"/withOnlyLogin/").concat(r),fetchPolicy:E.a.fetchPolicies.olderThan(3e4)}}},re=function(){return{definition:Object(h.Q)(p),options:{as:p,fetchPolicy:E.a.fetchPolicies.olderThan(1e8)}}},oe=["data"],ie=["data"],ce=Object(n.createContext)(),le=function(){var e=Object(n.useContext)(ce);if(!e)throw new Error("useAccountContext must be used within a AccountProvider");return e},se=function(e){return e.auth.login},ue=function(e){var t=e.children,a=Object(n.useState)(null),o=s()(a,2),i=o[0],l=o[1],u=Object(h.useClient)(),d=re(),m=Object(h.useQuery)(d.definition,d.options),p=m.data,f=c()(m,oe),b=Object(h.isQueryLoading)(f),v=ne(),y=Object(h.useQuery)(v.definition,v.options),E=y.data,C=c()(y,ie),j=Object(h.isQueryLoading)(C),w=O({data:p,isLoading:b},{data:E,isLoading:j},i),x=b||j,k=Object(n.useCallback)((function(e){g({client:u,setting:p[0],account:e}),l(e)}),[u,p]),_=Object(n.useMemo)((function(){return{accounts:E,account:i,setAccount:k,isAccountLoading:x}}),[E,x,i,k]);return Object(n.useEffect)((function(){(null==w?void 0:w._id)!==(null==i?void 0:i._id)&&l(w)}),[w,i]),r.a.createElement(ce.Provider,{value:_},t)},de=Object(n.createContext)(),me=function(){var e=Object(n.useContext)(de);if(!e)throw new Error("useSelectDatesContext must be used within a SelectDatesProvider");return e},pe=function(e){var t=e.children,a=Object(n.useState)(null),o=s()(a,2),i=o[0],c=o[1],l=Object(n.useMemo)((function(){return{selectedDate:i,setSelectedDate:c}}),[i]);return r.a.createElement(de.Provider,{value:l},t)},fe=a("HROS"),be=a("4ZQF"),ve=a("vTbG"),ge=a("Rx+m"),ye=a("Aaol"),he=a("0Lot"),Ee=a("BqmN"),Oe=Object(he.a)({disableGlobal:!0}),Ce=function(e){var t=e.client,a=e.lang,n=e.polyglot,o=e.children;return r.a.createElement(fe.WebviewIntentProvider,null,r.a.createElement(Ee.b,{generateClassName:Oe},r.a.createElement(h.CozyProvider,{client:t},r.a.createElement(h.RealTimeQueries,{doctype:m}),r.a.createElement(h.RealTimeQueries,{doctype:p}),r.a.createElement(h.RealTimeQueries,{doctype:"io.cozy.files"}),r.a.createElement(ue,null,r.a.createElement(pe,null,r.a.createElement(ye.b,{lang:a,polyglot:n},r.a.createElement(be.a,null,r.a.createElement(ge.a,null,r.a.createElement(ve.a,null,o)))))))))},je=a("mZuE"),we=a("6Vpj"),xe=a("+rdD"),ke=a("6WJ3"),_e=a("HYTT"),Te=a("Su4X"),Pe=a("Gyqq"),De=a("d5dM"),Ne=Object(Pe.e)(we.b),Me=function(){var e=Object(ye.e)().t;return r.a.createElement(De.a,null,r.a.createElement(Pe.d,null,r.a.createElement(Pe.b,null,r.a.createElement(Ne,{to:"/trips"},r.a.createElement(Pe.a,{icon:ke.a}),r.a.createElement(Pe.c,null,e("nav.trips")))),r.a.createElement(Pe.b,null,r.a.createElement(Ne,{to:"/analysis"},r.a.createElement(Pe.a,{icon:_e.a}),r.a.createElement(Pe.c,null,e("nav.analysis")))),r.a.createElement(Pe.b,{secondary:!0},r.a.createElement(Ne,{to:"/analysis/modes"},r.a.createElement(Pe.c,null,e("nav.modes")))),r.a.createElement(Pe.b,{secondary:!0},r.a.createElement(Ne,{to:"/analysis/purposes"},r.a.createElement(Pe.c,null,r.a.createElement(xe.a,{whiteSpace:"nowrap"},e("nav.purposes"))))),r.a.createElement(Pe.b,null,r.a.createElement(Ne,{to:"/settings"},r.a.createElement(Pe.a,{icon:Te.a}),r.a.createElement(Pe.c,null,e("nav.settings"))))))},Se=a("9Y1u"),Ae=a("WY6r"),Re=a("N8wp"),Le=function(){var e=Object(ye.e)().t;return r.a.createElement(Ae.b,null,r.a.createElement(Me,null),r.a.createElement(Ae.c,null,r.a.createElement(Ae.a,null,r.a.createElement(je.b,null))),r.a.createElement(Re.a,{t:e}),r.a.createElement(Se.a,null))},Ie=a("LGLP"),Fe=a.n(Ie),Be=a("VDMD"),Ge=a.n(Be),ze=a("ii0b"),Ze=a.n(ze),Ue=a("QGb3"),qe=a.n(Ue),He=a("qmdU"),Ye=a("0r57"),Ve=a("8wm5"),We=a("C+aL"),Qe=a.n(We),Ke=a("/yh+"),Je=a.n(Ke),Xe=a("3UCn"),$e=a.n(Xe),et=a("wXrU"),tt=a.n(et),at=a("XA6X"),nt=a.n(at),rt=a("PpCK"),ot=a.n(rt),it=a("nVpl"),ct=a.n(it),lt=a("FpXT"),st=a.n(lt),ut=a("efAt"),dt=a.n(ut),mt=a("rUPj"),pt=a.n(mt),ft=a("QVGT"),bt=a("rinC"),vt=a("uywR"),gt=a("eBtv"),yt=a("Dzzq"),ht=a("6CkU"),Et=a("x9kU"),Ot=a("Dt6a"),Ct=a("tLIM"),jt=a("GLkt"),wt=a("Npr/"),xt=a("t+nR"),kt=a("4+jE"),_t=a("P6yu"),Tt=a("XAJ7"),Pt=a("B7lc"),Dt=a("P/GF"),Nt=a("I46i"),Mt=a("KeZy"),St=a("u/Gg"),At=a("Ins2"),Rt=a("B6UP"),Lt=a("keV2"),It=a("6+xZ"),Ft=[P,"BICYCLING_ELECTRIC","BICYCLING","BUS_ELECTRIC","BUS","CAR_ELECTRIC","CAR","IN_VEHICLE","CARPOOL_ELECTRIC","CARPOOL","MOTO_INF_250","MOTO_SUP_250","SCOOTER_ELECTRIC","MOPED","SUBWAY","TRAIN","WALKING","ON_FOOT","RUNNING","UNKNOWN"],Bt=function e(t){switch(t){case P:return Pt.a;case"BICYCLING_ELECTRIC":return Et.a;case"BICYCLING":return ft.a;case"BUS_ELECTRIC":return bt.a;case"CAR":case"IN_VEHICLE":return vt.a;case"BUS":return bt.a;case"CAR_ELECTRIC":case"CARPOOL_ELECTRIC":return Ot.a;case"CARPOOL":return gt.a;case"MOTO_INF_250":case"MOTO_SUP_250":return xt.a;case"SCOOTER_ELECTRIC":return Ct.a;case"MOPED":return wt.a;case"SUBWAY":return St.a;case"TRAIN":return At.a;case"WALKING":case"ON_FOOT":case"RUNNING":return Lt.a;case"UNKNOWN":return Rt.a;default:return pt()("info","Unknown mode ".concat(t),"pickModeIcon"),e("UNKNOWN")}},Gt=function e(t){switch(t){case P:return"#F05759";case"BICYCLING_ELECTRIC":return"#B3BF26";case"BICYCLING":return"#15CACD";case"SCOOTER_ELECTRIC":return"#84C6AA";case"BUS_ELECTRIC":return"#F85AA8";case"BUS":return"#BA5AE8";case"CAR_ELECTRIC":return"#FC881C";case"CAR":case"IN_VEHICLE":return"#FF7B5E";case"CARPOOL_ELECTRIC":return"#80A5E1";case"CARPOOL":return"#1CAAE8";case"MOTO_INF_250":return"#C78542";case"MOTO_SUP_250":return"#C8A76F";case"MOPED":return"#E3BE7D";case"SUBWAY":return"#8978FF";case"TRAIN":return"#F1B61E";case"UNKNOWN":return"#A4A7AC";case"WALKING":case"ON_FOOT":case"RUNNING":return"#21B930";default:return pt()("info","Unknown mode ".concat(t),"modeToColor"),e("UNKNOWN")}},zt=["COMMUTE","WORK","SHOPPING","PERSONAL_MED","PICK_DROP","SPORT","EXERCISE","ENTERTAINMENT","TRAVEL","OTHER_PURPOSE"],Zt=function e(t){switch(t){case"COMMUTE":return ht.a;case"WORK":return It.a;case"SHOPPING":return Nt.a;case"TRAVEL":return kt.a;case"PERSONAL_MED":return Tt.a;case"EXERCISE":return jt.a;case"ENTERTAINMENT":return yt.a;case"PICK_DROP":return Dt.a;case"SPORT":return Mt.a;case"OTHER_PURPOSE":return _t.a;default:return pt()("info","Unknown purpose ".concat(t),"pickPurposeIcon"),e("OTHER_PURPOSE")}},Ut=function e(t){switch(t){case"COMMUTE":return"#BA5AE8";case"WORK":return"#8978FF";case"SHOPPING":return"#FF7B5E";case"TRAVEL":return"#15CACD";case"PERSONAL_MED":return"#1CAAE8";case"EXERCISE":return"#21B930";case"ENTERTAINMENT":return"#F85AA8";case"PICK_DROP":return"#C78542";case"SPORT":return"#B3BF26";case"OTHER_PURPOSE":return"#A4A7AC";default:return pt()("info","Unknown purpose ".concat(t),"purposeToColor"),e("OTHER_PURPOSE")}},qt=function(e){var t=function(e){return parseFloat((e.reduce((function(e,t){return e+t}),0)/e.length).toFixed(5))};switch(e){case P:return t(S);case"BICYCLING_ELECTRIC":case"BICYCLING":return 0;case"BUS_ELECTRIC":return.0217;case"BUS":return t(L);case"CAR_ELECTRIC":return.0198;case"CAR":case"IN_VEHICLE":return.192;case"CARPOOL_ELECTRIC":return.0099;case"CARPOOL":return.096;case"MOTO_INF_250":return.0604;case"MOTO_SUP_250":return.165;case"SCOOTER_ELECTRIC":return 0;case"MOPED":return.064;case"SUBWAY":return t(R);case"TRAIN":return t(A);case"UNKNOWN":return 0;case"WALKING":case"ON_FOOT":case"RUNNING":default:return 0}},Ht=function(e){return 1e3*parseFloat(e)},Yt=function(e){return e===P?"(".concat(Ht(.152),"~").concat(Ht(.258),") g/km"):"".concat(Vt(e)," g/km")},Vt=function(e){return Math.round(Ht(qt(e)))},Wt=function e(t){switch(t){case P:case"WALKING":case"ON_FOOT":case"RUNNING":case"UNKNOWN":return null;case"BICYCLING_ELECTRIC":case"BICYCLING":case"SCOOTER_ELECTRIC":return D.name;case"BUS_ELECTRIC":case"BUS":case"SUBWAY":case"TRAIN":return M.name;case"CAR_ELECTRIC":case"CAR":case"IN_VEHICLE":case"CARPOOL_ELECTRIC":case"CARPOOL":case"MOTO_INF_250":case"MOTO_SUP_250":case"MOPED":return N.name;default:return pt()("info","Unknown mode ".concat(t),"modeToCategory"),e("UNKNOWN")}},Qt=a("e0b0"),Kt=a.n(Qt),Jt=function(e){var t="m",a=e;return e>1e3&&(t="km",a=e/1e3),"".concat(Math.round(a)," ").concat(t)},Xt=function(e){return"".concat(Math.round(100*e)/100," kg")},$t=function(e,t){var a=["fr","en"].includes(t)?t:"en";return Kt()(1e3*e,{delimiter:" ",largest:2,round:!0,units:["h","m"],language:a,languages:{fr:{d:function(){return"j"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}},en:{d:function(){return"d"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}}}})},ea=function(e){var t=e.f,a=e.lang,n=e.date;return t(n,"fr"===a?"HH[h]mm":"HH:mm")},ta=function(e){return 3.6*(e.reduce((function(e,t){return e+t}),0)/e.length)},aa=function(e){var t=0,a=e.distance/1e3;switch(e.mode){case P:if(a<=1e3){t+=.258*a;break}t+=a<=3500?.187*a:.152*a;break;case"BICYCLING_ELECTRIC":case"BICYCLING":t+=0*a;break;case"BUS_ELECTRIC":t+=.0217*a;break;case"BUS":t+=a*qt("BUS");break;case"CAR_ELECTRIC":t+=.0198*a;break;case"CAR":case"IN_VEHICLE":t+=.192*a;break;case"CARPOOL_ELECTRIC":t+=.0099*a;break;case"CARPOOL":t+=.096*a;break;case"MOTO_INF_250":t+=.0604*a;break;case"MOTO_SUP_250":t+=.165*a;break;case"SCOOTER_ELECTRIC":t+=0*a;break;case"MOPED":t+=.064*a;break;case"SUBWAY":t+=a*qt("SUBWAY");break;case"TRAIN":t+=a*qt("TRAIN");break;case"UNKNOWN":t+=0*a;break;case"WALKING":case"RUNNING":case"ON_FOOT":t+=0*a}return t},na=function(e){var t,a=e.averageSpeed,n=e.duration/60;switch(e.mode){case"WALKING":case"ON_FOOT":case"RUNNING":t=a<=3?2:a<=5?3.5:a<=6.5?5:7;break;case"BICYCLING":t=a<=15?5.8:a<=22.4?8:a<=25.6?10:15.8}return t?function(e,t){return 74.25*e*3.5/200*t}(t,n):0},ra=a("euuj"),oa=a.n(ra),ia=function(e){return Je()(e,"properties.manual_purpose")},ca=function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.automatic_purpose},la=function(e){return Je()(e,"properties.start_place.data.properties.display_name")},sa=function(e){return Je()(e,"properties.end_place.data.properties.display_name")},ua=function(e,t){var a=(t||{}).defaultTransportModeByGroup,n=Je()(e,"properties.sensed_mode","").toUpperCase(),r=n.split("PREDICTEDMODETYPES.")[1]||n.split("MOTIONTYPES.")[1],o=Ft.includes(r),i=Ft.find((function(e){return(null==a?void 0:a[Wt(r)])===e}));return!!i&&i||o&&r||"UNKNOWN"},da=oa()((function(e,t){return e.features.filter((function(e){return"FeatureCollection"===e.type})).flatMap((function(e){return function(e,t){return e.features.map((function(e){var a=Je()(e,"properties.start_fmt_time"),n=Je()(e,"properties.end_fmt_time"),r=Je()(e,"properties.speeds");return{id:e.id,mode:ua(e,t),coordinates:Je()(e,"geometry.coordinates"),timestamps:Je()(e,"properties.timestamps"),distance:Je()(e,"properties.distance"),distances:Je()(e,"properties.distances"),duration:Je()(e,"properties.duration"),startDate:a?new Date(a):a,endDate:n?new Date(n):n,speeds:r,avgSpeed:r?ta(r):void 0}}))}(e,t)}))})),ma=function(e){return new Date(e.properties.start_fmt_time)},pa=function(e){return new Date(e.properties.end_fmt_time)};function fa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ba(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function va(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return ga(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ga(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ya=function(e){return e.flatMap((function(t,a){return t.series.map((function(t){return function(e){var t=e.features,a=e.properties,n=$e()(t,(function(e){return e.id}));return tt()({},e,{properties:{start_place:{data:n[a.start_place.$oid]},end_place:{data:n[a.end_place.$oid]}}})}(ba(ba({},t),{},{timeserieId:e[a]._id}))}))}))},ha=function(e){var t=0;return e.forEach((function(e){var a;t+=(null===(a=e.aggregation)||void 0===a?void 0:a.totalCO2)||0})),t},Ea=function(e,t){var a=st()(e),n=e[t],r=0===n.timeseries.length&&0===n.totalCO2,o=ot()(a.filter((function(e){return r?e[0]!==t&&e[1].totalCO2>0:e[1].totalCO2>0})),(function(e){return e[1].totalCO2})).reverse(),i=ot()(a.filter((function(e){return r?e[0]!==t&&0===e[1].totalCO2:0===e[1].totalCO2})),(function(e){return e[1].timeseries.length})).reverse();return ba(ba(ba({},Qe()(o)),Qe()(i)),r&&d()({},t,n))},Oa=function(e){var t=function(e){var t=Ft.reduce((function(e,t){return ba(ba({},e),{},d()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){e.aggregation.sections.forEach((function(a){var n=t[a.mode].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a.mode].totalCO2+=a.CO2}))})),t}(e);return Ea(t,"UNKNOWN")},Ca=function(e){var t=Je()(e,"aggregation.purpose","").toUpperCase();return zt.includes(t)&&t||"OTHER_PURPOSE"},ja=function(e){var t=function(e){var t=zt.reduce((function(e,t){return ba(ba({},e),{},d()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){var a=Ca(e),n=t[a].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a].totalCO2+=e.aggregation.totalCO2})),t}(e);return Ea(t,"OTHER_PURPOSE")},wa=function(e){return e.startDate?new Date(e.startDate):null},xa=function(e){return e.endDate?new Date(e.endDate):null},ka=function(e,t){return"start"===t?wa(e):"end"===t?xa(e):null},_a=function(e){return Je()(e,"aggregation.endPlaceDisplayName")},Ta=function(e,t){return"start"===t?function(e){return Je()(e,"aggregation.startPlaceDisplayName")}(e):"end"===t?_a(e):null},Pa=function(e,t){var a=Na(e);return qe()(a.properties["".concat(t,"_loc")].coordinates)},Da=function(e,t){return Pa(e,t).reverse().toString().replace(",",", ")},Na=function(e){return Je()(e,"series[0]")},Ma=function(e){var t=wa(e),a=xa(e);return Object(Ye.a)(a,t)},Sa=function(e){return Jt(e.aggregation.totalDistance)},Aa=function(e){var t=function(e){return Je()(e,"aggregation.totalCO2","")}(e);return Xt(t)},Ra=function(e){var t,a=function(e){return Je()(e,"aggregation.totalCalories","")}(e);return t=a,"".concat(Math.round(t)," kcal")},La=function(e,t){var a=t(xa(e),"dddd D MMMM YYYY");return a.charAt(0).toUpperCase()+a.slice(1)},Ia=function(e,t){var a;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var n=ba({},e);return nt()(n,"series[0].properties.automatic_purpose",t),nt()(n,"aggregation.recurring",!0),Ba(n)},Fa=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isRecurringTrip,o=void 0===r?null:r;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var i=ba({},e);return nt()(i,"series[0].properties.manual_purpose",t.toUpperCase()),null!==o&&nt()(i,"aggregation.recurring",o),Ba(i)},Ba=function(e){var t,a=e.series[0],n=null!=e&&null!==(t=e.aggregation)&&void 0!==t&&t.recurring&&ca(a)||ia(a);return n?ba(ba({},e),{},{aggregation:ba(ba({},e.aggregation),{},{purpose:n})}):e},Ga=function(e,t){var a=function(e,t){var a,n=0,r=va(e.aggregation.sections);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.mode===t&&(n+=o.CO2)}}catch(i){r.e(i)}finally{r.f()}return n}(e,t);return Xt(a)},za=function(e){var t=0,a=qe()(e).sort((function(e,t){return wa(e)-wa(t)}));return a.forEach((function(e,n){if(0===n)t++;else{var r=wa(e),o=a[n-1],i=wa(o),c=Object(He.a)(i,12);r.toDateString()===i.toDateString()||r<c||t++}})),t},Za=function(e,t){return e.filter((function(e){return new Date(e.startDate).getFullYear().toString()===t}))},Ua=a("8ZpT"),qa=a.n(Ua),Ha=function(){var e,t=null===(e=qa()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.daysToReach;if(!t)throw new Error('Flag "coachco2.bikegoal.settings" must be used');return t},Ya=function(){var e,t=null===(e=qa()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.bountyAmount;if(!t)throw new Error('Flag "coachco2.bikegoal.settings" must be used');return t},Va=function(){var e,t,a=null===(e=qa()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.sourceIdentity,n=null===(t=qa()("coachco2.bikegoal.settings"))||void 0===t?void 0:t.sourceType,r=["custom","company","collectivity"];if(!n)throw new Error('Flag "coachco2.bikegoal.settings" must be used');if(!r.includes(n))throw new Error('Flag "coachco2.bikegoal.settings"\'s "sourceType" must be one of '.concat(r));if("custom"===n&&!a)throw new Error('Flag "coachco2.bikegoal.settings"\'s "sourceIdentity" must be a string when "sourceType" is set to "custom"');return{sourceType:n,sourceIdentity:"custom"===n?a:null}},Wa=function(e){return!(!e||0===e.length)&&za(e)>=Ha()},Qa=function(e){if(!e||0===e.length)return 0;var t=za(e),a=Ha();return t<a?t:a},Ka=a("gQ+z"),Ja=["timeseries","sendToDACC","size"],Xa=function(e){var t,a,n=e.timeseries,o=e.sendToDACC,i=e.size,l=c()(e,Ja),s=function(e){if(!e)return 100;var t=Qa(e),a=Ha();return Math.round(t/a*100)}(n),u=function(e){switch(e){case"medium":return"3rem";case"small":return"2.5rem";default:return"4.5rem"}}(i);return r.a.createElement(Ka.a,Fe()({size:i,primaryProps:{value:s,color:"#BA5AE8"}},o&&{secondaryProps:{value:(t=Ha(),a=.5>t?t:.5,Math.round(a/t*100)),color:"#BA5AE83D"}},l),r.a.createElement(xe.a,{fontSize:u},"üö¥"))};Xa.propTypes={className:Ze.a.string,timeseries:Ze.a.arrayOf(Ze.a.object)};var $a=Xa,en=a("kyG8"),tn=a.n(en),an=a("i0pn"),nn=a("DZbK"),rn=a.n(nn),on=a("vVt6"),cn=a.n(on),ln=a("v5t+"),sn=a.n(ln),un=function(){return r.a.createElement(an.h,{viewBox:"0 0 409 757"},r.a.createElement(an.f,{d:"M386.752 16.07C386.752 22.7658 392.18 28.1938 398.876 28.1938C403.363 28.1938 407 31.8309 407 36.3175L407 720.682C407 725.169 403.363 728.806 398.876 728.806C392.18 728.806 386.752 734.234 386.752 740.93L386.752 743.903C386.752 750.032 381.784 755 375.656 755L33.3444 755C27.2158 755 22.2475 750.032 22.2475 743.903L22.2475 740.93C22.2475 734.234 16.8195 728.806 10.1237 728.806C5.63715 728.806 2 725.169 2 720.682L2.00003 36.3175C2.00003 31.8309 5.63718 28.1938 10.1238 28.1938C16.8195 28.1938 22.2476 22.7658 22.2476 16.07L22.2476 13.0969C22.2476 6.96822 27.2158 1.99998 33.3444 1.99998L375.656 2C381.784 2 386.752 6.96825 386.752 13.0969L386.752 16.07Z",fill:"white",stroke:"#297EF2",strokeWidth:"4"}),r.a.createElement(an.f,{d:"M386.926 8.8584C395.21 8.8584 401.926 15.5741 401.926 23.8584L401.926 736.142C401.926 742.77 396.553 748.142 389.926 748.142L19.0743 748.142C12.4468 748.142 7.07429 742.77 7.07429 736.142L7.07431 20.8584C7.07431 14.231 12.4469 8.85838 19.0743 8.85838L386.926 8.8584Z",stroke:"#297EF2",strokeWidth:"2"}),r.a.createElement(an.c,{cx:"404.951",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(an.c,{cx:"404.951",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(an.c,{cx:"4.04962",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(an.c,{cx:"4.04962",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}))},dn=function(){return r.a.createElement(an.h,{width:"72",height:"72",viewBox:"0 0 72 72"},r.a.createElement(an.f,{d:"M31.2945 5.16468C33.8194 2.39335 38.1806 2.39335 40.7055 5.16468C42.3805 7.00311 44.9728 7.6977 47.3426 6.94307C50.9149 5.8055 54.6918 7.98608 55.4928 11.6486C56.0241 14.0782 57.9218 15.9759 60.3514 16.5072C64.0139 17.3082 66.1945 21.0851 65.0569 24.6574C64.3023 27.0272 64.9969 29.6195 66.8353 31.2945C69.6067 33.8194 69.6067 38.1806 66.8353 40.7055C64.9969 42.3805 64.3023 44.9728 65.0569 47.3426C66.1945 50.9149 64.0139 54.6918 60.3514 55.4928C57.9218 56.0241 56.0241 57.9218 55.4928 60.3514C54.6918 64.0139 50.9149 66.1945 47.3426 65.0569C44.9728 64.3023 42.3805 64.9969 40.7055 66.8353C38.1806 69.6067 33.8194 69.6067 31.2945 66.8353C29.6195 64.9969 27.0272 64.3023 24.6574 65.0569C21.0851 66.1945 17.3082 64.0139 16.5072 60.3514C15.9759 57.9218 14.0782 56.0241 11.6486 55.4928C7.98608 54.6918 5.8055 50.9149 6.94307 47.3426C7.6977 44.9728 7.00311 42.3805 5.16468 40.7055C2.39335 38.1806 2.39335 33.8194 5.16468 31.2945C7.00311 29.6195 7.6977 27.0272 6.94307 24.6574C5.8055 21.0851 7.98608 17.3082 11.6486 16.5072C14.0782 15.9759 15.9759 14.0782 16.5072 11.6486C17.3082 7.98608 21.0851 5.8055 24.6574 6.94307C27.0272 7.6977 29.6195 7.00311 31.2945 5.16468Z",fill:"#297EF2"}),r.a.createElement(an.a,{cx:"36",cy:"36",r:"26",fill:"white"}),r.a.createElement(an.f,{d:"M33.8789 46.515C34.1467 46.4481 34.4182 46.611 34.4852 46.8789L34.9852 48.8789C34.9953 48.9194 35.0002 48.9601 35.0002 49.0001H37C37 48.9601 37.0049 48.9194 37.015 48.8789L37.515 46.8789C37.582 46.611 37.8535 46.4481 38.1214 46.515C38.3893 46.582 38.5522 46.8535 38.4852 47.1214L38.0001 49.0617V51.0001C38.0001 51.5524 37.5524 52.0001 37.0001 52.0001H35.0001C34.4478 52.0001 34.0001 51.5524 34.0001 51.0001V49.0617L33.515 47.1214C33.4481 46.8535 33.611 46.582 33.8789 46.515Z",fill:"#297EF2"}),r.a.createElement(an.f,{d:"M34 47C33.4477 47 32.9798 46.5318 32.6829 46.0661C32.1387 45.2125 30.95 44.2886 29.5553 43.2046C26.3288 40.6968 22 37.3322 22 32C22 25.3726 28.268 20 36 20V47H34Z",fill:"#297EF2"}),r.a.createElement(an.f,{d:"M36 47H34.2857C34.2857 45.882 33.4127 44.6945 32.3173 43.2046C30.4736 40.6968 28 37.3322 28 32C28 25.3726 31.5817 20 36 20V47Z",fill:"#579EFF"}),r.a.createElement(an.f,{d:"M38 47C38.5523 47 39.0202 46.5318 39.3171 46.0661C39.8613 45.2125 41.05 44.2886 42.4447 43.2046C45.6712 40.6968 50 37.3322 50 32C50 25.3726 43.732 20 36 20V47H38Z",fill:"#B3D3FF"}),r.a.createElement(an.f,{d:"M36 47H37.7143C37.7143 45.882 38.5873 44.6945 39.6827 43.2046C41.5264 40.6968 44 37.3322 44 32C44 25.3726 40.4183 20 36 20V47Z",fill:"#91BFFF"}),r.a.createElement(an.a,{cx:"36",cy:"36",r:"23",stroke:"#297EF2",strokeWidth:"2"}))},mn=function(){return r.a.createElement(an.h,{width:"74",height:"32",viewBox:"0 0 74 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement(an.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M57.1068 13.6515L58.8382 18.2742L60.4808 13.6515H62.3782L59.6788 20.5655C59.1822 21.8522 58.3415 22.5275 57.3102 22.5275C56.7628 22.5275 56.1002 22.3622 55.6548 22.1202L56.0488 20.8468C56.3675 21.0242 56.6988 21.1388 56.9155 21.1388C57.2708 21.1388 57.5522 21.0242 57.6928 20.7822L57.9222 20.2982L55.1835 13.6515H57.1068ZM45.1202 13.5208C47.0682 13.5208 48.6982 15.0868 48.6982 16.9588C48.6982 18.8308 47.0682 20.4095 45.1202 20.4095C43.1588 20.4095 41.5162 18.8308 41.5162 16.9588C41.5162 15.0868 43.1588 13.5208 45.1202 13.5208ZM37.9802 11.3335C39.3042 11.3335 40.5268 11.8948 41.3802 12.7988L40.0182 14.0208C39.5082 13.4355 38.7828 13.0408 37.9802 13.0408C36.5162 13.0408 35.2675 14.3395 35.2675 15.8542C35.2675 17.3822 36.5162 18.6815 37.9808 18.6815C38.7828 18.6815 39.5082 18.2868 40.0182 17.7008L41.3802 18.9242C40.5268 19.8148 39.3042 20.3882 37.9802 20.3882C35.4728 20.3882 33.3335 18.3122 33.3335 15.8548C33.3335 13.3975 35.4735 11.3335 37.9802 11.3335ZM54.7055 13.6522V14.9642L51.3948 18.6562H54.7315V20.2348H48.9762V18.9235L52.2868 15.2302H49.0655V13.6522H54.7055ZM45.1188 15.0868C44.1255 15.0868 43.2988 15.9402 43.2988 16.9588C43.2988 17.9782 44.1255 18.8435 45.1188 18.8435C46.1002 18.8435 46.9275 17.9782 46.9275 16.9588C46.9275 15.9402 46.1008 15.0868 45.1195 15.0868H45.1188Z",fill:"#297EF2"}),r.a.createElement(an.f,{d:"M20.0002 26.6668C25.8912 26.6668 30.6668 21.8912 30.6668 16.0002C30.6668 10.1091 25.8912 5.3335 20.0002 5.3335C14.1091 5.3335 9.3335 10.1091 9.3335 16.0002C9.3335 21.8912 14.1091 26.6668 20.0002 26.6668Z",fill:"#297EF2"}),r.a.createElement(an.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2092 17.0408C22.1026 17.2075 21.8666 17.2568 21.7032 17.1475C21.6899 17.1395 21.6759 17.1302 21.6632 17.1208C21.1886 17.4928 20.6039 17.6955 19.9966 17.6955C19.3906 17.6955 18.8079 17.4935 18.3339 17.1222C18.3219 17.1315 18.3092 17.1402 18.2966 17.1482C18.1292 17.2575 17.8966 17.2055 17.7906 17.0422C17.6839 16.8775 17.7306 16.6542 17.8946 16.5435C18.0372 16.4502 18.0472 16.2628 18.0472 16.2608C18.0506 16.1628 18.0932 16.0695 18.1646 16.0042C18.2352 15.9375 18.3239 15.9002 18.4219 15.9075C18.6179 15.9122 18.7779 16.0775 18.7739 16.2762C18.7739 16.2788 18.7739 16.3782 18.7379 16.5162C19.4699 17.1235 20.5312 17.1215 21.2606 16.5108C21.2339 16.4048 21.2272 16.3208 21.2252 16.2815C21.2232 16.1795 21.2599 16.0875 21.3279 16.0168C21.3952 15.9482 21.4859 15.9088 21.5826 15.9075H21.5892C21.7852 15.9075 21.9479 16.0655 21.9526 16.2622C21.9526 16.2622 21.9626 16.4502 22.1039 16.5435C22.2686 16.6522 22.3159 16.8748 22.2092 17.0408ZM23.7572 12.7948C23.6526 11.9095 23.2606 11.0908 22.6306 10.4575C21.9086 9.73216 20.9539 9.3335 19.9439 9.3335C18.9339 9.3335 17.9806 9.73216 17.2579 10.4582C16.6259 11.0935 16.2326 11.9168 16.1306 12.8075C15.2632 12.9128 14.4612 13.3162 13.8419 13.9655C13.1352 14.7062 12.7466 15.6855 12.7466 16.7235C12.7466 18.8982 14.4692 20.6668 16.5879 20.6668H23.4119C25.5292 20.6668 27.2532 18.8982 27.2532 16.7235C27.2532 14.6682 25.7132 12.9748 23.7572 12.7948Z",fill:"white"}))};an.d.register({family:"Lato",src:cn.a}),an.d.register({family:"Courgette",src:rn.a}),an.d.register({family:"PlusJakarta",src:sn.a});var pn=an.g.create({co2CertificateSVG:{margin:"0 auto 10px"},cozySVG:{margin:"0 auto"},page:{padding:8},content:{display:"flex",justifyContent:"space-between",position:"absolute",top:54,left:40,bottom:50,right:40},title:{whiteSpace:"pre-line",fontFamily:"PlusJakarta",fontSize:24,fontStyle:"normal",textAlign:"center",lineHeight:1.2},subTitle:{textAlign:"center",color:"rgba(29, 33, 42, 0.48)",marginTop:20,fontSize:12,fontStyle:"normal",fontWeight:400},name:{fontFamily:"Courgette",textAlign:"center",color:"#297EF2",fontSize:32,fontStyle:"normal",marginTop:20},divider:{width:"100%",height:1,backgroundColor:"rgba(29, 33, 42, 0.12)",margin:"20px 0"},text:{fontFamily:"Lato",textAlign:"left",color:"rgba(29, 33, 42, 0.90)",fontSize:14,fontStyle:"normal",marginTop:20,lineHeight:1.3}}),fn=function(e){var t=e.t,a=e.username,n=e.daysToReach,o=e.sourceIdentity,i=e.year,c=e.lang,l=new Date,s=l.toLocaleDateString(c,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u="".concat(l.getHours(),"h").concat(l.getMinutes());return r.a.createElement(an.b,null,r.a.createElement(an.e,{wrap:!1,style:pn.page},r.a.createElement(an.j,null,r.a.createElement(un,null)),r.a.createElement(an.j,{style:pn.content},r.a.createElement(an.j,null,r.a.createElement(an.j,{style:pn.co2CertificateSVG},r.a.createElement(dn,null)),r.a.createElement(an.i,{style:pn.title},t("PDF.title")),r.a.createElement(an.i,{style:pn.subTitle},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(an.i,{style:pn.name},a),r.a.createElement(an.j,{style:pn.divider}),r.a.createElement(an.i,{style:pn.text},t("PDF.recipient",{sourceIdentity:o})),r.a.createElement(an.i,{style:pn.text},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(an.i,{style:pn.text},t("PDF.paragraph01",{username:a,daysToReach:n,year:i})),r.a.createElement(an.i,{style:pn.text},t("PDF.paragraph02")),r.a.createElement(an.i,{style:pn.text},t("PDF.paragraph03")),r.a.createElement(an.i,{style:pn.text},t("PDF.signature",{username:a}))),r.a.createElement(an.j,{style:pn.cozySVG},r.a.createElement(mn,null)))))},bn=h.models.folder,vn=bn.MAGIC_FOLDERS,gn=bn.ensureMagicFolder,yn=bn.getReferencedFolder,hn="".concat("io.cozy.apps","/coachco2"),En=function(){var e=j()(x.a.mark((function e(t,a){var n,r,o,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(t,{_id:hn,_type:"io.cozy.apps"});case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,gn(t,vn.ADMINISTRATIVE,"/".concat(a("folder.administrative")));case 9:return r=e.sent,o=r.path,e.next=13,gn(t,vn.COACH_CO2,"".concat(o,"/").concat(a("folder.coachco2")));case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),On=a("0nAg"),Cn=function(){var e=j()(x.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.pdfDocument,o=t.year,e.prev=1,e.next=4,Object(an.k)(r).toBlob();case 4:return i=e.sent,e.next=7,En(a,n);case 7:return c=e.sent,l=c._id,e.next=11,Object(On.uploadFileWithConflictStrategy)(a,i,{name:n("PDF.name",{year:o}),contentType:"application/pdf",dirId:l,conflictStrategy:"rename"});case 11:return s=e.sent,u=s.data,e.abrupt("return",u);case 16:return e.prev=16,e.t0=e.catch(1),pt()("error",e.t0,"savePdfCertificate"),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),jn=function(){var e=j()(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collection("io.cozy.contacts"),e.next=3,a.findMyself();case 3:return n=e.sent,r=n.data,e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wn=a("DWnN"),xn=a("/s+K"),kn=a("AHiN"),_n=a("W5TB"),Tn=a("OEPu"),Pn=a("4jS1"),Dn=a("i5f2"),Nn=a("dUf/"),Mn=a("gQXR"),Sn=a("9Ub/"),An=function(e){var t=e.certificate,a=Object(ye.e)(),o=a.t,i=a.lang,c=Object(h.useClient)(),l=Object(ge.b)().isMobile,u=Object(je.i)().year,d=Object(je.h)(),m=Object(n.useState)(!1),p=s()(m,2),f=p[0],b=p[1],v=function(){var e=j()(x.a.mark((function e(){var t,a,n,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),t=Va(),a=t.sourceIdentity,e.next=4,jn(c);case 4:return n=e.sent,l=r.a.createElement(fn,{t:o,username:Object(wn.getDisplayName)(n),daysToReach:Ha(),sourceIdentity:a,year:u,lang:i}),e.next=8,Cn({client:c,t:o,pdfDocument:l,year:u});case 8:b(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=o(t?"bikeGoal.certificateGeneration.actions.regenerate":"bikeGoal.certificateGeneration.actions.generate");return r.a.createElement("div",{className:tn.a["CertificateGeneration-root"]},r.a.createElement($a,l&&{size:"medium"}),r.a.createElement(Sn.a,{variant:"h4"},o("bikeGoal.certificateGeneration.title")),r.a.createElement(Sn.a,{variant:"body2",className:"u-mv-1"},o("bikeGoal.certificateGeneration.content",{bountyAmount:Ya(),year:u})),!!t&&!f&&r.a.createElement(Mn.a,{onClick:function(){d({pathname:"../certificate/".concat(t._id)})}},r.a.createElement(Tn.a,null,r.a.createElement(Pn.b,null,r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:_n.a,size:32})),r.a.createElement(Nn.a,{primary:t.name})))),r.a.createElement(xn.a,{variant:"text",label:g,className:"u-mt-half u-fz-xsmall",onClick:v,busy:f}))},Rn=a("tRUj"),Ln=a("bQqJ"),In=["data"],Fn=function(){var e=Object(je.h)(),t=Object(ge.b)().isMobile,a=Object(ye.e)().t,n={definition:Object(h.Q)("io.cozy.files").partialIndex({"cozyMetadata.createdByApp":"coachco2",class:"pdf",type:"file",trashed:!1}).indexFields(["cozyMetadata.updatedAt"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(1),options:{as:"io.cozy.files",fetchPolicy:E.a.fetchPolicies.olderThan(1e8)}},o=Object(h.useQuery)(n.definition,n.options),i=o.data,l=c()(o,In),s=Object(h.isQueryLoading)(l);return r.a.createElement(Rn.a,Fe()({open:!0,background:"var(--paperBackgroundColor) repeat-x url(".concat(Ge.a,")"),content:s?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(An,{certificate:i[0]})},t?{onBack:function(){return e("..")}}:{onClose:function(){return e("..")}},{actions:r.a.createElement(xn.a,{label:a("bikeGoal.certificateGeneration.actions.understood"),onClick:function(){return e("..")}}),actionsLayout:"column"}))},Bn=a("uRLs"),Gn=a.n(Bn),zn=a("eson"),Zn=["days","label","color","isSuccess","body1"],Un=function(e){return{color:e&&"var(--successColor)"}},qn=function(e){var t=e.days,a=e.label,n=e.color,o=e.isSuccess,i=e.body1,l=c()(e,Zn),s=Object(ye.e)().t;return r.a.createElement("div",l,r.a.createElement(kn.a,{className:"u-mr-half",icon:zn.a,color:n,size:8}),r.a.createElement(Sn.a,{display:"inline",variant:i?"body1":"caption",color:"textPrimary",style:Un(o)},s("bikeGoal.goal_progression",{days:t,daysToReach:Ha()})),r.a.createElement(Sn.a,{variant:"caption",style:Un(o)},a))};qn.defaultProps={color:"#BA5AE8"};var Hn=qn,Yn=a("xr2j"),Vn=function(e){var t=e.className,a=e.timeseries,n=e.body1,o=e.componentsProps,i=Object(ye.e)().t;return r.a.createElement("div",{className:"u-flex ".concat(t)},r.a.createElement(Hn,Fe()({},o.BikeGoalSummaryItem,{days:Qa(a),label:i("bikeGoal.my_progression"),isSuccess:Wa(a),body1:n})),r.a.createElement(Yn.a,{className:"u-mh-1",style:{marginTop:4},orientation:"vertical",flexItem:!0}),r.a.createElement(Hn,Fe()({},o.BikeGoalSummaryItem,{days:.5,label:i("bikeGoal.average_progression"),color:"#BA5AE83D",body1:n})))};Vn.defaultProps={className:"",componentsProps:{}};var Wn=Vn,Qn=function(e){var t=e.timeseriesByYear;return{whiteSpace:e.preLine&&"pre-line",color:Wa(t)&&"var(--successColor)"}},Kn=function(e){var t=e.className,a=e.timeseriesByYear,n=e.variant,o=e.preLine,i=Object(ye.e)().t;return r.a.createElement(Sn.a,{className:t,variant:n,style:Qn({timeseriesByYear:a,preLine:o})},i("bikeGoal.yearly_goal_progression",{days:Qa(a),daysToReach:Ha()}))},Jn=a("Yb2N"),Xn=a("PExr"),$n={BikeGoalSummaryItem:{flex:"1 1 0"}},er=function(e){var t=e.className,a=e.timeseries,n=e.sendToDACC,o=Object(ye.e)().t,i=Object(ge.b)().isMobile,c=Object(je.h)();return r.a.createElement("div",{className:t},i&&r.a.createElement(Sn.a,{className:"u-mb-half",variant:"h3"},o("bikeGoal.title")),n?r.a.createElement(Wn,{className:Gn()("u-mt-half",{"u-ph-1 u-ta-center":i}),timeseries:a,body1:i,componentsProps:{BikeGoalSummaryItem:$n.BikeGoalSummaryItem}}):r.a.createElement(Kn,{className:"u-mt-half",timeseriesByYear:a}),Wa(a)&&r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Jn.a,{icon:r.a.createElement(kn.a,{icon:Xn.a,className:"u-ml-half"}),label:o("bikeGoal.achievement_certificate"),color:"success",clickable:!0,onClick:function(){c("certificate/generate")}})))};er.propTypes={className:Ze.a.string,timeseries:Ze.a.arrayOf(Ze.a.object).isRequired};var tr=er,ar=a("J14j"),nr=a("o1F1"),rr=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(ge.b)().isMobile?r.a.createElement(ar.a,{textVariant:"h6",onClick:n},a):r.a.createElement(xn.a,{ref:t,variant:"secondary",label:a,endIcon:r.a.createElement(kn.a,{icon:nr.a,size:14}),onClick:n})}));rr.displayName="ActionButton",rr.propTypes={label:Ze.a.string,onClick:Ze.a.func};var or=rr,ir=a("lAlC"),cr=a("/gvb"),lr=a("hAvo"),sr=function(e){var t=e.timeseries,a=Object(je.i)().year,o=Object(je.h)(),i=Object(n.useRef)(),c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=Object(n.useMemo)((function(){return function(e){var t=new Date;if(!e||0===e.length)return[t.getFullYear().toString()];var a=new Date(function(e){return e.reduce((function(e,t){return e.startDate<t.startDate?e:t}))}(e).startDate),n=Object(ir.a)(t,a);return Array.from({length:n+1},(function(e,a){return Object(T.a)(t,a).getFullYear().toString()}))}(t)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(or,{ref:i,label:a,onClick:function(){return d((function(e){return!e}))}}),u&&r.a.createElement(cr.a,{anchorElRef:i,autoclose:!0,onClose:function(){return d(!1)},popperOptions:{placement:"bottom-end"}},m.map((function(e,t){return r.a.createElement(lr.a,{key:t,onClick:function(){return o("/bikegoal/".concat(e,"/trips"))}},e)}))))};sr.propTypes={timeseries:Ze.a.arrayOf(Ze.a.object).isRequired};var ur=r.a.memo(sr),dr=a("HCvV"),mr=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(ge.b)().isMobile?r.a.createElement(dr.a,{onClick:n},a):r.a.createElement(xn.a,{ref:t,className:"u-miw-auto u-ml-half",variant:"secondary",label:a,onClick:n})}));mr.displayName="ActionButton",mr.propTypes={label:Ze.a.node,onClick:Ze.a.func};var pr=mr,fr=["data"];function br(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function vr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?br(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):br(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var gr=function(e){var t=Object(h.useClient)(),a=re(),n=Object(h.useQuery)(a.definition,a.options),r=n.data,o=c()(n,fr),i=Object(h.isQueryLoading)(o);return{isLoading:i,value:i?void 0:r&&r[0]?Je()(r[0],e):void 0,save:function(){var a=j()(x.a.mark((function a(n){var o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=vr(vr({},r[0]),{},{_type:p}),nt()(o,e,n),a.next=4,t.save(o);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},yr=a("pSj2"),hr=function(e){var t=e.open,a=e.onClose,o=Object(ye.e)().t,i=Object(je.h)(),c=gr("bikeGoal.activated"),l=c.isLoading,u=c.save,d=Object(n.useState)(!1),m=s()(d,2),p=m[0],f=m[1];return r.a.createElement(yr.a,{open:t,title:o("bikeGoal.deactivate.title"),content:o("bikeGoal.deactivate.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{variant:"secondary",label:o("bikeGoal.deactivate.cancel"),onClick:a}),r.a.createElement(xn.a,{color:"error",label:o("bikeGoal.deactivate.stop_participate"),busy:p||l,onClick:function(){f(!0),u(!1),i("/trips")}})),onClose:a})};hr.propTypes={open:Ze.a.bool.isRequired,onClose:Ze.a.func.isRequired};var Er=hr,Or=a("vc9t"),Cr=a("jMeN"),jr=a("KsnS"),wr=a("QRbe"),xr=function(){var e=Object(ye.e)().t,t=Object(ge.b)().isMobile,a=Object(n.useRef)(),o=Object(je.h)(),i=Object(n.useState)(!1),c=s()(i,2),l=c[0],u=c[1],d=Object(n.useState)(!1),m=s()(d,2),p=m[0],f=m[1],b={divider:{borderTop:0,marginLeft:{isMobile:t}.isMobile?"3rem":void 0}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(pr,{ref:a,label:r.a.createElement(kn.a,{icon:Or.a}),onClick:function(){return u((function(e){return!e}))}}),l&&r.a.createElement(cr.a,{anchorElRef:a,autoclose:!0,onClose:function(){return u(!1)},popperOptions:{placement:"bottom-end"}},r.a.createElement(lr.a,{left:r.a.createElement(kn.a,{icon:wr.a}),onClick:function(){return o("edit")}},e("bikeGoal.edit.modify")),r.a.createElement(lr.a,{left:r.a.createElement(kn.a,{icon:jr.a}),onClick:function(){return o("about")}},e("bikeGoal.about.title")),r.a.createElement(Yn.a,{style:b.divider}),r.a.createElement(lr.a,{left:r.a.createElement(kn.a,{icon:Cr.a}),onClick:function(){return f(!0)}},e("bikeGoal.deactivate.deactivate"))),r.a.createElement(Er,{open:p,onClose:function(){return f(!1)}}))};ur.propTypes={timeseries:Ze.a.arrayOf(Ze.a.object).isRequired};var kr=function(e){var t=e.timeseries,a=Object(ge.b)().isMobile,n={actions:{right:{isMobile:a}.isMobile?0:"13rem"}};return r.a.createElement("div",{className:Gn()("u-flex u-flex-justify-end",{"u-pos-absolute u-top-m":!a}),style:n.actions},r.a.createElement(ur,{timeseries:t}),r.a.createElement(xr,null))},_r=a("Ht4I"),Tr=a("Qugh"),Pr=a("kjpz"),Dr=function(e){var t=e.icon,a=e.color,n=e.faded,o=e.ghost,i=function(e){var t=e.faded,a=e.color;return t?{color:a||"var(--primaryColor)",backgroundColor:"var(--paperBackgroundColor)",border:"1px solid var(--borderMainColor)"}:{backgroundColor:a}}({faded:n,color:a});return r.a.createElement(Tr.b,{style:i,icon:t,size:32,ghost:o})},Nr=function(e){var t=e.attribute;return r.a.createElement(Dr,{icon:Zt(t),color:Ut(t),ghost:"OTHER_PURPOSE"===t})},Mr=function(e){var t=e.attribute,a=e.defaultColor,n=Object(Pr.a)();return r.a.createElement(Dr,{icon:Bt(t),color:a?n.palette.primary.main:Gt(t),faded:!0})},Sr=a("Mb5X"),Ar=a("MRub"),Rr={co2:{fontWeight:700,whiteSpace:"nowrap",marginRight:"-1rem"},tripIcon:{marginRight:"4px"}},Lr=function(e){var t=e.tripModeIcons,a=e.duration,n=e.distance;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(kn.a,{key:t,icon:e,size:10,style:Rr.tripIcon})})),"¬∑ ".concat(a," ¬∑ ").concat(n))},Ir=function(e){var t=e.timeserie,a=e.hasDateHeader,o=Object(ye.e)().f,i=Object(je.g)(),c=Object(je.h)(),l=Object(je.i)().mode,s=Ca(t),u=Ma(t),d=function(e){return dt()(e.aggregation.sections.sort((function(e,t){return e.distance>t.distance?-1:1})).map((function(e){return e.mode})).filter(Boolean))}(t),m=Sa(t),p=Object(n.useMemo)((function(){return l?Ga(t,l):Aa(t)}),[t,l]),f=Object(n.useMemo)((function(){return d.map((function(e){return Bt(e)}))}),[d]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(Ar.a,null,o(wa(t),"dddd DD MMMM")),r.a.createElement(Pn.b,{button:!0,onClick:function(){c("".concat(i.pathname,"/").concat(t._id))}},r.a.createElement(Dn.a,null,r.a.createElement(Nr,{attribute:s})),r.a.createElement(Nn.a,{primary:_a(t),secondary:r.a.createElement(Lr,{tripModeIcons:f,duration:u,distance:m})}),r.a.createElement(Sn.a,{style:Rr.co2,variant:"body2"},p),r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:Sr.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Yn.a,null))};Ir.propTypes={timeserie:Ze.a.object.isRequired,hasDateHeader:Ze.a.bool.isRequired};var Fr=r.a.memo(Ir,(function(e,t){return e.timeserie._rev===t.timeserie._rev}));Fr.displayName="MemoizedTripItem";var Br=Fr,Gr=function(e){var t=e.timeseries,a=e.noHeader,o=Object(ge.b)().isMobile,i=Object(ye.e)().t,c=Object(n.useCallback)((function(e,a){return 0===a||!Object(_r.a)(wa(e),wa(t[a-1]))}),[t]);return r.a.createElement(r.a.Fragment,null,o&&!a&&r.a.createElement(Mn.a,{className:"u-ph-1",style:{height:"4rem",display:"flex",alignItems:"center"},square:!0},r.a.createElement(Sn.a,{variant:"h5"},i("trips.trips"))),r.a.createElement(Tn.a,null,t.map((function(e,t){return r.a.createElement(Br,{key:"".concat(e.id).concat(t),timeserie:e,hasDateHeader:c(e,t)})}))))};Gr.propTypes={timeseries:Ze.a.arrayOf(Ze.a.object).isRequired,noHeader:Ze.a.bool};var zr=Gr,Zr=a("13md"),Ur=function(e){var t=e.className,a=e.timeseries,n=e.hasMore,o=e.fetchMore,i=Object(ye.e)().t;return r.a.createElement("div",{className:t},r.a.createElement(zr,{timeseries:a,noHeader:!0}),n&&r.a.createElement(Zr.a,{label:i("loadMore"),fetchMore:o}))};Ur.propTypes={className:Ze.a.string,timeseries:Ze.a.arrayOf(Ze.a.object).isRequired,hasMore:Ze.a.bool,fetchMore:Ze.a.func};var qr=Ur,Hr=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(je.h)(),i=Object(je.i)().year,c=Za(t,i);return r.a.createElement(Rn.a,{open:!0,onClose:function(){return o("/trips")},disableGutters:!0,componentsProps:{dialogTitle:{className:"u-p-0"}},title:r.a.createElement(kr,{timeseries:t}),content:r.a.createElement(r.a.Fragment,null,r.a.createElement($a,{display:"flex",paddingTop:"1.5rem",marginTop:"3rem",timeseries:c,sendToDACC:n}),r.a.createElement(tr,{className:"u-flex u-flex-column u-flex-items-center",timeseries:c,sendToDACC:n}),r.a.createElement(qr,{className:"u-mt-2",timeseries:c,hasMore:a.hasMore,fetchMore:a.fetchMore}))})};Hr.propTypes={timeseries:Ze.a.arrayOf(Ze.a.object).isRequired,timeseriesQueryLeft:Ze.a.object.isRequired};var Yr=Hr,Vr=a("Jbzi"),Wr=a("ebeN"),Qr=function(e){var t=e.label,a=e.subtitle,n=e.onBack,o=Object(ge.b)().isMobile,i=cozy.bar,c=i.BarCenter,l=i.BarLeft,s="function"==typeof n?n:void 0;return o?r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(l,null,r.a.createElement(dr.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(kn.a,{icon:Wr.a,size:16}))),r.a.createElement(c,null,r.a.createElement(be.a,null,r.a.createElement(Vr.a,null,t)))):r.a.createElement("div",{className:Gn()(d()({},"u-flex u-flex-items-baseline u-ml-2",s))},s&&r.a.createElement(dr.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(kn.a,{icon:Wr.a,size:16})),r.a.createElement("div",{className:Gn()("u-mv-1-half-s u-ml-1-s u-mv-2",d()({},"u-ml-2",!s))},r.a.createElement(Sn.a,{variant:"h3"},t),a))};Qr.propTypes={label:Ze.a.string,subtitle:Ze.a.node,onBack:Ze.a.func};var Kr=Qr,Jr=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(ye.e)().t,i=Object(je.h)(),c=Object(je.i)().year,l=Za(t,c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr,{label:o("bikeGoal.title"),subtitle:r.a.createElement(tr,{timeseries:l,sendToDACC:n}),onBack:function(){return i("/trips")}}),r.a.createElement(kr,{timeseries:t}),r.a.createElement($a,{display:"flex",position:"absolute",top:"2rem",right:"2rem",timeseries:l,sendToDACC:n}),r.a.createElement(qr,{className:"u-mt-3",timeseries:l,hasMore:a.hasMore,fetchMore:a.fetchMore}))};Jr.propTypes={timeseries:Ze.a.arrayOf(Ze.a.object).isRequired,timeseriesQueryLeft:Ze.a.object.isRequired};var Xr=Jr,$r=a("lomp"),eo=a.n($r),to=a("nOWK"),ao=a.n(to),no=new eo.a({id:"empty_b02f44d5e51464ad11702351c2fec42f",use:"empty_b02f44d5e51464ad11702351c2fec42f-usage",viewBox:"0 0 250 163",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 163" id="empty_b02f44d5e51464ad11702351c2fec42f"><g clip-path="url(#empty_b02f44d5e51464ad11702351c2fec42f_a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M54.535 10.576a25.382 25.382 0 0 1 3.93 0l.154-1.994a27.36 27.36 0 0 0-4.238 0l.154 1.994Zm7.805.61c1.284.307 2.53.713 3.73 1.21l.766-1.847a26.798 26.798 0 0 0-4.031-1.309l-.465 1.945Zm-15.41 1.21c1.2-.497 2.446-.903 3.73-1.21l-.465-1.946a26.798 26.798 0 0 0-4.03 1.309l.765 1.848Zm22.633 1.784a25.08 25.08 0 0 1 3.173 2.309l1.3-1.52a27.097 27.097 0 0 0-3.426-2.493l-1.047 1.704Zm-29.3 2.309a25.08 25.08 0 0 1 3.174-2.309l-1.047-1.704a27.097 27.097 0 0 0-3.426 2.493l1.3 1.52Zm35.248 2.775a25.09 25.09 0 0 1 2.309 3.173l1.704-1.047a27.097 27.097 0 0 0-2.493-3.426l-1.52 1.3ZM35.18 22.437a25.08 25.08 0 0 1 2.309-3.173l-1.52-1.3a27.097 27.097 0 0 0-2.493 3.426l1.704 1.047Zm44.423 3.493c.498 1.2.904 2.446 1.212 3.73l1.945-.465a26.794 26.794 0 0 0-1.309-4.03l-1.847.765Zm-47.418 3.73c.308-1.284.714-2.53 1.212-3.73l-1.848-.766a26.794 26.794 0 0 0-1.309 4.031l1.945.465Zm49.239 3.875a25.382 25.382 0 0 1 0 3.93l1.994.154a27.38 27.38 0 0 0 0-4.238l-1.994.154ZM31.5 35.5c0-.661.026-1.316.076-1.965l-1.994-.154a27.38 27.38 0 0 0 0 4.238l1.994-.154A25.382 25.382 0 0 1 31.5 35.5Zm49.315 5.84a24.793 24.793 0 0 1-1.212 3.73l1.848.766a26.794 26.794 0 0 0 1.309-4.031l-1.945-.465Zm-47.418 3.73a24.798 24.798 0 0 1-1.212-3.73l-1.945.465a26.794 26.794 0 0 0 1.309 4.03l1.848-.765Zm44.423 3.493a25.08 25.08 0 0 1-2.309 3.173l1.52 1.3a27.097 27.097 0 0 0 2.493-3.426l-1.704-1.047Zm-40.331 3.173a25.08 25.08 0 0 1-2.309-3.173l-1.704 1.047a27.097 27.097 0 0 0 2.493 3.426l1.52-1.3Zm5.948 5.084a25.08 25.08 0 0 1-3.173-2.309l-1.3 1.52a27.097 27.097 0 0 0 3.426 2.493l1.047-1.704Zm29.3-2.309a25.09 25.09 0 0 1-3.174 2.309l1.047 1.704a27.097 27.097 0 0 0 3.426-2.493l-1.3-1.52ZM50.66 59.815a24.798 24.798 0 0 1-3.73-1.212l-.766 1.848c1.296.537 2.643.977 4.031 1.309l.465-1.945Zm15.41-1.212c-1.2.498-2.446.904-3.73 1.212l.465 1.945a26.794 26.794 0 0 0 4.03-1.309l-.765-1.848ZM56.5 60.5c-.661 0-1.316-.026-1.965-.076l-.154 1.994a27.38 27.38 0 0 0 4.238 0l-.154-1.994c-.649.05-1.304.076-1.965.076Zm41.93 20.225c-.056.19-.115.382-.173.573-.12.394-.24.788-.347 1.185 1.214-6.1-3.12-12.157-7.465-16.006-.34-.301-.688-.595-1.041-.879a29.72 29.72 0 0 0-1.794-1.582C85.29 62.13 84.5 61.5 82.5 60c-3.081-2.31-4.808.687-3.34 1.465 3.84 2.035 5.51 3.322 8.829 6.36a33.302 33.302 0 0 1 5.699 6.805c1.426 2.262 2.73 4.75 3.227 7.4l.047.394c-.442-.657-.89-1.31-1.338-1.963-.892-1.299-1.783-2.597-2.623-3.929-.945-1.5-2.531-.31-1.442 1.256.25.36.496.724.742 1.088.536.793 1.072 1.585 1.653 2.346 1.21 2.057 2.705 3.945 4.212 5.814.25.308.834.3 1.142-.874.738-2.81 2.265-9.689 2.322-10.002.305-1.692-1.265-1.707-1.56-.725-.26.87-.534 1.735-.807 2.6v.001c-.282.895-.565 1.79-.833 2.689Zm21.312 6.919a21.26 21.26 0 0 1 4.758-.713h.001c1.609.057 3.206.296 4.76.714 8.095 2.176 13.959 8.93 14.941 17.207a1.9 1.9 0 0 0 1.698 1.665c4.401.433 9.102 2.943 12.576 6.713 3.051 3.311 4.841 7.179 5.177 11.187v.002c.118 1.394.04 2.826-.232 4.255l-.015.084c-.261 1.815-1.139 4.798-2.45 7.058-2.952 5.102-7.841 7.909-16.348 9.389-3.908.68-7.61 1.162-19.705 1.162l-.423.001-.382-.001c-12.095 0-15.797-.482-19.705-1.162-8.508-1.48-13.397-4.288-16.35-9.389-1.311-2.261-2.188-5.243-2.449-7.058l-.014-.084a15.713 15.713 0 0 1-.233-4.257c.336-4.008 2.127-7.877 5.179-11.188 3.471-3.769 8.172-6.279 12.574-6.712a1.9 1.9 0 0 0 1.698-1.665c.982-8.277 6.846-15.031 14.944-17.208Zm4.723 62.518h.073l.365-.001c11.292 0 15.714-.41 20.355-1.218 6.464-1.125 14.462-3.415 18.982-11.225 1.667-2.876 2.611-6.298 2.916-8.377.329-1.727.422-3.491.278-5.243-.408-4.855-2.54-9.502-6.168-13.44-3.768-4.089-8.624-6.845-13.514-7.713-1.65-9.154-8.384-16.513-17.504-18.964a24.974 24.974 0 0 0-5.525-.838 1.594 1.594 0 0 0-.228-.01 1.442 1.442 0 0 0-.21.01c-1.88.073-3.74.354-5.53.837-9.122 2.452-15.857 9.81-17.507 18.965-4.892.868-9.748 3.624-13.512 7.713-3.63 3.937-5.763 8.585-6.17 13.442a19.484 19.484 0 0 0 .279 5.241c.305 2.078 1.247 5.499 2.915 8.376 4.52 7.81 12.519 10.102 18.982 11.226 4.641.808 9.064 1.218 20.356 1.218l.367.001Zm12.634-27.383c-.034.619.959 1.873 1.804 2.497.945.698.93 1.899.37 2.656-.345.468-.834.712-1.34.712-.347 0-.703-.115-1.023-.352a8.068 8.068 0 0 1-.796-.677c-3.39 1.879-7.383 2.815-11.373 2.815-4.277 0-8.545-1.076-12.067-3.216-.353.294-.693.547-.981.76l-.003.003a1.65 1.65 0 0 1-.987.343c-.207 0-.414-.044-.612-.13-.564-.243-.976-.82-1.052-1.472a1.783 1.783 0 0 1 .714-1.65c1.188-.884 2.086-1.644 1.951-2.719-.118-.932.474-1.695 1.406-1.812.89-.111 1.939.459 2.08 1.579a4.575 4.575 0 0 1-.423 2.585c5.576 3.333 13.426 3.455 19.331.343-.394-.694-.666-1.466-.614-2.37a1.79 1.79 0 0 1 .985-1.52c.601-.302 1.34-.267 1.884.089.511.336.783.896.746 1.536Z" fill="#297EF1" /><path opacity=".722" fill-rule="evenodd" clip-rule="evenodd" d="M122.535 2.576a25.4 25.4 0 0 1 3.93 0l.154-1.994a27.344 27.344 0 0 0-4.238 0l.154 1.994Zm7.805.61a24.86 24.86 0 0 1 3.73 1.21l.766-1.847a26.826 26.826 0 0 0-4.031-1.309l-.465 1.945Zm-15.41 1.21a24.86 24.86 0 0 1 3.73-1.21l-.465-1.946a26.826 26.826 0 0 0-4.031 1.309l.766 1.847Zm22.633 1.784c1.119.687 2.18 1.46 3.173 2.309l1.3-1.52a27.142 27.142 0 0 0-3.426-2.493l-1.047 1.704Zm-29.299 2.309a25.037 25.037 0 0 1 3.173-2.309l-1.047-1.704a27.143 27.143 0 0 0-3.426 2.493l1.3 1.52Zm35.247 2.775a25.112 25.112 0 0 1 2.309 3.173l1.704-1.047a27.072 27.072 0 0 0-2.493-3.426l-1.52 1.3Zm-40.331 3.173a25.112 25.112 0 0 1 2.309-3.173l-1.52-1.3a27.072 27.072 0 0 0-2.493 3.426l1.704 1.047Zm44.424 3.493a24.9 24.9 0 0 1 1.211 3.73l1.945-.465a26.818 26.818 0 0 0-1.309-4.03l-1.847.765Zm-47.419 3.73a24.9 24.9 0 0 1 1.211-3.73l-1.847-.766a26.794 26.794 0 0 0-1.309 4.031l1.945.465Zm49.239 3.875a25.533 25.533 0 0 1 0 3.93l1.994.154a27.531 27.531 0 0 0 0-4.238l-1.994.154ZM99.5 27.5c0-.661.026-1.317.076-1.965l-1.994-.154a27.38 27.38 0 0 0 0 4.238l1.994-.154A25.382 25.382 0 0 1 99.5 27.5Zm49.315 5.84a24.895 24.895 0 0 1-1.211 3.73l1.847.766a26.818 26.818 0 0 0 1.309-4.031l-1.945-.465Zm-47.419 3.73a24.9 24.9 0 0 1-1.211-3.73l-1.945.465a26.794 26.794 0 0 0 1.309 4.03l1.847-.765Zm44.424 3.493a25.112 25.112 0 0 1-2.309 3.173l1.52 1.3a27.068 27.068 0 0 0 2.493-3.426l-1.704-1.047Zm-40.331 3.173a25.112 25.112 0 0 1-2.309-3.173l-1.704 1.047a27.068 27.068 0 0 0 2.493 3.426l1.52-1.3Zm5.948 5.084a25.032 25.032 0 0 1-3.173-2.309l-1.3 1.52a27.157 27.157 0 0 0 3.426 2.493l1.047-1.704Zm29.299-2.309a25.041 25.041 0 0 1-3.173 2.309l1.047 1.704a27.157 27.157 0 0 0 3.426-2.493l-1.3-1.52Zm-22.076 5.304a24.857 24.857 0 0 1-3.73-1.212l-.766 1.848a26.82 26.82 0 0 0 4.031 1.309l.465-1.945Zm15.41-1.212c-1.2.498-2.446.904-3.73 1.212l.465 1.945a26.82 26.82 0 0 0 4.031-1.309l-.766-1.848ZM124.5 52.5a25.42 25.42 0 0 1-1.965-.076l-.154 1.994a27.363 27.363 0 0 0 4.238 0l-.154-1.994a25.42 25.42 0 0 1-1.965.076Zm68-42c-.661 0-1.316.026-1.965.076l-.154-1.994a27.343 27.343 0 0 1 4.238 0l-.154 1.994a25.42 25.42 0 0 0-1.965-.076Zm9.57 1.896a24.857 24.857 0 0 0-3.73-1.21l.465-1.946c1.388.332 2.735.772 4.031 1.309l-.766 1.848Zm-15.41-1.21c-1.284.307-2.53.713-3.73 1.21l-.766-1.847a26.824 26.824 0 0 1 4.031-1.309l.465 1.945Zm22.076 5.303a25.032 25.032 0 0 0-3.173-2.309l1.047-1.704a27.157 27.157 0 0 1 3.426 2.493l-1.3 1.52Zm-29.299-2.309a25.032 25.032 0 0 0-3.173 2.309l-1.3-1.52a27.157 27.157 0 0 1 3.426-2.493l1.047 1.704Zm34.383 8.257a25.112 25.112 0 0 0-2.309-3.173l1.52-1.3a27.068 27.068 0 0 1 2.493 3.426l-1.704 1.047Zm-40.331-3.173a25.112 25.112 0 0 0-2.309 3.173l-1.704-1.047a27.068 27.068 0 0 1 2.493-3.426l1.52 1.3Zm43.326 10.396a24.9 24.9 0 0 0-1.211-3.73l1.847-.766a26.818 26.818 0 0 1 1.309 4.031l-1.945.465Zm-47.419-3.73a24.9 24.9 0 0 0-1.211 3.73l-1.945-.465a26.818 26.818 0 0 1 1.309-4.03l1.847.765ZM217.5 35.5c0-.661-.026-1.316-.076-1.965l1.994-.154a27.531 27.531 0 0 1 0 4.238l-1.994-.154c.05-.649.076-1.304.076-1.965Zm-49.924-1.965a25.533 25.533 0 0 0 0 3.93l-1.994.154a27.531 27.531 0 0 1 0-4.238l1.994.154Zm48.028 11.535a24.895 24.895 0 0 0 1.211-3.73l1.945.465a26.818 26.818 0 0 1-1.309 4.03l-1.847-.766Zm-47.419-3.73a24.9 24.9 0 0 0 1.211 3.73l-1.847.766a26.818 26.818 0 0 1-1.309-4.031l1.945-.465Zm43.326 10.396a25.112 25.112 0 0 0 2.309-3.173l1.704 1.047a27.068 27.068 0 0 1-2.493 3.426l-1.52-1.3Zm-40.331-3.173a25.112 25.112 0 0 0 2.309 3.173l-1.52 1.3a27.068 27.068 0 0 1-2.493-3.426l1.704-1.047Zm5.084 5.948c.993.85 2.054 1.622 3.173 2.309l-1.047 1.704a27.157 27.157 0 0 1-3.426-2.493l1.3-1.52Zm29.299 2.309a25.041 25.041 0 0 0 3.173-2.309l1.3 1.52a27.157 27.157 0 0 1-3.426 2.493l-1.047-1.704Zm-22.633 1.783c1.2.498 2.446.904 3.73 1.212l-.465 1.945a26.82 26.82 0 0 1-4.031-1.309l.766-1.848Zm15.41 1.212a24.857 24.857 0 0 0 3.73-1.212l.766 1.848a26.82 26.82 0 0 1-4.031 1.309l-.465-1.945Zm-7.805.609a25.42 25.42 0 0 0 3.93 0l.154 1.994a27.363 27.363 0 0 1-4.238 0l.154-1.994ZM222.5 67.5c-.661 0-1.316.026-1.965.076l-.154-1.994a27.363 27.363 0 0 1 4.238 0l-.154 1.994a25.42 25.42 0 0 0-1.965-.076Zm9.57 1.897a24.857 24.857 0 0 0-3.73-1.212l.465-1.945a26.82 26.82 0 0 1 4.031 1.309l-.766 1.847Zm-15.41-1.212c-1.284.308-2.53.714-3.73 1.212l-.766-1.848a26.82 26.82 0 0 1 4.031-1.309l.465 1.945Zm22.076 5.304a25.032 25.032 0 0 0-3.173-2.309l1.047-1.704a27.157 27.157 0 0 1 3.426 2.493l-1.3 1.52Zm-29.299-2.309a25.041 25.041 0 0 0-3.173 2.309l-1.3-1.52a27.157 27.157 0 0 1 3.426-2.493l1.047 1.704Zm34.383 8.257a25.112 25.112 0 0 0-2.309-3.173l1.52-1.3a27.076 27.076 0 0 1 2.493 3.426l-1.704 1.047Zm-40.331-3.173a25.112 25.112 0 0 0-2.309 3.173l-1.704-1.047a27.068 27.068 0 0 1 2.493-3.426l1.52 1.3Zm43.326 10.396a24.895 24.895 0 0 0-1.211-3.73l1.847-.766a26.818 26.818 0 0 1 1.309 4.031l-1.945.465Zm-47.419-3.73a24.895 24.895 0 0 0-1.211 3.73l-1.945-.465a26.818 26.818 0 0 1 1.309-4.03l1.847.765ZM247.5 92.5c0-.661-.026-1.317-.076-1.965l1.994-.154a27.531 27.531 0 0 1 0 4.238l-1.994-.154c.05-.648.076-1.304.076-1.965Zm-49.924-1.965a25.533 25.533 0 0 0 0 3.93l-1.994.154a27.531 27.531 0 0 1 0-4.238l1.994.154Zm48.028 11.535c.497-1.2.903-2.446 1.211-3.73l1.945.465a26.841 26.841 0 0 1-1.309 4.031l-1.847-.766Zm-47.419-3.73c.308 1.284.714 2.53 1.211 3.73l-1.847.766a26.841 26.841 0 0 1-1.309-4.031l1.945-.465Zm43.326 10.396a25.063 25.063 0 0 0 2.309-3.173l1.704 1.047a27.127 27.127 0 0 1-2.493 3.426l-1.52-1.3Zm-40.331-3.173a25.063 25.063 0 0 0 2.309 3.173l-1.52 1.3a27.127 27.127 0 0 1-2.493-3.426l1.704-1.047Zm5.084 5.948a25.063 25.063 0 0 0 3.173 2.309l-1.047 1.704a27.127 27.127 0 0 1-3.426-2.493l1.3-1.52Zm29.299 2.309a25.063 25.063 0 0 0 3.173-2.309l1.3 1.52a27.127 27.127 0 0 1-3.426 2.493l-1.047-1.704Zm-22.633 1.784c1.2.497 2.446.903 3.73 1.211l-.465 1.945a26.844 26.844 0 0 1-4.031-1.309l.766-1.847Zm15.41 1.211a24.96 24.96 0 0 0 3.73-1.211l.766 1.847a26.844 26.844 0 0 1-4.031 1.309l-.465-1.945Zm-7.805.609a25.571 25.571 0 0 0 3.93 0l.154 1.994a27.513 27.513 0 0 1-4.238 0l.154-1.994Zm-72.882-33.432c.309 1.174.893 1.18 1.142.874 1.507-1.87 3.002-3.757 4.213-5.815.575-.754 1.105-1.538 1.636-2.323h.001c.25-.372.501-.743.757-1.111 1.09-1.565-.496-2.755-1.442-1.255-.842 1.338-1.738 2.642-2.634 3.945l-.001.002-.001.002-.002.002v.001c-.443.645-.886 1.29-1.323 1.939l.011-.088.005-.05c.01-.084.02-.17.032-.255.497-2.651 1.8-5.137 3.227-7.4 1.582-2.511 3.476-4.857 5.699-6.806l.613-.54c2.568-2.258 3.662-3.22 6.914-4.614 1.506-.646.463-2.943-1.454-2.184-2.647 1.049-3.31 1.589-5.366 3.263l-.329.267a29.587 29.587 0 0 0-1.793 1.582c-.353.284-.7.577-1.041.879-4.345 3.848-8.68 9.907-7.466 16.006a38.548 38.548 0 0 0-.35-1.192v-.001l-.001-.003a170.679 170.679 0 0 0-1.012-3.284l-.001-.004-.001-.001v-.001c-.269-.853-.538-1.706-.795-2.563-.294-.982-1.865-.967-1.56.726.057.312 1.585 7.192 2.322 10.002Zm14.987 15.75c-.315.099-.719-.176-.391-1.136.784-2.3 2.899-7.795 3.003-8.04.57-1.318 1.668-.604 1.42.215-.215.71-.419 1.423-.624 2.136a140.289 140.289 0 0 1-.746 2.537l-.042.142-.043.143h-.001c-.095.319-.19.638-.294.953 1.972-4.81 7.788-7.03 12.594-7.7.373-.053.752-.095 1.128-.133a27.618 27.618 0 0 1 1.98-.273 24.43 24.43 0 0 1 7.454.404c1.685.353 1.248 2.329-.078 2.01-3.528-.862-5.568-.54-9.088.017l-.309.049a27.539 27.539 0 0 0-7.113 2.108c-2.039.912-4.095 2.046-5.665 3.66-.073.083-.145.168-.216.253.597-.248 1.197-.49 1.797-.732 1.235-.499 2.469-.997 3.683-1.542 1.351-.61 1.905.952.423 1.54-.335.134-.669.27-1.002.408h-.001c-.744.307-1.488.614-2.249.877-1.794.874-3.708 1.499-5.62 2.104Zm-79.49.143.075.252c.094.313.187.626.289.936-1.97-4.808-7.788-7.027-12.592-7.698a24.782 24.782 0 0 0-1.13-.133 25.621 25.621 0 0 0-1.98-.272 24.563 24.563 0 0 0-7.453.4c-1.685.356-.808 2.337.641 2.13 3.5-.5 5.12-.636 8.836-.054a27.895 27.895 0 0 1 7.111 2.109c2.038.915 4.095 2.046 5.667 3.662l.215.254c-.618-.257-1.238-.507-1.858-.757-1.216-.491-2.43-.98-3.623-1.518-1.351-.608-1.906.953-.424 1.54.343.136.685.277 1.026.418.737.303 1.474.607 2.228.868 1.794.873 3.706 1.498 5.619 2.104.315.099.72-.177.39-1.137-.784-2.298-2.896-7.794-3.001-8.038-.57-1.32-1.67-.605-1.422.215.214.706.418 1.415.621 2.123v.001a136.68 136.68 0 0 0 .765 2.595Zm42.699-29.643.001-.001c.406-.625.812-1.249 1.209-1.877.465-.737 1.771-.495 1.137.805-.116.239-2.927 5.479-4.172 7.606-.518.887-1.007.806-1.146.528-.84-1.71-1.664-3.425-2.214-5.24-.309-.677-.574-1.373-.84-2.07a71.682 71.682 0 0 0-.39-1.006c-.558-1.405 1.031-2.118 1.484-.788.409 1.199.869 2.377 1.329 3.556.221.567.442 1.134.658 1.703l.049-.317c.102-1.257-.099-4.488-.28-7.406-.133-2.143-.256-4.117-.24-5.014.045-2.583 1.649-2.768 2.033-.68.532 2.895.617 10.849-.785 13.605.185-.312.381-.62.577-.926l.25-.393c.438-.699.889-1.392 1.34-2.085Zm-32.885 89.264c2.649.927 9.448 1.729 14.93 2.05 14.962.875 35.872.4 44.733-1.213 8.931-1.624 9.331-4.082-13.373-5.301-19.328-1.037-41.89.442-46.716 2.642-1.295.591-1.223 1.247.425 1.822h.001Zm-67.428-91.93a25.382 25.382 0 0 1 3.928 0l.155-1.994a27.38 27.38 0 0 0-4.238 0l.154 1.994Zm7.804.61c1.284.307 2.53.713 3.73 1.21l.766-1.847a26.794 26.794 0 0 0-4.031-1.309l-.465 1.945Zm-15.41 1.21c1.2-.497 2.446-.903 3.73-1.21l-.465-1.946a26.794 26.794 0 0 0-4.03 1.309l.765 1.847Zm22.633 1.784a25.08 25.08 0 0 1 3.173 2.309l1.3-1.52a27.097 27.097 0 0 0-3.426-2.493l-1.047 1.704Zm-29.3 2.309a25.09 25.09 0 0 1 3.174-2.309l-1.047-1.704a27.101 27.101 0 0 0-3.426 2.493l1.3 1.52Zm35.248 2.775a25.09 25.09 0 0 1 2.309 3.173l1.704-1.047a27.105 27.105 0 0 0-2.493-3.426l-1.52 1.3ZM6.18 79.437a25.087 25.087 0 0 1 2.309-3.173l-1.52-1.3a27.082 27.082 0 0 0-2.493 3.426l1.704 1.047Zm44.423 3.493a24.793 24.793 0 0 1 1.212 3.73l1.945-.465a26.794 26.794 0 0 0-1.309-4.03l-1.848.765ZM3.185 86.66c.308-1.284.714-2.53 1.211-3.73l-1.847-.766a26.8 26.8 0 0 0-1.309 4.031l1.945.465Zm49.239 3.876a25.382 25.382 0 0 1 0 3.928l1.994.155a27.38 27.38 0 0 0 0-4.238l-1.994.154ZM2.5 92.5c0-.661.026-1.317.076-1.965l-1.994-.154a27.362 27.362 0 0 0 0 4.238l1.994-.154A25.362 25.362 0 0 1 2.5 92.5Zm49.315 5.84a24.836 24.836 0 0 1-1.212 3.73l1.848.766a26.818 26.818 0 0 0 1.309-4.031l-1.945-.465Zm-47.419 3.73a24.84 24.84 0 0 1-1.21-3.73l-1.946.465a26.824 26.824 0 0 0 1.309 4.031l1.847-.766Zm44.424 3.493a25.032 25.032 0 0 1-2.309 3.173l1.52 1.3a27.157 27.157 0 0 0 2.493-3.426l-1.704-1.047Zm-40.331 3.173a25.037 25.037 0 0 1-2.309-3.173l-1.704 1.047a27.143 27.143 0 0 0 2.493 3.426l1.52-1.3Zm5.948 5.084a25.112 25.112 0 0 1-3.173-2.309l-1.3 1.52a27.072 27.072 0 0 0 3.426 2.493l1.047-1.704Zm29.3-2.309a25.112 25.112 0 0 1-3.174 2.309l1.047 1.704a27.068 27.068 0 0 0 3.426-2.493l-1.3-1.52Zm-22.077 5.304a24.9 24.9 0 0 1-3.73-1.211l-.766 1.847c1.296.537 2.643.977 4.031 1.309l.465-1.945Zm15.41-1.211a24.9 24.9 0 0 1-3.73 1.211l.465 1.945a26.818 26.818 0 0 0 4.03-1.309l-.765-1.847ZM27.5 117.5c-.661 0-1.317-.026-1.965-.076l-.154 1.994a27.531 27.531 0 0 0 4.238 0l-.154-1.994c-.648.05-1.304.076-1.965.076Z" fill="#BBD9FD" /><path fill-rule="evenodd" clip-rule="evenodd" d="M53.388 24.971a3.125 3.125 0 1 1 6.25 0 3.125 3.125 0 0 1-6.25 0m4.378 11.8c1.882-3.2 5.218-9.233 5.218-11.8a6.471 6.471 0 0 0-12.943 0c0 2.567 3.336 8.6 5.218 11.8a1.454 1.454 0 0 0 2.507 0" fill="#335C9E" /><mask id="empty_b02f44d5e51464ad11702351c2fec42f_b" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="47" y="31" width="23" height="20"><path fill-rule="evenodd" clip-rule="evenodd" d="M47.5 31.533h21.973v18.886H47.5V31.533Z" fill="#fff" /></mask><g mask="url(#empty_b02f44d5e51464ad11702351c2fec42f_b)"><path fill-rule="evenodd" clip-rule="evenodd" d="M68.62 46.702a493.936 493.936 0 0 0-4.675-4.122 8.961 8.961 0 0 0 1.58-5.091 8.974 8.974 0 0 0-2.254-5.956l-.059.123a67.632 67.632 0 0 1-1.219 2.405c.624.995.987 2.17.987 3.428a6.474 6.474 0 0 1-6.467 6.467 6.474 6.474 0 0 1-6.468-6.468c0-1.258.363-2.432.987-3.427-.417-.786-.832-1.6-1.219-2.405l-.058-.123a8.975 8.975 0 0 0-2.255 5.956c0 4.97 4.043 9.012 9.013 9.012a8.96 8.96 0 0 0 5.113-1.595c.707.835 3.666 4.327 4.231 4.959.755.844 2.37.666 3.093-.15.656-.741.846-1.953-.33-3.013" fill="#335C9E" /></g><g clip-path="url(#empty_b02f44d5e51464ad11702351c2fec42f_c)"><path d="M176.5 19.5h32v32h-32v-32Z" fill="#0C131F" /><path d="M208.5 26.789V44.21a8.705 8.705 0 0 1-8.711-8.711 8.705 8.705 0 0 1 8.711-8.711Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M176.5 44.211V26.79h12.988c4.811 0 8.701 3.911 8.701 8.721 0 4.81-3.89 8.701-8.701 8.701H176.5Zm12.444-2.489a6.223 6.223 0 1 0 0-12.445 6.223 6.223 0 0 0 0 12.445Z" fill="#8DE8FE" /></g><path fill-rule="evenodd" clip-rule="evenodd" d="M43.319 95.1c-.8-4.933-5.467-8.2-10.4-7.4l1.467-8.267-5.267-.933c-.467 1-2.4 5.533-3.4 10.6 1.933 1.333 3.4 3.4 3.8 5.933.466 2.667-.333 5.267-1.933 7.267.4.467.866.933 1.333 1.333 2.066 1.6 4.533 2.267 6.933 1.8 5-.733 8.334-5.4 7.467-10.333" fill="#054752" /><path fill-rule="evenodd" clip-rule="evenodd" d="m25.652 89.7.134-.533c-1.867-1.267-4.2-1.867-6.6-1.467l1.466-8.2-5.266-.933c-.467 1-2.6 5.866-3.467 11.133-.733 4.267-.667 8.867 1.533 12.067.467.666 1.067 1.333 1.8 1.866 2.067 1.6 4.534 2.267 7 1.8 2.2-.333 4.134-1.533 5.467-3.133l-.4-.533c-2.333-3.2-2.4-7.734-1.667-12.067" fill="#2DBEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M29.586 95.1c-.467-2.533-1.867-4.6-3.8-5.933l-.134.533c-.733 4.267-.666 8.867 1.534 12.067l.4.533c1.667-1.933 2.466-4.533 2-7.2" fill="#9EF769" /><path fill-rule="evenodd" clip-rule="evenodd" d="M126.1 13.211c-3.956 0-7.644 1.778-10.133 4.934a12.673 12.673 0 0 0-2.667 7.777v2.356c0 1.022-.4 2-1.067 2.71-.533.534-1.2.934-1.911 1.112.267.667.889 1.689 2 2.8a11.266 11.266 0 0 0 3.245 2.355v-.044a3.986 3.986 0 0 1 3.377-1.822c.267 0 .489.044.756.089a3.992 3.992 0 0 1 3.156 3.11h3.288c3.423 0 6.667-1.421 9.023-3.733 3.644-3.644 4.755-9.11 2.755-13.822-2-4.755-6.622-7.822-11.822-7.822Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M126.1 11.611c-4.4 0-8.533 1.956-11.333 5.467a14.285 14.285 0 0 0-3.067 8.889v2.31c0 1.2-.844 2.312-2.489 2.4-.4 0-.711.312-.755.712-.045 1.067 1.111 3.067 2.711 4.667 1.111 1.11 2.4 2 3.777 2.71-.444 2.445 1.467 4.667 3.956 4.667h.044a4 4 0 0 0 3.912-3.155h3.333c.355 1.822 1.955 3.155 3.911 3.155.444 0 .933-.089 1.378-.222 1.111-.355 1.955-1.2 2.355-2.311a4.286 4.286 0 0 0 0-2.889c.889-.578 1.689-1.2 2.445-1.956a14.158 14.158 0 0 0 4.222-10.088c0-3.822-1.511-7.378-4.222-10.09-2.711-2.8-6.356-4.266-10.178-4.266Zm0 1.6c5.156 0 9.822 3.111 11.822 7.867 2 4.755.889 10.222-2.755 13.822a12.783 12.783 0 0 1-9.023 3.733h-3.288c-.312-1.6-1.556-2.8-3.156-3.11-.267-.045-.489-.09-.756-.09a4.043 4.043 0 0 0-3.377 1.822v.045c-1.2-.622-2.267-1.422-3.245-2.355-1.111-1.112-1.733-2.178-2-2.8.756-.178 1.378-.578 1.911-1.112.667-.755 1.067-1.689 1.067-2.71v-2.356c0-2.8.933-5.556 2.667-7.778 2.489-3.245 6.177-4.978 10.133-4.978Z" fill="#000" /><path fill-rule="evenodd" clip-rule="evenodd" d="M132.5 21.122c-.889 0-1.6.711-1.6 1.6 0 .89.711 1.6 1.6 1.6.889 0 1.6-.71 1.6-1.6 0-.889-.711-1.6-1.6-1.6ZM122.9 21.122c-.889 0-1.6.711-1.6 1.6 0 .89.711 1.6 1.6 1.6.889 0 1.6-.71 1.6-1.6 0-.889-.711-1.6-1.6-1.6ZM122.633 27.478c-.577 0-.977.577-.711 1.11a6.39 6.39 0 0 0 5.778 3.645 6.39 6.39 0 0 0 5.778-3.644c.222-.534-.134-1.111-.711-1.111a.791.791 0 0 0-.711.444 4.829 4.829 0 0 1-4.312 2.711c-1.866 0-3.555-1.066-4.311-2.71-.177-.267-.444-.445-.8-.445Z" fill="#000" /><path fill-rule="evenodd" clip-rule="evenodd" d="M234.459 103.335c.307 0 .614 0 1.008-.044v4.947c-.832.175-1.488.262-2.408.262-4.202 0-6.829-2.451-6.829-6.61V76.5h5.735v24.427c0 1.882 1.05 2.408 2.494 2.408Zm-16.284-19.13c0 .437 0 .832-.088 1.182h-5.734c.394-.525.568-1.314.568-2.19v-2.976h5.254v3.984Zm-9.675 2.452v5.165h2.189c3.896 0 6.26-2.058 7.18-5.165H208.5Zm10.638 0c-.525 2.232-1.532 3.808-3.546 5.165h6.917v-5.165h-3.371Zm-6.742 6.434v8.756c0 4.158 2.627 6.653 6.829 6.653 2.145 0 3.283-.525 3.283-.525v-4.815c-.306.087-1.094.175-1.794.175-1.664 0-2.54-.613-2.54-2.496v-7.748h-5.778Z" fill="#00D5B5" /></g><defs><clipPath id="empty_b02f44d5e51464ad11702351c2fec42f_a"><path fill="#fff" transform="translate(.5 .5)" d="M0 0h249v162H0z" /></clipPath><clipPath id="empty_b02f44d5e51464ad11702351c2fec42f_c"><path d="M176.5 25.5a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-20Z" fill="#fff" /></clipPath></defs></symbol>'}),ro=(ao.a.add(no),no),oo=a("/5Aj"),io=function(){var e=Object(ye.e)().t,t=Object(ge.b)().isMobile;return r.a.createElement(oo.a,{"data-testid":"EmptyContent",className:t?"u-p-1":"u-flex-justify-start u-p-3",icon:ro,iconSize:"large",title:e("empty.title"),text:e("empty.text")})},co=function(e){var t=e.account,a=e.isAccountLoading,n=e.isQueryLoading,o=e.timeseries,i=Object(ge.b)().isMobile,c=Object(h.useClient)();return a?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):t?n?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):0===o.length?r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(Kr,{label:c.appMetadata.slug}),r.a.createElement(io,null)):void 0:r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(Kr,{label:c.appMetadata.slug}),r.a.createElement(io,null))};co.propTypes={account:Ze.a.object,isAccountLoading:Ze.a.bool,isQueryLoading:Ze.a.bool,timeseries:Ze.a.arrayOf(Ze.a.object)};var lo=co,so=["data"],uo=["data"],mo=function(){var e,t=le(),a=t.account,n=t.isAccountLoading,o=Object(ge.b)().isMobile,i=re(),l=Object(h.useQuery)(i.definition,i.options),s=l.data,u=c()(l,so),d=Object(h.isQueryLoading)(u),m=ae({accountId:null==a?void 0:a._id},Boolean(a)),p=Object(h.useQueryAll)(m.definition,m.options),f=p.data,b=c()(p,uo),v=Object(h.isQueryLoading)(b)||b.hasMore;if(d||n||!a||v||0===f.length)return r.a.createElement(lo,{account:a,isAccountLoading:n,isQueryLoading:v,timeseries:f});var g=!(null==s||null===(e=s[0].bikeGoal)||void 0===e||!e.sendToDACC);return o?r.a.createElement(Yr,{timeseries:f,timeseriesQueryLeft:b,sendToDACC:g}):r.a.createElement(Xr,{timeseries:f,timeseriesQueryLeft:b,sendToDACC:g})},po=function(){var e=Object(ye.e)().t,t=Object(je.h)(),a=Ya(),n={typography:{whiteSpace:"pre-line"}};return r.a.createElement(Rn.a,{open:!0,title:e("bikeGoal.about.title"),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{className:"u-mb-1",variant:"h5"},e("bikeGoal.about.intro.title")),r.a.createElement(Sn.a,{variant:"body1",style:n.typography},e("bikeGoal.about.intro.content",{bountyAmount:a})),r.a.createElement(Sn.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.how_trips_detected.title")),r.a.createElement(Sn.a,{variant:"body1",style:n.typography},e("bikeGoal.about.how_trips_detected.content")),r.a.createElement(Sn.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.once_goal_reach.title")),r.a.createElement(Sn.a,{variant:"body1",style:n.typography},e("bikeGoal.about.once_goal_reach.content",{bountyAmount:a}))),onClose:function(){return t("..")}})},fo=a("UuKj"),bo=Object(n.forwardRef)((function(e,t){return r.a.createElement(fo.a,Fe()({type:"number",inputProps:{min:"0",max:"100",step:"1",inputMode:"numeric"}},e,{ref:t}))}));bo.displayName="PercentageField";var vo=bo,go=function(e){return e>=0&&e<=100?Math.round(e):null},yo=a("VXtb"),ho=a("gHOe"),Eo=a("5Q3L"),Oo=function(e){var t=e.itemName,a=e.value,n=e.setValue,o=Object(ye.e)().t,i=!a,c={variant:"outlined",margin:"normal",defaultValue:a,required:!0,fullWidth:!0,error:i,helperText:i?o("bikeGoal.edit.required"):" "};switch(t){case"workTimePercentage":return r.a.createElement(vo,Fe()({},c,{onChange:function(e){return n(go(Number(e.target.value)))}}));case"workTime":return r.a.createElement(ho.a,{"aria-label":"radio",name:"workTimeRadio",value:a,onChange:function(e){return n(e.target.value)}},r.a.createElement(yo.a,{value:"full",label:o("bikeGoal.edit.workTime_full"),control:r.a.createElement(Eo.a,null)}),r.a.createElement(yo.a,{value:"part",label:o("bikeGoal.edit.workTime_part"),control:r.a.createElement(Eo.a,null)}));default:return r.a.createElement(fo.a,Fe()({},c,{onChange:function(e){return n(e.target.value)}}))}};Oo.propTypes={itemName:Ze.a.string.isRequired,value:Ze.a.any.isRequired,setValue:Ze.a.func.isRequired};var Co=Oo,jo=function(e){var t=e.itemName,a=e.onClose,o=Object(ye.e)().t,i=gr("bikeGoal.".concat(t)),c=i.isLoading,l=i.value,u=i.save,d=Object(n.useState)(l),m=s()(d,2),p=m[0],f=m[1],b=Object(n.useState)(!1),v=s()(b,2),g=v[0],y=v[1],h=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,u(p);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(yr.a,{open:!0,title:o("bikeGoal.edit.".concat(t)),content:c?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Co,{itemName:t,value:p,setValue:f}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{variant:"secondary",label:o("bikeGoal.edit.cancel"),onClick:a}),r.a.createElement(xn.a,{className:"u-miw-4",label:o("bikeGoal.edit.submit"),busy:g,disabled:!p,onClick:h})),onClose:a})};jo.propTypes={itemName:Ze.a.string.isRequired,onClose:Ze.a.func.isRequired};var wo=jo,xo=a("PfmE"),ko=a("uiSW"),_o=a("MzjA"),To=a("EMSc");function Po(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Do(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Po(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var No=function(){var e=Object(ye.e)().t,t=Object(n.useState)(""),a=s()(t,2),o=a[0],i=a[1],c=gr("bikeGoal"),l=c.isLoading,u=c.value,d=c.save,m=Va(),p=m.sourceIdentity,f=m.sourceType,b="part"===u.workTime,v=function(){d(Do(Do({},u),{},{sendToDACC:!u.sendToDACC}))};return l?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Tn.a,null,r.a.createElement(Pn.b,{button:!0,onClick:function(){return i("lastname")}},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:Tt.a})),r.a.createElement(Nn.a,{primary:r.a.createElement(Sn.a,{variant:"caption"},e("bikeGoal.edit.lastname")),secondary:r.a.createElement(Sn.a,{variant:"body1"},u.lastname)})),r.a.createElement(Yn.a,{component:"li",variant:"inset"}),r.a.createElement(Pn.b,{button:!0,onClick:function(){return i("firstname")}},r.a.createElement(Dn.a,null),r.a.createElement(Nn.a,{primary:r.a.createElement(Sn.a,{variant:"caption"},e("bikeGoal.edit.firstname")),secondary:r.a.createElement(Sn.a,{variant:"body1"},u.firstname)})),r.a.createElement(Yn.a,{component:"li",variant:"inset"}),r.a.createElement(Pn.b,{button:!0,onClick:function(){return i("workTime")}},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:ht.a})),r.a.createElement(Nn.a,{primary:r.a.createElement(Sn.a,{variant:"caption"},e("bikeGoal.edit.workTime")),secondary:r.a.createElement(Sn.a,{variant:"body1"},e("bikeGoal.edit.workTime_".concat(u.workTime)))}),r.a.createElement(kn.a,{icon:nr.a})),r.a.createElement(Yn.a,{component:"li",variant:"inset"}),b&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn.b,{button:!0,onClick:function(){return i("workTimePercentage")}},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:xo.a})),r.a.createElement(Nn.a,{primary:r.a.createElement(Sn.a,{variant:"caption"},e("bikeGoal.edit.workTimePercentage")),secondary:r.a.createElement(Sn.a,{variant:"body1"},u.workTimePercentage)}),r.a.createElement(Sn.a,{variant:"body2"},"%")),r.a.createElement(Yn.a,{component:"li",variant:"inset"})),r.a.createElement(Pn.b,{ellipsis:!1,button:!0,onClick:v},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:ko.a})),r.a.createElement(Nn.a,{primary:e("bikeGoal.edit.compare_progress",{source:null!=p?p:e("bikeGoal.employer.my_".concat(f))})}),r.a.createElement(_o.a,null,r.a.createElement(To.a,{className:"u-w-auto",color:"primary",checked:u.sendToDACC,onChange:v})))),Boolean(o)&&r.a.createElement(wo,{itemName:o,onClose:function(){return i("")}}))},Mo=function(){var e=Object(ye.e)().t,t=Object(je.h)();return r.a.createElement(Rn.a,{open:!0,disableGutters:!0,title:e("bikeGoal.edit.title"),content:r.a.createElement(No,null),onClose:function(){return t("..")}})},So=new eo.a({id:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d",use:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d-usage",viewBox:"0 0 106 106",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 106 106" id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d"><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a)"><path d="M16 48c0-19.882 16.118-36 36-36s36 16.118 36 36-16.118 36-36 36-36-16.118-36-36Z" fill="#fff" /></g><path d="M65.11 37.39C63.962 31.193 58.53 26.5 52 26.5c-6.53 0-11.962 4.693-13.11 10.89C32.693 38.538 28 43.97 28 50.5c0 7.364 5.97 13.333 13.333 13.333H62.667C70.03 63.833 76 57.863 76 50.5c0-6.53-4.693-11.962-10.89-13.11Z" fill="#B3D3FF" /><path d="M49.569 36c.837 0 1.528.63 1.622 1.443l.011.19v10.941a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-9.308l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v9.308a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-6.042l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v16.33a6.527 6.527 0 0 1-3 5.495V67a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2.615a6.69 6.69 0 0 1-1.022-.78l-8.425-7.824a1.73 1.73 0 0 1-.262-2.226 1.538 1.538 0 0 1 2.075-.463l4.67 2.827V40.9l.012-.19a1.633 1.633 0 0 1 3.244 0l.01.19v7.675a.49.49 0 0 0 .378.477l.112.013h.654c.27 0 .49-.22.49-.49V37.633l.01-.19A1.633 1.633 0 0 1 49.57 36Z" fill="#297EF2" /><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b)"><rect x="58" y="54" width="32" height="32" rx="8" fill="#fff" /><path d="M72.409 77.886c.2-.05.404.072.455.273l.375 1.5c.007.03.011.061.011.091h1.5c0-.03.004-.06.011-.091l.375-1.5a.375.375 0 1 1 .728.182l-.364 1.455v1.454a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-1.454l-.364-1.455a.375.375 0 0 1 .273-.455Z" fill="#F33136" /><path d="M72.5 78.25c-.414 0-.765-.351-.988-.7-.408-.64-1.3-1.334-2.346-2.147C66.746 73.523 63.5 71 63.5 67c0-4.97 4.701-9 10.5-9v20.25h-1.5Z" fill="#F33136" /><path d="M74 78.25h-1.286c0-.838-.654-1.73-1.476-2.847C69.855 73.523 68 71 68 67c0-4.97 2.686-9 6-9v20.25Z" fill="#FC7B0E" /><path d="M75.5 78.25c.414 0 .765-.351.988-.7.408-.64 1.3-1.334 2.346-2.147C81.254 73.523 84.5 71 84.5 67c0-4.97-4.701-9-10.5-9v20.25h1.5Z" fill="#FFD799" /><path d="M74 78.25h1.286c0-.838.654-1.73 1.476-2.847C78.145 73.523 80 71 80 67c0-4.97-2.686-9-6-9v20.25Z" fill="#FFB64F" /></g><defs><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a" x="0" y="0" width="104" height="104" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b" x="42" y="42" width="64" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter></defs></symbol>'}),Ao=(ao.a.add(So),So),Ro=new eo.a({id:"icon-anonymous_f9180197246a84316517b8157ef006c8",use:"icon-anonymous_f9180197246a84316517b8157ef006c8-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-anonymous_f9180197246a84316517b8157ef006c8"><path d="M4.36 1.24 3 6H1a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2h-2l-1.36-4.76A1.7 1.7 0 0 0 9.062.291L8 1 6.938.292a1.7 1.7 0 0 0-2.578.947Z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.84 13.549A3.502 3.502 0 0 1 0 12.5a3.5 3.5 0 0 1 6.76-1.274A3.49 3.49 0 0 1 8 11c.436 0 .854.08 1.24.226a3.501 3.501 0 1 1-.08 2.323A1.495 1.495 0 0 0 8 13c-.467 0-.883.212-1.16.549ZM3.5 14a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" /></symbol>'}),Lo=(ao.a.add(Ro),Ro),Io=new eo.a({id:"icon-export_a08eff636b3b69e5d1cfc230029cdad8",use:"icon-export_a08eff636b3b69e5d1cfc230029cdad8-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-export_a08eff636b3b69e5d1cfc230029cdad8"><path d="M7.165 8.244C7.585 6.01 9.581 4.297 12 4.297s4.415 1.713 4.835 3.947l.143.76.76.14c2.295.418 4.012 2.396 4.012 4.748 0 .555-.096 1.089-.272 1.586l1.704 1.704a6.98 6.98 0 0 0 .818-3.29c0-3.222-2.173-5.925-5.131-6.79C17.984 4.17 15.236 2.047 12 2.047c-3.236 0-5.984 2.123-6.869 5.055C2.173 7.967 0 10.67 0 13.892c0 3.926 3.224 7.08 7.167 7.08H8.25v-2.25H7.167c-2.731 0-4.917-2.177-4.917-4.83 0-2.352 1.717-4.33 4.012-4.749l.76-.139.143-.76Z" fill="#1D212A" fill-opacity=".72" /><path d="M19.499 19.567a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1 0-3h2.368l-4.993-4.993a1.508 1.508 0 0 1 2.018-2.236l.114.104 4.993 4.992v-2.367a1.5 1.5 0 1 1 3 0v6Z" fill="#EA3F3F" /></symbol>'}),Fo=(ao.a.add(Io),Io),Bo=a("5LIP"),Go=function(e){var t=e.sharedDataLabel,a=e.open,n=e.onClose,o=e.onRefuse,i=e.onAccept,c=e.showDaccReasonsDialog,l=Object(ye.e)().t;return r.a.createElement(Bo.a,{variant:"inverted"},r.a.createElement(yr.a,{open:a,onClose:n,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(kn.a,{icon:Ao,size:106}),r.a.createElement(Sn.a,{variant:"h4"},l("dacc.permissionsDialog.title")),r.a.createElement(Sn.a,{className:"u-mt-1"},l("dacc.permissionsDialog.primaryText")),r.a.createElement(Bo.a,{variant:"normal"},r.a.createElement(Mn.a,{className:"u-mt-1-half",elevation:0},r.a.createElement(Tn.a,null,r.a.createElement(Pn.b,{divider:!0},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:Fo,size:24})),r.a.createElement(Nn.a,{primary:r.a.createElement(Sn.a,{variant:"h6"},l("dacc.permissionsDialog.export_outside"))})),r.a.createElement(Pn.b,{dense:!0},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:Lo,color:"var(--iconTextColor)"})),r.a.createElement(Nn.a,{primary:r.a.createElement(Sn.a,{variant:"body2"},t)}))))),r.a.createElement(Sn.a,{className:"u-mt-1-half",style:{textDecoration:"underline"},onClick:c},l("dacc.permissionsDialog.why_asking")),r.a.createElement(Sn.a,{className:"u-mt-1-half",variant:"caption",color:"textPrimary"},l("dacc.permissionsDialog.secondaryText"))),actionsLayout:"column",actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{label:l("dacc.permissionsDialog.refuse"),onClick:o}),r.a.createElement(xn.a,{label:l("dacc.permissionsDialog.accept"),onClick:i}))}))};Go.propTypes={sharedDataLabel:Ze.a.string.isRequired,open:Ze.a.bool.isRequired,onClose:Ze.a.func.isRequired,onRefuse:Ze.a.func.isRequired,onAccept:Ze.a.func.isRequired,showDaccReasonsDialog:Ze.a.func.isRequired};var zo=Go,Zo=function(e){var t=e.open,a=e.onClose,n=Object(ye.e)().t;return r.a.createElement(yr.a,{open:t,onClose:a,title:n("dacc.reasonsDialog.title"),content:n("dacc.reasonsDialog.content")})};Zo.propTypes={open:Ze.a.bool.isRequired,onClose:Ze.a.func.isRequired};var Uo=Zo,qo=function(e){var t=e.onClose,a=e.onRefuse,o=e.onAccept,i=e.componentProps,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(zo,Fe()({open:!0,onClose:t,onRefuse:a,onAccept:o,showDaccReasonsDialog:function(){return d(!0)}},i.DaccPermissionsDialog)),u&&r.a.createElement(Uo,{open:!0,onClose:function(){return d(!1)}}))};qo.propTypes={onClose:Ze.a.func.isRequired,onRefuse:Ze.a.func.isRequired,onAccept:Ze.a.func.isRequired,componentProps:Ze.a.shape({DaccPermissionsDialog:Ze.a.shape({sharedDataLabel:Ze.a.string.isRequired}).isRequired}).isRequired};var Ho=qo,Yo=function(e){var t=e.onClose,a=e.onRefuse,n=e.onAccept,o=Object(ye.e)().t;return r.a.createElement(Ho,{onClose:t,onRefuse:a,onAccept:n,componentProps:{DaccPermissionsDialog:{sharedDataLabel:o("dacc.permissionsDialog.anonymized_bikegoal_progression")}}})};Yo.propTypes={onClose:Ze.a.func.isRequired,onRefuse:Ze.a.func.isRequired,onAccept:Ze.a.func.isRequired};var Vo=Yo,Wo=a("7EAA"),Qo=a("lwqu"),Ko=a("BxMJ");function Jo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jo(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $o=Object(n.forwardRef)((function(e,t){var a=Object(ye.e)().t,o=Object(n.useState)(!1),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useReducer)((function(e){return!e}),!1),d=s()(u,2),m=d[0],p=d[1],f=gr("bikeGoal"),b=f.isLoading,v=f.value,g=void 0===v?{}:v,y=f.save,h=g.onboardingStep,E=void 0===h?0:h,O=g.sendToDACC,C=void 0===O?null:O,w=Object(n.useState)(C),k=s()(w,2),_=k[0],T=k[1],P=Va(),D=P.sourceType,N=P.sourceIdentity,M={typography:{whiteSpace:"pre-line"}},S=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,y(Xo(Xo({},g),{},{onboardingStep:E-1}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,y(Xo(Xo({},g),{},{onboardingStep:E+1,sendToDACC:_}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qo.a,Fe()({},e,{ref:t}),r.a.createElement(Ko.a,null,a("bikeGoal.edit.compare_progress",{source:null!=N?N:a("bikeGoal.employer.my_".concat(D))})),r.a.createElement(Wo.a,null,b?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{style:M.typography},a("bikeGoal.onboarding.steps.comparison.comparisonLegend",{source:null!=N?N:a("bikeGoal.employer.your_".concat(D))})),r.a.createElement(ho.a,{className:"u-mt-1"},r.a.createElement(yo.a,{control:r.a.createElement(Eo.a,{checked:!0===_,onClick:function(){return l(!0)}}),label:a("bikeGoal.onboarding.steps.comparison.compare"),className:"u-m-0"}),r.a.createElement(yo.a,{control:r.a.createElement(Eo.a,{checked:!1===_,onClick:function(){return T(!1)}}),label:a("bikeGoal.onboarding.steps.comparison.doNotCompare"),className:"u-m-0"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(xn.a,{onClick:A,label:a("bikeGoal.onboarding.actions.next"),disabled:m||null==_}),r.a.createElement(xn.a,{onClick:S,label:a("bikeGoal.onboarding.actions.previous"),disabled:m,variant:"text",className:"u-ml-half"}),m&&r.a.createElement(Ln.b,{className:"u-ml-half"}))))),c&&r.a.createElement(Vo,{onClose:function(){return l(!1)},onRefuse:function(){l(!1),T(!1)},onAccept:function(){l(!1),T(!0)}}))}));$o.displayName="BikeGoalOnboardingComparison";var ei=$o;function ti(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ai(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ti(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ni=Object(n.forwardRef)((function(e,t){var a=Object(ye.e)().t,o=Object(je.h)(),i=Object(n.useReducer)((function(e){return!e}),!1),c=s()(i,2),l=c[0],u=c[1],d=gr("bikeGoal"),m=d.isLoading,p=d.value,f=void 0===p?{}:p,b=d.save,v=f.onboardingStep,g=void 0===v?0:v,y=Ya(),h={typography:{whiteSpace:"pre-line"}},E=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,b(ai(ai({},f),{},{onboardingStep:g-1}));case 3:u();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=j()(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,b(ai(ai({},f),{},{onboarded:!0,activated:!0,showAlert:!1}));case 3:u(),t=(new Date).getFullYear().toString(),o("/bikegoal/".concat(t,"/trips"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Qo.a,Fe()({},e,{ref:t}),r.a.createElement(Ko.a,null,a("bikeGoal.about.once_goal_reach.title")),r.a.createElement(Wo.a,null,m?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{style:h.typography},a("bikeGoal.about.once_goal_reach.content",{bountyAmount:y})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(xn.a,{onClick:O,label:a("bikeGoal.onboarding.actions.finish"),disabled:l}),r.a.createElement(xn.a,{onClick:E,label:a("bikeGoal.onboarding.actions.previous"),disabled:l,variant:"text",className:"u-ml-half"}),l&&r.a.createElement(Ln.b,{className:"u-ml-half"})))))}));ni.displayName="BikeGoalOnboardingConclusion";var ri=ni;function oi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ii(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ci=Object(n.forwardRef)((function(e,t){var a=Object(ye.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=gr("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g={typography:{whiteSpace:"pre-line"}},y=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(ii(ii({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(ii(ii({},p),{},{onboardingStep:v+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Qo.a,Fe()({},e,{ref:t}),r.a.createElement(Ko.a,null,a("bikeGoal.about.how_trips_detected.title")),r.a.createElement(Wo.a,null,d?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{style:g.typography},a("bikeGoal.about.how_trips_detected.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(xn.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),r.a.createElement(xn.a,{onClick:y,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Ln.b,{className:"u-ml-half"})))))}));ci.displayName="BikeGoalOnboardingDetection";var li=ci;function si(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ui(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?si(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):si(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var di=Object(n.forwardRef)((function(e,t){var a=Object(ye.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=gr("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=Ya(),y={typography:{whiteSpace:"pre-line"}},h=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(ui(ui({},p),{},{onboardingStep:v+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Qo.a,Fe()({},e,{ref:t}),r.a.createElement(Ko.a,null,a("bikeGoal.about.intro.title")),r.a.createElement(Wo.a,null,d?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{style:y.typography},a("bikeGoal.about.intro.content",{bountyAmount:g})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(xn.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),c&&r.a.createElement(Ln.b,{className:"u-ml-half"})))))}));di.displayName="BikeGoalOnboardingIntroduction";var mi=di;function pi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var bi=Object(n.forwardRef)((function(e,t){var a=Object(ye.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=gr("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=p.lastname,y=void 0===g?"":g,h=p.firstname,E=void 0===h?"":h,O=Object(n.useState)(y),C=s()(O,2),w=C[0],k=C[1],_=Object(n.useState)(E),T=s()(_,2),P=T[0],D=T[1],N=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(fi(fi({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(fi(fi({},p),{},{onboardingStep:v+1,lastname:w,firstname:P}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Qo.a,Fe()({},e,{ref:t}),r.a.createElement(Ko.a,null,a("bikeGoal.onboarding.steps.naming.title")),r.a.createElement(Wo.a,null,d?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,null,a("bikeGoal.onboarding.steps.naming.nameLegend")),r.a.createElement("div",null,r.a.createElement(fo.a,{variant:"outlined",label:a("bikeGoal.edit.lastname"),defaultValue:w,onChange:function(e){return k(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",null,r.a.createElement(fo.a,{variant:"outlined",label:a("bikeGoal.edit.firstname"),defaultValue:P,onChange:function(e){return D(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(xn.a,{onClick:M,label:a("bikeGoal.onboarding.actions.next"),disabled:c||""===P||""===w}),r.a.createElement(xn.a,{onClick:N,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Ln.b,{className:"u-ml-half"})))))}));bi.displayName="BikeGoalOnboardingNaming";var vi=bi,gi=a("0JGJ");function yi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function hi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yi(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ei=Object(n.forwardRef)((function(e,t){var a=Object(ye.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=gr("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=p.workTime,y=void 0===g?null:g,h=p.workTimePercentage,E=void 0===h?0:h,O=Object(n.useState)(y),C=s()(O,2),w=C[0],k=C[1],_=Object(n.useState)(E),T=s()(_,2),P=T[0],D=T[1],N={typography:{whiteSpace:"pre-line"}},M=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(hi(hi({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(hi(hi({},p),{},{onboardingStep:v+1,workTime:w,workTimePercentage:P}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Qo.a,Fe()({},e,{ref:t}),r.a.createElement(Ko.a,null,a("bikeGoal.edit.workTime")),r.a.createElement(Wo.a,null,d?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,null,a("bikeGoal.onboarding.steps.timing.timeLegend")),r.a.createElement(ho.a,{className:"u-mt-1"},r.a.createElement(yo.a,{control:r.a.createElement(Eo.a,{checked:"full"===w,onClick:function(){return k("full")}}),label:a("bikeGoal.edit.workTime_full"),className:"u-m-0"}),r.a.createElement(yo.a,{control:r.a.createElement(Eo.a,{checked:"part"===w,onClick:function(){return k("part")}}),label:a("bikeGoal.edit.workTime_part"),className:"u-m-0"})),"part"===w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{className:"u-mt-1",style:N.typography},a("bikeGoal.onboarding.steps.timing.percentageLegend")),r.a.createElement("div",null,r.a.createElement(vo,{variant:"outlined",label:a("bikeGoal.onboarding.steps.timing.percentage"),defaultValue:P,InputProps:{endAdornment:r.a.createElement(gi.a,{position:"end"},r.a.createElement(Sn.a,{variant:"body1"},"%"))},onChange:function(e){D(go(Number(e.target.value)))},className:"u-w-5 u-mt-1"}))),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(xn.a,{onClick:S,label:a("bikeGoal.onboarding.actions.next"),disabled:c||function(){if(null==w)return!0;if("part"===w){if(null==P)return!0;if(0===P)return!0}return!1}()}),r.a.createElement(xn.a,{onClick:M,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Ln.b,{className:"u-ml-half"})))))}));Ei.displayName="BikeGoalOnboardingTiming";var Oi=Ei,Ci=a("pFWb"),ji=function(){var e=Object(ye.e)().t,t=Object(je.h)(),a=gr("bikeGoal.onboardingStep"),n=a.isLoading,o=a.value,i=void 0===o?0:o;return r.a.createElement(Rn.a,{open:!0,disableGutters:!0,title:e("bikeGoal.onboarding.title"),content:r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}),!n&&r.a.createElement(Ci.a,{activeStep:i,orientation:"vertical"},r.a.createElement(mi,null),r.a.createElement(vi,null),r.a.createElement(Oi,null),r.a.createElement(li,null),r.a.createElement(ei,null),r.a.createElement(ri,null))),onClose:function(){t("..")}})},wi={co2:{fontWeight:700}},xi={modes:Mr,purposes:Nr},ki=function(e){var t=e.type,a=e.sortedTimeserieKey,n=xi[t];return r.a.createElement(n,{attribute:a})},_i=function(e){var t=e.sortedTimeserie,a=e.totalCO2,n=e.type,o=Object(ye.e)().t,i=Object(je.h)(),c=s()(t,2),l=c[0],u=c[1],d=u.timeseries.length,m=u.totalCO2,p=function(e,t){if(0===t)return"0%";var a=(100*e/t).toFixed(2).split("."),n=s()(a,2),r=n[0],o=n[1];return"00"===o?"".concat(r,"%"):"".concat(r,".").concat(o,"%")}(m,a);return 0===d&&0===m?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn.b,{"data-testid":"ListItem",onClick:function(){return i("/analysis/".concat(n,"/").concat(l))},button:!0},r.a.createElement(Dn.a,null,r.a.createElement(ki,{type:n,sortedTimeserieKey:l})),r.a.createElement(Nn.a,{primary:o("trips.".concat(n,".").concat(l)),secondary:"".concat(p," ¬∑ ").concat(o("analysis.travels",d))}),r.a.createElement(Sn.a,{style:wi.co2,variant:"body2"},Xt(m)),r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:Sr.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Yn.a,null))},Ti=function(e,t,a){var n=Object.keys(e),r=Object.values(e),o="modes"===t?Gt:Ut,i=r.map((function(e){return e.totalCO2})),c=n.map((function(e){return o(e)}));return{data:{labels:n.map((function(e){return a("trips.".concat(t,".").concat(e))})),datasets:[{id:1,data:i,backgroundColor:c}]},options:{plugins:{tooltip:{displayColors:!1,callbacks:{label:function(e){return"".concat(e.label," ").concat(Xt(e.raw))}}}}}}},Pi=a("kTYB"),Di=function(e){var t=e.timeseries,a=Object(je.i)().mode,o=Object(ye.e)().t,i=Object(ge.b)().isMobile,c=Object(n.useMemo)((function(){return Oa(t)}),[t]),l=ha(t),s=Object(n.useMemo)((function(){return Ti(c,"modes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(zr,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Gn()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(Pi.a,{data:u,options:d,primaryText:Xt(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(xe.a,{marginTop:i?void 0:"6rem"},r.a.createElement(Tn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(_i,{key:t,type:"modes",totalCO2:l,sortedTimeserie:e})})))))},Ni=["data"],Mi=function(){var e=le().account,t=me().selectedDate,a=te(t,null==e?void 0:e._id),n=Object(h.useQueryAll)(a.definition,a.options),o=n.data,i=c()(n,Ni);return Object(h.isQueryLoading)(i)||i.hasMore?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Di,{timeseries:o})},Si=a("XfNG"),Ai=a("GXf6"),Ri=["/analysis/modes","/analysis/purposes"],Li=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},Ii=function(){var e=Object(je.h)(),t=Object(je.g)().pathname,a=Object(ye.e)().t,n=Ri.indexOf(Ri.find((function(e){return t.includes(e)})));return r.a.createElement(Mn.a,null,r.a.createElement(Si.a,{value:n,onChange:function(t,a){e(Ri[a])}},r.a.createElement(Ai.a,Fe()({label:a("nav.modes")},Li(0))),r.a.createElement(Ai.a,Fe()({label:a("nav.purposes")},Li(1)))))},Fi=a("K4g+"),Bi=a("/ENz"),Gi=Object(Bi.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2]}}})),zi=function(e){var t=e.className,a=Gi();return r.a.createElement(xe.a,{display:"flex",className:t},r.a.createElement(Mn.a,{className:a.paper,elevation:2}),r.a.createElement(xe.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(dr.a,{className:a.iconButton,disabled:!0,size:"medium"},r.a.createElement(kn.a,{icon:Fi.a})),r.a.createElement(dr.a,{className:Gn()(a.iconButton,"u-ml-half"),disabled:!0,size:"medium"},r.a.createElement(kn.a,{icon:Sr.a}))))},Zi=a("7u78"),Ui=["children","className","spaceBetween"],qi=Object(Bi.a)((function(){return{button:{padding:"0 1rem",justifyContent:function(e){return e.spaceBetween?"space-between":"left"}},typography:{textTransform:"capitalize"}}})),Hi=function(e){var t=e.children,a=e.className,n=e.spaceBetween,o=c()(e,Ui),i=qi({spaceBetween:n});return r.a.createElement(Zi.a,Fe()({className:Gn()(i.button,a),endIcon:r.a.createElement(kn.a,{icon:nr.a,size:10})},o),r.a.createElement(Sn.a,{className:i.typography},t))},Yi=a("gtDA"),Vi=a("1Crc"),Wi=["className","type","options","selectedIndex","disabledIndexes","onclick"],Qi=Object(Bi.a)((function(){return{paper:{textTransform:"capitalize",width:function(e){var t=e.anchorEl;return t?window.getComputedStyle(t).width:void 0},marginTop:2}}})),Ki=function(e){var t=e.className,a=e.type,o=e.options,i=e.selectedIndex,l=e.disabledIndexes,u=e.onclick,d=c()(e,Wi),m=Object(n.useState)(null),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useState)(i||0),g=s()(v,2),y=g[0],h=g[1],E=Qi({anchorEl:f}).paper,O=function(e){return function(){b(null),h(e),u&&u(a,o[e])}};return Object(n.useEffect)((function(){void 0!==i&&h(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Hi,Fe()({"data-testid":"dropdown-button",className:t,onClick:function(e){b(e.currentTarget)}},d),o[y]),r.a.createElement(Yi.a,{"data-testid":"dropdown-menu",classes:{paper:E},anchorEl:f,getContentAnchorEl:null,keepMounted:!0,open:Boolean(f),onClose:function(){b(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},elevation:2},o.map((function(e,t){return r.a.createElement(Vi.a,{"data-testid":"dropdown-menuItem-".concat(t),key:t,onClick:O(t),selected:t===y,disabled:l&&l.includes(t)},e)}))))};Ki.proptypes={className:Ze.a.string,type:Ze.a.oneOfType([Ze.a.string,Ze.a.number]),options:Ze.a.array.isRequired,selectedIndex:Ze.a.number,disabledIndexes:Ze.a.array,onclick:Ze.a.func};var Ji=Ki,Xi=function(e){return Array(12).fill().map((function(t,a){return new Intl.DateTimeFormat("".concat(e,"-").concat(e.toUpperCase()),{month:"long"}).format(new Date(0,a))}))},$i=function(e){return new Date(Math.min.apply(null,e))},ec=function(e){return new Date(Math.max.apply(null,e))},tc=function(e,t){return e.map((function(e,a){return t.includes(e)?null:a})).filter((function(e){return null!==e}))},ac=function(e,t){var a=function(e){var t=ec(e).getFullYear(),a=$i(e).getFullYear(),n=Number(a);return Array(t-a+1).fill().map((function(){return n++})).sort().reverse()}(e),n=function(e){return qe()(new Set(e.map((function(e){return e.getFullYear()}))))}(e),r=a.indexOf(t.getFullYear());return{years:a,yearSelectedIndex:r,disabledYearsIndexes:tc(a,n)}},nc=oa()((function(e){var t=e.dates,a=e.selectedDate,n=e.lang,r=Xi(n),o=$i(t),i=ec(t),c=a.getFullYear(),l=c===i.getFullYear(),s=c===o.getFullYear(),u=12;l?u=i.getMonth()+1:s&&(u=12-o.getMonth());var d,m=function(e){var t=e.monthCount,a=e.allMonthsName,n=e.endToStart;return a.slice(n?a.length-t:0,n?a.length:t)}({monthCount:u,allMonthsName:r,endToStart:s}),p=m.indexOf(r[a.getMonth()]);-1===p&&(l?d=i:s&&(d=o),p=m.indexOf(r[d.getMonth()]));var f=function(e){var t=e.dates,a=e.year,n=e.allMonthsName;return qe()(new Set(t.map((function(e){return e.getFullYear()===a?n[e.getMonth()]:null})).filter((function(e){return null!==e}))))}({dates:t,year:c,allMonthsName:r});return{months:m,monthSelectedIndex:p,disabledMonthsIndexes:tc(m,f)}})),rc=oa()((function(e){var t=e.oldDate,a=e.lang,n=e.value,r=e.type,o=e.dates,i=Xi(a);if("year"===r){var c=new Date(new Date(t).setFullYear(n)),l=nc({dates:o,selectedDate:c,lang:a}),s=l.months,u=l.monthSelectedIndex,d=i.indexOf(s[u]);return new Date(new Date(c).setMonth(d))}if("month"===r){var m=i.indexOf(n);return new Date(new Date(t).setMonth(m))}return t})),oc=Object(Bi.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},leftDropdownButton:{borderTopLeftRadius:1e3,borderBottomLeftRadius:1e3,paddingRight:"2.5rem"},rightDropdownButton:{borderTopRightRadius:1e3,borderBottomRightRadius:1e3,paddingRight:"1.2rem"},divider:{margin:"0.6rem 0"},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2],backgroundColor:e.palette.background.paper}}})),ic=function(e){var t=e.className,a=e.options,o=e.selectedDate,i=e.setSelectedDate,c=oc(),l=Object(ye.e)().lang,s=Object(n.useMemo)((function(){return nc({dates:a,selectedDate:o,lang:l})}),[a,o,l]),u=s.months,d=s.monthSelectedIndex,m=s.disabledMonthsIndexes,p=Object(n.useMemo)((function(){return ac(a,o)}),[a,o]),f=p.years,b=p.yearSelectedIndex,v=p.disabledYearsIndexes,g=function(e,t){var n=rc({oldDate:o,lang:l,value:t,type:e,dates:a});i(n)},y=function(e){return function(){i((function(t){return new Date(t.setMonth(t.getMonth()+e))}))}},h=function(e){return function(e){var t=e.type,a=e.selectedDate,n=e.options,r=new Date(a.getFullYear(),a.getMonth());if("previous"===t){var o=$i(n);return new Date(o.getFullYear(),o.getMonth()).getTime()===r.getTime()}if("next"===t){var i=ec(n);return new Date(i.getFullYear(),i.getMonth()).getTime()===r.getTime()}return!1}({type:e,selectedDate:o,options:a})};return r.a.createElement(xe.a,{display:"flex",className:t},r.a.createElement(Mn.a,{className:c.paper,elevation:2},r.a.createElement(Ji,{"data-testid":"dropdown-button-year",type:"year",className:c.leftDropdownButton,options:f,onclick:g,selectedIndex:b,disabledIndexes:v}),r.a.createElement(Yn.a,{className:c.divider,orientation:"vertical",flexItem:!0}),r.a.createElement(Ji,{"data-testid":"dropdown-button-month",type:"month",className:c.rightDropdownButton,fullWidth:!0,spaceBetween:!0,options:u,onclick:g,selectedIndex:d,disabledIndexes:m})),r.a.createElement(xe.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(dr.a,{"data-testid":"previous-button",className:c.iconButton,onClick:y(-1),disabled:h("previous"),size:"medium"},r.a.createElement(kn.a,{icon:Fi.a})),r.a.createElement(dr.a,{"data-testid":"next-button",className:Gn()(c.iconButton,"u-ml-half"),onClick:y(1),disabled:h("next"),size:"medium"},r.a.createElement(kn.a,{icon:Sr.a}))))};ic.proptypes={className:Ze.a.string,options:Ze.a.array.isRequired,selectedDate:Ze.a.number.isRequired,setSelectedDate:Ze.a.func.isRequired};var cc=ic,lc=function(e){var t=e.className,a=e.options,n=e.isLoading,o=e.selectedDate,i=e.setSelectedDate;return n?r.a.createElement(zi,{className:t}):r.a.createElement(cc,{className:t,options:a,selectedDate:o,setSelectedDate:i})},sc=["data"];function uc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function dc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var mc=function(){var e=me(),t=e.selectedDate,a=e.setSelectedDate,o=le().account,i=ee({accountId:null==o?void 0:o._id,limitBy:1e3}),l=Object(h.useQueryAll)(i.definition,dc(dc({},i.options),{},{enabled:Boolean(o)})),s=l.data,u=c()(l,sc),d=!o||Object(h.isQueryLoading)(u)||u.hasMore,m=Object(n.useMemo)((function(){return function(e,t){return e?null:t.map((function(e){return new Date(e.startDate)}))}(d,s)}),[d,s]);return Object(n.useEffect)((function(){m&&null===t&&a(ec(m))}),[m,t,a]),Object(n.useEffect)((function(){return function(){a(null)}}),[]),r.a.createElement(lc,{className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2",isLoading:d||null===t,options:m,selectedDate:t,setSelectedDate:a})},pc=function(){var e=Object(ye.e)().t,t=Object(je.h)(),a=Object(je.i)().mode,n=Object(ge.b)().isMobile,o=e(a?"trips.modes.".concat(a.toUpperCase()):"analysis.mode"),i=a?function(){return t("/analysis/modes")}:void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr,{label:o,onBack:i}),n&&r.a.createElement(Ii,null),r.a.createElement(mc,null),r.a.createElement(Mi,null))},fc=function(e){var t=e.timeseries,a=Object(je.i)().purpose,o=Object(ye.e)().t,i=Object(ge.b)().isMobile,c=Object(n.useMemo)((function(){return ja(t)}),[t]),l=ha(t),s=Object(n.useMemo)((function(){return Ti(c,"purposes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(zr,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Gn()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(Pi.a,{data:u,options:d,primaryText:Xt(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(xe.a,{marginTop:i?void 0:"6rem"},r.a.createElement(Tn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(_i,{key:t,type:"purposes",totalCO2:l,sortedTimeserie:e})})))))},bc=["data"],vc=function(){var e=le().account,t=me().selectedDate,a=te(t,null==e?void 0:e._id),n=Object(h.useQueryAll)(a.definition,a.options),o=n.data,i=c()(n,bc);return Object(h.isQueryLoading)(i)||i.hasMore?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(fc,{timeseries:o})},gc=function(){var e=Object(ye.e)().t,t=Object(je.h)(),a=Object(je.i)().purpose,n=Object(ge.b)().isMobile,o=e(a?"trips.purposes.".concat(a.toUpperCase()):"analysis.purpose"),i=a?function(){return t("/analysis/purposes")}:void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr,{label:o,onBack:i}),n&&r.a.createElement(Ii,null),r.a.createElement(mc,null),r.a.createElement(vc,null))},yc=a("8kh3"),hc=a("bS3/"),Ec=function(e){var t=Object(ye.e)().t,a=le(),n=a.accounts,o=a.account,i=a.setAccount,c=n.map((function(e){return{label:se(e),value:e._id}})),l={label:se(o),value:o._id};return r.a.createElement("div",e,r.a.createElement(yc.a,null,t("devices.label")),r.a.createElement(hc.a,{options:c,value:l,label:t("devices.label"),placeholder:t("devices.select"),onChange:function(e){var t=e.value;return i(n.find((function(e){return e._id===t})))}}))},Oc=a("5z4W"),Cc=a.n(Oc),jc=function(){var e=Object(ge.b)().isMobile;return r.a.createElement(xe.a,{color:"var(--infoColor)",position:"fixed",right:"1rem",bottom:"calc(1rem + ".concat(e?"var(--sidebarHeight)":"0rem",")")},Oc.version)},wc=Object(Bi.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),xc=function(e){var t=e.className,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=wc(),i=gr("CO2Emission.showAlert"),c=i.isLoading,l=i.value,s=void 0===l||l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:o,label:r.a.createElement(Sn.a,{style:{color:"var(--infoColor)"}},a("dacc.settings.showAlerter")),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(To.a,{color:"primary"})}))},kc=Object(Bi.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),_c=function(e){var t=e.className,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=kc(),i=gr("CO2Emission.sendToDACC"),c=i.isLoading,l=i.value,s=void 0!==l&&l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:o,label:a("dacc.settings.anonymous_participation"),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(To.a,{color:"primary"})}))},Tc=a("ro7u");function Pc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Dc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pc(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Nc,Mc,Sc,Ac=h.models.file.uploadFileWithConflictStrategy,Rc=function(e,t){return t("export.filename",{today:Object(Tc.a)(new Date,"yyyy MM dd"),accountLabel:e})},Lc=function(e){return[Object.keys(e[0])].concat(qe()(e)).map((function(e){return Object.values(e).map((function(e){return e?'"'.concat(e,'"'):" "})).toString()})).join("\n")},Ic=function(){var e=j()(x.a.mark((function e(t,a){var n,r,o,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchQueryAndGetFromState(re());case 2:return n=e.sent,r=n.data,o=(null==r?void 0:r[0])||{},i=a.flatMap((function(e){return da(e,o).map((function(t){var a,n,r=(a={},d()(a,U,t.startDate),d()(a,q,t.endDate),d()(a,H,t.duration),d()(a,Y,t.distance),d()(a,V,t.mode),d()(a,W,t.coordinates),d()(a,Q,t.distances),d()(a,K,t.timestamps),d()(a,J,t.speeds),a);return Dc(Dc({},(n={},d()(n,I,e.id),d()(n,z,ma(e)),d()(n,Z,pa(e)),d()(n,F,la(e)),d()(n,B,sa(e)),d()(n,G,ia(e)),n)),r)}))})),e.abrupt("return",ot()(i,I));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Fc=function(){var e=j()(x.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.timeseries,o=t.accountName,e.prev=1,i=ya(r),e.next=5,Ic(a,i);case 5:return c=e.sent,l=Lc(c),s=Rc(o,n),e.next=10,En(a,n);case 10:return u=e.sent,e.next=13,Ac(a,l,{name:s,contentType:"text/csv",dirId:u._id,conflictStrategy:"rename"});case 13:return d=e.sent,m=d.data,e.abrupt("return",{appDir:u,fileCreated:m,isLoading:!1});case 18:return e.prev=18,e.t0=e.catch(1),pt()("error",e.t0),e.abrupt("return",{appDir:null,fileCreated:null,isLoading:!0});case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),Bc=["data"],Gc=function(){var e,t,a,r,o=Object(ye.e)().t,i=Object(h.useClient)(),l=le().account,u=Object(n.useState)(!1),d=s()(u,2),p=d[0],f=d[1],b=Object(n.useState)({appDir:null,fileCreated:null,isLoading:!0}),v=s()(b,2),g=v[0],y=g.appDir,O=g.fileCreated,C=g.isLoading,w=v[1],k=(e={accountId:null==l?void 0:l._id,limitBy:1e3},t=e.accountId,a=e.date,r=void 0===a?null:a,{definition:Object(h.Q)(m).where({"cozyMetadata.sourceAccount":t,startDate:{$gt:r}}).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(m,"/sourceAccount/").concat(t),fetchPolicy:E.a.fetchPolicies.olderThan(3e4)}}),_=Object(h.useQueryAll)(k.definition,k.options),T=_.data,P=c()(_,Bc),D=Object(h.isQueryLoading)(P)||P.hasMore;return Object(n.useEffect)((function(){D||p||y||function(){var e=j()(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,Fc({client:i,t:o,timeseries:T,accountName:se(l)});case 3:t=e.sent,w(t),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,y,i,p,D,o,T]),{isLoading:C,appDir:y,file:O}},zc=function(e){var t=e.onClose,a=Object(ye.e)().t,n=Object(h.useClient)(),o=Gc(),i=o.file,c=o.appDir;if(o.isLoading)return r.a.createElement(yr.a,{open:!0,title:a("export.modal.title"),content:r.a.createElement(Sn.a,{color:"textPrimary"},a("export.modal.content.progress"))});var l=Object(h.generateWebLink)({slug:"drive",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(c._id)});return r.a.createElement(yr.a,{open:!0,onClose:t,title:a("export.modal.title"),content:r.a.createElement(Sn.a,{color:"textPrimary"},a("export.modal.content.done",{filename:i.name,pathAppDir:c.path})),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{variant:"secondary",onClick:t,label:a("export.modal.button.close")}),r.a.createElement(xn.a,{href:l,target:"_blank",label:a("export.modal.button.viewInDrive")}))})},Zc=["accountName"],Uc=function(e){var t=e.accountName,a=c()(e,Zc),o=Object(ye.e)().t,i=Object(n.useState)(!1),l=s()(i,2),u=l[0],d=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",a,r.a.createElement(yc.a,null,o("export.label")),r.a.createElement(xn.a,{busy:!1,variant:"secondary",label:o("export.button"),onClick:function(){return d(!0)}})),u&&r.a.createElement(zc,{onClose:function(){return d(!1)},accountName:t}))},qc=Object(n.memo)(Uc),Hc=a("MN1e"),Yc=function(){var e=Object(fe.useWebviewIntent)(),t=Object(ye.e)().t,a=function(){var e=j()(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:(t=e.sent)&&Object(Hc.a)(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=j()(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.call("getGeolocationTrackingId");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=j()(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.call("sendGeolocationTrackingLogs");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){var t=j()(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.call("forceUploadGeolocationTrackingData");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"u-mt-1"},r.a.createElement("div",{className:"u-flex u-flex-column"},r.a.createElement("div",null,r.a.createElement(xn.a,{label:t("geolocationTracking.settings.sendLogs"),variant:"secondary",onClick:o,className:"u-mb-1"})),r.a.createElement("div",null,r.a.createElement(xn.a,{label:t("geolocationTracking.settings.forceUploadData"),variant:"secondary",onClick:i,className:"u-mb-1"})),r.a.createElement("div",null,r.a.createElement(xn.a,{label:t("geolocationTracking.settings.copyIdentifier"),variant:"secondary",onClick:a,className:"u-mb-1"}))))},Vc=a("Kv7L"),Wc=function(){var e=j()(x.a.mark((function e(t){var a,n,r,o,i,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.lang,o=t.deviceName,i=o,s=o,c={definition:Object(h.Q)("io.cozy.accounts").where({"auth.login":s}).partialIndex({account_type:{$or:["tracemob","openpath"]}}).indexFields(["auth.login"]).select(["auth.login","account_type"]),options:{as:"".concat("io.cozy.accounts","/account_type/login/").concat(s)}},e.next=5,a.query(c.definition,c.options);case 5:if(l=e.sent,0!==l.data.length){e.next=9;break}return e.abrupt("return",i);case 9:return e.abrupt("return","".concat(o," ").concat(n("geolocationTracking.settings.createdOn")," ").concat((new Date).toLocaleDateString(r)));case 10:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),Qc=Object(Vc.isFlagshipApp)()&&qa()("coachco2.GPSMemory.enabled")&&(null===(Nc=window)||void 0===Nc||null===(Mc=Nc.cozy)||void 0===Mc||null===(Sc=Mc.flagship)||void 0===Sc?void 0:Sc.geolocation_tracking_available),Kc=a("LJzA"),Jc=a("ZOg5"),Xc=a("DIBL"),$c=Object(Bi.a)({root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}),el=function(e){var t=e.className,a=Object(fe.useWebviewIntent)(),o=Object(h.useClient)(),i=Object(ge.b)().isMobile,c=Object(ye.e)(),l=c.t,u=c.lang,d=$c(),m=Object(n.useState)(!1),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useState)(!1),g=s()(v,2),y=g[0],O=g[1],C=Object(n.useState)(!1),w=s()(C,2),k=w[0],_=w[1],T=function(){var e=j()(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=4;break}return e.next=3,P();case 3:return e.abrupt("return");case 4:if(e.t0=t,e.t0){e.next=9;break}return e.next=8,R();case 8:e.t0=e.sent;case 9:if(!(a=e.t0).granted){e.next=15;break}return e.next=13,P();case 13:e.next=16;break;case 15:a.canRequest?O(!0):_(!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=j()(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=5;break}return e.next=3,D();case 3:e.next=7;break;case 5:return e.next=7,N();case 7:return e.next=9,A();case 9:t=e.sent,a=t.enabled,b(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("setGeolocationTracking",!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=j()(x.a.mark((function e(){var t,n,r,i,c,s,d,m;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:if(null!==e.sent){e.next=22;break}return e.next=6,a.call("getDeviceInfo");case 6:return t=e.sent,n=t.deviceName,r={definition:Object(h.Q)("io.cozy.konnectors").getById("openpath"),options:{as:"".concat("io.cozy.konnectors","/openpath"),fetchPolicy:E.a.fetchPolicies.olderThan(3e4)}},e.next=11,o.query(r.definition,r.options);case 11:return i=e.sent,c=i.data.attributes,s=new Kc.a(o,null,c),e.next=16,Wc({client:o,t:l,lang:u,deviceName:n});case 16:return d=e.sent,m=Object(Xc.a)(),e.next=20,s.createAccountSilently({konnector:c,vaultClient:null,cipherId:null,trigger:null,account:null,userCredentials:{login:d,password:m,providerId:"1"}});case 20:return e.next=22,S(m);case 22:return e.next=24,a.call("setGeolocationTracking",!0);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("getGeolocationTrackingId");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=j()(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("setGeolocationTrackingId",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(n.useCallback)(j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("getGeolocationTrackingStatus");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[a]),R=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("checkPermissions","geolocationTracking");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("requestPermissions","geolocationTracking");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("openAppOSSettings");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=j()(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,a=t.enabled,b(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,A,f]),r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:d,label:l("geolocationTracking.settings.enable"),labelPlacement:i?"start":"end",checked:f,onChange:function(){return T()},control:r.a.createElement(To.a,{color:"primary"})}),y&&r.a.createElement(Jc.a,{onAllow:j()(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!1),!Object(Vc.isAndroid)()){e.next=9;break}return e.next=4,L();case 4:return t=e.sent,e.next=7,T(t);case 7:e.next=11;break;case 9:return e.next=11,P();case 11:case"end":return e.stop()}}),e)}))),onClose:function(){O(!1)}}),k&&r.a.createElement(Jc.a,{onAllow:function(){_(!1),I()},onClose:function(){_(!1)},description:l("geolocationTracking.locationRefusedDialog.description")}))},tl=Object(Bi.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),al=function(e){var t=e.className,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=tl(),i=gr("bikeGoal.showAlertSuccess"),c=i.isLoading,l=i.value,s=i.save;return r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:o,label:r.a.createElement(Sn.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.showAlerterSuccess")),labelPlacement:n?"start":"end",checked:l,disabled:c,onChange:function(e){s(e.target.checked)},control:r.a.createElement(To.a,{color:"primary"})}))},nl=Object(Bi.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),rl=function(e){var t=e.className,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=nl(),i=gr("bikeGoal.showAlert"),c=i.isLoading,l=i.value,s=void 0===l||l,u=i.save;return r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:o,label:r.a.createElement(Sn.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.showAlerter")),labelPlacement:n?"start":"end",checked:s,disabled:c,onChange:function(e){u(e.target.checked)},control:r.a.createElement(To.a,{color:"primary"})}))},ol=Object(Bi.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),il=function(e){var t=e.className,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=ol(),i=gr("bikeGoal.sendToDACC"),c=i.isLoading,l=i.value,s=i.save;return r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:o,label:r.a.createElement(Sn.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.sendToDACC")),labelPlacement:n?"start":"end",checked:!!l,disabled:c,onChange:function(e){s(e.target.checked)},control:r.a.createElement(To.a,{color:"primary"})}))},cl=Object(Bi.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),ll=function(e){var t=e.className,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=cl(),i=gr("bikeGoal.onboarded"),c=i.isLoading,l=i.value,s=void 0!==l&&l,u=i.save,d=gr("bikeGoal.activated"),m=d.isLoading,p=d.value,f=void 0!==p&&p,b=d.save,v=s||f,g=c||m,y=function(){var e=j()(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=3;break}return e.next=3,b(t.target.checked);case 3:return e.next=5,u(t.target.checked);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:o,label:r.a.createElement(Sn.a,{style:{color:"var(--infoColor)"}},a("bikeGoal.settings.hideOnboarding")),labelPlacement:n?"start":"end",checked:v,disabled:g,onChange:y,control:r.a.createElement(To.a,{color:"primary"})}))},sl=Object(Bi.a)((function(){return{root:{marginLeft:0},labelPlacementStart:{display:"flex",justifyContent:"space-between"}}})),ul=function(e){var t=e.className,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=sl(),i=Object(je.h)(),c=gr("bikeGoal.onboarded"),l=c.isLoading,s=c.value,u=void 0!==s&&s,d=gr("bikeGoal.activated"),m=d.isLoading,p=d.value,f=void 0!==p&&p,b=d.save,v=u&&f,g=l||m,y=function(){var e=j()(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=5;break}return e.next=3,b(t.target.checked);case 3:e.next=6;break;case 5:i("bikegoalonboarding");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:t},r.a.createElement(yo.a,{classes:o,label:a("bikeGoal.settings.participation"),labelPlacement:n?"start":"end",checked:v,disabled:g,onChange:y,control:r.a.createElement(To.a,{color:"primary"})}))},dl=function(){var e=Object(ye.e)().t,t=le().account;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr,{label:e("nav.settings")}),r.a.createElement("div",{className:"u-mh-1 u-mb-1"},r.a.createElement(Ec,{className:"u-mt-1"}),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(yc.a,null,e("settings.services")),Qc&&r.a.createElement(el,{className:"u-mt-half-s"}),r.a.createElement(_c,{className:"u-mt-half-s"}),qa()("coachco2.bikegoal.enabled")&&r.a.createElement(ul,{className:"u-mt-1-half-s"})),r.a.createElement(qc,{className:"u-mt-1",accountName:se(t)}),qa()("coachco2.admin-mode")&&r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(yc.a,null,e("settings.debug")),r.a.createElement(r.a.Fragment,null,r.a.createElement(xc,{className:"u-mt-1-half-s"}),qa()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(rl,{className:"u-mt-1-half-s"}),r.a.createElement(ll,{className:"u-mt-1-half-s"}),r.a.createElement(al,{className:"u-mt-1-half-s"}),r.a.createElement(il,{className:"u-mt-1-half-s"})))),Qc&&qa()("coachco2.admin-mode")&&r.a.createElement(Yc,null),qa()("coachco2.admin-mode")&&r.a.createElement(jc,null))):r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"})},ml=a("13ub"),pl=a.n(ml),fl=a("Jb16"),bl=a.n(fl),vl=a("gSRL"),gl=a.n(vl);function yl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function hl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var El=function(e){return"start"===e?"startPlaceContact":"end"===e?"endPlaceContact":null},Ol=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return{address:null==n||null===(t=n.address)||void 0===t?void 0:t.find((function(e,t){var n,i,c;if(e.id===(null===(n=r.relationships[El(o)])||void 0===n||null===(i=n.data)||void 0===i||null===(c=i.metadata)||void 0===c?void 0:c.addressId))return a=t,e})),index:a}},Cl=function(e){var t,a,n,r=e.contact,o=e.timeserie,i=e.type;return null===(t=Ol({contact:r,timeserie:o,type:i}))||void 0===t||null===(a=t.address)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.cozyCategory},jl=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return null===(t=Ol({contact:n,timeserie:r,type:o}))||void 0===t||null===(a=t.address)||void 0===a?void 0:a.type},wl=function(e,t){return e[El(t)]},xl=function(e,t){var a;return!(null===(a=wl(e,t))||void 0===a||!a.data)},kl=function(){var e=j()(x.a.mark((function e(t){var a,n,r,o,i,c,l,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.type,o=t.contact,i=Ol({contact:o,timeserie:n,type:r}),c=i.address,bl()(o.address,(function(e){return e.id&&e.id===c.id})),e.next=5,a.save(o);case 5:return e.next=7,wl(n,r).remove();case 7:return l=e.sent,s=l.data,gl()(s,"relationships.".concat(El(r),".data.metadata.addressId")),e.next=12,a.save(s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_l=function(e){var t=e.contact,a=e.addressId,n=e.label,r=e.timeserie,o=e.type,i=e.category;return hl(hl({},t),{},{address:[].concat(qe()(t.address||[]),[{id:a,type:n,formattedAddress:Ta(r,o),geo:{geo:Pa(r,o),cozyCategory:i}}])})},Tl=function(){var e=j()(x.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m,p;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=Object(Xc.a)(),s=_l({contact:n,addressId:l,label:i,timeserie:r,type:o,category:c}),e.next=5,a.save(s);case 5:return u=e.sent,d=u.data,e.next=9,wl(r,o).add(d);case 9:return m=e.sent,p=m.data,nt()(p,"relationships.".concat(El(o),".data.metadata"),{addressId:l}),e.next=14,a.save(p);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pl=function(){var e=j()(x.a.mark((function e(t){var a,n,r,o,i,c,l,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=Ol({contact:n,timeserie:r,type:o}),s=l.index,nt()(n,"address[".concat(s,"].type"),i),nt()(n,"address[".concat(s,"].geo.cozyCategory"),c),e.next=6,a.save(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dl=function(){var e=j()(x.a.mark((function e(t){var a,n,r,o,i,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.type,r=t.timeserie,o=t.contact,i=t.label,c=t.isSameContact,l=t.category,e.abrupt("return",c?Pl({client:a,contact:o,timeserie:r,type:n,label:i,isSameContact:c,category:l}):Tl({client:a,contact:o,timeserie:r,type:n,label:i,category:l}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nl=r.a.createContext(),Ml=function(){var e=Object(n.useContext)(Nl);if(!e)throw new Error("useTrip must be used within a TripProvider");return e},Sl=function(e){var t=e.timeserie,a=e.children,o=Object(n.useMemo)((function(){return{timeserie:y(t)}}),[t]);return r.a.createElement(Nl.Provider,{value:o},a)},Al=r.a.memo(Sl),Rl=a("whoR"),Ll=a("JaZj"),Il=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=hs(),c=i.type,l=i.isSameContact,u=i.contact,d=i.setType,m=i.label,p=i.category,f=Object(ye.e)().t,b=Ml().timeserie,v=Object(h.useClient)(),g=Object(ve.b)().showAlert,y=function(){return d()},E=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",o(!0));case 2:return g(f("contactToPlace.addSuccess"),"success"),"start"!==c||xl(b,"end")?y():d("end"),e.next=6,Dl({client:v,type:c,timeserie:b,contact:u,label:m,isSameContact:l,category:p});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){return o(!1)},C=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(f("contactToPlace.removeSuccess"),"success"),y(),e.next=4,kl({client:v,timeserie:b,type:c,contact:u});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,l?r.a.createElement(xn.a,{variant:"secondary",label:f("contactToPlace.delete"),color:"error",onClick:C}):r.a.createElement(xn.a,{variant:"secondary",label:f("contactToPlace.dismiss"),onClick:y}),r.a.createElement(xn.a,{label:f("contactToPlace.submit"),onClick:E}),r.a.createElement(Ll.a,{open:a,onClose:O},r.a.createElement(Rl.a,{variant:"filled",elevation:6,severity:"error",onClose:O},f("contactToPlace.error"))))},Fl=a("DPrj"),Bl=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(ye.e)().t,c=hs(),l=c.contact,u=c.setContact,d=c.setLabel,m=c.setCategory;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn.b,{button:!0,gutters:"disabled",onClick:function(){return o(!0)}},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:Tt.a})),r.a.createElement(Nn.a,Fe()({primary:l?Object(wn.getDisplayName)(l):i("contactToPlace.contact")},!l&&{primaryTypographyProps:{color:"textSecondary"}})),r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:nr.a}))),a&&r.a.createElement(Fl.a,{dismissAction:function(){return o(!1)},onItemClick:function(e){u(e),d(i("contactToPlace.home")),m("home")}}))},Gl=(a("2nE9"),a("SdDE")),zl=a("MWqS"),Zl=a("/rN/"),Ul=a("vZHb"),ql=new eo.a({id:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35",use:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35-usage",viewBox:"0 0 32 33",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 33" id="location_5cb8a90cd75b6b5e8e203a5e2d5f9e35"><path fill="#97ECA1" d="M26 10c0 5.764-6.78 17.628-9.174 21.64a.955.955 0 0 1-1.652 0C12.78 27.628 6 15.763 6 10 6 4.477 10.477 0 16 0s10 4.477 10 10Z" /><circle cx="16" cy="10" r="4" fill="#09AE1C" /></symbol>'}),Hl=(ao.a.add(ql),ql),Yl=[51.505,-.09],Vl={height:128,borderRadius:8},Wl=Object(Bi.a)({icon:{filter:"drop-shadow(0 5px 8px rgba(29,33,42,0.12))"}}),Ql=function(){var e=Object(n.useState)(),t=s()(e,2),a=t[0],o=t[1],i=Ml().timeserie,c=hs().type,l=Object(Gl.a)(),u=Wl();return Object(n.useEffect)((function(){!function(e){var t=e.map,a=e.timeserie,n=e.type,r=e.setBounds,o=qe()(Na(a).properties["".concat(n,"_loc")].coordinates).reverse();t.setView(o),r(t.getBounds())}({map:l,timeserie:i,type:c,setBounds:o})}),[i,l,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(zl.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'¬© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),a&&r.a.createElement(Zl.a,{bounds:a},r.a.createElement(kn.a,{className:u.icon,icon:Hl,size:48,x:"calc(50% - 24px)",y:"calc(50% - 48px)"})))},Kl=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ul.a,{style:Vl,center:Yl,zoom:13,zoomControl:!1},r.a.createElement(Ql,null)))},Jl=function(e){var t=e.onClose,a=Object(n.useState)(),o=s()(a,2),i=o[0],c=o[1],l=Object(ye.e)().t,u=hs(),d=u.setLabel,m=u.setCategory;return r.a.createElement(yr.a,{open:!0,title:l("contactToPlace.customLabel"),content:r.a.createElement(fo.a,{className:"u-mt-half",variant:"outlined",fullWidth:!0,autoFocus:!0,onChange:function(e){return c(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{variant:"secondary",label:l("contactToPlace.cancel"),onClick:t}),r.a.createElement(xn.a,{label:l("contactToPlace.submit"),onClick:function(){d(i),m(),t()}})),onClose:t})},Xl=a("INxB"),$l=function(e){var t=e.showCustomLabelModal,a=Object(n.forwardRef)((function(e,t){var a=Object(ye.e)().t,n=hs().label,o=![a("contactToPlace.work"),a("contactToPlace.home"),void 0].includes(n);return r.a.createElement(Xl.a,Fe()({},e,{ref:t}),r.a.createElement(Dn.a,null,r.a.createElement(Eo.a,{checked:o})),r.a.createElement(Nn.a,{primary:a("contactToPlace.custom")}))}));return a.displayName="CustomLabelActionComponent",{name:"customLabel",action:function(){t()},Component:a}},es=["onClick"],ts=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,es),o=Object(ye.e)().t,i=hs(),l=i.label,s=i.setLabel,u=i.setCategory,d=o("contactToPlace.home");return r.a.createElement(Xl.a,Fe()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:s,setCategory:u})}}),r.a.createElement(Dn.a,null,r.a.createElement(Eo.a,{checked:l===d})),r.a.createElement(Nn.a,{primary:d}))}));return e.displayName="HomeComponent",{name:"home",action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r("home")},Component:e}},as=["onClick"],ns=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,as),o=Object(ye.e)().t,i=hs(),l=i.label,s=i.setLabel,u=i.setCategory;return r.a.createElement(Xl.a,Fe()({},n,{ref:t,onClick:function(){return a({setLabel:s,setCategory:u})}}),r.a.createElement(Dn.a,null,r.a.createElement(Eo.a,{checked:void 0===l})),r.a.createElement(Nn.a,{primary:o("contactToPlace.noLabel")}))}));return e.displayName="NoLabelActionComponent",{name:"noLabel",action:function(e,t){var a=t.setLabel,n=t.setCategory;a(),n()},Component:e}},rs=["onClick"],os=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,rs),o=Object(ye.e)().t,i=hs(),l=i.label,s=i.setLabel,u=i.setCategory,d=o("contactToPlace.work");return r.a.createElement(Xl.a,Fe()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:s,setCategory:u})}}),r.a.createElement(Dn.a,null,r.a.createElement(Eo.a,{checked:l===d})),r.a.createElement(Nn.a,{primary:d}))}));return e.displayName="WorkActionComponent",{name:"work",action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r("work")},Component:e}},is=a("zLZg"),cs=a("ZpM7"),ls=a("4aAG"),ss=a("Nvei"),us=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=s()(i,2),l=c[0],u=c[1],d=Object(n.useRef)(null),m=Object(ye.e)().t,p=hs().label,f=Object(cs.c)([ns,ts,os,$l],{showCustomLabelModal:function(){return o(!0)}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn.b,{ref:d,"aria-controls":"simple-menu","aria-haspopup":"true",button:!0,gutters:"disabled",onClick:function(){return u(!0)}},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:ss.a})),r.a.createElement(Nn.a,{primary:p||m("contactToPlace.noLabel")}),r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:nr.a}))),r.a.createElement(is.a,{ref:d,open:l,actions:f,onClose:function(){return u(!1)}},r.a.createElement(ls.a,null,r.a.createElement(Nn.a,{primary:m("contactToPlace.label"),primaryTypographyProps:{variant:"h6",align:"center"}}))),a&&r.a.createElement(Jl,{onClose:function(){return o(!1)}}))},ds=a("LFaT"),ms=function(){var e=Ml().timeserie,t=hs(),a=t.type,n=t.contact;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kl,null),r.a.createElement(Tn.a,null,r.a.createElement(Pn.b,{gutters:"disabled"},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:ds.a})),r.a.createElement(Nn.a,{primary:Ta(e,a),secondary:Da(e,a)})),r.a.createElement(Yn.a,{className:"u-ml-3"}),r.a.createElement(Bl,null),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Yn.a,{className:"u-ml-3"}),r.a.createElement(us,null))))},ps=a("uol1"),fs=a("0pj4"),bs=a("aoYa"),vs=function(e){var t=e.isLoading,a=Object(n.useState)(!1),o=s()(a,2),i=o[0],c=o[1],l=hs(),u=l.type,d=l.setType,m=Object(ye.e)().t;return r.a.createElement(yr.a,{open:!0,title:r.a.createElement(r.a.Fragment,null,m("contactToPlace.save".concat(pl()(u),"Place")),r.a.createElement(ps.a,{onClickAway:function(){return c(!1)}},r.a.createElement(bs.a,{onClose:function(){return c(!1)},open:i,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:m("contactToPlace.tooltip"),placement:"top-end",arrow:!0},r.a.createElement(Dn.a,null,r.a.createElement(dr.a,{onClick:function(){return c((function(e){return!e}))}},r.a.createElement(kn.a,{icon:fs.a})))))),content:t?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(ms,null),actions:r.a.createElement(Il,null),onClose:function(){return d()}})},gs=["data"],ys=r.a.createContext(),hs=function(){var e=Object(n.useContext)(ys);if(!e)throw new Error("useContactToPlace must be used within a ContactToPlaceProvider");return e},Es=function(e){var t,a,o=e.children,i=Object(n.useState)(),l=s()(i,2),u=l[0],d=l[1],m=Object(n.useState)(),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useState)(),g=s()(v,2),y=g[0],O=g[1],C=Object(n.useState)(),j=s()(C,2),w=j[0],x=j[1],k=Ml().timeserie,_=function(e){return{definition:Object(h.Q)("io.cozy.contacts").getById(e),options:{as:"".concat("io.cozy.contacts","/").concat(e),fetchPolicy:E.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}((null===(t=wl(k,u))||void 0===t||null===(a=t.data)||void 0===a?void 0:a._id)||" "),T=Object(h.useQuery)(_.definition,_.options),P=T.data,D=c()(T,gs),N=Object(h.isQueryLoading)(D),M=Object(n.useMemo)((function(){return P&&P._id===(null==f?void 0:f._id)}),[f,P]),S=Object(n.useMemo)((function(){return{type:u,setType:d,contact:f,setContact:b,label:y,setLabel:O,isSameContact:M,category:w,setCategory:x}}),[u,f,y,M,w]);return Object(n.useEffect)((function(){b(P),O(jl({contact:P,timeserie:k,type:u})),x(Cl({contact:P,timeserie:k,type:u}))}),[u,P,k]),r.a.createElement(ys.Provider,{value:S},o,!!u&&r.a.createElement(vs,{isLoading:N}))},Os=r.a.memo(Es),Cs=a("IW7p"),js=a.n(Cs),ws=function(e){var t=e.timeserie,a=e.selectedPurpose,n=e.setContactToPlaceType,r=e.setShowRecurringDialog,o=e.onClose;"COMMUTE"===a?(xl(t,"start")?xl(t,"end")?o():n("end"):n("start"),r(!1)):o()},xs=function(){var e=j()(x.a.mark((function e(t,a){var n,r,o=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},r=n.fields,e.next=3,t.collection("io.cozy.jobs").create("service",{name:a,slug:"coachco2",fields:r});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function ks(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ks(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ts=function(){var e=j()(x.a.mark((function e(){var t,a,n,r,o,i,c=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.isRecurringTrip,i=_s({},n),o&&(i=Ia(i,r)),i=Fa(i,r,{isRecurringTrip:o}),e.next=6,a.save(i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ps=function(){var e=j()(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.purpose,e.next=3,Ts({client:a,timeserie:n,purpose:r,isRecurringTrip:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ds=function(){var e=j()(x.a.mark((function e(){var t,a,n,r,o,i=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.oldPurpose,e.next=3,Ts({client:a,timeserie:n,purpose:r,isRecurringTrip:!0});case 3:xs(a,"recurringPurposes",{fields:{docId:n._id,oldPurpose:o}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ns=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.icon,r=a.withDescription,o=a.withInfo,i=a.action,c=a.children,l=a.defaultModes,s=void 0===l?{}:l,u=Object.values(s).some((function(e){return e===t})),d=u?"".concat(e("trips.modes.".concat(t))," (").concat(e("trips.modes.default"),")"):e("trips.modes.".concat(t));return _s(_s(_s(_s({id:t,title:d,isChecked:!1,icon:Mr({attribute:n||t,defaultColor:!0})},r&&{description:Yt(t)}),o&&{info:Yt(t)}),i&&{action:i}),c&&{children:c})},Ms=a("IW7r"),Ss=a("/dlN"),As=function(e){return{children:zt.map((function(t){return{id:t,title:e("trips.purposes.".concat(t)),icon:r.a.createElement(Nr,{attribute:t})}}))}},Rs=function(e){var t=e.onClose,a=Object(n.useState)(!1),o=s()(a,2),i=o[0],c=o[1],l=Object(n.useState)(null),u=s()(l,2),d=u[0],m=u[1],p=Object(ye.e)().t,f=Object(h.useClient)(),b=Ml().timeserie,v=hs(),g=v.type,y=v.setType,E=function(){var e=j()(x.a.mark((function e(a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(a.id),"OTHER_PURPOSE"===(n=Ca(b))){e.next=6;break}c(!0),e.next=9;break;case 6:return e.next=8,Ds({client:f,timeserie:b,purpose:a.id,oldPurpose:n});case 8:t();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(n.useMemo)((function(){return function(e){var t=Ca(b);return t?e.id===t:"OTHER_PURPOSE"===e.id}}),[b]);return i?r.a.createElement(yr.a,{open:!0,title:p("recurring.confirmDialog.title"),content:p("recurring.confirmDialog.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ss.a,{theme:"secondary",label:p("recurring.confirmDialog.decline"),onClick:j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps({client:f,timeserie:b,purpose:d});case 2:ws({timeserie:b,selectedPurpose:d,setContactToPlaceType:y,setShowRecurringDialog:c,onClose:t});case 3:case"end":return e.stop()}}),e)})))}),r.a.createElement(Ss.a,{theme:"primary",label:p("recurring.confirmDialog.confirm"),onClick:j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ds({client:f,timeserie:b,purpose:d,oldPurpose:Ca(b)});case 2:ws({timeserie:b,selectedPurpose:d,setContactToPlaceType:y,setShowRecurringDialog:c,onClose:t});case 3:case"end":return e.stop()}}),e)})))})),onClose:t}):g?r.a.createElement(vs,{onClose:t}):r.a.createElement(Ms.a,{title:p("tripEdit.selectPurpose"),onClose:t,onSelect:E,isSelected:O,options:As(p)})},Ls=r.a.memo(Rs),Is=function(e){var t=e.recurring,a=e.setRecurring,n=Object(ye.e)().t;return r.a.createElement(Tn.a,null,r.a.createElement(Pn.b,{button:!0,onClick:function(){return a(!1)}},r.a.createElement(Dn.a,null,r.a.createElement(Eo.a,{value:"no",checked:!t})),r.a.createElement(Nn.a,{primary:n("recurring.occasionalTrip")})),r.a.createElement(Pn.b,{button:!0,onClick:function(){return a(!0)}},r.a.createElement(Dn.a,null,r.a.createElement(Eo.a,{value:"yes",checked:t})),r.a.createElement(Nn.a,{primary:n("recurring.recurringTrip")})))},Fs=function(){var e=Object(ye.e)().t,t=Object(ge.b)().isMobile,a=r.a.useState(!1),n=s()(a,2),o=n[0],i=n[1],c=function(){i(!1)};return t?r.a.createElement(Tn.a,null,r.a.createElement(Pn.b,{className:"u-mb-half u-pl-1-half",style:{minHeight:"3rem"}},r.a.createElement(Nn.a,{className:"u-pv-0",primary:e("recurring.title"),primaryTypographyProps:{variant:"h6"}}),r.a.createElement(_o.a,null,r.a.createElement(ps.a,{onClickAway:c},r.a.createElement(bs.a,{onClose:c,open:o,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:e("recurring.tooltip"),placement:"top-end",arrow:!0},r.a.createElement(dr.a,{onClick:function(){i(!o)}},r.a.createElement(kn.a,{icon:fs.a}))))))):r.a.createElement("div",{className:"u-pt-1"},e("recurring.title"),r.a.createElement(bs.a,{title:e("recurring.tooltip"),placement:"top",arrow:!0},r.a.createElement(dr.a,null,r.a.createElement(kn.a,{icon:fs.a}))))},Bs=a("/h+6"),Gs=a("epof"),zs=function(e){var t,a,n=e.onClose,o=Object(ge.b)().isMobile,i=Ml().timeserie,c=Object(h.useClient)(),l=Ca(i),s=null!==(t=null==i||null===(a=i.aggregation)||void 0===a?void 0:a.recurring)&&void 0!==t&&t,u=function(){var e=j()(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Ds({client:c,timeserie:i,purpose:l,oldPurpose:l});case 3:e.next=7;break;case 5:return e.next=7,Ps({client:c,timeserie:i,purpose:l});case 7:n();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?r.a.createElement(Bs.a,{onClose:n,backdrop:!0},r.a.createElement(Gs.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(Fs,null),r.a.createElement(Yn.a,null),r.a.createElement(Is,{recurring:s,setRecurring:u}))):r.a.createElement(yr.a,{open:!0,onClose:n,disableGutters:!0,title:r.a.createElement(Fs,null),content:r.a.createElement(Is,{recurring:s,setRecurring:u})})},Zs=a("bnOl"),Us=a("ee3C"),qs=a("Vc4F"),Hs=a("ksij"),Ys=a("86gN"),Vs=Object(Bi.a)((function(e){return{dotStart:{marginTop:"9px"},dot:{marginBottom:"-1px"},connector:{width:"6px",backgroundColor:e.palette.primary.main},item:{marginTop:"-9px",paddingLeft:"11px","&::before":{padding:0,flexGrow:0},cursor:function(e){return e.isCommute?"pointer":void 0}},contentWrapper:{display:"flex",marginLeft:"11px"},endLabel:{fontWeight:700}}})),Ws=function(e){var t,a=e.type,o=Object(ye.e)(),i=o.t,c=o.f,l=o.lang,s=hs().setType,u=Ml().timeserie,m="COMMUTE"===Ca(u),p=Vs({isCommute:m}),f=Object(n.useMemo)((function(){return"end"!==a}),[a]),b=Object(n.useMemo)((function(){return"start"===a}),[a]),v=function(e){var t,a=e.timeserie,n=e.type,r=e.t,o=null===(t=wl(a,n))||void 0===t?void 0:t.data;if(!o)return null;var i=!!o.me,c=Cl({timeserie:a,type:n,contact:o}),l=jl({timeserie:a,type:n,contact:o}),s=Object(wn.getDisplayName)(o);return"home"===c?i?r("contactToPlace.atHome"):"".concat(r("contactToPlace.at")," ").concat(s):l?i?l:"".concat(s," (").concat(l,")"):s}({timeserie:u,type:a,t:i}),g=v||Ta(u,a),y=v?Ta(u,a):null;return r.a.createElement(Hs.a,{className:p.item,onClick:m?function(){return s(a)}:void 0},r.a.createElement(Ys.a,null,r.a.createElement(qs.a,{className:Gn()((t={},d()(t,p.dot,f),d()(t,p.dotStart,b),t)),color:"primary",variant:"outlined"}),f&&r.a.createElement(Zs.a,{className:p.connector})),r.a.createElement(Us.a,null,r.a.createElement("div",{className:p.contentWrapper},r.a.createElement("div",{className:"u-flex-grow-1"},r.a.createElement(Sn.a,null,g),y&&r.a.createElement(Sn.a,{variant:"caption"},y)),r.a.createElement(Sn.a,{className:p.endLabel,variant:"body2",component:"div"},ea({f:c,lang:l,date:ka(u,a)})))))},Qs=r.a.memo(Ws),Ks=a("2Kpg");function Js(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Xs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Js(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Js(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $s=function(e){var t,a=e.item,o=e.onClose,i=e.onConfirm,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],m=l[1],p=Object(n.useState)(!1),f=s()(p,2),b=f[0],v=f[1],g=Object(n.useState)(!1),y=s()(g,2),E=y[0],O=y[1],C=Object(ge.b)().isDesktop,w=Object(ye.e)().t,k=Object(h.useClient)(),_=re(),T=Object(h.useQuery)(_.definition,_.options).data,P=null===(t=T[0])||void 0===t?void 0:t.defaultTransportModeByGroup,D=null==P?void 0:P[Wt(a.id)];Object(n.useEffect)((function(){m(D===a.id)}),[P,D,a.id]),Object(n.useEffect)((function(){var e=D&&D===a.id;v(u===!e)}),[D,u,a.id]);var N=function(){var e=j()(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,k.save(Xs(Xs({},T[0]),{},{defaultTransportModeByGroup:Xs(Xs({},P),{},d()({},Wt(a.id),u?a.id:""))}));case 3:i();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Rn.a,{open:!0,title:a.title,size:"large",disableGutters:!0,content:r.a.createElement(Tn.a,null,r.a.createElement(Pn.b,{ellipsis:!1,button:!0,onClick:function(){m((function(e){return!e}))}},r.a.createElement(Dn.a,null,r.a.createElement(Ks.a,{checked:u})),r.a.createElement(Nn.a,{primary:w("Modes.DefaultDialog.primary"),secondary:w("Modes.DefaultDialog.secondary")}))),onClose:o,actions:r.a.createElement("div",{className:Gn()("u-flex",{"u-w-100 u-ph-1":!C,"u-p-1":C}),style:{gap:"1rem"}},r.a.createElement(xn.a,{label:w("Modes.DefaultDialog.actions.cancel"),variant:"secondary",onClick:o}),r.a.createElement(xn.a,{label:w("Modes.DefaultDialog.actions.save"),busy:E,onClick:N,disabled:!b}))})},eu=function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=t.series.flatMap((function(e,t){return e.features.flatMap((function(e,n){if(e.features)return e.features.flatMap((function(e,r){if(e.id===a)return{feature:e,serieIndex:t,firstIndex:n,secondIndex:r}}))}))})).find((function(e){return e}));if(r){var o=r.feature,i=r.serieIndex,c=r.firstIndex,l=r.secondIndex,s=nt()(js()(o),"properties.manual_mode",n);return function(e,t){return e.map((function(e){var a=e.series[0],n=0,r=0,o=0,i=0,c=[],l=t(e).map((function(e){var t={startDate:e.startDate,endDate:e.endDate,CO2:aa(e),calories:na(e),avgSpeed:e.avgSpeed,duration:e.duration,distance:e.distance,mode:e.mode,id:e.id};return n+=t.CO2,r+=t.distance,o+=t.duration,i+=t.calories,c.push(t.mode),t})),s=Je()(a,"features[0].properties.display_name"),u=Je()(a,"features[1].properties.display_name");return ba(ba({},e),{},{aggregation:{totalCO2:n,totalDistance:r,totalDuration:o,totalCalories:i,startPlaceDisplayName:s,endPlaceDisplayName:u,purpose:ia(a)||ca(a),modes:c,sections:l}})}))}([nt()(js()(t),"series[".concat(i,"].features[").concat(c,"].features[").concat(l,"]"),s)],(function(e){return function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=t.aggregation.sections,o=r.find((function(e){return e.id===a})),i=Object.assign({},o,{mode:n});return r.map((function(e){return e.id===a?i:e}))}({timeserie:e,sectionId:a,mode:n})}))[0]}return t},tu=function(e){var t=e.item,a=e.onClick;return r.a.createElement(_o.a,null,r.a.createElement(dr.a,{onClick:function(){return a({item:t})}},r.a.createElement(kn.a,{icon:Te.a})))},au=function(e){var t=e.section,a=e.onClose,o=Object(n.useState)(null),i=s()(o,2),c=i[0],l=i[1],u=Object(ye.e)().t,d=Object(h.useClient)(),m=Ml().timeserie,p=re(),f=Object(h.useQuery)(p.definition,p.options).data,b=Object(n.useMemo)((function(){return(null==f?void 0:f[0])||{}}),[f]),v=null==b?void 0:b.defaultTransportModeByGroup,g=Object(n.useCallback)(function(){var e=j()(x.a.mark((function e(n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu({timeserie:m,sectionId:t.id,mode:n.id}),e.next=3,d.save(r);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,m,a,t.id]),y=Object(n.useMemo)((function(){return function(e){return e.id===t.mode}}),[t.mode]),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.defaultModes,n=t.action;return{children:[Ns(e,"WALKING",{withInfo:!0}),Ns(e,"categories.".concat(D.name),{icon:"BICYCLING",children:D.modes.map((function(t){return Ns(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),Ns(e,"categories.".concat(N.name),{icon:"CAR",children:N.modes.map((function(t){return Ns(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),Ns(e,"categories.".concat(M.name),{icon:"BUS",children:M.modes.map((function(t){return Ns(e,t,{withDescription:!0})}))}),Ns(e,P,{withInfo:!0}),Ns(e,"UNKNOWN",{withInfo:!0})]}}(u,{defaultModes:v,action:{Component:tu,props:{onClick:function(e){var t=e.item;l(t)}}}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ms.a,{title:u("tripEdit.selectMode"),onClose:a,onSelect:g,isSelected:y,options:E,ellipsis:!1}),!!c&&r.a.createElement($s,{item:c,onClose:function(){return l(null)},onConfirm:a}))},nu=r.a.memo(au),ru=Object(Bi.a)((function(e){return{iconItem:{marginTop:"-14px",cursor:"pointer","&::before":{padding:0,flexGrow:0}},iconDot:{backgroundColor:e.palette.background.paper,borderWidth:"1px",borderColor:e.palette.border.main,margin:0,padding:0,boxShadow:"none"},icon:{color:e.palette.primary.main,backgroundColor:e.palette.background.paper},connector:{width:"6px",backgroundColor:e.palette.primary.main}}})),ou=function(e){var t=e.icon,a=e.label,n=e.endLabel,o=e.onClick,i=ru();return r.a.createElement(Hs.a,{className:i.iconItem,onClick:o},r.a.createElement(Ys.a,null,r.a.createElement(qs.a,{className:i.iconDot},r.a.createElement(Tr.b,{icon:t,className:i.icon,size:32})),r.a.createElement(Zs.a,{className:i.connector})),r.a.createElement(Us.a,{className:"u-flex"},r.a.createElement(Sn.a,{className:"u-flex-grow-1",variant:"body2",color:"textSecondary"},a),r.a.createElement(Sn.a,{className:i.endLabel,variant:"body2",component:"div"},n)))},iu=r.a.memo(ou),cu=function(){var e=Ml().timeserie,t=Object(ye.e)(),a=t.t,o=t.f,i=t.lang,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=Object(n.useState)(null),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useCallback)((function(e){return function(){b(e),d(!0)}}),[]),g=Object(n.useCallback)((function(){return d(!1)}),[]);return r.a.createElement(r.a.Fragment,null,e.aggregation.sections.map((function(e,t){return r.a.createElement(iu,{key:t,label:"".concat(a("trips.modes.".concat(e.mode))," - ").concat($t(e.duration)," - ").concat(Jt(e.distance)," - ").concat((n=e.avgSpeed,"".concat(Math.round(n)," km/h"))),endLabel:ea({f:o,lang:i,date:new Date(e.endDate)}),icon:Bt(e.mode),onClick:v(e)});var n})),u&&r.a.createElement(nu,{section:f,onClose:g}))},lu=r.a.memo(cu),su=function(e){var t=e.purpose,a=e.onClick,n=Object(ye.e)().t;return r.a.createElement(Pn.b,{button:!0,onClick:a},r.a.createElement(Dn.a,null,r.a.createElement(Nr,{attribute:t})),r.a.createElement(Nn.a,{primary:n("purpose"),primaryTypographyProps:{variant:"caption"},secondary:n("trips.purposes.".concat(t)),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))};su.defaultProps={purpose:"OTHER_PURPOSE"};var uu=r.a.memo(su),du=a("JKPP"),mu=a("UR0v"),pu=function(e){var t=e.isRecurringTrip,a=e.purpose,n=e.onClick,o=Object(ye.e)().t;return"OTHER_PURPOSE"===a?null:r.a.createElement(Pn.b,{button:!0,onClick:n},r.a.createElement(Dn.a,null,r.a.createElement(kn.a,{icon:mu.a})),r.a.createElement(Nn.a,{primary:o("recurring.title"),primaryTypographyProps:{variant:"caption"},secondary:o("recurring.".concat(t?"recurringTrip":"occasionalTrip")),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))},fu={divider:{margin:"-10px -32px 10px"}},bu=function(){var e,t=Ml().timeserie,a=Object(ge.b)().isDesktop,o=Object(n.useState)(!1),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useState)(!1),d=s()(u,2),m=d[0],p=d[1],f=Ca(t),b=null==t||null===(e=t.aggregation)||void 0===e?void 0:e.recurring;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gs.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(du.a,{className:"u-pb-0 u-mb-0"},r.a.createElement(Qs,{type:"start"}),r.a.createElement(lu,null),r.a.createElement(Qs,{type:"end"}))),a&&r.a.createElement(Yn.a,{style:fu.divider}),r.a.createElement(Gs.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(Tn.a,{className:"u-pv-half"},r.a.createElement(uu,{purpose:f,onClick:function(){return l(!0)}}),c&&r.a.createElement(Ls,{onClose:function(){return l(!1)}}),r.a.createElement(Yn.a,{variant:"inset",component:"li"}),r.a.createElement(pu,{isRecurringTrip:b,purpose:f,onClick:function(){return p(!0)}}),m&&r.a.createElement(zs,{onClose:function(){return p(!1)}}))))},vu=r.a.memo(bu);function gu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var hu=function(e){var t=e.title,a=e.value,o=e.highlighted,i=Object(n.useMemo)((function(){return function(e){var t=e.highlighted;return{infoBlock:{backgroundColor:t?"var(--primaryColor)":"none",margin:"0.5rem"},typography:yu({},t&&{color:"var(--primaryContrastTextColor)"})}}({highlighted:o})}),[o]);return r.a.createElement("div",{style:i.infoBlock,className:"u-h-100 u-flex u-flex-column u-flex-items-center u-flex-justify-center u-flex-grow-1  u-bdrs-4"},r.a.createElement(Sn.a,{style:i.typography,variant:"caption"},t),r.a.createElement(Sn.a,{style:i.typography,variant:o?"h6":"body1"},a))},Eu=r.a.memo(hu),Ou=function(){var e=Ml().timeserie,t=Object(ye.e)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Eu,{title:t("trips.duration"),value:Ma(e)}),r.a.createElement(Eu,{title:t("trips.distance"),value:Sa(e)}),r.a.createElement(Eu,{title:t("trips.calories"),value:Ra(e)}),r.a.createElement(Eu,{title:t("trips.co2"),value:Aa(e),highlighted:!0}))},Cu=r.a.memo(Ou),ju=a("bOJc"),wu=a("l149"),xu={mediumHeightRatio:.66},ku=function(e){var t=e.titleRef,a=Object(n.useState)(0),o=s()(a,2),i=o[0],c=o[1],l=Object(n.useMemo)((function(){return{height:i}}),[i]),u=Object(n.useMemo)((function(){return function(e){var t=e.toolbarHeight;return{mapContainer:{height:"calc(100vh - ".concat(t,"px - var(--sidebarHeight) - env(safe-area-inset-bottom))")}}}({toolbarHeight:i})}),[i]);return Object(n.useEffect)((function(){null!=t&&t.current&&c(t.current.offsetHeight)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"u-w-100 u-pos-fixed",style:u.mapContainer},r.a.createElement(Su,null)),r.a.createElement(Bs.a,{settings:xu,toolbarProps:l},r.a.createElement(wu.a,{className:"u-h-3 u-pb-half"},r.a.createElement(Cu,null)),r.a.createElement(vu,null)))},_u=r.a.memo(ku),Tu=a("CUq/"),Pu=a("8IOV"),Du=a.n(Pu),Nu=function(){var e=Object(n.useRef)(),t=Object(ge.b)().isMobile,a=Object(Pr.a)(),o=Ml().timeserie,i=Object(Gl.a)(),c=Object(n.useMemo)((function(){return function(e){return{style:function(t){return{weight:"section"===t.properties.feature_type?5:2,color:e.palette.primary.main}},pointToLayer:function(e,t){return Tu.f.marker(t,{icon:Tu.f.divIcon({html:"<div></div>",iconSize:[12,12],className:"".concat(Du.a["cozy-leaflet-markers"]," ").concat("end_place"===e.properties.feature_type?"".concat(Du.a["cozy-leaflet-markers-end"]):"".concat(Du.a["cozy-leaflet-markers-start"]))})})},markerIcon:function(e,t){return Tu.f.marker(e,{icon:Tu.f.divIcon({html:"".concat(t())})})}}}(a)}),[a]),l=c.pointToLayer,s=c.style,u=Object(n.useMemo)((function(){return t?xu.mediumHeightRatio:0}),[t]);return Object(n.useEffect)((function(){var t=e.current.getBounds(),a=[16,16],n=[16,16+i.getSize().y*u];i.fitBounds(t,{paddingTopLeft:a,paddingBottomRight:n})}),[i,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(zl.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'¬© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(ju.a,{ref:e,data:Na(o),pointToLayer:l,style:s}))},Mu=[51.505,-.09],Su=function(){return r.a.createElement(Ul.a,{className:"u-h-100",center:Mu,zoom:13},r.a.createElement(Nu,null))},Au={map:{height:"400px",margin:"-24px -32px 0"},divider:{margin:"10px -32px 25px"}},Ru=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:Au.map},r.a.createElement(Su,null)),r.a.createElement("div",{className:"u-mt-1 u-h-3 u-flex u-flex-items-center u-pb-half"},r.a.createElement(Cu,null)),r.a.createElement(Yn.a,{style:Au.divider}),r.a.createElement(vu,null))},Lu=function(){var e=Object(ye.e)().f,t=Object(ge.c)().isMobile,a=Object(je.i)().timeserieId,o=Ml().timeserie,i=Object(je.g)().pathname,c=Object(je.h)(),l=Object(n.useRef)(null);return r.a.createElement(Rn.a,{open:!0,size:t?void 0:"large",transitionDuration:t?0:void 0,disableGutters:t,title:r.a.createElement(r.a.Fragment,null,_a(o),r.a.createElement(Sn.a,{className:"u-mt-half",variant:"caption",align:t?"center":void 0},La(o,e))),titleRef:l,content:t?r.a.createElement(_u,{titleRef:l}):r.a.createElement(Ru,null),onClose:function(){return c(i.split("/".concat(a))[0])}})},Iu=r.a.memo(Lu),Fu=["data"],Bu=function(){var e=Object(je.g)().pathname,t=function(e){return{definition:Object(h.Q)(m).getById(e).include(["startPlaceContact","endPlaceContact"]),options:{as:"".concat(m,"/").concat(e),fetchPolicy:E.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}(Object(n.useMemo)((function(){return e.split("/").pop()}),[e])),a=Object(h.useQuery)(t.definition,t.options),o=a.data,i=c()(a,Fu);return Object(h.isQueryLoading)(i)?r.a.createElement(Ln.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Al,{timeserie:o},r.a.createElement(Os,null,r.a.createElement(Iu,null)))},Gu=r.a.memo(Bu),zu=a("PKog"),Zu={minHeight:"48px",display:"flex",alignItems:"center"},Uu=function(){var e=Object(ye.e)().t,t=Object(Pr.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yn.a,null),r.a.createElement(Mn.a,{style:Zu,className:"u-ph-1-s u-ph-2",square:!0,elevation:0},r.a.createElement(kn.a,{className:"u-mr-half",icon:zn.a,color:"var(--primaryColor)",size:8}),r.a.createElement(Sn.a,{className:"u-mr-1",display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.yours")),r.a.createElement(kn.a,{className:"u-mr-half",icon:zn.a,color:Object(zu.a)(t.palette.primary.main,.24),size:8}),r.a.createElement(Sn.a,{display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.average"))))},qu=a("HO4k"),Hu=a("DmLS");qu.f.register(qu.e,qu.i,qu.c,qu.n),qu.f.defaults.font={family:"Lato, sans-serif",size:"11",weight:"700"};var Yu=function(e){var t=e.className,a=e.title,n=e.data,o=e.options,i=e.width,c=e.height,l=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{className:"u-mt-1 u-ml-1",variant:"h5"},a),r.a.createElement("div",{style:{width:i,height:c}},r.a.createElement(Hu.a,{className:t,width:i,height:c,options:o,data:n})),l)},Vu=function(e){var t=e.theme,a=e.isMobile,n=e.oneYearOldTimeseries,r=e.sendToDACC,o=e.globalAverages,i=e.f,c=e.t,l=function(e,t){var a=new Date,n=Array.from({length:12},(function(e,t){return Object(_.a)(Object(Ve.a)(a,t))})).reverse();return{months:n.map((function(e){return t(e,"MMM").toUpperCase()})),CO2s:n.map((function(t,a){var r=a===n.length-1,o=e.filter((function(e){return new Date(e.startDate)>=t&&(!!r||new Date(e.startDate)<n[a+1])})),i=ct()(o,"aggregation.totalCO2");return Math.round(100*i)/100}))}}(n,i),s=l.months,u=l.CO2s,d={labels:s,datasets:[{label:c("vericalBarChart.legend.yours"),backgroundColor:t.palette.primary.main,borderRadius:a?8:4,barThickness:a?r?6:8:24,data:u}]};return r&&d.datasets.push({label:c("vericalBarChart.legend.average"),backgroundColor:Object(zu.a)(t.palette.primary.main,.24),borderRadius:a?8:4,barPercentage:a?.55:.85,data:qa()("coachco2.fake-dacc-datas.enabled")?u:o}),d};a("NhwE"),a("8tKC");var Wu=h.models.dacc,Qu=(Wu.sendMeasureToDACC,Wu.fetchAggregatesFromDACC),Ku=function(){return!0===qa()("coachco2.dacc-dev_v2")?"cc.cozycloud.dacc.dev_v2":"cc.cozycloud.dacc_v2"},Ju=function(){var e=j()(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Ku(),n=Object(Tc.a)(Object(_.a)(Object(Ve.a)(Date.now(),11)),"yyyy-MM-dd"),e.next=5,Qu(t,a,{measureName:"co2-emissions-monthly",startDate:n});case 5:return r=e.sent,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),pt()("error","Error while retrieving data from remote-doctype: ".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Xu=function(e){var t=Object(h.useClient)(),a=Object(n.useState)(!1),r=s()(a,2),o=r[0],i=r[1],c=Object(n.useState)(null),l=s()(c,2),u=l[0],d=l[1];return Object(n.useEffect)((function(){e&&function(){var e=j()(x.a.mark((function e(){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,Ju(t);case 3:a=e.sent,n=(null==a?void 0:a.length)>0?a.map((function(e){return e.avg})):null,i(!1),d(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,e]),{isLoading:o,data:u}},$u=["data"];function ed(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function td(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ed(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ad=function(){var e,t,a=Object(ye.e)(),n=a.t,o=a.f,i=Object(Pr.a)(),l=Object(ge.b)().isMobile,s=le().account,u=gr("CO2Emission.sendToDACC"),d=u.isLoading,p=u.value,f=void 0!==p&&p,b=(e=null==s?void 0:s._id,t=Object(_.a)(Object(T.a)(new Date,1)),{definition:Object(h.Q)(m).where({"cozyMetadata.sourceAccount":e,startDate:{$gte:t.toISOString()}}).partialIndex({aggregation:{$exists:!0}}).select(["startDate","endDate","aggregation","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"asc"},{startDate:"asc"}]).limitBy(1e3),options:{as:"".concat(m,"/sourceAccount/").concat(e,"/withAggregation/fromDate/").concat(t.getFullYear(),"-").concat(t.getMonth()),fetchPolicy:E.a.fetchPolicies.olderThan(3e4)}}),v=Object(h.useQueryAll)(b.definition,td(td({},b.options),{},{enabled:Boolean(s)})),g=v.data,y=c()(v,$u),O=Xu(f).data;if(!s||Object(h.isQueryLoading)(y)||y.hasMore||0===g.length)return null;var C=!d&&f,j=function(e){return{maintainAspectRatio:!1,scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{color:e.palette.text.secondary}},y:{grid:{color:e.palette.border.main,drawBorder:!1},ticks:{color:e.palette.text.secondary,callback:function(e,t){return t%2==0?"".concat(e," kg"):""}}}},plugins:{tooltip:{displayColors:!1}}}}(i),w=Vu({theme:i,isMobile:l,oneYearOldTimeseries:g,sendToDACC:f,globalAverages:O,f:o,t:n});return r.a.createElement(Yu,{className:"u-mt-1 u-ph-half-s u-ph-2",title:n("vericalBarChart.title"),height:"190px",data:w,options:j},C&&r.a.createElement(Uu,null))},nd=a("33AU"),rd=a("N0Ji"),od=function(e){var t=e.onDiscard,a=e.onAccept,n=Object(ye.e)().t;return r.a.createElement(nd.a,{className:"u-mh-half-s u-mh-2 u-mb-half-s u-mb-1 u-mt-0-s u-mt-1 u-bdrs-4 u-pv-half u-pr-half",text:n("dacc.tripsCard.label"),icon:r.a.createElement(kn.a,{className:"u-ml-1",style:{marginTop:12,color:"var(--primaryColor)"},icon:rd.a,size:16}),buttonOne:r.a.createElement(xn.a,{variant:"text",label:n("dacc.tripsCard.discard"),onClick:t}),buttonTwo:r.a.createElement(xn.a,{variant:"text",label:n("dacc.tripsCard.accept"),onClick:a}),bgcolor:"#EAF3FF",disableIconStyles:!0})};od.propTypes={onDiscard:Ze.a.func.isRequired,onAccept:Ze.a.func.isRequired};var id=od,cd=new eo.a({id:"dacc-compare_095afa7eb600270496978dbb605e6b2d",use:"dacc-compare_095afa7eb600270496978dbb605e6b2d-usage",viewBox:"0 0 200 136",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 136" id="dacc-compare_095afa7eb600270496978dbb605e6b2d"><path fill="#fff" d="M0 0h200v136H0z" /><path d="M161 14.592c-1.888.222-7.568-.664-15.182-5.982-9.518-6.647-13.847-8.724-22.434-4.183C115 8.86 115.227 23.012 115 27M165.844 92c5.431-3.51 16.097-12.334 15.315-19.554-.977-9.025-12.708-11.282-22.81-10.78-10.101.501-17.596 4.512-28.349 1.504M23.495 72c-.329 4.729-2.425 21.765 5.479 27.308 9.88 6.928 23.668-1.244 30.831-5.203C66.97 90.146 79.072 83.217 85 85.527" stroke="#B2D3FF" stroke-width="4" stroke-linecap="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M62 118a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.899c1.777.371 3.182 1.857 3.472 3.649a4.507 4.507 0 0 1-2.828 4.953l-.112.039V117h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L62 113a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.399Z" fill="#38D1D3" /><circle cx="100" cy="64" fill="#297EF2" r="48" /><path fill-rule="evenodd" clip-rule="evenodd" d="M120.91 37.605a2.166 2.166 0 0 1 .235 3.055l-13 15.167a2.166 2.166 0 0 1-2.33.645L93.96 52.52 81.887 62.581a2.167 2.167 0 0 1-2.774-3.329l13-10.833a2.167 2.167 0 0 1 2.072-.391l11.618 3.873 12.052-14.061a2.166 2.166 0 0 1 3.055-.235Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M119.5 42.5a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-26 10.833a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-13 10.834a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm29.25-9.75a3.25 3.25 0 1 1-6.5 0 3.25 3.25 0 0 1 6.5 0ZM117.167 53.333a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V55.333a2 2 0 0 0-2-2h-4.666Zm-26 10.834a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V66.167a2 2 0 0 0-2-2h-4.666ZM78.167 75a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-4.666Zm24-4.5a2 2 0 0 1 2-2h4.666a2 2 0 0 1 2 2V86a2 2 0 0 1-2 2h-4.666a2 2 0 0 1-2-2V70.5Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M43 21a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm1.452-16.349c2.666.557 4.773 2.786 5.208 5.474a6.76 6.76 0 0 1-4.242 7.43l-.168.058V19.5h-4.5v-3.75c0-1.17.893-2.13 2.034-2.24L43 13.5a2.25 2.25 0 1 0-2.24-2.468l-.01.218h-4.5a6.758 6.758 0 0 1 8.202-6.599Z" fill="#72E7E9" /><path fill-rule="evenodd" clip-rule="evenodd" d="M69 19a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L69 16.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 42a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 39.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2ZM20 14a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L20 11.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M26 33a1.125 1.125 0 1 1 0 2.25A1.125 1.125 0 0 1 26 33Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.12 3.715l-.085.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12L26 29.25a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M39 116.5a.938.938 0 1 1 0 1.876.938.938 0 0 1 0-1.876Zm.605-6.812a2.811 2.811 0 0 1 2.17 2.281 2.816 2.816 0 0 1-1.767 3.095l-.07.025v.786h-1.875v-1.563c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 90a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 87.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M184 99a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V98h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L184 94a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M191 64a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M134 18a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.585.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M118 119a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2ZM153 55a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L153 52.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M81 118a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.25 2.25 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L81 115.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M177 124a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M164 75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L164 72.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M92 8.5a.937.937 0 1 1 0 1.875.937.937 0 0 1 0-1.875Zm.605-6.812a2.81 2.81 0 0 1 2.17 2.28 2.817 2.817 0 0 1-1.767 3.096l-.07.025v.786h-1.875V6.312c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#72E7E9" /><circle cx="148" cy="104" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 106c-4.418 0-8-4.029-8-9 0-4.97 3.582-9 8-9s8 4.03 8 9c0 4.971-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 101a1.5 1.5 0 1 1-.001 3.001A1.5 1.5 0 0 1 148 101Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V100h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L148 96a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="148" cy="104" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="24" cy="65" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 67c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9ZM8 77c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4H10c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 62a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V61h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L24 57a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="24" cy="65" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="172" cy="28" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 30c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V24h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L172 20a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="172" cy="28" r="20" stroke="#B9F6F7" stroke-width="8" /><path d="M66.418 133.29a81.818 81.818 0 0 0 16.142 2.244c16.166.948 38.758.424 48.325-1.346 9.567-1.771 10.083-4.465-14.448-5.812-20.925-1.147-45.26.474-50.362 2.894-1.52.648-1.447 1.371.343 2.02Z" fill="#BBD9FD" /></symbol>'}),ld=(ao.a.add(cd),cd),sd=function(e){var t=e.open,a=e.onClose,n=e.showDaccPermissionsDialog,o=Object(ye.e)().t;return r.a.createElement(yr.a,{open:t,onClose:a,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(kn.a,{className:"u-mv-1",icon:ld,width:200,height:136}),r.a.createElement(Sn.a,{variant:"h3"},o("dacc.compareDialog.title")),r.a.createElement(Sn.a,{className:"u-mt-1"},o("dacc.compareDialog.primaryText")),r.a.createElement(Sn.a,{className:"u-mt-1"},o("dacc.compareDialog.secondaryText"))),actions:r.a.createElement(xn.a,{label:o("dacc.compareDialog.action"),onClick:n})})};sd.propTypes={open:Ze.a.bool.isRequired,onClose:Ze.a.func.isRequired,showDaccPermissionsDialog:Ze.a.func.isRequired};var ud=sd;function dd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function md(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dd(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pd=function(){var e=Object(ye.e)().t,t=Object(n.useState)(!1),a=s()(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=gr("CO2Emission"),p=m.isLoading,f=m.value,b=void 0===f?{}:f,v=m.save;if(p)return null;var g=b.showAlert,y=void 0===g||g,h=b.sendToDACC,E=void 0!==h&&h;return r.a.createElement(r.a.Fragment,null,y&&!E&&r.a.createElement(id,{onDiscard:function(){v(md(md({},b),{},{showAlert:!1}))},onAccept:function(){return i(!0)}}),r.a.createElement(ud,{open:o,onClose:function(){return i(!1)},showDaccPermissionsDialog:function(){i(!1),d(!0)}}),u&&r.a.createElement(Ho,{onClose:function(){return d(!1)},onRefuse:function(){return d(!1)},onAccept:function(){v(md(md({},b),{},{showAlert:!1,sendToDACC:!0})),d(!1)},componentProps:{DaccPermissionsDialog:{sharedDataLabel:e("dacc.permissionsDialog.anonymized_emissions")}}}))};pd.propTypes={};var fd=pd,bd=a("IJzH"),vd=function(e){var t=e.onDiscard,a=e.onParticipate,n=Object(ye.e)().t;return r.a.createElement(Rl.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,icon:r.a.createElement(kn.a,{icon:rd.a}),action:r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{variant:"text",label:n("bikeGoal.alert.actions.discard"),onClick:t}),r.a.createElement(xn.a,{variant:"text",label:n("bikeGoal.alert.actions.participate"),onClick:a}))},r.a.createElement(bd.a,null,n("bikeGoal.alert.title",{bountyAmount:Ya()})),n("bikeGoal.alert.text",{bountyAmount:Ya(),daysToReach:Ha()}))};vd.propTypes={onDiscard:Ze.a.func,onParticipate:Ze.a.func};var gd=vd,yd=function(){var e=Object(je.h)(),t=gr("bikeGoal.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save;return a||o?r.a.createElement(gd,{onParticipate:function(){e("bikegoalonboarding")},onDiscard:function(){i(!1)}}):null},hd=function(){var e=Object(ye.e)().t,t=Object(je.h)(),a=gr("bikeGoal.showAlertSuccess").save;return r.a.createElement(Rl.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,severity:"success",action:r.a.createElement(xn.a,{variant:"text",color:"success",label:e("bikeGoal.alert.success.action",{bountyAmount:Ya()}),onClick:function(){a(!1);var e=(new Date).getFullYear().toString();t("".concat(e,"/certificate/generate"))}})},e("bikeGoal.alert.success.text"))},Ed=["data"],Od=["data"],Cd={paper:{gap:"1rem"},div:{height:65}},jd=function(){var e,t=Object(ye.e)().t,a=Object(je.h)(),n=le(),o=n.account,i=n.isAccountLoading,l=re(),s=Object(h.useQuery)(l.definition,l.options),u=s.data,d=c()(s,Ed),m=Object(h.isQueryLoading)(d),p=ae({accountId:null==o?void 0:o._id},Boolean(o)),f=Object(h.useQueryAll)(p.definition,p.options),b=f.data,v=c()(f,Od),g=Object(h.isQueryLoading)(v)||v.hasMore;if(i||g||m)return r.a.createElement(Mn.a,{elevation:2,className:"u-flex u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start"},r.a.createElement(Ln.b,{size:"xlarge",className:"u-m-1"}));var y=(new Date).getFullYear().toString(),E=Za(b,y),O=!(null==u||null===(e=u[0].bikeGoal)||void 0===e||!e.sendToDACC);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Mn.a,{elevation:2,className:"u-flex u-flex-items-start-s u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-p-1 u-c-pointer",style:Cd.paper,onClick:function(){return a("/bikegoal/".concat(y,"/trips"))}},r.a.createElement("div",{style:Cd.div},r.a.createElement($a,{timeseries:E,sendToDACC:O,size:"small"})),r.a.createElement("div",null,r.a.createElement(Sn.a,{variant:"h6"},t("bikeGoal.title")),O?r.a.createElement(Wn,{timeseries:E}):r.a.createElement(Kn,{timeseriesByYear:E,variant:"caption",preLine:!0}))))},wd=["data"],xd=["data"],kd={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},_d=function(){var e,t,a=Object(ye.e)().t,n=Object(ge.b)().isMobile,o=le(),i=o.account,l=o.isAccountLoading,s=re(),u=Object(h.useQuery)(s.definition,s.options),d=u.data,m=c()(u,wd),p=ae({accountId:null==i?void 0:i._id},Boolean(i)),f=Object(h.useQueryAll)(p.definition,p.options),b=f.data,v=c()(f,xd),g=Object(h.isQueryLoading)(v)||v.hasMore;if(Object(h.isQueryLoading)(m)||(l||g))return null;var y=(new Date).getFullYear().toString(),E=Za(b,y),O=null!==(e=null==d||null===(t=d[0])||void 0===t?void 0:t.bikeGoal)&&void 0!==e?e:{},C=O.activated,j=void 0!==C&&C,w=O.showAlert,x=void 0===w||w,k=O.showAlertSuccess,_=void 0===k?Wa(E):k;return j||x?r.a.createElement(r.a.Fragment,null,r.a.createElement(Sn.a,{className:"u-mb-1-s u-mt-1 u-mb-1-s u-mb-2 u-ml-1",variant:"h5"},a("bikeGoal.goals")),x&&r.a.createElement(yd,null),j&&r.a.createElement(r.a.Fragment,null,_&&r.a.createElement(hd,null),r.a.createElement(jd,null)),n&&r.a.createElement(Yn.a,{style:kd.divider})):null},Td=["data"];function Pd(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Dd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pd(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pd(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Nd={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},Md=function(){var e=le(),t=e.account,a=e.isAccountLoading,n=Object(ye.e)().t,o=Object(ge.b)().isMobile,i=ee({accountId:null==t?void 0:t._id,limitBy:50}),l=Object(h.useQuery)(i.definition,Dd(Dd({},i.options),{},{enabled:Boolean(t)})),s=l.data,u=c()(l,Td),d=Object(h.isQueryLoading)(u)&&!Object(h.hasQueryBeenLoaded)(u);return a||!t||d||0===s.length?r.a.createElement(lo,{account:t,isAccountLoading:a,isQueryLoading:d,timeseries:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr,{label:n("trips.from")+" "+se(t)}),qa()("coachco2.bikegoal.enabled")&&r.a.createElement(_d,null),r.a.createElement(ad,null),r.a.createElement(fd,null),o&&r.a.createElement(Yn.a,{style:Nd.divider}),r.a.createElement(zr,{timeseries:s}),u.hasMore&&r.a.createElement(Zr.a,{label:n("loadMore"),fetchMore:u.fetchMore}))},Sd=a("mJLf"),Ad=(a("cRRo"),a("R34t")),Rd=a("Qy9h"),Ld=a("BkYy"),Id=a("hXCt"),Fd=a("yKoJ"),Bd=a("pJCX"),Gd=function(){var e=Object(je.i)().fileId,t=Object(je.h)(),a=Object(h.useClient)(),n=function(e){return{definition:function(){return Object(h.Q)("io.cozy.files").getById(e)},options:{as:"".concat("io.cozy.files","/").concat(e),fetchPolicy:E.a.fetchPolicies.olderThan(1e8)}}}(null!=e?e:null),o=Object(h.useQuery)(n.definition,n.options);return Object(h.hasQueryBeenLoaded)(o)?r.a.createElement(Sd.a,{client:a,doctype:"io.cozy.files",documentType:"Files"},r.a.createElement(Ld.a,{files:o.data,currentIndex:0,onCloseRequest:function(){return t("..")}},r.a.createElement(Id.a,null,r.a.createElement(Bd.a,null),r.a.createElement(Fd.a,null)))):r.a.createElement(Rd.a,{open:!0},r.a.createElement(Ad.a,{open:!0},r.a.createElement(Ln.b,{size:"xxlarge",middle:!0,noMargin:!0,color:"var(--primaryContrastTextColor)"})))},zd=function(e){var t=e.Component;return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,null),r.a.createElement(je.b,null))},Zd=function(){var e=(new Date).getFullYear();return r.a.createElement(we.a,null,r.a.createElement(je.e,null,r.a.createElement(je.c,{path:"/",element:r.a.createElement(Le,null)},r.a.createElement(je.c,{path:"trips",element:r.a.createElement(zd,{Component:Md})},r.a.createElement(je.c,{path:"certificate/:fileId",element:r.a.createElement(Gd,null)}),r.a.createElement(je.c,{path:":year/certificate/generate",element:r.a.createElement(Fn,null)}),r.a.createElement(je.c,{path:":timeserieId",element:r.a.createElement(Gu,null)}),qa()("coachco2.bikegoal.enabled")&&r.a.createElement(je.c,{path:"bikegoalonboarding",element:r.a.createElement(ji,null)})),r.a.createElement(je.c,{path:"settings",element:r.a.createElement(zd,{Component:dl})},qa()("coachco2.bikegoal.enabled")&&r.a.createElement(je.c,{path:"bikegoalonboarding",element:r.a.createElement(ji,null)})),r.a.createElement(je.c,{path:"analysis/modes",element:r.a.createElement(zd,{Component:pc})}),r.a.createElement(je.c,{path:"analysis/modes/:mode",element:r.a.createElement(zd,{Component:pc})},r.a.createElement(je.c,{path:":timeserieId",element:r.a.createElement(Gu,null)})),r.a.createElement(je.c,{path:"analysis/purposes",element:r.a.createElement(zd,{Component:gc})}),r.a.createElement(je.c,{path:"analysis/purposes/:purpose",element:r.a.createElement(zd,{Component:gc})},r.a.createElement(je.c,{path:":timeserieId",element:r.a.createElement(Gu,null)})),qa()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(je.c,{path:"bikegoal/:year/trips",element:r.a.createElement(zd,{Component:mo})},r.a.createElement(je.c,{path:"certificate/:fileId",element:r.a.createElement(Gd,null)}),r.a.createElement(je.c,{path:":timeserieId",element:r.a.createElement(Gu,null)}),r.a.createElement(je.c,{path:"edit",element:r.a.createElement(Mo,null)}),r.a.createElement(je.c,{path:"about",element:r.a.createElement(po,null)}),r.a.createElement(je.c,{path:"certificate/generate",element:r.a.createElement(Fn,null)}))),r.a.createElement(je.c,{path:"analysis",element:r.a.createElement(je.a,{replace:!0,to:"/analysis/modes"})}),qa()("coachco2.bikegoal.enabled")&&r.a.createElement(je.c,{path:"bikegoal",element:r.a.createElement(je.a,{replace:!0,to:"/bikegoal/".concat(e,"/trips")})}),r.a.createElement(je.c,{path:"/",element:r.a.createElement(je.a,{replace:!0,to:"/trips"})}),r.a.createElement(je.c,{path:"*",element:r.a.createElement(je.a,{replace:!0,to:"/trips"})}))))},Ud=a("8Bbg"),qd=function(e,t){return/^\{\{\..*\}\}$/.test(e)?t:e},Hd=function(e){var t=e.app,n=e.locale,r={appIconDefault:a("J3iu"),appNamePrefixDefault:Cc.a.name_prefix,appNameDefault:Cc.a.name,appLocaleDefault:"en"};return{appName:qd(t.name,r.appNameDefault),appNamePrefix:qd(t.prefix,r.appNamePrefixDefault),iconPath:qd(t.icon,r.appIconDefault),lang:qd(n,r.appLocaleDefault)}},Yd=a("+s1f"),Vd=a("8XZk"),Wd=oa()((function(){var e,t,n,r,o=document.querySelector("[role=application]"),i=Hd(JSON.parse(o.dataset.cozy)),c=i.lang,l=i.appName,s=Object(Vd.a)(c,(function(e){return a("eUFy")("./".concat(e))})),u=(e=document.querySelector("[role=application]"),t=JSON.parse(e.dataset.cozy),n=window.location.protocol,r="".concat(n,"//").concat(t.domain),new E.a({uri:r,token:t.token,appMetadata:{slug:Cc.a.name,version:Cc.a.version},schema:f,store:!1}));return u.registerPlugin(qa.a.plugin),u.registerPlugin(Yd.RealtimePlugin),function(e){var t=e.client,a=e.container,n=e.lang,r=e.appName,o=Hd(JSON.parse(a.dataset.cozy)),i=o.appNamePrefix,c=o.iconPath;cozy.bar.init({appName:r,appNamePrefix:i,cozyClient:t,iconPath:c,lang:n,replaceTitleOnMobile:!1})}({client:u,container:o,lang:c,appName:l}),{container:o,client:u,lang:c,polyglot:s}}));Object(Ud.a)(),document.addEventListener("DOMContentLoaded",(function(){var e,t,a,n,i;e=Wd(),t=e.container,a=e.client,n=e.lang,i=e.polyglot,Object(o.createRoot)(t).render(r.a.createElement(Ce,{client:a,lang:n,polyglot:i},r.a.createElement(Zd,null)))}))},"v5t+":function(e,t,a){e.exports=a.p+"PlusJakartaSans.ttf"},vVt6:function(e,t,a){e.exports=a.p+"Lato.ttf"}});