!function(e){function t(t){for(var n,i,c=t[0],l=t[1],s=t[2],d=0,m=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var l=a[c];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={1:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([1,0]),a()}({0:function(e,t){},1:function(e,t,a){a("MQ8b"),a("jI5P"),e.exports=a("nXPL")},2:function(e,t){},"2maa":function(e){e.exports=JSON.parse('{"nav":{"trips":"Trips","analysis":"Analysis","modes":"Modes of transport","purposes":"Purposes of travel","settings":"Settings"},"folder":{"administrative":"Administrative","coachco2":"Coach CO2"},"devices":{"select":"Select a device","label":"Data source"},"settings":{"services":"Services","debug":"Demo & debug mode"},"trips":{"default":"default","trips":"Trips","from":"Trips from","departure":"Departure","arrival":"Arrival","submit":"Save","cancel":"Cancel","customLabel":"Custom label","modes":{"AIR_OR_HSR":"Plane","BICYCLING_ELECTRIC":"Electric bike","BICYCLING":"Bike","BUS_ELECTRIC":"Electric bus","BUS":"Bus","CAR_ELECTRIC":"Electric car","CAR":"Car","IN_VEHICLE":"Vehicle","CARPOOL_ELECTRIC":"Electric carpooling","CARPOOL":"Carpooling","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Electric scooter","MOPED":"Moped","SUBWAY":"Subway","TRAIN":"Train","TRAMWAY":"Tramway","UNKNOWN":"Unknown","WALKING":"Walking","ON_FOOT":"Walking","RUNNING":"Running","categories":{"BICYCLING_CATEGORY":"Bike, scooter","CAR_CATEGORY":"Car, motorcycle, moped","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Going to or from work","WORK":"Profressional travel","SHOPPING":"Going shopping","PERSONAL_MED":"Personal travel","PICK_DROP":"Pick & drop someone","SPORT":"Going to or from sport","EXERCISE":"Physical activity / sport","ENTERTAINMENT":"Going out, leisure","TRAVEL":"Travel","OTHER_PURPOSE":"Unknown"},"duration":"Duration","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Save the starting point?","saveEndPlace":"Save the arrival point?","tooltip":"Saving this address will enable you to find it in similar trips and help categorise them automatically.","submit":"Save","delete":"Delete","cancel":"Cancel","dismiss":"No, thanks","contact":"Save as contact","label":"Label","noLabel":"No label","custom":"Customised","customLabel":"Custom label","home":"Home","work":"Work","error":"Specify which contact to save the address under","addSuccess":"The addresses have been registered","removeSuccess":"The addresses have been deleted","atHome":"At home","lat":"lat.","long":"long."},"loadMore":"Load more trips","tripEdit":{"selectMode":"Modify the transportation mode","modeTooltip":"The CO2 values in grams per kilometre (g/km) displayed may not always be representative of reality and may vary. It is important to take the CO2 values displayed with caution and to consider them as a general indication rather than an accurate representation of reality. Driving conditions, driver behaviour and other factors can lead to significant variations from the laboratory values, making it difficult to make a true comparison between different vehicles in terms of CO2 emissions.","selectPurpose":"Modify the travel purpose"},"purpose":"Reason for travel","recurring":{"title":"Recurrence","text":"Automatically apply this pattern to similar moves"},"analysis":{"mode":"CO2 emissions","purpose":"CO2 emissions","travels":"%{smart_count} travel |||| %{smart_count} travel","emittedCO2":"emitted CO2"},"support":{"label":"Support","problem":"A problem?","consult":{"text":"Consult our","link":"Geolocation FAQ"}},"export":{"filename":"%{today} - Trips %{accountLabel}.csv","button":"Export trips in CSV","modal":{"button":{"close":"Close","viewInDrive":"View in Drive"},"title":"Exporting","content":{"done":"The \\"%{filename}\\" file was created in the \\"Drive%{pathAppDir}\\" folder of your Cozy.","progress":"The export of your trips is in progress, please wait..."}}},"emptyContent":{"welcome":{"title":"Welcome to your CO2 Coach","text":"Let\'s improve our region together.\\n\\nThis application will allow you to record all your journeys, to understand their impact in terms of CO2 emissions, to compare yourself with the average user, and so on..","textA":"This application, available free of charge for %{maxDaysToCapture} days as part of your package, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, track your eligibility for the cycle allowance, compare yourself with the average user, and so on.","textB":"This application, which is included in your Cozy package, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, track your eligibility for the cycle allowance, compare yourself with the average user, and so on.","textC":"Let\'s improve our region together.\\n\\nThis application, which is made available to you by your %{sourceType} %{sourceName}, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, keep track of your bike journeys, and so on.","textD":"This application, which is currently in the experimental phase, will enable you to record all your journeys, understand their impact in terms of CO2 emissions, and notify you as soon as you are eligible for your %{sourceType} %{sourceName} cycling allowance, etc.","action":"Let\'s go!"},"installApp":{"title":"Detect your movements\\nwith the Cozy Cloud app","text":"Install the Cozy Cloud application on your mobile phone to record all your journeys, understand their impact in terms of CO2 emissions, keep track of your journeys by bike, etc.","action":"Install the app"},"GPSStandby":{"title":"Location detected","text":"Your first trip will be posted here a few hours after you make it."},"changeAccount":{"title":"No travel","text":"No travel has yet been detected from the selected data source.","action":"Changing the data source"}},"manifest":{"short_description":"Keep track of your trips and analyze their impact on the environment.","long_description":"If you happen to be looking for answers to some of these questions:\\n- How far have I travelled **on foot** this week?\\n- If I bought an **electric** car, what would be the impact on my fuel bill?\\n- Would it make sense for me to **lease a car instead of owning one**, given my actual usage?\\n- How can I **find the start of this enchanting path** that I found by chance two years ago?\\n- How much do **my air travel** represent in my annual CO2 emissions?\\n- How many **home/work trips** have I made by bike this year?\\n- What if I kept an **accurate history of** all the places I visited during **my travels?**?\\n- As a company, how can I make **my bike allowance** (SMP) more effective?\\n\\n... then the CoachCO2 application can provide you with some answers! It will also help you to **awareness of the challenges** of mobility, to question your travel habits, and perhaps to find more sustainable alternatives.\\n\\n&nbsp;\\n\\n**What about the confidentiality of my private life?**\\n\\n&nbsp;\\n\\nAs always with your Cozy: **you are by default the only one** with the right to **access your data**. And you can of course also **share them** with whomever you like, for as long as you like.\\n\\n&nbsp;\\n\\n**Can I advance ecomobility by sharing my anomymised data?**\\n\\n&nbsp;\\n\\nYes, as well as helping you to become more aware of your own mobility issues, the aim of the CoachCO2 application is to enable the emergence of new ecomobility offers thanks to studies based on anonymised and previously aggregated data such as distances travelled by means and objectives of transport. Some French **local authorities** are **already working** on this!\\n\\n&nbsp;\\n\\n**And tomorrow ?**\\n\\n&nbsp;\\n\\nThis memory of your trips is stored and secured in your personal cloud in a **standard format that can be reused and exported** as you wish.\\n\\n&nbsp;\\n\\nThe CoachCO2 application itself is regularly enhanced with **new features**. Today it focuses on mobility, but tomorrow other sources of CO2 could extend its scope, such as the energy consumption of your home.\\n\\n&nbsp;\\n\\nTomorrow, new applications will be able to offer you **other uses** thanks to the storage of this precious travel data. For example, you could build your own mapped albums of your travels or favourite activities, and share them with friends and family without having to use social networks.\\n\\n&nbsp;\\n\\n**Acknowledgements and conditions of use**\\n\\n&nbsp;\\n\\nThis application is currently being developed and maintained by Cozy Cloud as a common asset. Launched in 2021 thanks to the agglomeration of **la Rochelle** and its Agremob programme, it was then supported by the department of **Alpes-Maritimes**. You can use it for free if you self-host your Cozy, or buy it from a third party. It is also available as part of the Premium packages hosted by Cozy Cloud (with a 1-month free trial in the discovery package).","permissions":{"apps":{"description":"Required by the cozy-bar to display the icons of the apps"},"settings":{"description":"Required by the cozy-bar to display Claudy and know which applications are coming soon"},"accounts":{"description":"Required to get konnector account"},"files":{"description":"Required to access the files for saved your export of trips"},"geojson-timeseries":{"description":"Required to display geojson timeseries"},"coachco2.settings":{"description":"Used to manage your Coach CO2 settings"}}},"dacc":{"settings":{"anonymous_participation":"Participate anonymously in the calculation of average CO2 emissions","showAlerter":"Show DACC alerter"},"tripsCard":{"label":"Compare your emissions to the average of other users of the application?","discard":"No, thank you","accept":"Compare"},"compareDialog":{"title":"Compare anonymously","primaryText":"In order to average the emissions of users, and because your Cozy has made a promise to you to never disclose your data without your explicit request, it will ask you for the right to send this data.","secondaryText":"This data will be aggregated and anonymous and will not contain any identifiers or locations.","action":"I understood"},"permissionsDialog":{"title":"Request for permissions","primaryText":"The CO2 Coach application requires the following permissions from your Cozy:","secondaryText":"Once authorized, the permissions can be modified in the settings","why_asking":"Why ask me for these permissions?","export_outside":"Exporting out of Cozy","anonymized_emissions":"My anonymized CO2 emissions","anonymized_bikegoal_progression":"My anonymized progression","accept":"Always allow","refuse":"Refuse"},"reasonsDialog":{"title":"Reasons for permissions","content":"Because your Cozy has made a promise to you to never disclose your private data, it will always ask you for the right to let an application send it out."}},"vericalBarChart":{"title":"CO2 emissions","legend":{"yours":"Your emissions","average":"Average users of the app"}},"bikeGoal":{"title":"Bike to work","yearly_goal_progression":"%{days}/%{daysToReach} days \\nper year","goal_progression":"%{days}/%{daysToReach} days","my_progression":"My yearly progression","average_progression":"Avg. progress of my organisation","average_progression_noValue":"Avg. progress of other users","achievement_certificate":"Certificate of achievement","goal":"Objective","goals":"Objectives","days":"days","empty":{"title":"Your trips eligible for the Bike Goal will be counted and displayed here."},"about":{"title":"About the goal","intro":{"title":"Introduction","content":"In order to encourage the use of alternative and sustainable modes of transport, the sustainable mobility package came into force on 10 May 2020.\\n\\nEmployees and agents who choose an alternative and sustainable mode of transport for their home-to-work journey will be able to receive a sum from their employer if the latter implements this scheme."},"how_trips_detected":{"title":"How are my trips detected?","content":"Your home-to-work journeys by bike will be automatically detected on the basis of your timetable and your speed.\\n\\nIf a journey is not automatically classified as a “Journey to and from work“, open the details of the journey and change the reason for the journey.\\n\\nIf the mode of transport for a journey is not automatically detected as “bike“, open the journey details and change the mode of transport to “bike“."},"once_goal_reach":{"title":"What to do once the goal is reached?","optional":"Last step","content":"Once you\'ve reached your target, you can congratulate yourself! You\'ll then be able to generate a certificate of honour that you can send to your employer."}},"deactivate":{"deactivate":"Deactivate","title":"Do you really want to stop participating in the goal?","content":"You can always choose to participate again from the application settings.","stop_participate":"No longer participating","cancel":"Cancel"},"alert":{"success":{"text":"Congratulations, you have achieved the “Bike to Work” goal 🎉","action":"Receive my certificate |||| Benefit from my %{bountyAmount}€ package"},"title":"Be part of the change: cycle to work!","text":"Track your trips and generate a certificate for your employer if they offer the Sustainable Mobility Package (SMP) bonus.","actions":{"participate":"Participate","discard":"No, thank you"}},"edit":{"modify":"Modify","title":"Modify the goal","firstname":"Firstname","lastname":"Lastname","daysToReach":"Days to reach","compare_progress":"Compare my progress with that of my organisation","compare_progress_noValue":"Compare my progress with that of other users","cancel":"Cancel","submit":"Ok","required":"This field is required"},"settings":{"participation":"Participate to the goal “Bike to work”","showAlerter":"Bike goal: Show bike goals alerter","hideOnboarding":"Bike goal: Hide bike goal onboarding","sendToDACC":"Bike goal: activate DACC","showAlerterSuccess":"Bike goal: Show the bike goal success alert"},"onboarding":{"title":"Objective: To cycle to work","actions":{"finish":"Finish","previous":"Previous","next":"Next"},"steps":{"naming":{"title":"Lastname and firstname","nameLegend":"Fill in the following details to generate a certificate of achievement in your name:"},"daysToReach":{"title":"Set yourself a goal","legend":"Set a number of days for your home-to-work journeys by bike or scooter and track your progress with your CO2 Coach.\\n\\nOnce you\'ve reached your target, you\'ll receive an alert and a certificate of achievement to send to your employer.","error":"Set a more realistic goal. Enter a value greater than 0."},"comparison":{"comparisonLegend":"You can display the average progress of the members of your organisation %{sourceName} who are participating in the objective. To do this, you will be asked to participate in the creation of this average.\\n\\nYour progress data will be aggregated and sent anonymously, and will not contain any identifiers or locations.","comparisonLegend_noValue":"You can display the average progress of the other users who are participating in the objective. To do this, you will be asked to participate in the creation of this average.\\n\\nYour progress data will be aggregated and sent anonymously, and will not contain any identifiers or locations.","compare":"Compare my progression","doNotCompare":"Do not compare my progression"}}},"certificateGeneration":{"title":"Congratulations, you have achieved the “Bike to Work“ goal","content":"A certificate has been generated to certify your success for %{year}. Email it to your employer now. |||| A certificate has been generated as proof of your success for the year %{year}. Forward it now by email to your employer to receive %{bountyAmount}€ !","actions":{"show":"Certificate - Bike to work.pdf","generate":"Generate a certificate","regenerate":"Generate a new certificate","understood":"Understood"}}},"geolocationTracking":{"tooltip":{"title":"Your new trips are not saved","text":"Automatically record all your movements and discover your carbon footprint.","action":"Configure"},"locationRefusedDialog":{"description":"Your Cozy needs access to additional data in order to help you analyze your movements. This data will NEVER be transmitted to anyone without your explicit request.\\n\\nYou will be redirected to the app\'s settings to authorize it to ALWAYS access your phone\'s position, even when the app is not in use, and PHYSICAL ACTIVITY, movement and shape data.."},"settings":{"enable":"Record my movements with my mobile (GPS)","sendLogs":"Send my logs to support","forceUploadData":"Force Upload Data","copyIdentifier":"Copy OpenPATH Identifier","createdOn":"created on"}},"Modes":{"DefaultDialog":{"primary":"Set as default transport for this category?","secondary":"The transport mode will automatically be selected as default for all future trips detected for this transport type.","actions":{"save":"Save","cancel":"Cancel"}}},"PDF":{"name":"Certificate - Cycling to work (%{year}).pdf","title":"Certificate on honor\\n of the success of the objective\\n of the Sustainable Mobility Package","date":"%{currentDateFormatted} at %{currentTimeFormatted}","recipient":"Employer : %{sourceName}","paragraph01":"I, %{username}, certify on my honor that I have achieved the %{daysToReach} days sustainable mobility package objective by traveling from home to work by bike from January 1 to %{year}.","paragraph02":"In addition to this certificate, I provide my employer with any useful proof of actual use of the bicycle, such as invoice or payment statements, insurance or maintenance of my bicycle.","paragraph03":"Made to serve and assert what is right.","signature":"Signature : %{username}"},"centreValDeLoireExpe":{"settings":{"sendToDACC":"Participate in the region’s Mobile CVL experiment"}}}')},3:function(e,t){},4:function(e,t){},5:function(e,t){},"5z4W":function(e,t){e.exports={name:"Coach CO2",slug:"coachco2",icon:"icon.svg",categories:[],version:"0.16.0",licence:"AGPL-3.0",editor:"Cozy Cloud",source:"https://github.com/cozy/coachCO2.git@build",developer:{name:"Cozy Cloud",url:"https://cozy.io"},default_locale:"fr",langs:["fr","en"],routes:{"/":{folder:"/",index:"index.html",public:!1}},permissions:{apps:{description:"Required by the cozy-bar to display the icons of the apps",type:"io.cozy.apps",verbs:["GET"]},settings:{description:"Required by the cozy-bar to display Claudy and know which applications are coming soon",type:"io.cozy.settings",verbs:["GET"]},accounts:{description:"Required to get konnector account",type:"io.cozy.accounts",verbs:["GET","POST","PUT"]},konnectors:{description:"Required to create your mobility konnector account and to display additional information in the viewer for files automatically retrieved by services",type:"io.cozy.konnectors",verbs:["GET"]},triggers:{description:"Required to create your mobility konnector account and to display additional information in the viewer and for the notification service",type:"io.cozy.triggers",verbs:["GET","POST"]},files:{description:"Required to access the files for saved your export of trips",type:"io.cozy.files",verbs:["ALL"]},sharings:{description:"Required to have access to the sharings in realtime",type:"io.cozy.sharings",verbs:["ALL"]},"geojson-timeseries":{description:"Required to display geojson timeseries",type:"io.cozy.timeseries.geojson"},"coachco2.settings":{description:"Used to manage your Coach CO2 settings",type:"io.cozy.coachco2.settings",verbs:["GET","POST","PUT"]},jobs:{description:"Used in services to start other services",type:"io.cozy.jobs",verbs:["POST"]},dacc:{type:"cc.cozycloud.dacc_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions"},"dacc-dev":{type:"cc.cozycloud.dacc.dev_v2",verbs:["POST"],description:"Remote-doctype required to send anonymized CO2 contributions, for developement purposes"},contacts:{type:"io.cozy.contacts.*",verbs:["GET","POST","PUT","DELETE"],description:"Used to link contacts to geojson timeseries and sharing documents"}},services:{fetchOpenPathTrips:{type:"node",file:"services/fetchOpenPathTrips/coachco2.js",trigger:"@hourly"},fetchOpenPathTripsWebhook:{type:"node",file:"services/fetchOpenPathTrips/coachco2.js",trigger:"@webhook"},timeseriesWithoutAggregateMigration:{type:"node",file:"services/timeseriesWithoutAggregateMigration/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED,UPDATED",debounce:"1m"},daccMonthlyCO2:{type:"node",file:"services/daccMonthlyCO2/coachco2.js",trigger:"@monthly on the 1"},daccBikeGoal:{type:"node",file:"services/daccBikeGoal/coachco2.js",trigger:"@daily"},daccCentreValDeLoireExpe:{type:"node",file:"services/daccCentreValDeLoireExpe/coachco2.js",trigger:"@daily"},recurringPurposes:{type:"node",file:"services/recurringPurposes/coachco2.js",trigger:"@event io.cozy.timeseries.geojson:CREATED",debounce:"2m"}}}},6:function(e,t){},7:function(e,t){},"7SaY":function(e,t,a){},"7z1u":function(e,t,a){var n={"./_lib/build_formatting_tokens_reg_exp/index.js":"5XOE","./ar/build_distance_in_words_locale/index.js":"qs6D","./ar/build_format_locale/index.js":"80pQ","./ar/index.js":"n4NV","./be/build_distance_in_words_locale/index.js":"b7Vp","./be/build_format_locale/index.js":"STnx","./be/index.js":"ka/z","./bg/build_distance_in_words_locale/index.js":"fyh8","./bg/build_format_locale/index.js":"STBG","./bg/index.js":"BBHR","./ca/build_distance_in_words_locale/index.js":"4d8B","./ca/build_format_locale/index.js":"a88X","./ca/index.js":"Nz94","./cs/build_distance_in_words_locale/index.js":"70Ht","./cs/build_format_locale/index.js":"R/Ak","./cs/index.js":"oAfY","./da/build_distance_in_words_locale/index.js":"HjC7","./da/build_format_locale/index.js":"G0Zw","./da/index.js":"CJpN","./de/build_distance_in_words_locale/index.js":"DD2N","./de/build_format_locale/index.js":"pnJo","./de/index.js":"eBmD","./el/build_distance_in_words_locale/index.js":"tFqT","./el/build_format_locale/index.js":"twcE","./el/index.js":"m1rb","./en/build_distance_in_words_locale/index.js":"bjbr","./en/build_format_locale/index.js":"EW2Y","./en/index.js":"VkMk","./eo/build_distance_in_words_locale/index.js":"ujJO","./eo/build_format_locale/index.js":"S5Gq","./eo/index.js":"nn7U","./es/build_distance_in_words_locale/index.js":"h+mB","./es/build_format_locale/index.js":"Q4jc","./es/index.js":"4yJR","./fi/build_distance_in_words_locale/index.js":"Fpie","./fi/build_format_locale/index.js":"LTnX","./fi/index.js":"G/Qn","./fil/build_distance_in_words_locale/index.js":"VRy5","./fil/build_format_locale/index.js":"syEd","./fil/index.js":"k8V/","./fr/build_distance_in_words_locale/index.js":"nJeE","./fr/build_format_locale/index.js":"DeP4","./fr/index.js":"+owv","./hr/build_distance_in_words_locale/index.js":"Fs/O","./hr/build_format_locale/index.js":"ZlNX","./hr/index.js":"Kj+b","./hu/build_distance_in_words_locale/index.js":"8okG","./hu/build_format_locale/index.js":"lk8B","./hu/index.js":"+KHA","./id/build_distance_in_words_locale/index.js":"50BR","./id/build_format_locale/index.js":"18Vb","./id/index.js":"anKN","./is/build_distance_in_words_locale/index.js":"qUeK","./is/build_format_locale/index.js":"IcCt","./is/index.js":"4QE/","./it/build_distance_in_words_locale/index.js":"PCcA","./it/build_format_locale/index.js":"V71f","./it/index.js":"qK4z","./ja/build_distance_in_words_locale/index.js":"5vSx","./ja/build_format_locale/index.js":"CAsz","./ja/index.js":"XcQu","./ko/build_distance_in_words_locale/index.js":"jKsw","./ko/build_format_locale/index.js":"UEmh","./ko/index.js":"zOJj","./mk/build_distance_in_words_locale/index.js":"fcCd","./mk/build_format_locale/index.js":"re9F","./mk/index.js":"FDmM","./nb/build_distance_in_words_locale/index.js":"aEqN","./nb/build_format_locale/index.js":"pNMw","./nb/index.js":"mR4k","./nl/build_distance_in_words_locale/index.js":"7u2d","./nl/build_format_locale/index.js":"3riD","./nl/index.js":"06P9","./pl/build_distance_in_words_locale/index.js":"rygU","./pl/build_format_locale/index.js":"july","./pl/index.js":"vOlg","./pt/build_distance_in_words_locale/index.js":"sLR+","./pt/build_format_locale/index.js":"ZP65","./pt/index.js":"vSZg","./ro/build_distance_in_words_locale/index.js":"eJyG","./ro/build_format_locale/index.js":"fLwW","./ro/index.js":"OuEP","./ru/build_distance_in_words_locale/index.js":"KjgK","./ru/build_format_locale/index.js":"Tqgg","./ru/index.js":"T3Gn","./sk/build_distance_in_words_locale/index.js":"38t1","./sk/build_format_locale/index.js":"myxh","./sk/index.js":"In70","./sl/build_distance_in_words_locale/index.js":"Mhi5","./sl/build_format_locale/index.js":"yfgk","./sl/index.js":"D9r0","./sr/build_distance_in_words_locale/index.js":"I8h+","./sr/build_format_locale/index.js":"0FXG","./sr/index.js":"lQaB","./sv/build_distance_in_words_locale/index.js":"z6xu","./sv/build_format_locale/index.js":"jmSq","./sv/index.js":"SMJc","./th/build_distance_in_words_locale/index.js":"qHE1","./th/build_format_locale/index.js":"+W4l","./th/index.js":"5DsP","./tr/build_distance_in_words_locale/index.js":"0z6Z","./tr/build_format_locale/index.js":"NK/q","./tr/index.js":"OevD","./zh_cn/build_distance_in_words_locale/index.js":"SBqD","./zh_cn/build_format_locale/index.js":"219J","./zh_cn/index.js":"QhI5","./zh_tw/build_distance_in_words_locale/index.js":"7Fp2","./zh_tw/build_format_locale/index.js":"l09L","./zh_tw/index.js":"TDp1"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="7z1u"},8:function(e,t){},"8Bbg":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));var n=Boolean(window.location.hostname.endsWith("cozy.localhost")||window.location.hostname.endsWith("cozy.tools"));function r(t){if("serviceWorker"in navigator){if(new URL(e.env.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="/service-worker.js";n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):o(e,t)}))}}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}}).call(this,a("JtWf"))},"8IOV":function(e,t,a){e.exports={"cozy-leaflet-markers":"cozy-leaflet-markers--3tOnD","cozy-leaflet-markers-end":"cozy-leaflet-markers-end--G0e6q","cozy-leaflet-markers-start":"cozy-leaflet-markers-start--1JdEL"}},9:function(e,t){},DZbK:function(e,t,a){e.exports=a.p+"Courgette.ttf"},Ev3x:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"h",(function(){return r})),a.d(t,"i",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"j",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"l",(function(){return m})),a.d(t,"f",(function(){return p})),a.d(t,"g",(function(){return f}));var n="io.cozy.apps",r="io.cozy.files",o="io.cozy.timeseries.geojson",i="io.cozy.accounts",c="io.cozy.coachco2.settings",l="io.cozy.jobs",s="io.cozy.contacts",u="io.cozy.contacts.groups",d="io.cozy.konnectors",m="io.cozy.settings",p="cc.cozycloud.dacc_v2",f="cc.cozycloud.dacc.dev_v2";t.m={timeseries:{doctype:o,attributes:{},relationships:{startPlaceContact:{type:"has-one",doctype:s},endPlaceContact:{type:"has-one",doctype:s}}},files:{doctype:r,attributes:{},relationships:{}},settings:{doctype:c,attributes:{},relationships:{}}}},Hsuv:function(e){e.exports=JSON.parse('{"nav":{"trips":"Déplacements","analysis":"Analyses","modes":"Modes de transport","purposes":"Motifs de déplacement","settings":"Paramètres"},"folder":{"administrative":"Administratif","coachco2":"Coach CO2"},"devices":{"select":"Sélectionnez un appareil","label":"Source des données"},"settings":{"services":"Services","debug":"Mode démo & débug"},"trips":{"trips":"Déplacements","from":"Déplacements de","departure":"Départ","arrival":"Arrivée","submit":"Enregistrer","cancel":"Annuler","customLabel":"Libellé personnalisé","modes":{"default":"défaut","AIR_OR_HSR":"Avion","BICYCLING_ELECTRIC":"Vélo électrique","BICYCLING":"Vélo","BUS_ELECTRIC":"Bus électrique","BUS":"Bus","CAR_ELECTRIC":"Voiture électrique","CAR":"Voiture","IN_VEHICLE":"Véhicule","CARPOOL_ELECTRIC":"Covoiturage électrique","CARPOOL":"Covoiturage","MOTO_INF_250":"Moto < 250cm3","MOTO_SUP_250":"Moto > 250cm3","SCOOTER_ELECTRIC":"Trottinette électrique","MOPED":"Cyclomoteur","SUBWAY":"Métro","TRAIN":"Train","TRAMWAY":"Tramway","UNKNOWN":"Non reconnu","WALKING":"Marche","ON_FOOT":"Marche","RUNNING":"Course","categories":{"BICYCLING_CATEGORY":"Vélo, trotinette","CAR_CATEGORY":"Voiture, moto, scooter","PUBLIC_TRANSPORT_CATEGORY":"Transports en commun"}},"purposes":{"COMMUTE":"Aller-retour au travail","WORK":"Déplacement professionel","SHOPPING":"Aller faire les courses","PERSONAL_MED":"Déplacement personnel","PICK_DROP":"Déposer quelqu\'un","SPORT":"Aller-retour au sport","EXERCISE":"Activité physique / sportive","ENTERTAINMENT":"Sortie, loisirs","TRAVEL":"Voyage","OTHER_PURPOSE":"Indéfini"},"duration":"Durée","distance":"Distance","calories":"Calories","co2":"CO2"},"contactToPlace":{"saveStartPlace":"Enregistrer le point de départ ?","saveEndPlace":"Enregistrer le point d\'arrivée ?","tooltip":"Enregistrer cette adresse vous permettra de la retrouver dans des déplacements similaires et d\'aider à leur catégorisation automatique.","submit":"Enregistrer","delete":"Supprimer","cancel":"Annuler","dismiss":"Non, merci","contact":"Enregistrer dans une fiche contact","label":"Libellé","noLabel":"Aucun libellé","custom":"Personnalisé","customLabel":"Libellé personnalisé","home":"Domicile","work":"Travail","error":"Préciser sous quel contact enregistrer l\'adresse","addSuccess":"Les adresses ont bien été enregistrées","removeSuccess":"Les adresses ont bien été supprimées","atHome":"Chez moi","lat":"lat.","long":"long."},"loadMore":"Charger plus de trajets","tripEdit":{"selectMode":"Modifier le mode de transport","modeTooltip":"Les valeurs de CO2 en grammes par kilomètre (g/km) affichées peuvent parfois ne pas être représentatives de la réalité et peuvent varier. Il est important de prendre les valeurs de CO2 affichées avec précaution et de les considérer comme une indication générale plutôt qu\'une représentation précise de la réalité. Les conditions de conduite, le comportement du conducteur et d\'autres facteurs peuvent entraîner des variations significatives par rapport aux valeurs de laboratoire, ce qui rend difficile la comparaison réelle entre différents véhicules en termes d\'émissions de CO2.","selectPurpose":"Modifier le motif du déplacement"},"purpose":"Motif du déplacement","recurring":{"title":"Récurrence","text":"Appliquer automatiquement ce motif aux déplacements similaires"},"analysis":{"mode":"Émissions de CO2","purpose":"Émissions de CO2","travels":"%{smart_count} déplacement |||| %{smart_count} déplacements","emittedCO2":"CO2 émis"},"support":{"label":"Support","problem":"Un problème ?","consult":{"text":"Consulter notre","link":"FAQ de géolocalisation"}},"export":{"filename":"%{today} - Déplacements %{accountLabel}.csv","button":"Exporter les déplacements en CSV","modal":{"button":{"close":"Fermer","viewInDrive":"Voir dans Drive"},"title":"Exportation","content":{"done":"Le fichier \\"%{filename}\\" a été créé dans le dossier \\"Drive%{pathAppDir}\\" de votre Cozy.","progress":"L’export de vos déplacements est en cours, merci de patienter..."}}},"emptyContent":{"welcome":{"title":"Bienvenue sur votre Coach CO2","text":"Améliorons ensemble notre territoire.\\n\\nCette application vous permettra d’enregistrer tous vos déplacements, d’en comprendre l’impact en émission de CO2, de vous comparer avec la moyenne des utilisateurs, etc.","textA":"Cette application, disponible gratuitement pendant %{maxDaysToCapture} jours dans votre offre, vous permettra d\'enregistrer tous vos déplacements, d\'en comprendre l\'impact en émission de CO2, de suivre votre éligibilité à la prime vélo, de vous comparer avec la moyenne des utilisateurs, etc.","textB":"Cette application, incluse dans l\'offre de votre Cozy, vous permettra d\'enregistrer tous vos déplacements, d\'en comprendre l\'impact en émission de CO2, de suivre votre éligibilité à la prime vélo, de vous comparer avec la moyenne des utilisateurs, etc.","textC":"Améliorons ensemble notre territoire.\\n\\nCette application, dont l\'usage vous est offert par votre %{sourceType} %{sourceName}, vous permettra d\'enregistrer tous vos déplacements, d\'en comprendre l\'impact en émission de CO2, de comptabiliser vos trajets en vélo, etc.","textD":"Cette application en phase expérimentale vous permettra d\'enregistrer tous vos déplacements, d\'en comprendre l\'impact en émission de CO2, de vous avertir dès que vous êtes éligible à la prime vélo de votre %{sourceType} %{sourceName}, etc.","action":"C\'est parti !"},"installApp":{"title":"Détecter vos déplacements\\navec l\'app Cozy Cloud","text":"Installer l\'application Cozy Cloud sur votre mobile pour enregistrer tous vos déplacements, en comprendre l\'impact en émission de CO2, comptabiliser vos trajets en vélo, etc.","action":"Installer l\'app"},"GPSStandby":{"title":"Localisation détectée","text":"Votre premier trajet sera affiché ici quelques heures après que vous l\'ayez effectué."},"changeAccount":{"title":"Aucun déplacement","text":"Aucun déplacement n’a encore été détecté depuis la source de données sélectionnée.","action":"Changer la source de données"}},"manifest":{"short_description":"Conservez l\'historique de vos déplacements et analysez leurs impacts sur l\'environnement.","long_description":"S’il vous arrive de chercher des réponses à certaines de ces questions :\\n- Quelle distance ai-je parcourue **à pied** cette semaine ?\\n- Si j\'achetais une voiture **électrique**, quel serait l\'impact sur ma facture de carburant ?\\n- Serait-il pertinent pour moi de **louer une voiture au lieu d’en posséder une**, à la vue de mon usage réel ?\\n- Comment **retrouver le départ de ce sentier** enchanteur que j\'avais trouvé par hasard il y a deux ans ?\\n- Que représentent **mes voyages en avion** dans mes émissions annuelles de CO2 ?\\n- Combien de **trajets domicile/travail** ai-je réalisé en vélo cette année ?\\n- Et si je gardais un **historique précis de** tous les lieux que j’ai visités pendant **mes voyages ?**\\n- En tant qu’entreprise, comment pourrais-je rendre **ma prime vélo** (FMD) plus efficace ?\\n\\n... alors l\'application CoachCO2 peut vous fournir des réponses ! Elle vous permettra aussi de **prendre conscience des enjeux** de mobilité, de questionner vos habitudes de déplacements, et peut-être de trouver des alternatives plus durables.\\n\\n&nbsp;\\n\\n**Et la confidentialité de ma vie privée ?**\\n\\n&nbsp;\\n\\nComme toujours dans votre Cozy : **vous êtes par défaut le seul** à avoir le droit d\'**accéder à vos données**. Et vous pourrez bien entendu aussi **les partager** avec qui vous souhaitez, pour la durée que vous souhaitez.\\n\\n&nbsp;\\n\\n**Puis-je faire avancer l\'écomobilité en partageant mes données anomymisées ?**\\n\\n&nbsp;\\n\\nOui, en plus de vous aider à prendre conscience de vos propres enjeux de mobilité, l\'objectif de l\'application CoachCO2 est de permettre l’émergence de nouvelles offres d’écomobilité grâce à des études basées sur des données anonymisées et préalablement agrégées comme les distances parcourues par moyens et objectifs de transport. Certaines **collectivités** françaises **y travaillent** déjà !\\n\\n&nbsp;\\n\\n**Et demain ?**\\n\\n&nbsp;\\n\\nCette mémoire de vos déplacements est stockée et sécurisée dans votre cloud personnel dans un **format standard réutilisable et exportable** à votre guise.\\n\\n&nbsp;\\n\\nL\'application CoachCO2 est elle-même régulièrement enrichie de **nouvelles fonctionnalités**. Elle est aujourd\'hui tournée vers la mobilité, demain d\'autres sources de CO2 pourront étendre son champ d\'action, comme par exemple la consommation énergétique de votre logement.\\n\\n&nbsp;\\n\\nDemain de nouvelles applications pourront vous offrir d\'**autres usages** grâce à la mémorisation de ces précieuses données de déplacements. Par exemple, construire pour vous les albums cartographiés de vos voyages ou activités passions, et les partager à vos proches sans obligatoirement utiliser les réseaux sociaux.\\n\\n&nbsp;\\n\\n**Remerciements et conditions d\'utilisation**\\n\\n&nbsp;\\n\\nCette application est aujourd\'hui développée et maintenue par Cozy Cloud comme un bien commun. Démarrée en 2021 grâce à l\'agglomération de **la Rochelle** et son programme Agremob, elle a ensuite été soutenue par le département des **Alpes-Maritimes**. Vous pouvez ainsi l\'utiliser gratuitement si vous auto-hébergez votre Cozy, ou en achetez l’hébergement à un tiers. Elle est ainsi disponible dans les offres Premium hébergées par Cozy Cloud (avec 1 mois d’essai gratuit dans l’offre découverte).","permissions":{"apps":{"description":"Utilisé par la cozy-bar pour afficher les icônes des applications"},"settings":{"description":"Utilisé par le cozy-bar pour afficher Claudy et savoir quelles applications sont à venir"},"accounts":{"description":"Utilisé pour obtenir un compte konnector"},"files":{"description":"Utilisé pour accéder aux fichiers de sauvegarde de votre exportation de voyages"},"geojson-timeseries":{"description":"Utilisé pour afficher les séries temporelles geojson"},"coachco2.settings":{"description":"Utilisé pour gérer les paramètres de votre Coach CO2"}}},"dacc":{"settings":{"anonymous_participation":"Participer anonymement au calcul des émissions moyennes de CO2","showAlerter":"Emission CO2 : afficher l\'alerter DACC sur la homepage"},"tripsCard":{"label":"Comparez vos émissions à la moyenne des autres utilisateurs de l’application ?","discard":"Non, merci","accept":"Comparer"},"compareDialog":{"title":"Comparez-vous anonymement","primaryText":"Afin de constituer la moyenne des émissions des utilisateurs, et parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos données sans votre demande explicite, il va vous demander le droit d\'envoyer cette donnée.","secondaryText":"Ces données seront agrégées et anonymes, elles ne contiendront aucun identifiant ni lieux.","action":"J\'ai compris"},"permissionsDialog":{"title":"Demande de permissions","primaryText":"L’application Coach CO2 demande les permissions suivantes à votre Cozy :","secondaryText":"Une fois autorisées, les permissions pourront être modifiées dans les paramètres","why_asking":"Pourquoi me demander ces permissions ?","export_outside":"Exporter hors du Cozy","anonymized_emissions":"Mes émissions de CO2 anonymisées","anonymized_bikegoal_progression":"Ma progression de façon anonyme","accept":"Toujours autoriser","refuse":"Refuser"},"reasonsDialog":{"title":"Motifs de permissions","content":"Parce que votre Cozy vous a fait la promesse de ne jamais divulguer vos données privées, il vous demandera toujours le droit de laisser une application les envoyer à l\'extérieur."}},"vericalBarChart":{"title":"Émissions de CO2","legend":{"yours":"Vos émissions","average":"Moyennes des utilisateurs de l\'app"}},"bikeGoal":{"title":"Aller au travail à vélo","yearly_goal_progression":"%{days}/%{daysToReach} jours \\npar an","goal_progression":"%{days}/%{daysToReach} jours","my_progression":"Ma progression annuelle","average_progression":"Progression moy. de mon organisation","average_progression_noValue":"Progression moy. des autres utilisateurs","achievement_certificate":"Attestation de réussite","goal":"Objectif","goals":"Objectifs","days":"jours","empty":{"title":"Vos déplacements éligibles à l\'objectif vélo seront comptabilisés et affichés ici."},"about":{"title":"À propos de l’objectif","intro":{"title":"Introduction","content":"Afin d’encourager le recours à des modes de transports alternatifs et durables, la mise en œuvre du forfait mobilités durables est entré en vigueur le 10 mai 2020.\\n\\nAinsi les collaborateurs et agent qui font le choix d\'un mode de transport alternatif et durable pour leur trajet domicile-travail pourront recevoir une somme de leur employeur si celui-ci met en place ce dispositif."},"how_trips_detected":{"title":"Comment sont détectés mes trajets ?","content":"Vos trajets domicile-travail à vélo seront automatiquement détectés à partir de vos horaires et de votre vitesse.\\n\\nSi un trajet n’est pas automatiquement qualifié en “Aller-retour au travail”, ouvrez le détail du trajet et modifiez le motif du déplacement.\\n\\nSi le mode de transport d’un trajet n’est pas automatiquement détecté en “vélo”, ouvrez le détail du trajet et modifiez le mode de transport en “vélo”."},"once_goal_reach":{"title":"Que faire une fois l’objectif atteint ?","optional":"Dernière étape","content":"Une fois l\'objectif atteint, vous pourrez vous en féliciter ! Et il vous sera alors possible de générer une attestation sur l\'honneur que vous pourrez transmettre à votre employeur."}},"deactivate":{"deactivate":"Désactiver","title":"Souhaitez-vous vraiment ne plus participer à l’objectif ?","content":"Vous pourrez toujours choisir d’y participer à nouveau depuis les paramètres de l’application.","stop_participate":"Ne plus participer","cancel":"Annuler"},"alert":{"success":{"text":"Félicitations, vous avez atteint l’objectif “Aller travailler à vélo” 🎉","action":"Bénéficier de mon attestation |||| Bénéficier de mon forfait de %{smart_count}€"},"title":"Soyez acteur du changement, allez travailler à vélo !","text":"Suivez vos trajets et générez une attestation à destination de votre employeur s\'il propose la prime Forfait Mobilité Durable (FMD).","actions":{"participate":"Participer","discard":"non, merci"}},"edit":{"modify":"Modifier","title":"Modifier l\'objectif","firstname":"Prénom","lastname":"Nom","daysToReach":"Objectif à atteindre","compare_progress":"Comparer ma progression avec celle de mon organisation","compare_progress_noValue":"Comparer ma progression avec celle des autres utilisateurs","cancel":"Annuler","submit":"Ok","required":"Ce champ est obligatoire"},"settings":{"participation":"Participer à l\'objectif “Aller au travail à vélo”","showAlerter":"Objectif vélo : afficher l\'infobulle de participation sur la homepage","hideOnboarding":"Objectif vélo : masquer l\'onboarding","sendToDACC":"Objectif vélo : activer le DACC","showAlerterSuccess":"Objectif vélo : forcer l\'affichage de l\'alerte de succès sur la homepage"},"onboarding":{"title":"Objectif : Aller travailler à vélo","actions":{"finish":"Terminer","previous":"Précédent","next":"Suivant"},"steps":{"naming":{"title":"Nom et prénom","nameLegend":"Renseigner les informations suivantes afin de générer l’attestation de réussite à votre nom :"},"daysToReach":{"title":"Fixez-vous un objectif","legend":"Définissez un nombre de jours à vélo ou trottinette pour vos trajets domicile-travail et suivez votre avancement avec votre Coach CO2.\\n\\nUne fois votre objectif atteint, vous recevrez une alerte ainsi qu’une attestation de réussite à transmettre à votre employeur.","error":"Définissez un objectif plus réaliste. Entrer une valeur supérieure à 0."},"comparison":{"comparisonLegend":"Il vous est possible d’afficher la progression moyenne des membres de votre organisation %{sourceName} qui participent à l’objectif. Pour cela, il vous sera demandé de participer également à la constitution de cette moyenne.\\n\\nVos données de progression seront agrégées et envoyées anonymement, elles ne contiendront aucun identifiant ni lieux.","comparisonLegend_noValue":"Il vous est possible d’afficher la progression moyenne des autres utilisateurs qui participent à l’objectif. Pour cela, il vous sera demandé de participer également à la constitution de cette moyenne.\\n\\nVos données de progression seront agrégées et envoyées anonymement, elles ne contiendront aucun identifiant ni lieux.","compare":"Comparer ma progression","doNotCompare":"Ne pas comparer ma progression"}}},"certificateGeneration":{"title":"Félicitations, vous avez atteint l’objectif “Aller travailler à vélo”","content":"Une attestation a été générée pour attester de votre succès pour l’année %{year}. Transférez-la dès maintenant par email à votre employeur. |||| Une attestation a été générée pour attester de votre succès pour l’année %{year}. Transférez-la dès maintenant par email à votre employeur pour recevoir %{smart_count}€ !","actions":{"show":"Certificat - Aller travailler à vélo.pdf","generate":"Générer une attestation","regenerate":"Générer une nouvelle attestation","understood":"J\'ai compris"}}},"geolocationTracking":{"tooltip":{"title":"Vos nouveaux trajets ne sont pas mémorisés","text":"Enregistrez automatiquement tous vos déplacements et découvrez votre empreinte carbone.","action":"Configurer"},"locationRefusedDialog":{"description":"Votre Cozy a besoin d\'accéder à des données supplémentaires afin de vous aider à analyser vos déplacements. Elles ne seront JAMAIS transmises à qui que ce soit sans votre demande explicite.\\n\\nVous allez être redirigé vers les paramètres de l\'app afin de l\'autoriser à TOUJOURS accéder à la position de votre téléphone, donc aussi lorsque l\'app n\'est pas utilisée, et au données d\'ACTIVITÉ PHYSIQUE, mouvements et formes."},"settings":{"enable":"Enregistrer mes déplacements avec mon mobile (GPS)","sendLogs":"Envoyer mes logs au support","forceUploadData":"Forcer l\'upload des données","copyIdentifier":"Copier l\'identifiant OpenPATH","createdOn":"créé le"}},"Modes":{"DefaultDialog":{"primary":"Définir comme transport par défaut pour cette catégorie ?","secondary":"Le mode de transport sera automatiquement sélectionné comme par défaut pour tous les futurs trajets détectés pour ce type de transport.","actions":{"save":"Enregistrer","cancel":"Annuler"}}},"PDF":{"name":"Attestation - Aller travailler à vélo (%{year}).pdf","title":"Attestation sur l\'honneur\\n de le réussite de l\'objectif\\n du forfait mobilités durables","date":"Le %{currentDateFormatted} à %{currentTimeFormatted}","recipient":"Employeur : %{sourceName}","paragraph01":"Je soussigné(e) %{username} certifie sur l’honneur avoir atteint l\'objectif forfait mobilités durables de %{daysToReach} jours en effectuant mes déplacements du domicile vers mon travail en vélo du 1er janvier au 31 décembre %{year}.","paragraph02":"En plus de cette attestation, je tiens à disposition de mon employeur tout justificatif utile d\'utilisation effective du vélo comme les relevés de facture ou de paiement, d’assurances ou d’entretien de mon vélo.","paragraph03":"Fait pour servir et valoir ce que de droit.","signature":"Signature : %{username}"},"centreValDeLoireExpe":{"settings":{"sendToDACC":"Participer à l’expérimentation Mobile CVL de la région"}}}')},IvPY:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"z",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"j",(function(){return i})),a.d(t,"k",(function(){return c})),a.d(t,"m",(function(){return l})),a.d(t,"n",(function(){return s})),a.d(t,"v",(function(){return u})),a.d(t,"w",(function(){return d})),a.d(t,"q",(function(){return m})),a.d(t,"r",(function(){return p})),a.d(t,"eb",(function(){return f})),a.d(t,"gb",(function(){return b})),a.d(t,"ib",(function(){return v})),a.d(t,"vb",(function(){return g})),a.d(t,"Eb",(function(){return y})),a.d(t,"Gb",(function(){return h})),a.d(t,"Ib",(function(){return E})),a.d(t,"Lb",(function(){return O})),a.d(t,"Nb",(function(){return C})),a.d(t,"R",(function(){return j})),a.d(t,"jb",(function(){return w})),a.d(t,"tb",(function(){return x})),a.d(t,"h",(function(){return k})),a.d(t,"t",(function(){return D})),a.d(t,"rb",(function(){return _})),a.d(t,"Pb",(function(){return P})),a.d(t,"y",(function(){return T})),a.d(t,"wb",(function(){return S})),a.d(t,"Jb",(function(){return A})),a.d(t,"mb",(function(){return M})),a.d(t,"O",(function(){return N})),a.d(t,"Cb",(function(){return L})),a.d(t,"N",(function(){return R})),a.d(t,"nb",(function(){return I})),a.d(t,"lb",(function(){return F})),a.d(t,"Q",(function(){return G})),a.d(t,"Ob",(function(){return z})),a.d(t,"qb",(function(){return B})),a.d(t,"pb",(function(){return q})),a.d(t,"ob",(function(){return Z})),a.d(t,"c",(function(){return Q})),a.d(t,"xb",(function(){return V})),a.d(t,"T",(function(){return U})),a.d(t,"e",(function(){return H})),a.d(t,"Hb",(function(){return Y})),a.d(t,"d",(function(){return W})),a.d(t,"b",(function(){return J})),a.d(t,"l",(function(){return K})),a.d(t,"fb",(function(){return X})),a.d(t,"hb",(function(){return $})),a.d(t,"s",(function(){return ee})),a.d(t,"u",(function(){return te})),a.d(t,"p",(function(){return ae})),a.d(t,"o",(function(){return ne})),a.d(t,"g",(function(){return re})),a.d(t,"i",(function(){return oe})),a.d(t,"ub",(function(){return ie})),a.d(t,"db",(function(){return ce})),a.d(t,"Mb",(function(){return le})),a.d(t,"Kb",(function(){return se})),a.d(t,"M",(function(){return ue})),a.d(t,"bb",(function(){return de})),a.d(t,"ab",(function(){return me})),a.d(t,"Z",(function(){return pe})),a.d(t,"cb",(function(){return fe})),a.d(t,"Bb",(function(){return be})),a.d(t,"U",(function(){return ve})),a.d(t,"P",(function(){return ge})),a.d(t,"X",(function(){return ye})),a.d(t,"W",(function(){return he})),a.d(t,"V",(function(){return Ee})),a.d(t,"Y",(function(){return Oe})),a.d(t,"Ab",(function(){return Ce})),a.d(t,"zb",(function(){return je})),a.d(t,"yb",(function(){return we})),a.d(t,"x",(function(){return xe})),a.d(t,"D",(function(){return ke})),a.d(t,"B",(function(){return De})),a.d(t,"C",(function(){return _e})),a.d(t,"J",(function(){return Pe})),a.d(t,"I",(function(){return Te})),a.d(t,"L",(function(){return Se})),a.d(t,"K",(function(){return Ae})),a.d(t,"F",(function(){return Me})),a.d(t,"E",(function(){return Ne})),a.d(t,"H",(function(){return Le})),a.d(t,"G",(function(){return Re})),a.d(t,"A",(function(){return Ie})),a.d(t,"Fb",(function(){return Fe})),a.d(t,"S",(function(){return Ge})),a.d(t,"sb",(function(){return ze})),a.d(t,"Db",(function(){return Be})),a.d(t,"kb",(function(){return qe}));var n="coachco2",r={CVL:"Centre-Val de Loire"},o="AIR_OR_HSR",i="BICYCLING_ELECTRIC",c="BICYCLING",l="BUS_ELECTRIC",s="BUS",u="CAR_ELECTRIC",d="CAR",m="CARPOOL_ELECTRIC",p="CARPOOL",f="MOPED",b="MOTO_INF_250",v="MOTO_SUP_250",g="SCOOTER_ELECTRIC",y="SUBWAY",h="TRAIN",E="TRAMWAY",O="UNKNOWN",C="WALKING",j="IN_VEHICLE",w="ON_FOOT",x="RUNNING",k={name:"BICYCLING_CATEGORY",modes:[c,i,g]},D={name:"CAR_CATEGORY",modes:[d,u,p,m,b,v,f]},_={name:"PUBLIC_TRANSPORT_CATEGORY",modes:[s,l,h,E,y]},P="WORK",T="COMMUTE",S="SHOPPING",A="TRAVEL",M="PERSONAL_MED",N="EXERCISE",L="SPORT",R="ENTERTAINMENT",I="PICK_DROP",F="OTHER_PURPOSE",G="home",z="work",B=.258,q=.187,Z=.152,Q=[B,q,Z],V=1e3,U=3500,H=[.00173,.00529,.0248],Y=.003,W=[.0025,.0022,.0041,.00472,.00298],J=[.146,.137,.129],K=.0217,X=.0604,$=.165,ee=.192,te=.0198,ae=.0099,ne=.096,re=0,oe=0,ie=0,ce=.064,le=0,se=0,ue=74.25,de=2,me=3.5,pe=5,fe=7,be=3,ve=5,ge=6.5,ye=5.8,he=8,Ee=10,Oe=15.8,Ce=15,je=22.4,we=25.6,xe={tripId:"Trip_Id",tripStartDisplayName:"Trip_Start_Display_Name",tripArrivalDisplayName:"Trip_Arrival_Display_Name",tripPurpose:"Trip_Purpose",tripStartDate:"Trip_Start_Date",tripEndDate:"Trip_End_Date",sectionStartDate:"Section_Start_Date",sectionEndDate:"Section_End_Date",sectionDuration:"Section_Duration",sectionDistance:"Section_Distance",sectionMode:"Section_Mode",sectionCoordinates:"Section_Coordinates",sectionDistances:"Section_Distances",sectionTimestamps:"Section_Timestamps",sectionSpeeds:"Section_Speeds"},ke="co2-emissions-monthly",De=Object.freeze({is_tracemob_expe:!0}),_e="bike-goal-yearly",Pe="trips-count-monthly",Te="trips-CO2-monthly",Se="trips-duration-monthly",Ae="trips-distance-monthly",Me="sections-count-monthly",Ne="sections-CO2-monthly",Le="sections-duration-monthly",Re="sections-distance-monthly",Ie="experimentation-consent",Fe="timeseriesWithoutAggregateMigration",Ge=12,ze="recurringPurposes",Be=50,qe="openpath"},J3iu:function(e,t){e.exports="/img/icon.aa5e3ec7c4ab374b229f92d96f796ca6.svg"},PFMP:function(e,t){e.exports="/img/location-detected.c862fbaed6fc77b32a0bbb165b330a48.svg"},"PG+o":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return s}));var n=a("HZZ/"),r=a.n(n),o=a("hJxD"),i=a.n(o),c=a("IvPY"),l=a("Ev3x"),s=(a("8XZk"),function(){var e=r()(i.a.mark((function e(t,a){var n,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},r=n.fields,e.next=3,t.collection(l.j).create("service",{name:a,slug:c.f,fields:r});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}).call(this,a("JtWf"))},VDMD:function(e,t){e.exports="/img/background.ada7027117d5bc0de6d2c11f52c6e096.png"},eUFy:function(e,t,a){var n={"./en":"2maa","./en.json":"2maa","./fr":"Hsuv","./fr.json":"Hsuv"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="eUFy"},iC3e:function(e,t,a){var n={"./en.json":"5dwM","./fr.json":"eW7n","./nl_NL.json":"w7vk"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="iC3e"},kyG8:function(e,t,a){e.exports={"CertificateGeneration-root":"CertificateGeneration-root--wWT2w"}},nXPL:function(e,t,a){"use strict";a.r(t);a("k37E"),a("QLHQ"),a("7SaY");var n=a("ivGQ"),r=a.n(n),o=a("iOQm"),i=a("UdSB"),c=a.n(i),l=a("XkwL"),s=a.n(l),u=a("J58c"),d=a.n(u),m=a("Ev3x");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=function(e){var t=e.client,a=e.setting,n=e.account;return t.save(f(f({},a),{},{account:n,_type:m.c}))},v=function(e){var t,a=null==e||null===(t=e.aggregation)||void 0===t?void 0:t.sections;if(!a)return e;var n=a.sort((function(e,t){return new Date(e.startDate).getTime()-new Date(t.startDate).getTime()})),r=f({},e);return r.aggregation.sections=n,r},g=a("xEu0"),y=a.n(g),h=function(e,t,a){var n=Object(g.useClient)();if(e.isLoading||t.isLoading)return{account:null,isAccountLoading:!0};if(null===a){var r=e.data[0];if(r)return{account:r.account,isAccountLoading:!1};var o=t.data[0];return o?(b({client:n,setting:r,account:o}),{account:o,isAccountLoading:!1}):{account:null,isAccountLoading:!1}}return{account:a,isAccountLoading:!1}},E=a("HZZ/"),O=a.n(E),C=a("hJxD"),j=a.n(C),w=a("L7Xp"),x=a("0d4v"),k=a("rfej"),D=a("6aJT"),_=a("HmmB"),P=a("IvPY");function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){var t=e.accountId,a=e.limitBy;return{definition:Object(g.Q)(m.i).where({"cozyMetadata.sourceAccount":t}).partialIndex({aggregation:{$exists:!0}}).select(["cozyMetadata.sourceAccount","startDate","endDate","title","aggregation"]).indexFields(["cozyMetadata.sourceAccount","startDate","endDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(a),options:{as:"".concat(m.i,"/sourceAccount/").concat(t,"/limitedBy/").concat(a),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.limit,r=void 0===n?1e3:n,o=Object(k.a)(e)||null,i=Object(w.a)(e)||null,c=e?"".concat(o.getFullYear(),"-").concat(o.getMonth()):"noDate",l=Object(g.Q)(m.i).where(S({"cozyMetadata.sourceAccount":t},e&&{startDate:{$gte:o.toISOString(),$lte:i.toISOString()}})).partialIndex({aggregation:{$exists:!0}}).select(["aggregation","title","cozyMetadata.sourceAccount","startDate","endDate"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).limitBy(r);return{definition:l,options:{as:"".concat(m.i,"/sourceAccount/").concat(t,"/date/").concat(c,"/limitedBy/").concat(r),fetchPolicy:y.a.fetchPolicies.olderThan(3e4),enabled:Boolean(e)&&Boolean(t)}}},N=function(e,t){var a=e.accountId,n=e.date,r=void 0===n?null:n,o={"cozyMetadata.sourceAccount":a};if(r){var i=Object(D.a)(new Date(r)).toISOString(),c=Object(x.a)(new Date(r)).toISOString();o.startDate={$gte:i,$lte:c}}else o.startDate={$gt:null};return{definition:Object(g.Q)(m.i).where(o).partialIndex({"aggregation.purpose":P.y,"aggregation.modes":{$in:[P.k,P.j,P.vb]}}).select(["startDate","endDate","title","aggregation","aggregation.modes","aggregation.purpose","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(m.i,"/sourceAccount/").concat(a,"/BikeCommute/"),fetchPolicy:y.a.fetchPolicies.olderThan(1e8),enabled:t}}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?100:t,n=e.withOnlyLogin,r=void 0===n||n,o=Object(g.Q)(m.a).partialIndex({account_type:{$or:["tracemob","openpath"]}}).limitBy(a);return r&&o.select(["auth.login","account_type"]),{definition:o,options:{as:"".concat(m.a,"/account_type/limitedBy/").concat(a,"/withOnlyLogin/").concat(r),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}},R=function(){return{definition:Object(g.Q)(m.c),options:{as:m.c,fetchPolicy:y.a.fetchPolicies.olderThan(1e8)}}},I=["data"],F=["data"],G=Object(n.createContext)(),z=function(){var e=Object(n.useContext)(G);if(!e)throw new Error("useAccountContext must be used within a AccountProvider");return e},B=function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.login},q=function(e){var t=e.children,a=Object(n.useState)(null),o=s()(a,2),i=o[0],l=o[1],u=Object(g.useClient)(),d=Object(n.useRef)(null),m=R(),p=Object(g.useQuery)(m.definition,m.options),f=p.data,v=c()(p,I),y=Object(g.isQueryLoading)(v),E=L(),O=Object(g.useQuery)(E.definition,E.options),C=O.data,j=c()(O,F),w=Object(g.isQueryLoading)(j),x=h({data:f,isLoading:y},{data:C,isLoading:w},i),k=x.account,D=x.isAccountLoading;null===d.current&&null!==k&&(l(k),d.current=k);var _=Object(n.useCallback)((function(e){b({client:u,setting:f[0],account:e}),l(e)}),[u,f]),P={accounts:C,account:i,setAccount:_,isAccountLoading:D};return Object(n.useEffect)((function(){(null==k?void 0:k._id)!==(null==i?void 0:i._id)&&null!==d.current&&(l(k),d.current=k)}),[k,i]),r.a.createElement(G.Provider,{value:P},t)},Z=a("Kv7L"),Q=a("8ZpT"),V=a.n(Q),U=a("DIBL"),H=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.lang,o=t.deviceName,e.next=3,Y({client:a,t:n,lang:r,deviceName:o});case 3:return i=e.sent,c=Object(U.a)(),l={account_type:P.kb,auth:{login:i},token:c},e.next=8,a.create(m.a,l);case 8:return e.abrupt("return",{login:i,password:c});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.lang,o=t.deviceName,i=o,s=o,c={definition:Object(g.Q)(m.a).where({"auth.login":s}).partialIndex({account_type:{$or:["tracemob","openpath"]}}).indexFields(["auth.login"]).select(["auth.login","account_type"]),options:{as:"".concat(m.a,"/account_type/login/").concat(s)}},e.next=5,a.query(c.definition,c.options);case 5:if(l=e.sent,0!==l.data.length){e.next=9;break}return e.abrupt("return",i);case 9:return e.abrupt("return","".concat(o," ").concat(n("geolocationTracking.settings.createdOn")," ").concat((new Date).toLocaleDateString(r)));case 10:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=O()(j.a.mark((function e(t,a,n){var r,o,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.call("getGeolocationTrackingStatus");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={enabled:!1,quotaExceeded:!1};case 5:r=e.t0,o=r.enabled,i=r.quotaExceeded,c=void 0!==i&&i,a(o),n(c);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),J=function(){var e=O()(j.a.mark((function e(t,a,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==t?void 0:t.call("setGeolocationTracking",!1);case 2:return e.next=4,W(t,a,n);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),K=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,p,f,b,v;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.lang,r=t.t,o=t.webviewIntent,i=t.setIsGeolocationTrackingEnabled,e.next=3,null==o?void 0:o.call("getGeolocationTrackingId");case 3:if(null!==e.sent){e.next=29;break}return e.next=7,null==o?void 0:o.call("getDeviceInfo");case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={deviceName:null};case 10:if(c=e.t0,!(l=c.deviceName)){e.next=29;break}return d={definition:Object(g.Q)(m.a).where({"cozyMetadata.createdAt":{$gt:null}}).partialIndex({account_type:"openpath",token:{$exists:!0}}).indexFields(["cozyMetadata.createdAt"]).sortBy([{"cozyMetadata.createdAt":"desc"}]).limitBy(1),options:{as:"".concat(m.a,"/account_type/openpath-with-token"),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}},e.next=16,a.query(d.definition,d.options);case 16:if(p=e.sent,f=p.data,null!=(b=null==f?void 0:f[0])&&b.token&&(null==b||null===(s=b.auth)||void 0===s?void 0:s.login)===l){e.next=26;break}return e.next=22,H({client:a,t:r,lang:n,deviceName:l});case 22:v=e.sent,u=v.password,e.next=27;break;case 26:u=b.token;case 27:return e.next=29,null==o?void 0:o.call("setGeolocationTrackingId",u);case 29:return e.next=31,null==o?void 0:o.call("setGeolocationTracking",!0);case 31:i(!0);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.client,n=t.lang,r=t.t,o=t.setIsGeolocationTrackingEnabled,i=t.permissions,c=t.webviewIntent,l=t.setShowLocationRequestableDialog,s=t.setShowLocationRefusedDialog,e.t1=i,e.t1){e.next=6;break}return e.next=5,null==c?void 0:c.call("checkPermissions","geolocationTracking");case 5:e.t1=e.sent;case 6:if(e.t0=e.t1,e.t0){e.next=9;break}e.t0={};case 9:if(!(u=e.t0).granted){e.next=15;break}return e.next=13,K({client:a,lang:n,t:r,webviewIntent:c,setIsGeolocationTrackingEnabled:o});case 13:e.next=16;break;case 15:u.canRequest?l(!0):s(!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=O()(j.a.mark((function e(t,a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(Z.isFlagshipApp)()||!V()("coachco2.GPSMemory.enabled")){e.next=15;break}return e.prev=1,e.next=4,null==t?void 0:t.call("isAvailable","geolocationTracking");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=null;case 7:n=e.t0,a(n),e.next=13;break;case 11:e.prev=11,e.t1=e.catch(1);case 13:e.next=16;break;case 15:a(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.webviewIntent,n=t.client,r=t.lang,o=t.t,i=t.setIsGeolocationTrackingEnabled,c=t.setShowLocationRequestableDialog,l=t.setShowLocationRefusedDialog,e.next=3,null==a?void 0:a.call("requestPermissions","geolocationTracking");case 3:return s=e.sent,e.next=6,X({client:n,lang:r,t:o,setIsGeolocationTrackingEnabled:i,permissions:s,webviewIntent:a,setShowLocationRequestableDialog:c,setShowLocationRefusedDialog:l});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=a("HROS"),ae=a("ZOg5"),ne=a("Aaol"),re=Object(n.createContext)(),oe=function(){var e=Object(n.useContext)(re);if(!e)throw new Error("useGeolocationTracking must be used within a GeolocationTrackingProvider");return e},ie=function(e){var t=e.children,a=Object(te.useWebviewIntent)(),o=Object(g.useClient)(),i=Object(ne.e)(),c=i.t,l=i.lang,u=Object(n.useState)(null),d=s()(u,2),m=d[0],p=d[1],f=Object(n.useState)(null),b=s()(f,2),v=b[0],y=b[1],h=Object(n.useState)(null),E=s()(h,2),C=E[0],w=E[1],x=Object(n.useState)(!1),k=s()(x,2),D=k[0],_=k[1],P=Object(n.useState)(!1),T=s()(P,2),S=T[0],A=T[1];Object(n.useEffect)((function(){$(a,p),W(a,y,w)}),[a]);var M=Object(n.useMemo)((function(){return{isGeolocationTrackingAvailable:m,isGeolocationTrackingEnabled:v,isGeolocationQuotaExceeded:C,disableGeolocationTracking:function(){return J(a,y,w)},checkPermissionsAndEnableTrackingOrShowDialog:function(e){return X({permissions:e,client:o,lang:l,t:c,setIsGeolocationTrackingEnabled:y,webviewIntent:a,setShowLocationRequestableDialog:_,setShowLocationRefusedDialog:A})}}}),[m,v,C,a,o,l,c]);return r.a.createElement(re.Provider,{value:M},t,D&&r.a.createElement(ae.a,{onAllow:O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!1),!Object(Z.isAndroid)()){e.next=6;break}return e.next=4,ee({webviewIntent:a,client:o,lang:l,t:c,setIsGeolocationTrackingEnabled:y,setShowLocationRequestableDialog:_,setShowLocationRefusedDialog:A});case 4:e.next=8;break;case 6:return e.next=8,K({client:o,lang:l,t:c,webviewIntent:a,setIsGeolocationTrackingEnabled:y,setIsGeolocationQuotaExceeded:w});case 8:case"end":return e.stop()}}),e)}))),onClose:function(){_(!1)}}),S&&r.a.createElement(ae.a,{onAllow:O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),e.next=3,a.call("openAppOSSettings");case 3:case"end":return e.stop()}}),e)}))),onClose:function(){A(!1)},description:c("geolocationTracking.locationRefusedDialog.description")}))},ce=Object(n.createContext)(),le=function(){var e=Object(n.useContext)(ce);if(!e)throw new Error("useSelectDatesContext must be used within a SelectDatesProvider");return e},se=function(e){var t=e.children,a=Object(n.useState)(null),o=s()(a,2),i=o[0],c=o[1],l=Object(n.useState)(!0),u=s()(l,2),d=u[0],m=u[1],p=r.a.useState(null),f=s()(p,2),b={selectedDate:i,setSelectedDate:c,isSelectedDateLoading:d,setIsSelectedDateLoading:m,options:f[0],setOptions:f[1]};return r.a.createElement(ce.Provider,{value:b},t)},ue=a("vTbG"),de=a("Rx+m"),me=a("5LIP"),pe=a("0Lot"),fe=a("BqmN"),be=Object(pe.a)({disableGlobal:!0}),ve=function(e){var t=e.client,a=e.lang,n=e.polyglot,o=e.children;return r.a.createElement(te.WebviewIntentProvider,null,r.a.createElement(fe.b,{generateClassName:be},r.a.createElement(g.CozyProvider,{client:t},r.a.createElement(g.RealTimeQueries,{doctype:m.i}),r.a.createElement(g.RealTimeQueries,{doctype:m.c}),r.a.createElement(g.RealTimeQueries,{doctype:m.h}),r.a.createElement(g.RealTimeQueries,{doctype:m.d}),r.a.createElement(g.RealTimeQueries,{doctype:m.a}),r.a.createElement(q,null,r.a.createElement(se,null,r.a.createElement(ne.b,{lang:a,polyglot:n},r.a.createElement(me.a,null,r.a.createElement(de.a,null,r.a.createElement(ue.a,null,r.a.createElement(ie,null,o))))))))))},ge=a("mZuE"),ye=a("6Vpj"),he=a("uRLs"),Ee=a.n(he),Oe=a("rUPj"),Ce=a.n(Oe),je=a("6/w4"),we=a.n(je),xe=a("QVGT"),ke=a("rinC"),De=a("uywR"),_e=a("eBtv"),Pe=a("Dzzq"),Te=a("6CkU"),Se=a("x9kU"),Ae=a("Dt6a"),Me=a("tLIM"),Ne=a("GLkt"),Le=a("Npr/"),Re=a("t+nR"),Ie=a("4+jE"),Fe=a("P6yu"),Ge=a("XAJ7"),ze=a("B7lc"),Be=a("P/GF"),qe=a("I46i"),Ze=a("KeZy"),Qe=a("u/Gg"),Ve=a("Ins2"),Ue=a("DK1t"),He=a("B6UP"),Ye=a("keV2"),We=a("6+xZ"),Je=we()("components/helpers"),Ke=[P.a,P.j,P.k,P.m,P.n,P.v,P.w,P.R,P.q,P.r,P.gb,P.ib,P.vb,P.eb,P.Eb,P.Gb,P.Ib,P.Nb,P.jb,P.tb,P.Lb],Xe=function e(t){switch(t){case P.a:return ze.a;case P.j:return Se.a;case P.k:return xe.a;case P.m:return ke.a;case P.w:case P.R:return De.a;case P.n:return ke.a;case P.v:case P.q:return Ae.a;case P.r:return _e.a;case P.gb:case P.ib:return Re.a;case P.vb:return Me.a;case P.eb:return Le.a;case P.Eb:return Qe.a;case P.Gb:return Ve.a;case P.Ib:return Ue.a;case P.Nb:case P.jb:case P.tb:return Ye.a;case P.Lb:return He.a;default:return Je.info("Unknown mode ".concat(t),"pickModeIcon"),e(P.Lb)}},$e=function e(t){switch(t){case P.a:return"#F05759";case P.j:return"#B3BF26";case P.k:return"#15CACD";case P.vb:return"#84C6AA";case P.m:return"#F85AA8";case P.n:return"#BA5AE8";case P.v:return"#FC881C";case P.w:case P.R:return"#FF7B5E";case P.q:return"#80A5E1";case P.r:return"#1CAAE8";case P.gb:return"#C78542";case P.ib:return"#C8A76F";case P.eb:return"#E3BE7D";case P.Eb:return"#8978FF";case P.Gb:case P.Ib:return"#F1B61E";case P.Lb:return"#A4A7AC";case P.Nb:case P.jb:case P.tb:return"#21B930";default:return Je.info("Unknown mode ".concat(t),"modeToColor"),e(P.Lb)}},et=[P.y,P.Pb,P.wb,P.mb,P.nb,P.Cb,P.O,P.N,P.Jb,P.lb],tt=function e(t){switch(t){case P.y:return Te.a;case P.Pb:return We.a;case P.wb:return qe.a;case P.Jb:return Ie.a;case P.mb:return Ge.a;case P.O:return Ne.a;case P.N:return Pe.a;case P.nb:return Be.a;case P.Cb:return Ze.a;case P.lb:return Fe.a;default:return Je.info("Unknown purpose ".concat(t),"pickPurposeIcon"),e(P.lb)}},at=function e(t){switch(t){case P.y:return"#BA5AE8";case P.Pb:return"#8978FF";case P.wb:return"#FF7B5E";case P.Jb:return"#15CACD";case P.mb:return"#1CAAE8";case P.O:return"#21B930";case P.N:return"#F85AA8";case P.nb:return"#C78542";case P.Cb:return"#B3BF26";case P.lb:return"#A4A7AC";default:return Je.info("Unknown purpose ".concat(t),"purposeToColor"),e(P.lb)}},nt=function(e){var t=function(e){return parseFloat((e.reduce((function(e,t){return e+t}),0)/e.length).toFixed(5))};switch(e){case P.a:return t(P.c);case P.j:return P.i;case P.k:return P.g;case P.m:return P.l;case P.n:return t(P.b);case P.v:return P.u;case P.w:case P.R:return P.s;case P.q:return P.p;case P.r:return P.o;case P.gb:return P.fb;case P.ib:return P.hb;case P.vb:return P.ub;case P.eb:return P.db;case P.Eb:return t(P.d);case P.Gb:return t(P.e);case P.Ib:return P.Hb;case P.Lb:return P.Kb;case P.Nb:case P.jb:case P.tb:return P.Mb;default:return P.Kb}},rt=function(e){return 1e3*parseFloat(e)},ot=function(e){return e===P.a?"(".concat(rt(P.ob),"~").concat(rt(P.qb),") g/km"):"".concat(it(e)," g/km")},it=function(e){return Math.round(rt(nt(e)))},ct=function e(t){switch(t){case P.a:case P.Nb:case P.jb:case P.tb:case P.Lb:return null;case P.j:case P.k:case P.vb:return P.h.name;case P.m:case P.n:case P.Eb:case P.Gb:case P.Ib:return P.rb.name;case P.v:case P.w:case P.R:case P.q:case P.r:case P.gb:case P.ib:case P.eb:return P.t.name;default:return Ce()("info","Unknown mode ".concat(t),void 0,"service/timeseriesWithoutAggregateMigration"),Je.info("Unknown mode ".concat(t),"modeToCategory"),e(P.Lb)}},lt=a("Qugh"),st=a("kjpz"),ut=function(e){var t=e.icon,a=e.color,n=e.faded,o=e.ghost,i=function(e){var t=e.faded,a=e.color;return t?{color:a||"var(--primaryColor)",backgroundColor:"var(--paperBackgroundColor)",border:"1px solid var(--borderMainColor)"}:{backgroundColor:a}}({faded:n,color:a});return r.a.createElement(lt.b,{style:i,icon:t,size:32,ghost:o})},dt=function(e){var t=e.attribute;return r.a.createElement(ut,{icon:tt(t),color:at(t),ghost:t===P.lb})},mt=function(e){var t=e.attribute,a=e.defaultColor,n=Object(st.a)();return r.a.createElement(ut,{icon:Xe(t),color:a?n.palette.primary.main:$e(t),faded:!0})},pt=a("e0b0"),ft=a.n(pt),bt=function(e){var t="m",a=e;return e>1e3&&(t="km",a=e/1e3),"".concat(Math.round(a)," ").concat(t)},vt=function(e){return"".concat(Math.round(100*e)/100," kg")},gt=function(e,t){var a=["fr","en"].includes(t)?t:"en";return ft()(1e3*e,{delimiter:" ",largest:2,round:!0,units:["h","m"],language:a,languages:{fr:{d:function(){return"j"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}},en:{d:function(){return"d"},h:function(){return"h"},m:function(){return"min"},s:function(){return"s"},ms:function(){return"ms"}}}})},yt=function(e){var t=e.f,a=e.lang,n=e.date;return t(n,"fr"===a?"HH[h]mm":"HH:mm")},ht=function(e){return 3.6*(e.reduce((function(e,t){return e+t}),0)/e.length)},Et=a("xr2j"),Ot=a("AHiN"),Ct=a("Mb5X"),jt=a("4jS1"),wt=a("i5f2"),xt=a("dUf/"),kt=a("9Ub/"),Dt={co2:{fontWeight:700}},_t={modes:mt,purposes:dt},Pt=function(e){var t=e.type,a=e.sortedTimeserieKey,n=_t[t];return r.a.createElement(n,{attribute:a})},Tt=function(e){var t=e.sortedTimeserie,a=e.totalCO2,n=e.type,o=Object(ne.e)().t,i=Object(ge.h)(),c=s()(t,2),l=c[0],u=c[1],d=u.timeseries.length,m=u.totalCO2,p=function(e,t){if(0===t)return"0%";var a=(100*e/t).toFixed(2).split("."),n=s()(a,2),r=n[0],o=n[1];return"00"===o?"".concat(r,"%"):"".concat(r,".").concat(o,"%")}(m,a);return 0===d&&0===m?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(jt.b,{"data-testid":"ListItem",onClick:function(){return i("/analysis/".concat(n,"/").concat(l))},button:!0},r.a.createElement(wt.a,null,r.a.createElement(Pt,{type:n,sortedTimeserieKey:l})),r.a.createElement(xt.a,{primary:o("trips.".concat(n,".").concat(l)),secondary:"".concat(p," · ").concat(o("analysis.travels",d))}),r.a.createElement(kt.a,{style:Dt.co2,variant:"body2"},vt(m)),r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Ct.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Et.a,null))},St=function(e,t,a){var n=Object.keys(e),r=Object.values(e),o="modes"===t?$e:at,i=r.map((function(e){return e.totalCO2})),c=n.map((function(e){return o(e)}));return{data:{labels:n.map((function(e){return a("trips.".concat(t,".").concat(e))})),datasets:[{id:1,data:i,backgroundColor:c}]},options:{plugins:{tooltip:{displayColors:!1,callbacks:{label:function(e){return"".concat(e.label," ").concat(vt(e.raw))}}}}}}},At=a("Ht4I"),Mt=a("ii0b"),Nt=a.n(Mt),Lt=a("QGb3"),Rt=a.n(Lt),It=a("qmdU"),Ft=a("0r57"),Gt=a("8wm5"),zt=a("C+aL"),Bt=a.n(zt),qt=a("/yh+"),Zt=a.n(qt),Qt=a("3UCn"),Vt=a.n(Qt),Ut=a("wXrU"),Ht=a.n(Ut),Yt=a("XA6X"),Wt=a.n(Yt),Jt=a("PpCK"),Kt=a.n(Jt),Xt=a("nVpl"),$t=a.n(Xt),ea=a("FpXT"),ta=a.n(ea),aa=a("efAt"),na=a.n(aa),ra=a("Jb16"),oa=a.n(ra),ia=a("gSRL"),ca=a.n(ia),la=a("DWnN");function sa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ua(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var da=function(e){return"start"===e?"startPlaceContact":"end"===e?"endPlaceContact":null},ma=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return{address:null==n||null===(t=n.address)||void 0===t?void 0:t.find((function(e,t){var n,i,c;if(e.id===(null===(n=r.relationships[da(o)])||void 0===n||null===(i=n.data)||void 0===i||null===(c=i.metadata)||void 0===c?void 0:c.addressId))return a=t,e})),index:a}},pa=function(e){var t,a,n,r=e.contact,o=e.timeserie,i=e.type;return null===(t=ma({contact:r,timeserie:o,type:i}))||void 0===t||null===(a=t.address)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.cozyCategory},fa=function(e){var t,a,n=e.contact,r=e.timeserie,o=e.type;return null===(t=ma({contact:n,timeserie:r,type:o}))||void 0===t||null===(a=t.address)||void 0===a?void 0:a.type},ba=function(e,t){return e[da(t)]},va=function(e,t){var a;return!(null===(a=ba(e,t))||void 0===a||!a.data)},ga=function(e){var t,a=e.timeserie,n=e.type,r=e.t,o=null===(t=ba(a,n))||void 0===t?void 0:t.data;if(!o)return null;var i=!!o.me,c=pa({timeserie:a,type:n,contact:o}),l=fa({timeserie:a,type:n,contact:o}),s=Object(la.getDisplayName)(o);return c===P.Q&&i?r("contactToPlace.atHome"):l?i?l:"".concat(s," (").concat(l,")"):s},ya=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.type,o=t.t,i=t.contact,c=ma({contact:i,timeserie:n,type:r}),l=c.address,oa()(i.address,(function(e){return e.id&&e.id===l.id})),e.next=5,a.save(i);case 5:return e.next=7,ba(n,r).remove();case 7:return s=e.sent,u=s.data,ca()(u,"relationships.".concat(da(r),".data.metadata.addressId")),Wt()(u,"aggregation.automaticTitle",za(ua(ua({},u),{},{startPlaceContact:n.startPlaceContact,endPlaceContact:n.endPlaceContact}),o)),e.next=13,a.save(u);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ha=function(e){var t=e.contact,a=e.addressId,n=e.label,r=e.timeserie,o=e.type,i=e.t,c=e.category;return ua(ua({},t),{},{address:[].concat(Rt()(t.address||[]),[{id:a,type:n,formattedAddress:Ka({timeserie:r,type:o,t:i}),geo:{geo:Xa(r,o),cozyCategory:c}}])})},Ea=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=t.t,s=Object(U.a)(),u=ha({contact:n,addressId:s,label:i,timeserie:r,type:o,t:l,category:c}),e.next=5,a.save(u);case 5:return d=e.sent,m=d.data,e.next=9,ba(r,o).add(m);case 9:return p=e.sent,f=p.data,Wt()(f,"relationships.".concat(da(o),".data.metadata"),{addressId:s}),Wt()(f,"aggregation.automaticTitle",za(ua(ua({},f),{},{startPlaceContact:r.startPlaceContact,endPlaceContact:r.endPlaceContact}),l)),e.next=15,a.save(f);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oa=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.contact,r=t.timeserie,o=t.type,i=t.label,c=t.category,l=t.t,s=ma({contact:n,timeserie:r,type:o}),u=s.index,Wt()(n,"address[".concat(u,"].type"),i),Wt()(n,"address[".concat(u,"].geo.cozyCategory"),c),e.next=6,a.save(n);case 6:return Wt()(r,"aggregation.automaticTitle",za(r,l)),e.next=9,a.save(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ca=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.type,r=t.timeserie,o=t.contact,i=t.label,c=t.isSameContact,l=t.category,s=t.t,u=ma({contact:o,timeserie:r,type:n}),d=u.address,e.abrupt("return",c&&d?Oa({client:a,contact:o,timeserie:r,type:n,label:i,isSameContact:c,category:l,t:s}):Ea({client:a,contact:o,timeserie:r,type:n,label:i,category:l,t:s}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ja=function(e){var t=0,a=e.distance/1e3;switch(e.mode){case P.a:if(a<=P.xb){t+=a*P.qb;break}a<=P.T?t+=a*P.pb:t+=a*P.ob;break;case P.j:t+=a*P.i;break;case P.k:t+=a*P.g;break;case P.m:t+=a*P.l;break;case P.n:t+=a*nt(P.n);break;case P.v:t+=a*P.u;break;case P.w:case P.R:t+=a*P.s;break;case P.q:t+=a*P.p;break;case P.r:t+=a*P.o;break;case P.gb:t+=a*P.fb;break;case P.ib:t+=a*P.hb;break;case P.vb:t+=a*P.ub;break;case P.eb:t+=a*P.db;break;case P.Eb:t+=a*nt(P.Eb);break;case P.Gb:t+=a*nt(P.Gb);break;case P.Ib:t+=a*P.Hb;break;case P.Lb:t+=a*P.Kb;break;case P.Nb:case P.tb:case P.jb:t+=a*P.Mb}return t},wa=function(e){var t,a=e.averageSpeed,n=e.duration/60;switch(e.mode){case P.Nb:case P.jb:case P.tb:t=a<=P.Bb?P.bb:a<=P.U?P.ab:a<=P.P?P.Z:P.cb;break;case P.k:t=a<=P.Ab?P.X:a<=P.zb?P.W:a<=P.yb?P.V:P.Y}return t?function(e,t){return e*P.M*3.5/200*t}(t,n):0},xa=a("euuj"),ka=a.n(xa),Da=function(e){return Zt()(e,"properties.manual_purpose")},_a=function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.automatic_purpose},Pa=function(e){return Zt()(e,"properties.start_place.data.properties.display_name")},Ta=function(e){return Zt()(e,"properties.end_place.data.properties.display_name")},Sa=function(e,t){var a=(t||{}).defaultTransportModeByGroup,n=Zt()(e,"properties.sensed_mode","").toUpperCase(),r=n.split("PREDICTEDMODETYPES.")[1]||n.split("MOTIONTYPES.")[1],o=Ke.includes(r),i=Ke.find((function(e){return(null==a?void 0:a[ct(r)])===e}));return!!i&&i||o&&r||P.Lb},Aa=ka()((function(e,t){return e.features.filter((function(e){return"FeatureCollection"===e.type})).flatMap((function(e){return function(e,t){return e.features.map((function(e){var a=Zt()(e,"properties.start_fmt_time"),n=Zt()(e,"properties.end_fmt_time"),r=Zt()(e,"properties.speeds");return{id:e.id,mode:Sa(e,t),coordinates:Zt()(e,"geometry.coordinates"),timestamps:Zt()(e,"properties.timestamps"),distance:Zt()(e,"properties.distance"),distances:Zt()(e,"properties.distances"),duration:Zt()(e,"properties.duration"),startDate:a?new Date(a):a,endDate:n?new Date(n):n,speeds:r,avgSpeed:r?ht(r):void 0}}))}(e,t)}))})),Ma=function(e){return new Date(e.properties.start_fmt_time)},Na=function(e){return new Date(e.properties.end_fmt_time)};function La(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ra(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?La(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):La(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ia(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Fa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fa(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}g.models.geo.geodesicDistance;var Ga=function(e){return e.flatMap((function(t,a){if(!t.series)throw new Error("The timeserie with id ".concat(t._id,' must have a "series" attributes to make transformTimeseriesToTrips() working properly'));return t.series.map((function(t){return function(e){var t=e.features,a=e.properties,n=Vt()(t,(function(e){return e.id}));return Ht()({},e,{properties:{start_place:{data:n[a.start_place.$oid]},end_place:{data:n[a.end_place.$oid]}}})}(Ra(Ra({},t),{},{timeserieId:e[a]._id}))}))}))},za=function(e,t){var a,n,r,o,i,c,l=ga({timeserie:e,type:"start",t:t}),s=ga({timeserie:e,type:"end",t:t}),u=(null===(a=Wa(e,t))||void 0===a||null===(n=a.split(","))||void 0===n||null===(r=n[1])||void 0===r?void 0:r.trim())||"",d=(null===(o=Ja(e,t))||void 0===o||null===(i=o.split(","))||void 0===i||null===(c=i[1])||void 0===c?void 0:c.trim())||"";if(l||s){var m=l||Wa(e,t),p=s||Ja(e,t);return"".concat(m," ➝ ").concat(p)}return(u||d)&&u!==d?"".concat(u," ➝ ").concat(d).trim():Ja(e,t)},Ba=function(e){var t=0;return e.forEach((function(e){var a;t+=(null===(a=e.aggregation)||void 0===a?void 0:a.totalCO2)||0})),t},qa=function(e,t){var a=ta()(e),n=e[t],r=0===n.timeseries.length&&0===n.totalCO2,o=Kt()(a.filter((function(e){return r?e[0]!==t&&e[1].totalCO2>0:e[1].totalCO2>0})),(function(e){return e[1].totalCO2})).reverse(),i=Kt()(a.filter((function(e){return r?e[0]!==t&&0===e[1].totalCO2:0===e[1].totalCO2})),(function(e){return e[1].timeseries.length})).reverse();return Ra(Ra(Ra({},Bt()(o)),Bt()(i)),r&&d()({},t,n))},Za=function(e){var t=function(e){var t=Ke.reduce((function(e,t){return Ra(Ra({},e),{},d()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){e.aggregation.sections.forEach((function(a){var n=t[a.mode].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a.mode].totalCO2+=a.CO2}))})),t}(e);return qa(t,P.Lb)},Qa=function(e){var t=Zt()(e,"aggregation.purpose","").toUpperCase();return et.includes(t)&&t||P.lb},Va=function(e){var t=function(e){var t=et.reduce((function(e,t){return Ra(Ra({},e),{},d()({},t,{timeseries:[],totalCO2:0}))}),{});return e.forEach((function(e){var a=Qa(e),n=t[a].timeseries;n.some((function(t){return t.id===e.id}))||n.push(e),t[a].totalCO2+=e.aggregation.totalCO2})),t}(e);return qa(t,P.lb)},Ua=function(e){return e.startDate?new Date(e.startDate):null},Ha=function(e){return e.endDate?new Date(e.endDate):null},Ya=function(e,t){return"start"===t?Ua(e):"end"===t?Ha(e):null},Wa=function(e,t){var a;return Zt()(e,"aggregation.startPlaceDisplayName")||Zt()(null===(a=e.series)||void 0===a?void 0:a[0],"features[0].properties.display_name")||t("trips.departure")},Ja=function(e,t){var a;return Zt()(e,"aggregation.endPlaceDisplayName")||Zt()(null===(a=e.series)||void 0===a?void 0:a[0],"features[1].properties.display_name")||t("trips.arrival")},Ka=function(e){var t=e.timeserie,a=e.type,n=e.t;return"start"===a?Wa(t,n):"end"===a?Ja(t,n):null},Xa=function(e,t){var a=en(e);return Rt()(a.properties["".concat(t,"_loc")].coordinates)},$a=function(e){var t=e.timeserie,a=e.type,n=e.t;return"".concat(n("contactToPlace.lat"),": ")+Xa(t,a).reverse().toString().replace(",",", ".concat(n("contactToPlace.long"),": "))},en=function(e){return Zt()(e,"series[0]")},tn=function(e,t){var a=Zt()(e,"title");if(a)return a;var n=Zt()(e,"aggregation.automaticTitle");if(!n)return null;if(!t)return n;var r=n.split("➝"),o=s()(r,2),i=o[0],c=o[1];return i.length>12&&c?"".concat(i.slice(0,12).trim(),"... ➝ ").concat(c.trim()):n},an=function(e){var t=Ua(e),a=Ha(e);return Object(Ft.a)(a,t)},nn=function(e){return bt(e.aggregation.totalDistance)},rn=function(e){var t=function(e){return Zt()(e,"aggregation.totalCO2","")}(e);return vt(t)},on=function(e){var t,a=function(e){return Zt()(e,"aggregation.totalCalories","")}(e);return t=a,"".concat(Math.round(t)," kcal")},cn=function(e,t){var a=t(Ua(e),"dddd D MMMM YYYY");return a.charAt(0).toUpperCase()+a.slice(1)},ln=function(e,t){var a;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var n=Ra({},e);return Wt()(n,"series[0].properties.automatic_purpose",t),Wt()(n,"aggregation.recurring",!0),un(n)},sn=function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isRecurringTrip,o=void 0===r?null:r;if(null==e||null===(a=e.series)||void 0===a||!a[0])throw new Error("Timeserie is malformed");var i=Ra({},e);return Wt()(i,"series[0].properties.manual_purpose",t.toUpperCase()),null!==o&&Wt()(i,"aggregation.recurring",o),un(i)},un=function(e){var t;if(!e.series)throw new Error("The timeserie with id ".concat(e._id,' must have a "series" attributes to make setAggregationPurpose() working properly'));var a=e.series[0],n=null!=e&&null!==(t=e.aggregation)&&void 0!==t&&t.recurring&&_a(a)||Da(a);return n?Ra(Ra({},e),{},{aggregation:Ra(Ra({},e.aggregation),{},{purpose:n})}):e},dn=function(e,t){var a=function(e,t){var a,n=0,r=Ia(e.aggregation.sections);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.mode===t&&(n+=o.CO2)}}catch(i){r.e(i)}finally{r.f()}return n}(e,t);return vt(a)},mn=function(e){var t=0,a=Rt()(e).sort((function(e,t){return Ua(e)-Ua(t)}));return a.forEach((function(e,n){if(0===n)t++;else{var r=Ua(e),o=a[n-1],i=Ua(o),c=Object(It.a)(i,12);r.toDateString()===i.toDateString()||r<c||t++}})),t},pn=function(e,t){return e?e.filter((function(e){return new Date(e.startDate).getFullYear().toString()===t})):[]},fn=function(e){var t,a,n,r,o,i,c,l,s,u;return{lon:null==e||null===(t=e.series)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.properties)||void 0===n||null===(r=n.start_loc)||void 0===r||null===(o=r.coordinates)||void 0===o?void 0:o[0],lat:null==e||null===(i=e.series)||void 0===i||null===(c=i[0])||void 0===c||null===(l=c.properties)||void 0===l||null===(s=l.start_loc)||void 0===s||null===(u=s.coordinates)||void 0===u?void 0:u[1]}},bn=function(e){var t,a,n,r,o,i,c,l,s,u;return{lon:null==e||null===(t=e.series)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.properties)||void 0===n||null===(r=n.end_loc)||void 0===r||null===(o=r.coordinates)||void 0===o?void 0:o[0],lat:null==e||null===(i=e.series)||void 0===i||null===(c=i[0])||void 0===c||null===(l=c.properties)||void 0===l||null===(s=l.end_loc)||void 0===s||null===(u=s.coordinates)||void 0===u?void 0:u[1]}},vn=a("MRub"),gn={co2:{fontWeight:700,whiteSpace:"nowrap",marginRight:"-1rem"},tripIcon:{marginRight:"4px"}},yn=function(e){var t=e.tripModeIcons,a=e.duration,n=e.distance;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return r.a.createElement(Ot.a,{key:t,icon:e,size:10,style:gn.tripIcon})})),"· ".concat(a," · ").concat(n))},hn=function(e){var t=e.timeserie,a=e.hasDateHeader,o=Object(ne.e)(),i=o.t,c=o.f,l=Object(ge.g)(),s=Object(ge.h)(),u=Object(ge.j)().mode,d=Object(de.c)().isMobile,m=Qa(t),p=an(t),f=function(e){return na()(e.aggregation.sections.sort((function(e,t){return e.distance>t.distance?-1:1})).map((function(e){return e.mode})).filter(Boolean))}(t),b=nn(t),v=Object(n.useMemo)((function(){return u?dn(t,u):rn(t)}),[t,u]),g=Object(n.useMemo)((function(){return f.map((function(e){return Xe(e)}))}),[f]);return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(vn.a,null,c(Ua(t),"dddd DD MMMM")),r.a.createElement(jt.b,{button:!0,onClick:function(){s("".concat(l.pathname,"/").concat(t._id))}},r.a.createElement(wt.a,null,r.a.createElement(dt,{attribute:m})),r.a.createElement(xt.a,{primary:tn(t,d)||Ja(t,i),secondary:r.a.createElement(yn,{tripModeIcons:g,duration:p,distance:b})}),r.a.createElement(kt.a,{style:gn.co2,variant:"body2"},v),r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Ct.a,color:"var(--secondaryTextColor)"}))),r.a.createElement(Et.a,null))};hn.propTypes={timeserie:Nt.a.object.isRequired,hasDateHeader:Nt.a.bool.isRequired};var En=r.a.memo(hn,(function(e,t){return e.timeserie._rev===t.timeserie._rev}));En.displayName="MemoizedTripItem";var On=En,Cn=a("whoR"),jn=a("IJzH"),wn=a("/s+K"),xn=a("OEPu"),kn=a("gQXR"),Dn=function(e){var t=e.timeseries,a=e.noHeader,o=Object(de.b)().isMobile,i=Object(ne.e)().t,c=Object(ge.h)(),l=oe(),s=l.isGeolocationTrackingAvailable,u=l.isGeolocationTrackingEnabled,d=s&&!u,m=Object(n.useCallback)((function(e,a){return 0===a||!Object(At.a)(Ua(e),Ua(t[a-1]))}),[t]);return r.a.createElement(r.a.Fragment,null,o&&!a&&r.a.createElement(kn.a,{className:"u-ph-1",style:{height:"4rem",display:"flex",alignItems:"center"},square:!0},r.a.createElement(kt.a,{variant:"h5"},i("trips.trips"))),d&&r.a.createElement(Cn.a,{className:"u-mt-half u-mh-half",block:!0,action:r.a.createElement(wn.a,{variant:"text",size:"small",label:i("geolocationTracking.tooltip.action"),onClick:function(){return c("/settings")}})},r.a.createElement(jn.a,null,i("geolocationTracking.tooltip.title")),i("geolocationTracking.tooltip.text")),r.a.createElement(xn.a,null,t.map((function(e,t){return r.a.createElement(On,{key:"".concat(e.id).concat(t),timeserie:e,hasDateHeader:m(e,t)})}))))};Dn.propTypes={timeseries:Nt.a.arrayOf(Nt.a.object).isRequired,noHeader:Nt.a.bool};var _n=Dn,Pn=a("+rdD"),Tn=a("kTYB"),Sn=function(e){var t=e.timeseries,a=Object(ge.j)().mode,o=Object(ne.e)().t,i=Object(de.b)().isMobile,c=Object(n.useMemo)((function(){return Za(t)}),[t]),l=Ba(t),s=Object(n.useMemo)((function(){return St(c,"modes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(_n,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ee()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(Tn.a,{data:u,options:d,primaryText:vt(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Pn.a,{marginTop:i?void 0:"6rem"},r.a.createElement(xn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(Tt,{key:t,type:"modes",totalCO2:l,sortedTimeserie:e})})))))},An=function(){var e=Object(ge.i)(),t=s()(e,1)[0];return r.a.createElement(Sn,{timeseries:t})},Mn=function(e){var t=e.timeseries,a=Object(ge.j)().purpose,o=Object(ne.e)().t,i=Object(de.b)().isMobile,c=Object(n.useMemo)((function(){return Va(t)}),[t]),l=Ba(t),s=Object(n.useMemo)((function(){return St(c,"purposes",o)}),[o,c]),u=s.data,d=s.options,m=Object(n.useMemo)((function(){return a?c[a].timeseries.sort((function(e,t){return t.startDate.localeCompare(e.startDate)})):[]}),[a,c]);return a?r.a.createElement("div",{className:"u-mt-2"},r.a.createElement(_n,{timeseries:m})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ee()("u-flex",{"u-flex-justify-end u-pos-absolute u-top-m u-right-xl":!i,"u-flex-justify-center u-mv-1":i})},r.a.createElement(Tn.a,{data:u,options:d,primaryText:vt(l),secondaryText:o("analysis.emittedCO2")})),r.a.createElement(Pn.a,{marginTop:i?void 0:"6rem"},r.a.createElement(xn.a,null,Object.entries(c).map((function(e,t){return r.a.createElement(Tt,{key:t,type:"purposes",totalCO2:l,sortedTimeserie:e})})))))},Nn=function(){var e=Object(ge.i)(),t=s()(e,1)[0];return r.a.createElement(Mn,{timeseries:t})},Ln=a("6WJ3"),Rn=a("HYTT"),In=a("Su4X"),Fn=a("Gyqq"),Gn=a("d5dM"),zn=Object(Fn.f)(ye.b),Bn=function(){var e=Object(ne.e)().t,t=Object(ge.g)().pathname.startsWith("/analysis");return r.a.createElement(Gn.a,null,r.a.createElement(Fn.e,null,r.a.createElement(Fn.b,null,r.a.createElement(zn,{to:"/trips"},r.a.createElement(Fn.a,{icon:Ln.a}),r.a.createElement(Fn.d,null,e("nav.trips")))),r.a.createElement(Fn.b,null,r.a.createElement(zn,{to:"/analysis/modes",className:Ee()(Fn.c.className,t?Fn.c.activeClassName:null)},r.a.createElement(Fn.a,{icon:Rn.a}),r.a.createElement(Fn.d,null,e("nav.analysis")))),r.a.createElement(Fn.b,{secondary:!0},r.a.createElement(zn,{to:"/analysis/modes"},r.a.createElement(Fn.d,null,e("nav.modes")))),r.a.createElement(Fn.b,{secondary:!0},r.a.createElement(zn,{to:"/analysis/purposes"},r.a.createElement(Fn.d,null,r.a.createElement(Pn.a,{whiteSpace:"nowrap"},e("nav.purposes"))))),r.a.createElement(Fn.b,null,r.a.createElement(zn,{to:"/settings"},r.a.createElement(Fn.a,{icon:In.a}),r.a.createElement(Fn.d,null,e("nav.settings"))))))},qn=a("9Y1u"),Zn=a("WY6r"),Qn=a("N8wp"),Vn=function(){var e=Object(ne.e)().t;return r.a.createElement(Zn.b,null,r.a.createElement(Bn,null),r.a.createElement(Zn.c,null,r.a.createElement(Zn.a,null,r.a.createElement(ge.b,null))),r.a.createElement(Qn.a,{t:e}),r.a.createElement(qn.a,null))},Un=a("LGLP"),Hn=a.n(Un),Yn=a("VDMD"),Wn=a.n(Yn),Jn=function(e){var t,a,n=null==e||null===(t=e[0].bikeGoal)||void 0===t?void 0:t.daysToReach,r=null===(a=V()("coachco2.bikegoal.settings"))||void 0===a?void 0:a.daysToReach;return n||r||100},Kn=function(){var e;return null===(e=V()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.bountyAmount},Xn=function(){var e,t,a,n=null===(e=V()("coachco2.bikegoal.settings"))||void 0===e?void 0:e.sourceName;return{sourceType:null===(t=V()("coachco2.bikegoal.settings"))||void 0===t?void 0:t.sourceType,sourceOffer:null===(a=V()("coachco2.bikegoal.settings"))||void 0===a?void 0:a.sourceOffer,sourceName:n}},$n=function(e,t){return!(!e||0===e.length)&&mn(e)>=Jn(t)},er=function(e,t){if(!e||0===e.length)return 0;var a=mn(e),n=Jn(t);return a<n?a:n},tr=function(e,t){if(!t)return 0;var a=Jn(e),n=t>a?a:t;return Math.round(n/a*100)},ar=function(e){var t,a=(null==e||null===(t=e[0])||void 0===t?void 0:t.bikeGoal)||{};return{givenName:a.firstname,familyName:a.lastname}},nr=a("ro7u"),rr=a("2Eyq");Ce.a.namespace("services/centreValDeLoireExpe"),a("NhwE"),a("8tKC");var or=a("PG+o");var ir=Ce.a.namespace("services/daccMonthlyCO2"),cr=we()("daccMonthlyCO2"),lr=g.models.dacc.fetchAggregatesFromDACC,sr=function(){var e=O()(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=ur(),n=Object(nr.a)(Object(k.a)(Object(Gt.a)(Date.now(),11)),"yyyy-MM-dd"),e.next=5,lr(t,a,{measureName:P.D,startDate:n});case 5:return r=e.sent,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),ir("error","Error while retrieving data from remote-doctype"),cr.error("Error while retrieving data from remote-doctype",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();Ce.a.namespace("services/dacc"),g.models.dacc.sendMeasureToDACC;var ur=function(){return!0===V()("coachco2.dacc-dev_v2")?m.g:m.f};function dr(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mr(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw o}}}}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}Ce.a.namespace("services/daccBikeGoal");var pr=we()("daccBikeGoal"),fr=g.models.dacc.fetchAggregatesFromDACC,br=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=ur(),n=Date.now(),r=Object(nr.a)(Object(rr.a)(n,1),"yyyy-MM-dd"),o=Object(nr.a)(n,"yyyy-MM-dd"),e.next=7,fr(t,a,{measureName:P.C,startDate:r,endDate:o});case 7:return i=e.sent,e.abrupt("return",i);case 11:e.prev=11,e.t0=e.catch(0),pr.error("Error while retrieving data from remote-doctype",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),vr=function(e){var t,a=gr(),n=dr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.groups.some((function(e){return e.groupName===a})))return Math.round(r.avg)}}catch(o){n.e(o)}finally{n.f()}return null},gr=function(){return Xn().sourceName||"unknown"},yr=function(){var e=O()(j.a.mark((function e(t,a){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a!==P.D){e.next=6;break}return e.next=3,sr(t);case 3:return n=e.sent,r=(null==n?void 0:n.length)>0?n.map((function(e){return e.avg})):null,e.abrupt("return",r);case 6:if(a!==P.C){e.next=13;break}return e.next=9,br(t);case 9:if(o=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.abrupt("return",vr(o));case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),hr=function(e){var t=e.hasConsent,a=e.measureName,r=Object(g.useClient)(),o=Object(n.useState)(!1),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useState)(null),d=s()(u,2),m=d[0],p=d[1];return Object(n.useEffect)((function(){t&&function(){var e=O()(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,yr(r,a);case 3:t=e.sent,l(!1),p(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[r,t,a]),{isLoading:c,data:m}},Er=a("gQ+z"),Or=["timeseries","sendToDACC","size"],Cr=["data"],jr=function(e){var t=e.timeseries,a=e.sendToDACC,o=e.size,i=c()(e,Or),l=Object(n.useState)(!1),u=s()(l,2),d=u[0],m=u[1],p=R(),f=Object(g.useQuery)(p.definition,p.options),b=f.data,v=c()(f,Cr);Object(n.useEffect)((function(){var e,t=null==b||null===(e=b[0].bikeGoal)||void 0===e?void 0:e.sendToDACC;m(!!t)}),[b]);var y=hr({hasConsent:d,measureName:P.C}),h=y.data,E=y.isLoading;if(Object(g.isQueryLoading)(v)&&E)return null;var O=function(e,t){if(!e)return 100;var a=er(e,t),n=Jn(t);return Math.round(a/n*100)}(t,b),C=function(e){switch(e){case"medium":return"3rem";case"small":return"2.5rem";default:return"4.5rem"}}(o);return r.a.createElement(Er.a,Hn()({size:o,primaryProps:{value:O,color:"#BA5AE8"}},a&&{secondaryProps:{value:tr(b,h),color:"#BA5AE83D"}},i),r.a.createElement(Pn.a,{fontSize:C},"🚴"))};jr.propTypes={className:Nt.a.string,timeseries:Nt.a.arrayOf(Nt.a.object)};var wr=jr,xr=a("kyG8"),kr=a.n(xr),Dr=a("i0pn"),_r=a("DZbK"),Pr=a.n(_r),Tr=a("vVt6"),Sr=a.n(Tr),Ar=a("v5t+"),Mr=a.n(Ar),Nr=function(){return r.a.createElement(Dr.h,{viewBox:"0 0 409 757"},r.a.createElement(Dr.f,{d:"M386.752 16.07C386.752 22.7658 392.18 28.1938 398.876 28.1938C403.363 28.1938 407 31.8309 407 36.3175L407 720.682C407 725.169 403.363 728.806 398.876 728.806C392.18 728.806 386.752 734.234 386.752 740.93L386.752 743.903C386.752 750.032 381.784 755 375.656 755L33.3444 755C27.2158 755 22.2475 750.032 22.2475 743.903L22.2475 740.93C22.2475 734.234 16.8195 728.806 10.1237 728.806C5.63715 728.806 2 725.169 2 720.682L2.00003 36.3175C2.00003 31.8309 5.63718 28.1938 10.1238 28.1938C16.8195 28.1938 22.2476 22.7658 22.2476 16.07L22.2476 13.0969C22.2476 6.96822 27.2158 1.99998 33.3444 1.99998L375.656 2C381.784 2 386.752 6.96825 386.752 13.0969L386.752 16.07Z",fill:"white",stroke:"#297EF2",strokeWidth:"4"}),r.a.createElement(Dr.f,{d:"M386.926 8.8584C395.21 8.8584 401.926 15.5741 401.926 23.8584L401.926 736.142C401.926 742.77 396.553 748.142 389.926 748.142L19.0743 748.142C12.4468 748.142 7.07429 742.77 7.07429 736.142L7.07431 20.8584C7.07431 14.231 12.4469 8.85838 19.0743 8.85838L386.926 8.8584Z",stroke:"#297EF2",strokeWidth:"2"}),r.a.createElement(Dr.c,{cx:"404.951",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(Dr.c,{cx:"404.951",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(Dr.c,{cx:"4.04962",cy:"5.23875",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}),r.a.createElement(Dr.c,{cx:"4.04962",cy:"751.761",ry:"5.23875",rx:"4.04951",fill:"#297EF2"}))},Lr=function(){return r.a.createElement(Dr.h,{width:"72",height:"72",viewBox:"0 0 72 72"},r.a.createElement(Dr.f,{d:"M31.2945 5.16468C33.8194 2.39335 38.1806 2.39335 40.7055 5.16468C42.3805 7.00311 44.9728 7.6977 47.3426 6.94307C50.9149 5.8055 54.6918 7.98608 55.4928 11.6486C56.0241 14.0782 57.9218 15.9759 60.3514 16.5072C64.0139 17.3082 66.1945 21.0851 65.0569 24.6574C64.3023 27.0272 64.9969 29.6195 66.8353 31.2945C69.6067 33.8194 69.6067 38.1806 66.8353 40.7055C64.9969 42.3805 64.3023 44.9728 65.0569 47.3426C66.1945 50.9149 64.0139 54.6918 60.3514 55.4928C57.9218 56.0241 56.0241 57.9218 55.4928 60.3514C54.6918 64.0139 50.9149 66.1945 47.3426 65.0569C44.9728 64.3023 42.3805 64.9969 40.7055 66.8353C38.1806 69.6067 33.8194 69.6067 31.2945 66.8353C29.6195 64.9969 27.0272 64.3023 24.6574 65.0569C21.0851 66.1945 17.3082 64.0139 16.5072 60.3514C15.9759 57.9218 14.0782 56.0241 11.6486 55.4928C7.98608 54.6918 5.8055 50.9149 6.94307 47.3426C7.6977 44.9728 7.00311 42.3805 5.16468 40.7055C2.39335 38.1806 2.39335 33.8194 5.16468 31.2945C7.00311 29.6195 7.6977 27.0272 6.94307 24.6574C5.8055 21.0851 7.98608 17.3082 11.6486 16.5072C14.0782 15.9759 15.9759 14.0782 16.5072 11.6486C17.3082 7.98608 21.0851 5.8055 24.6574 6.94307C27.0272 7.6977 29.6195 7.00311 31.2945 5.16468Z",fill:"#297EF2"}),r.a.createElement(Dr.a,{cx:"36",cy:"36",r:"26",fill:"white"}),r.a.createElement(Dr.f,{d:"M33.8789 46.515C34.1467 46.4481 34.4182 46.611 34.4852 46.8789L34.9852 48.8789C34.9953 48.9194 35.0002 48.9601 35.0002 49.0001H37C37 48.9601 37.0049 48.9194 37.015 48.8789L37.515 46.8789C37.582 46.611 37.8535 46.4481 38.1214 46.515C38.3893 46.582 38.5522 46.8535 38.4852 47.1214L38.0001 49.0617V51.0001C38.0001 51.5524 37.5524 52.0001 37.0001 52.0001H35.0001C34.4478 52.0001 34.0001 51.5524 34.0001 51.0001V49.0617L33.515 47.1214C33.4481 46.8535 33.611 46.582 33.8789 46.515Z",fill:"#297EF2"}),r.a.createElement(Dr.f,{d:"M34 47C33.4477 47 32.9798 46.5318 32.6829 46.0661C32.1387 45.2125 30.95 44.2886 29.5553 43.2046C26.3288 40.6968 22 37.3322 22 32C22 25.3726 28.268 20 36 20V47H34Z",fill:"#297EF2"}),r.a.createElement(Dr.f,{d:"M36 47H34.2857C34.2857 45.882 33.4127 44.6945 32.3173 43.2046C30.4736 40.6968 28 37.3322 28 32C28 25.3726 31.5817 20 36 20V47Z",fill:"#579EFF"}),r.a.createElement(Dr.f,{d:"M38 47C38.5523 47 39.0202 46.5318 39.3171 46.0661C39.8613 45.2125 41.05 44.2886 42.4447 43.2046C45.6712 40.6968 50 37.3322 50 32C50 25.3726 43.732 20 36 20V47H38Z",fill:"#B3D3FF"}),r.a.createElement(Dr.f,{d:"M36 47H37.7143C37.7143 45.882 38.5873 44.6945 39.6827 43.2046C41.5264 40.6968 44 37.3322 44 32C44 25.3726 40.4183 20 36 20V47Z",fill:"#91BFFF"}),r.a.createElement(Dr.a,{cx:"36",cy:"36",r:"23",stroke:"#297EF2",strokeWidth:"2"}))},Rr=function(){return r.a.createElement(Dr.h,{width:"74",height:"32",viewBox:"0 0 74 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement(Dr.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M57.1068 13.6515L58.8382 18.2742L60.4808 13.6515H62.3782L59.6788 20.5655C59.1822 21.8522 58.3415 22.5275 57.3102 22.5275C56.7628 22.5275 56.1002 22.3622 55.6548 22.1202L56.0488 20.8468C56.3675 21.0242 56.6988 21.1388 56.9155 21.1388C57.2708 21.1388 57.5522 21.0242 57.6928 20.7822L57.9222 20.2982L55.1835 13.6515H57.1068ZM45.1202 13.5208C47.0682 13.5208 48.6982 15.0868 48.6982 16.9588C48.6982 18.8308 47.0682 20.4095 45.1202 20.4095C43.1588 20.4095 41.5162 18.8308 41.5162 16.9588C41.5162 15.0868 43.1588 13.5208 45.1202 13.5208ZM37.9802 11.3335C39.3042 11.3335 40.5268 11.8948 41.3802 12.7988L40.0182 14.0208C39.5082 13.4355 38.7828 13.0408 37.9802 13.0408C36.5162 13.0408 35.2675 14.3395 35.2675 15.8542C35.2675 17.3822 36.5162 18.6815 37.9808 18.6815C38.7828 18.6815 39.5082 18.2868 40.0182 17.7008L41.3802 18.9242C40.5268 19.8148 39.3042 20.3882 37.9802 20.3882C35.4728 20.3882 33.3335 18.3122 33.3335 15.8548C33.3335 13.3975 35.4735 11.3335 37.9802 11.3335ZM54.7055 13.6522V14.9642L51.3948 18.6562H54.7315V20.2348H48.9762V18.9235L52.2868 15.2302H49.0655V13.6522H54.7055ZM45.1188 15.0868C44.1255 15.0868 43.2988 15.9402 43.2988 16.9588C43.2988 17.9782 44.1255 18.8435 45.1188 18.8435C46.1002 18.8435 46.9275 17.9782 46.9275 16.9588C46.9275 15.9402 46.1008 15.0868 45.1195 15.0868H45.1188Z",fill:"#297EF2"}),r.a.createElement(Dr.f,{d:"M20.0002 26.6668C25.8912 26.6668 30.6668 21.8912 30.6668 16.0002C30.6668 10.1091 25.8912 5.3335 20.0002 5.3335C14.1091 5.3335 9.3335 10.1091 9.3335 16.0002C9.3335 21.8912 14.1091 26.6668 20.0002 26.6668Z",fill:"#297EF2"}),r.a.createElement(Dr.f,{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2092 17.0408C22.1026 17.2075 21.8666 17.2568 21.7032 17.1475C21.6899 17.1395 21.6759 17.1302 21.6632 17.1208C21.1886 17.4928 20.6039 17.6955 19.9966 17.6955C19.3906 17.6955 18.8079 17.4935 18.3339 17.1222C18.3219 17.1315 18.3092 17.1402 18.2966 17.1482C18.1292 17.2575 17.8966 17.2055 17.7906 17.0422C17.6839 16.8775 17.7306 16.6542 17.8946 16.5435C18.0372 16.4502 18.0472 16.2628 18.0472 16.2608C18.0506 16.1628 18.0932 16.0695 18.1646 16.0042C18.2352 15.9375 18.3239 15.9002 18.4219 15.9075C18.6179 15.9122 18.7779 16.0775 18.7739 16.2762C18.7739 16.2788 18.7739 16.3782 18.7379 16.5162C19.4699 17.1235 20.5312 17.1215 21.2606 16.5108C21.2339 16.4048 21.2272 16.3208 21.2252 16.2815C21.2232 16.1795 21.2599 16.0875 21.3279 16.0168C21.3952 15.9482 21.4859 15.9088 21.5826 15.9075H21.5892C21.7852 15.9075 21.9479 16.0655 21.9526 16.2622C21.9526 16.2622 21.9626 16.4502 22.1039 16.5435C22.2686 16.6522 22.3159 16.8748 22.2092 17.0408ZM23.7572 12.7948C23.6526 11.9095 23.2606 11.0908 22.6306 10.4575C21.9086 9.73216 20.9539 9.3335 19.9439 9.3335C18.9339 9.3335 17.9806 9.73216 17.2579 10.4582C16.6259 11.0935 16.2326 11.9168 16.1306 12.8075C15.2632 12.9128 14.4612 13.3162 13.8419 13.9655C13.1352 14.7062 12.7466 15.6855 12.7466 16.7235C12.7466 18.8982 14.4692 20.6668 16.5879 20.6668H23.4119C25.5292 20.6668 27.2532 18.8982 27.2532 16.7235C27.2532 14.6682 25.7132 12.9748 23.7572 12.7948Z",fill:"white"}))};Dr.d.register({family:"Lato",src:Sr.a}),Dr.d.register({family:"Courgette",src:Pr.a}),Dr.d.register({family:"PlusJakarta",src:Mr.a});var Ir=Dr.g.create({co2CertificateSVG:{margin:"0 auto 10px"},cozySVG:{margin:"0 auto"},page:{padding:8},content:{display:"flex",justifyContent:"space-between",position:"absolute",top:54,left:40,bottom:50,right:40},title:{whiteSpace:"pre-line",fontFamily:"PlusJakarta",fontSize:24,fontStyle:"normal",textAlign:"center",lineHeight:1.2},subTitle:{textAlign:"center",color:"rgba(29, 33, 42, 0.48)",marginTop:20,fontSize:12,fontStyle:"normal",fontWeight:400},name:{fontFamily:"Courgette",textAlign:"center",color:"#297EF2",fontSize:32,fontStyle:"normal",marginTop:20},divider:{width:"100%",height:1,backgroundColor:"rgba(29, 33, 42, 0.12)",margin:"20px 0"},text:{fontFamily:"Lato",textAlign:"left",color:"rgba(29, 33, 42, 0.90)",fontSize:14,fontStyle:"normal",marginTop:20,lineHeight:1.3}}),Fr=function(e){var t=e.t,a=e.username,n=e.daysToReach,o=e.sourceName,i=e.year,c=e.lang,l=new Date,s=l.toLocaleDateString(c,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u=l.toLocaleTimeString(c,{hour12:!1,hour:"2-digit",minute:"2-digit"}).replace(":","h");return r.a.createElement(Dr.b,null,r.a.createElement(Dr.e,{wrap:!1,style:Ir.page},r.a.createElement(Dr.j,null,r.a.createElement(Nr,null)),r.a.createElement(Dr.j,{style:Ir.content},r.a.createElement(Dr.j,null,r.a.createElement(Dr.j,{style:Ir.co2CertificateSVG},r.a.createElement(Lr,null)),r.a.createElement(Dr.i,{style:Ir.title},t("PDF.title")),r.a.createElement(Dr.i,{style:Ir.subTitle},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(Dr.i,{style:Ir.name},a),r.a.createElement(Dr.j,{style:Ir.divider}),r.a.createElement(Dr.i,{style:Ir.text},t("PDF.recipient",{sourceName:o})),r.a.createElement(Dr.i,{style:Ir.text},t("PDF.date",{currentDateFormatted:s,currentTimeFormatted:u})),r.a.createElement(Dr.i,{style:Ir.text},t("PDF.paragraph01",{username:a,daysToReach:n,year:i})),r.a.createElement(Dr.i,{style:Ir.text},t("PDF.paragraph02")),r.a.createElement(Dr.i,{style:Ir.text},t("PDF.paragraph03")),r.a.createElement(Dr.i,{style:Ir.text},t("PDF.signature",{username:a}))),r.a.createElement(Dr.j,{style:Ir.cozySVG},r.a.createElement(Rr,null)))))},Gr=g.models.folder,zr=Gr.MAGIC_FOLDERS,Br=Gr.ensureMagicFolder,qr=Gr.getReferencedFolder,Zr="".concat(m.b,"/coachco2"),Qr=function(){var e=O()(j.a.mark((function e(t,a){var n,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(t,{_id:Zr,_type:m.b});case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,Br(t,zr.ADMINISTRATIVE,"/".concat(a("folder.administrative")));case 9:return r=e.sent,o=r.path,e.next=13,Br(t,zr.COACH_CO2,"".concat(o,"/").concat(a("folder.coachco2")));case 13:return i=e.sent,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Vr=a("0nAg"),Ur=we()("savePdfCertificate"),Hr=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.pdfDocument,o=t.year,e.prev=1,e.next=4,Object(Dr.k)(r).toBlob();case 4:return i=e.sent,e.next=7,Qr(a,n);case 7:return c=e.sent,l=c._id,e.next=11,Object(Vr.uploadFileWithConflictStrategy)(a,i,{name:n("PDF.name",{year:o}),contentType:"application/pdf",dirId:l,conflictStrategy:"rename"});case 11:return s=e.sent,u=s.data,e.abrupt("return",u);case 16:return e.prev=16,e.t0=e.catch(1),Ur.error(e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),Yr=a("W5TB"),Wr=["data"],Jr=function(e){var t=e.certificate,a=Object(ne.e)(),o=a.t,i=a.lang,l=Object(g.useClient)(),u=Object(de.b)().isMobile,d=Object(ge.j)().year,m=Object(ge.h)(),p=Object(n.useState)(!1),f=s()(p,2),b=f[0],v=f[1],y=R(),h=Object(g.useQuery)(y.definition,y.options),E=h.data,C=c()(h,Wr);if(Object(g.isQueryLoading)(C))return null;var w=function(){var e=O()(j.a.mark((function e(){var t,a,n,c,s,u,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),t=Xn(),a=t.sourceName,n=ar(E),c=n.givenName,s=n.familyName,u="".concat(s," ").concat(c),m=r.a.createElement(Fr,{t:o,username:u,daysToReach:Jn(E),sourceName:a,year:d,lang:i}),e.next=7,Hr({client:l,t:o,pdfDocument:m,year:d});case 7:v(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=o(t?"bikeGoal.certificateGeneration.actions.regenerate":"bikeGoal.certificateGeneration.actions.generate");return r.a.createElement("div",{className:kr.a["CertificateGeneration-root"]},r.a.createElement(wr,u&&{size:"medium"}),r.a.createElement(kt.a,{variant:"h4"},o("bikeGoal.certificateGeneration.title")),r.a.createElement(kt.a,{variant:"body2",className:"u-mv-1"},o("bikeGoal.certificateGeneration.content",{smart_count:Kn()||-1,year:d})),!!t&&!b&&r.a.createElement(kn.a,{onClick:function(){m({pathname:"../certificate/".concat(t._id)})},className:"u-c-pointer"},r.a.createElement(xn.a,null,r.a.createElement(jt.b,null,r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Yr.a,size:32})),r.a.createElement(xt.a,{primary:t.name})))),r.a.createElement(wn.a,{variant:"text",label:x,className:"u-mt-half u-fz-xsmall",onClick:w,busy:b}))},Kr=a("tRUj"),Xr=a("bQqJ"),$r=["data"],eo=function(){var e=Object(ge.h)(),t=Object(de.b)().isMobile,a=Object(ne.e)().t,n={definition:Object(g.Q)(m.h).partialIndex({"cozyMetadata.createdByApp":"coachco2",class:"pdf",type:"file",trashed:!1}).indexFields(["cozyMetadata.updatedAt"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(1),options:{as:m.h,fetchPolicy:y.a.fetchPolicies.olderThan(1e8)}},o=Object(g.useQuery)(n.definition,n.options),i=o.data,l=c()(o,$r),s=Object(g.isQueryLoading)(l);return r.a.createElement(Kr.a,Hn()({open:!0,background:"var(--paperBackgroundColor) repeat-x url(".concat(Wn.a,")"),content:s?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Jr,{certificate:i[0]})},t?{onBack:function(){return e("..")}}:{onClose:function(){return e("..")}},{actions:r.a.createElement(wn.a,{label:a("bikeGoal.certificateGeneration.actions.understood"),onClick:function(){return e("..")}}),actionsLayout:"column"}))},to=a("XfNG"),ao=a("GXf6"),no=["/analysis/modes","/analysis/purposes"],ro=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},oo=function(){var e=Object(ge.h)(),t=Object(ge.g)().pathname,a=Object(ne.e)().t,n=no.indexOf(no.find((function(e){return t.includes(e)})));return r.a.createElement(kn.a,null,r.a.createElement(to.a,{value:n,onChange:function(t,a){e(no[a])}},r.a.createElement(ao.a,Hn()({label:a("nav.modes")},ro(0))),r.a.createElement(ao.a,Hn()({label:a("nav.purposes")},ro(1)))))},io=a("lomp"),co=a.n(io),lo=a("nOWK"),so=a.n(lo),uo=new co.a({id:"pins-path_2d4c69ec9e779e37080be582b17e8596",use:"pins-path_2d4c69ec9e779e37080be582b17e8596-usage",viewBox:"0 0 96 96",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 96 96" id="pins-path_2d4c69ec9e779e37080be582b17e8596"><g clip-path="url(#pins-path_2d4c69ec9e779e37080be582b17e8596_a)"><path stroke="#FFD799" stroke-linecap="round" stroke-width="8" d="M20 46h9.5C35.851 46 41 51.149 41 57.5v0C41 63.851 35.851 69 29.5 69h-14C9.149 69 4 74.149 4 80.5v0C4 86.851 9.149 92 15.5 92H72" /><path fill="#FFB64F" d="M96 48c0 11.267-17.34 32.28-22.542 38.33a1.908 1.908 0 0 1-2.916 0C65.341 80.28 48 59.268 48 48c0-13.255 10.745-24 24-24s24 10.745 24 24ZM35 16c0 7.19-10.594 20.336-14.541 24.984a1.904 1.904 0 0 1-2.918 0C13.594 36.336 3 23.19 3 16 3 7.163 10.163 0 19 0s16 7.163 16 16Z" /><circle cx="72" cy="48" r="8" fill="#F33136" /><circle cx="19" cy="16" r="5.333" fill="#F33136" /></g><defs><clipPath id="pins-path_2d4c69ec9e779e37080be582b17e8596_a"><path fill="#fff" d="M0 0h96v96H0z" /></clipPath></defs></symbol>'}),mo=(so.a.add(uo),uo),po=a("HCvV"),fo=a("XqEJ"),bo=a("gMSI");function vo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var go=function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vo(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({position:"fixed",width:"100%",textAlign:"center",bottom:"calc(var(--safe-area-inset-bottom) + 4rem)"},e&&{left:"calc(var(--safe-area-inset-left) + calc(13.75rem / 2))"})},yo=function(){var e=Object(ne.e)().t,t=Object(de.b)().isDesktop,a=go(t);return r.a.createElement("div",{style:a},r.a.createElement(kt.a,null,e("support.problem")),r.a.createElement(kt.a,null,e("support.consult.text")," ",r.a.createElement(bo.a,{target:"_blank",href:"https://support.cozy.io/tag/cozy-coach-co2/"},e("support.consult.link")," ",r.a.createElement(po.a,{size:"small",color:"inherit"},r.a.createElement(Ot.a,{icon:fo.a})))))},ho=a("Jbzi"),Eo=a("ebeN"),Oo=function(e){var t=e.label,a=e.subtitle,n=e.onBack,o=Object(de.b)().isMobile,i=cozy.bar,c=i.BarCenter,l=i.BarLeft,s="function"==typeof n?n:void 0;return o?r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(l,null,r.a.createElement(po.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(Ot.a,{icon:Eo.a,size:16}))),r.a.createElement(c,null,r.a.createElement(me.a,null,r.a.createElement(ho.a,null,t)))):r.a.createElement("div",{className:Ee()(d()({},"u-flex u-flex-items-baseline u-ml-2",s))},s&&r.a.createElement(po.a,{className:"u-mr-half",onClick:s,size:"medium"},r.a.createElement(Ot.a,{icon:Eo.a,size:16})),r.a.createElement("div",{className:Ee()("u-mv-1-half-s u-ml-1-s u-mv-2",d()({},"u-ml-2",!s))},r.a.createElement(kt.a,{variant:"h3"},t),a))};Oo.propTypes={label:Nt.a.string,subtitle:Nt.a.node,onBack:Nt.a.func};var Co=Oo,jo=a("/5Aj"),wo=function(){var e=Object(ne.e)().t,t=Object(de.b)().isMobile,a=Object(ge.h)(),n=z().account;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Co,{label:n?e("trips.from")+" "+B(n):e("trips.trips")}),r.a.createElement(jo.a,{icon:mo,title:e("emptyContent.changeAccount.title"),text:e("emptyContent.changeAccount.text"),centered:!0},r.a.createElement(wn.a,{className:"u-mt-1",variant:"secondary",label:e("emptyContent.changeAccount.action"),onClick:function(){return a("/settings")}})),r.a.createElement(yo,null))},xo=a("PFMP"),ko=a.n(xo),Do=function(){var e=Object(ne.e)().t,t=Object(de.b)().isMobile,a=z().account;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Co,{label:e("trips.from")+" "+B(a)}),r.a.createElement(jo.a,{icon:r.a.createElement("img",{src:ko.a}),iconSize:"medium",title:e("emptyContent.GPSStandby.title"),text:e("emptyContent.GPSStandby.text"),centered:!0}),r.a.createElement(yo,null))},_o=new co.a({id:"cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a",use:"cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a-usage",viewBox:"0 0 128 96",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 128 96" id="cozy-cloud_f25eec6fb0f8dac9011726ebcb3b5c2a"><path fill="#BBD9FD" fill-rule="evenodd" d="M38.15 93.955c2.147.763 7.653 1.424 12.09 1.688 12.119.722 29.052.33 36.23-.998 7.231-1.34 7.553-3.364-10.83-4.366-15.654-.854-33.926.363-37.833 2.175-1.049.487-.991 1.028.343 1.5Z" clip-rule="evenodd" /><path fill="#297EF1" fill-rule="evenodd" d="M68.641 13.698 42.583 19.09c-3.788.788-6.22 4.474-5.436 8.242l10.852 51.938c.784 3.773 4.493 6.186 8.278 5.413l26.062-5.413a6.962 6.962 0 0 0 5.432-8.242l-10.848-51.93c-.788-3.769-4.493-6.19-8.282-5.401Z" clip-rule="evenodd" /><path fill="#BBD9FD" fill-rule="evenodd" d="m80.66 62.672-29.485 6.115-8.385-40.122 29.493-6.106 8.377 40.113Zm-10.502 12.15a2.636 2.636 0 0 1-3.638.748 2.6 2.6 0 0 1-.748-3.618 2.72 2.72 0 0 1 3.634-.756 2.607 2.607 0 0 1 .76 3.618l-.008.008Z" clip-rule="evenodd" /><path fill="#fff" d="M97.828 0c-14.083 0-25.5 11.417-25.5 25.5l.003.345a25.496 25.496 0 0 0 13.273 22.04l.18.096.071-.122c-.38.64-.617 1.306-.617 1.967 0 1.424.679 2.62 2.05 3.099l.23.077c2.601.819 4.952.042 7.797-1.95l.217-.155.561.045a25.8 25.8 0 0 0 1.735.058c14.084 0 25.5-11.417 25.5-25.5S111.912 0 97.828 0Z" /><path fill="#BBD9FD" d="M97.828 0c-14.083 0-25.5 11.417-25.5 25.5l.003.345a25.496 25.496 0 0 0 13.273 22.04l.18.096.071-.122c-.38.64-.617 1.306-.617 1.967 0 1.424.679 2.62 2.05 3.099l.23.077c2.601.819 4.952.042 7.797-1.95l.217-.155.561.045a25.8 25.8 0 0 0 1.735.058c14.084 0 25.5-11.417 25.5-25.5S111.912 0 97.828 0Zm0 3c12.427 0 22.5 10.074 22.5 22.5S110.255 48 97.828 48c-.856 0-1.705-.048-2.547-.142l-.579-.066-.893.65c-2.24 1.608-3.823 2.172-5.372 1.703l-.16-.052c-.037-.013-.04-.018-.04-.267 0-.029.068-.218.181-.409l.061-.097a5.366 5.366 0 0 0 .723-1.677l.294-1.2-1.12-.518A22.501 22.501 0 0 1 75.328 25.5c0-12.426 10.074-22.5 22.5-22.5Z" /><path fill="#297EF2" d="M84 22.2c0-3.92 0-5.88.763-7.378a7 7 0 0 1 3.06-3.059C89.318 11 91.28 11 95.2 11h5.6c3.92 0 5.881 0 7.378.763a7 7 0 0 1 3.059 3.06C112 16.318 112 18.28 112 22.2v5.6c0 3.92 0 5.88-.763 7.378a7 7 0 0 1-3.059 3.059C106.681 39 104.72 39 100.8 39h-5.6c-3.92 0-5.88 0-7.378-.763a7 7 0 0 1-3.059-3.06C84 33.682 84 31.72 84 27.8v-5.6Z" /><path fill="#fff" fill-rule="evenodd" d="M101.07 27.836a.515.515 0 0 1-.759.11c-.66.518-1.471.8-2.316.8-.842 0-1.652-.281-2.31-.796l-.052.035a.516.516 0 0 1-.703-.147.507.507 0 0 1 .144-.693c.198-.13.212-.39.212-.393a.514.514 0 0 1 .163-.357.467.467 0 0 1 .358-.134.504.504 0 0 1 .49.512c0 .004-.001.142-.051.333a2.737 2.737 0 0 0 3.506-.007 1.637 1.637 0 0 1-.05-.318.505.505 0 0 1 .497-.52h.009c.273 0 .499.22.505.493 0 0 .015.261.211.39.229.152.294.461.146.692Zm2.151-5.9a5.5 5.5 0 0 0-1.565-3.249 5.237 5.237 0 0 0-7.466.001 5.5 5.5 0 0 0-1.568 3.265 5.26 5.26 0 0 0-3.18 1.609 5.528 5.528 0 0 0-1.522 3.833c0 3.022 2.394 5.48 5.338 5.48h9.483c2.943 0 5.339-2.458 5.339-5.48 0-2.856-2.14-5.21-4.859-5.46Z" clip-rule="evenodd" /></symbol>'}),Po=(so.a.add(_o),_o),To=a("aCpG"),So=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(ne.e)().t,c=Object(de.b)().isMobile,l=Object(g.useClient)();return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement(Co,{label:l.appMetadata.slug}),r.a.createElement(jo.a,{icon:Po,title:i("emptyContent.installApp.title"),text:i("emptyContent.installApp.text"),centered:!0},r.a.createElement(wn.a,{className:"u-mt-1",label:i("emptyContent.installApp.action"),onClick:function(){return o(!0)}})),a&&r.a.createElement(To.a,{onClose:function(){return o(!1)}}))};function Ao(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Mo(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ao(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var No=function(e){return e.map((function(e){return e._id})).reduce((function(e,t){var a,n=(a=t,{definition:Object(g.Q)(m.i).where({"cozyMetadata.sourceAccount":a}).select(["cozyMetadata.sourceAccount"]).limitBy(1),options:{as:"".concat(m.i,"/hasTimeseries/sourceAccount/").concat(a),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}});return e[t]=Mo(Mo({},n.options),{},{query:n.definition}),e}),{})},Lo=a("eCKa"),Ro={typography:{whiteSpace:"pre-line"}},Io=function(){var e=Object(ne.e)().t,t=Object(de.b)().isMobile,a=Object(g.useClient)(),n=oe().checkPermissionsAndEnableTrackingOrShowDialog,o=Xn(),i=o.sourceName,c=o.sourceType,l=function(){var e=V()("coachco2.max-days-to-capture"),t="number"==typeof e&&e>=0,a="number"==typeof e&&e<0,n=!0===V()("coachco2.bikegoal.enabled"),r=Xn(),o=r.sourceName,i=r.sourceOffer;return n&&t?"textA":!n||!a||i&&"premium"!==i?n&&a&&"employer"!==i&&o?"textC":n&&a&&"employer"===i?"textD":"text":"textB"}();return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Co,{label:a.appMetadata.slug}),r.a.createElement(jo.a,{"data-testid":"EmptyContent",className:t?"u-p-1":"u-flex-justify-start u-p-3",icon:r.a.createElement(Lo.a,{app:"coachco2"}),iconSize:"large",title:e("emptyContent.welcome.title"),text:r.a.createElement(kt.a,{style:Ro.typography,variant:"inherit",color:"inherit"},e("emptyContent.welcome.".concat(l),{maxDaysToCapture:V()("coachco2.max-days-to-capture"),sourceType:c,sourceName:i})),centered:!0},r.a.createElement(wn.a,{className:"u-mt-1",label:e("emptyContent.welcome.action"),onClick:O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))})))},Fo=function(){var e=z(),t=e.accounts,a=e.account,n=oe(),o=n.isGeolocationTrackingAvailable,i=n.isGeolocationTrackingEnabled,c=null===o||null===i,l=t.filter((function(e){return e._id!==(null==a?void 0:a._id)})),s=No(l),u=Object(g.useQueries)(s);return Object(g.isQueriesLoading)(u)||c?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):Object.values(u).some((function(e){return e.data.length>0}))?r.a.createElement(wo,null):o?i&&a?r.a.createElement(Do,null):r.a.createElement(Io,null):r.a.createElement(So,null)},Go=a("7u78"),zo=a("o1F1"),Bo=a("/ENz"),qo=["children","className","spaceBetween"],Zo=Object(Bo.a)((function(){return{button:{padding:"0 1rem",justifyContent:function(e){return e.spaceBetween?"space-between":"left"}},typography:{textTransform:"capitalize"}}})),Qo=function(e){var t=e.children,a=e.className,n=e.spaceBetween,o=c()(e,qo),i=Zo({spaceBetween:n});return r.a.createElement(Go.a,Hn()({className:Ee()(i.button,a),endIcon:r.a.createElement(Ot.a,{icon:zo.a,size:10})},o),r.a.createElement(kt.a,{className:i.typography},t))},Vo=a("gtDA"),Uo=a("1Crc"),Ho=["className","type","options","selectedIndex","disabledIndexes","onclick"],Yo=Object(Bo.a)((function(){return{paper:{textTransform:"capitalize",width:function(e){var t=e.anchorEl;return t?window.getComputedStyle(t).width:void 0},marginTop:2}}})),Wo=function(e){var t=e.className,a=e.type,o=e.options,i=e.selectedIndex,l=e.disabledIndexes,u=e.onclick,d=c()(e,Ho),m=Object(n.useState)(null),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useState)(i||0),g=s()(v,2),y=g[0],h=g[1],E=Yo({anchorEl:f}).paper,O=function(e){return function(){b(null),h(e),u&&u(a,o[e])}};return Object(n.useEffect)((function(){void 0!==i&&h(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Qo,Hn()({"data-testid":"dropdown-button",className:t,onClick:function(e){b(e.currentTarget)}},d),o[y]),r.a.createElement(Vo.a,{"data-testid":"dropdown-menu",classes:{paper:E},anchorEl:f,getContentAnchorEl:null,keepMounted:!0,open:Boolean(f),onClose:function(){b(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},elevation:2},o.map((function(e,t){return r.a.createElement(Uo.a,{"data-testid":"dropdown-menuItem-".concat(t),key:t,onClick:O(t),selected:t===y,disabled:l&&l.includes(t)},e)}))))};Wo.proptypes={className:Nt.a.string,type:Nt.a.oneOfType([Nt.a.string,Nt.a.number]),options:Nt.a.array.isRequired,selectedIndex:Nt.a.number,disabledIndexes:Nt.a.array,onclick:Nt.a.func};var Jo=Wo,Ko=function(e){return Array(12).fill().map((function(t,a){return new Intl.DateTimeFormat("".concat(e,"-").concat(e.toUpperCase()),{month:"long"}).format(new Date(0,a))}))},Xo=function(e){return new Date(Math.min.apply(null,e))},$o=function(e){return new Date(Math.max.apply(null,e))},ei=function(e,t){return e.map((function(e,a){return t.includes(e)?null:a})).filter((function(e){return null!==e}))},ti=function(e,t){var a=function(e){var t=$o(e).getFullYear(),a=Xo(e).getFullYear(),n=Number(a);return Array(t-a+1).fill().map((function(){return n++})).sort().reverse()}(e),n=function(e){return Rt()(new Set(e.map((function(e){return e.getFullYear()}))))}(e),r=a.indexOf(t.getFullYear());return{years:a,yearSelectedIndex:r,disabledYearsIndexes:ei(a,n)}},ai=ka()((function(e){var t=e.dates,a=e.selectedDate,n=e.lang,r=Ko(n),o=Xo(t),i=$o(t),c=a.getFullYear(),l=c===i.getFullYear(),s=c===o.getFullYear(),u=12;l?u=i.getMonth()+1:s&&(u=12-o.getMonth());var d,m=function(e){var t=e.monthCount,a=e.allMonthsName,n=e.endToStart;return a.slice(n?a.length-t:0,n?a.length:t)}({monthCount:u,allMonthsName:r,endToStart:s}),p=m.indexOf(r[a.getMonth()]);-1===p&&(l?d=i:s&&(d=o),p=m.indexOf(r[d.getMonth()]));var f=function(e){var t=e.dates,a=e.year,n=e.allMonthsName;return Rt()(new Set(t.map((function(e){return e.getFullYear()===a?n[e.getMonth()]:null})).filter((function(e){return null!==e}))))}({dates:t,year:c,allMonthsName:r});return{months:m,monthSelectedIndex:p,disabledMonthsIndexes:ei(m,f)}})),ni=ka()((function(e){var t=e.oldDate,a=e.lang,n=e.value,r=e.type,o=e.dates,i=Ko(a);if("year"===r){var c=new Date(new Date(t).setFullYear(n)),l=ai({dates:o,selectedDate:c,lang:a}),s=l.months,u=l.monthSelectedIndex,d=i.indexOf(s[u]);return new Date(new Date(c).setMonth(d))}if("month"===r){var m=i.indexOf(n);return new Date(new Date(t).setMonth(m))}return t})),ri=a("K4g+"),oi=Object(Bo.a)((function(e){return{paper:{display:"inline-flex",width:264,borderRadius:1e3},leftDropdownButton:{borderTopLeftRadius:1e3,borderBottomLeftRadius:1e3,paddingRight:"2.5rem"},rightDropdownButton:{borderTopRightRadius:1e3,borderBottomRightRadius:1e3,paddingRight:"1.2rem"},divider:{margin:"0.6rem 0"},iconButton:{color:e.palette.text.icon,boxShadow:e.shadows[2],backgroundColor:e.palette.background.paper}}})),ii=function(e){var t=e.className,a=e.options,o=e.selectedDate,i=e.setSelectedDate,c=oi(),l=Object(ne.e)().lang,s=ai({dates:a,selectedDate:o,lang:l}),u=s.months,d=s.monthSelectedIndex,m=s.disabledMonthsIndexes,p=Object(n.useMemo)((function(){return ti(a,o)}),[a,o]),f=p.years,b=p.yearSelectedIndex,v=p.disabledYearsIndexes,g=function(e,t){var n=ni({oldDate:o,lang:l,value:t,type:e,dates:a});i(n)},y=function(e){return function(){i((function(t){return new Date(t.setMonth(t.getMonth()+e))}))}},h=function(e){return function(e){var t=e.type,a=e.selectedDate,n=e.options,r=new Date(a.getFullYear(),a.getMonth());if("previous"===t){var o=Xo(n);return new Date(o.getFullYear(),o.getMonth()).getTime()===r.getTime()}if("next"===t){var i=$o(n);return new Date(i.getFullYear(),i.getMonth()).getTime()===r.getTime()}return!1}({type:e,selectedDate:o,options:a})};return r.a.createElement(Pn.a,{display:"flex",className:t},r.a.createElement(kn.a,{className:c.paper,elevation:2},r.a.createElement(Jo,{"data-testid":"dropdown-button-year",type:"year",className:c.leftDropdownButton,options:f,onclick:g,selectedIndex:b,disabledIndexes:v}),r.a.createElement(Et.a,{className:c.divider,orientation:"vertical",flexItem:!0}),r.a.createElement(Jo,{"data-testid":"dropdown-button-month",type:"month",className:c.rightDropdownButton,fullWidth:!0,spaceBetween:!0,options:u,onclick:g,selectedIndex:d,disabledIndexes:m})),r.a.createElement(Pn.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(po.a,{"data-testid":"previous-button",className:c.iconButton,onClick:y(-1),disabled:h("previous"),size:"medium"},r.a.createElement(Ot.a,{icon:ri.a})),r.a.createElement(po.a,{"data-testid":"next-button",className:Ee()(c.iconButton,"u-ml-half"),onClick:y(1),disabled:h("next"),size:"medium"},r.a.createElement(Ot.a,{icon:Ct.a}))))};ii.proptypes={className:Nt.a.string,options:Nt.a.array.isRequired,selectedDate:Nt.a.number.isRequired,setSelectedDate:Nt.a.func.isRequired};var ci=ii,li=function(e){var t=e.className,a=e.options,n=e.isLoading,o=e.selectedDate,i=e.setSelectedDate;return n?r.a.createElement(Pn.a,{display:"flex",className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2"},r.a.createElement(Pn.a,{display:"inline-flex",width:264,borderRadius:999,style:{backgroundColor:"var(--actionColorDisabledBackground)"}}),r.a.createElement(Pn.a,{className:"u-ml-half",display:"inline-flex"},r.a.createElement(po.a,{style:{backgroundColor:"var(--actionColorDisabledBackground)"},size:"medium",disabled:!0},r.a.createElement(Ot.a,{icon:ri.a})),r.a.createElement(po.a,{style:{backgroundColor:"var(--actionColorDisabledBackground)"},className:"u-ml-half",size:"medium",disabled:!0},r.a.createElement(Ot.a,{icon:Ct.a})))):r.a.createElement(ci,{className:t,options:a,selectedDate:o,setSelectedDate:i})},si=["data"];function ui(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function di(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ui(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var mi=function(){var e=le(),t=e.selectedDate,a=e.setSelectedDate,o=e.isSelectedDateLoading,i=e.setIsSelectedDateLoading,l=e.options,s=e.setOptions,u=z().account,d=A({accountId:null==u?void 0:u._id,limitBy:1e3}),m=Object(g.useQueryAll)(d.definition,di(di({},d.options),{},{enabled:Boolean(u)})),p=m.data,f=c()(m,si),b=Object(g.isQueryLoading)(f)||f.hasMore;return Object(n.useEffect)((function(){if(u&&!b&&o){var e=function(e,t){return e||!t||0===(null==t?void 0:t.length)?null:t.map((function(e){return new Date(e.startDate)}))}(b,p);i(!1),e&&(a($o(e)),s(e))}u||i(!1),u&&b&&!o&&i(!0)}),[u,b,o,i,a,p,s]),r.a.createElement(li,{className:"u-mt-1-s u-ml-0-s u-flex-justify-center-s u-flex u-ml-2",isLoading:!l||o,options:l,selectedDate:t,setSelectedDate:a})},pi=a("G8Y8"),fi=["data"],bi=function(){var e=Object(ne.e)().t,t=Object(ge.h)(),a=Object(ge.g)(),n=Object(ge.j)().mode,o=Object(de.b)().isMobile,i=e(n?"trips.modes.".concat(n.toUpperCase()):"analysis.mode"),c=n?function(){return t("/analysis/modes")}:void 0;return a.pathname.includes("purposes")||a.pathname.includes("modes")?r.a.createElement(r.a.Fragment,null,r.a.createElement(Co,{label:i,onBack:c}),o&&r.a.createElement(oo,null),r.a.createElement(mi,null),r.a.createElement(vi,null)):r.a.createElement(ge.a,{to:"/analysis/modes",replace:!0})},vi=function(){var e=z(),t=e.account,a=e.isAccountLoading,n=le(),o=n.selectedDate,i=n.isSelectedDateLoading,l=M(o,null==t?void 0:t._id),s=Object(g.useQueryAll)(l.definition,l.options),u=s.data,d=c()(s,fi);return i||a||t&&(Object(g.isQueryLoading)(d)||d.hasMore)&&null!==o?r.a.createElement(pi.a,{count:8,hasSecondary:!0,divider:!0}):t&&u&&0!==(null==u?void 0:u.length)?r.a.createElement(ge.b,{context:[u]}):r.a.createElement(Fo,null)},gi=a("eson"),yi=["days","label","color","isSuccess","body1"],hi=["data"],Ei=function(e){return{color:e&&"var(--successColor)"}},Oi=function(e){var t=e.days,a=e.label,n=e.color,o=e.isSuccess,i=e.body1,l=c()(e,yi),s=Object(ne.e)().t,u=R(),d=Object(g.useQuery)(u.definition,u.options),m=d.data,p=c()(d,hi),f=t||"-";return Object(g.isQueryLoading)(p)?null:r.a.createElement("div",l,r.a.createElement(Ot.a,{className:"u-mr-half",icon:gi.a,color:n,size:8}),r.a.createElement(kt.a,{display:"inline",variant:i?"body1":"caption",color:"textPrimary",style:Ei(o)},s("bikeGoal.goal_progression",{days:f,daysToReach:Jn(m)})),r.a.createElement(kt.a,{variant:"caption",style:Ei(o)},a))};Oi.defaultProps={color:"#BA5AE8"};var Ci=Oi,ji=["data"],wi=function(e){var t=e.className,a=e.timeseries,o=e.body1,i=e.componentsProps,l=Object(n.useState)(!1),u=s()(l,2),d=u[0],m=u[1],p=Object(ne.e)().t,f=Xn().sourceName,b=R(),v=Object(g.useQuery)(b.definition,b.options),y=v.data,h=c()(v,ji);Object(n.useEffect)((function(){var e,t=null==y||null===(e=y[0].bikeGoal)||void 0===e?void 0:e.sendToDACC;m(!!t)}),[y]);var E=hr({hasConsent:d,measureName:P.C}),O=E.data,C=E.isLoading;return Object(g.isQueryLoading)(h)&&C?null:r.a.createElement("div",{className:"u-flex ".concat(t)},r.a.createElement(Ci,Hn()({},i.BikeGoalSummaryItem,{days:er(a,y),label:p("bikeGoal.my_progression"),isSuccess:$n(a,y),body1:o})),r.a.createElement(Et.a,{className:"u-mh-1",style:{marginTop:4},orientation:"vertical",flexItem:!0}),r.a.createElement(Ci,Hn()({},i.BikeGoalSummaryItem,{days:O,label:p(f?"bikeGoal.average_progression":"bikeGoal.average_progression_noValue"),color:"#BA5AE83D",body1:o})))};wi.defaultProps={className:"",componentsProps:{}};var xi=wi,ki=["data"],Di=function(e){var t=e.timeseriesByYear,a=e.settings;return{whiteSpace:e.preLine&&"pre-line",color:$n(t,a)&&"var(--successColor)"}},_i=function(e){var t=e.className,a=e.timeseriesByYear,n=e.variant,o=e.preLine,i=Object(ne.e)().t,l=R(),s=Object(g.useQuery)(l.definition,l.options),u=s.data,d=c()(s,ki);return Object(g.isQueryLoading)(d)?null:r.a.createElement(kt.a,{className:t,variant:n,style:Di({timeseriesByYear:a,settings:u,preLine:o})},i("bikeGoal.yearly_goal_progression",{days:er(a,u),daysToReach:Jn(u)}))},Pi=a("Yb2N"),Ti=a("PExr"),Si=["data"],Ai={BikeGoalSummaryItem:{flex:"1 1 0"}},Mi=function(e){var t=e.className,a=e.timeseries,n=e.sendToDACC,o=Object(ne.e)().t,i=Object(de.b)().isMobile,l=Object(ge.h)(),s=R(),u=Object(g.useQuery)(s.definition,s.options),d=u.data,m=c()(u,Si);if(Object(g.isQueryLoading)(m))return null;return r.a.createElement("div",{className:t},i&&r.a.createElement(kt.a,{className:"u-mb-half",variant:"h3"},o("bikeGoal.title")),n?r.a.createElement(xi,{className:Ee()("u-mt-half",{"u-ph-1 u-ta-center":i}),timeseries:a,body1:i,componentsProps:{BikeGoalSummaryItem:Ai.BikeGoalSummaryItem}}):r.a.createElement(_i,{className:"u-mt-half",timeseriesByYear:a}),$n(a,d)&&r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(Pi.a,{icon:r.a.createElement(Ot.a,{icon:Ti.a,className:"u-ml-half"}),label:o("bikeGoal.achievement_certificate"),color:"success",clickable:!0,onClick:function(){l("certificate/generate")}})))};Mi.propTypes={className:Nt.a.string,timeseries:Nt.a.arrayOf(Nt.a.object)};var Ni=Mi,Li=a("J14j"),Ri=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(de.b)().isMobile?r.a.createElement(Li.a,{textVariant:"h6",onClick:n},a):r.a.createElement(wn.a,{ref:t,variant:"secondary",label:a,endIcon:r.a.createElement(Ot.a,{icon:zo.a,size:14}),onClick:n})}));Ri.displayName="ActionButton",Ri.propTypes={label:Nt.a.string,onClick:Nt.a.func};var Ii=Ri,Fi=a("lAlC"),Gi=a("/gvb"),zi=a("hAvo"),Bi=function(e){var t=e.timeseries,a=Object(ge.j)().year,o=Object(ge.h)(),i=Object(n.useRef)(),c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=Object(n.useMemo)((function(){return function(e){var t=new Date;if(!e||0===e.length)return[t.getFullYear().toString()];var a=new Date(function(e){return e.reduce((function(e,t){return e.startDate<t.startDate?e:t}))}(e).startDate),n=Object(Fi.a)(t,a);return Array.from({length:n+1},(function(e,a){return Object(_.a)(t,a).getFullYear().toString()}))}(t)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ii,{ref:i,label:a,onClick:function(){return d((function(e){return!e}))}}),u&&r.a.createElement(Gi.a,{anchorElRef:i,autoclose:!0,onClose:function(){return d(!1)},popperOptions:{placement:"bottom-end"}},m.map((function(e,t){return r.a.createElement(zi.a,{key:t,onClick:function(){return o("/bikegoal/".concat(e,"/trips"))}},e)}))))};Bi.propTypes={timeseries:Nt.a.arrayOf(Nt.a.object)};var qi=r.a.memo(Bi),Zi=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.onClick;return Object(de.b)().isMobile?r.a.createElement(po.a,{onClick:n},a):r.a.createElement(wn.a,{ref:t,className:"u-miw-auto u-ml-half",variant:"secondary",label:a,onClick:n})}));Zi.displayName="ActionButton",Zi.propTypes={label:Nt.a.node,onClick:Nt.a.func};var Qi=Zi,Vi=["data"];function Ui(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Hi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ui(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Yi=function(e){var t=Object(g.useClient)(),a=R(),n=Object(g.useQuery)(a.definition,a.options),r=n.data,o=c()(n,Vi),i=Object(g.isQueryLoading)(o);return{isLoading:i,value:i?void 0:r&&r[0]?Zt()(r[0],e):void 0,save:function(){var a=O()(j.a.mark((function a(n){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=Hi(Hi({},r[0]),{},{_type:m.c}),Wt()(o,e,n),a.next=4,t.save(o);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},Wi=a("pSj2"),Ji=function(e){var t=e.open,a=e.onClose,o=Object(ne.e)().t,i=Object(ge.h)(),c=Yi("bikeGoal.activated"),l=c.isLoading,u=c.save,d=Object(n.useState)(!1),m=s()(d,2),p=m[0],f=m[1];return r.a.createElement(Wi.a,{open:t,title:o("bikeGoal.deactivate.title"),content:o("bikeGoal.deactivate.content"),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(wn.a,{variant:"secondary",label:o("bikeGoal.deactivate.cancel"),onClick:a}),r.a.createElement(wn.a,{color:"error",label:o("bikeGoal.deactivate.stop_participate"),busy:p||l,onClick:function(){f(!0),u(!1),i("/trips")}})),onClose:a})};Ji.propTypes={open:Nt.a.bool.isRequired,onClose:Nt.a.func.isRequired};var Ki=Ji,Xi=a("vc9t"),$i=a("jMeN"),ec=a("KsnS"),tc=a("QRbe"),ac=function(){var e=Object(ne.e)().t,t=Object(de.b)().isMobile,a=Object(n.useRef)(),o=Object(ge.h)(),i=Object(n.useState)(!1),c=s()(i,2),l=c[0],u=c[1],d=Object(n.useState)(!1),m=s()(d,2),p=m[0],f=m[1],b={divider:{borderTop:0,marginLeft:{isMobile:t}.isMobile?"3rem":void 0}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qi,{ref:a,label:r.a.createElement(Ot.a,{icon:Xi.a}),onClick:function(){return u((function(e){return!e}))}}),l&&r.a.createElement(Gi.a,{anchorElRef:a,autoclose:!0,onClose:function(){return u(!1)},popperOptions:{placement:"bottom-end"}},r.a.createElement(zi.a,{left:r.a.createElement(Ot.a,{icon:tc.a}),onClick:function(){return o("edit")}},e("bikeGoal.edit.modify")),r.a.createElement(zi.a,{left:r.a.createElement(Ot.a,{icon:ec.a}),onClick:function(){return o("about")}},e("bikeGoal.about.title")),r.a.createElement(Et.a,{style:b.divider}),r.a.createElement(zi.a,{left:r.a.createElement(Ot.a,{icon:$i.a}),onClick:function(){return f(!0)}},e("bikeGoal.deactivate.deactivate"))),r.a.createElement(Ki,{open:p,onClose:function(){return f(!1)}}))};qi.propTypes={timeseries:Nt.a.arrayOf(Nt.a.object)};var nc=function(e){var t=e.timeseries,a=Object(de.b)().isMobile,n={actions:{right:{isMobile:a}.isMobile?0:"13rem"}};return r.a.createElement("div",{className:Ee()("u-flex u-flex-justify-end",{"u-pos-absolute u-top-m":!a}),style:n.actions},r.a.createElement(qi,{timeseries:t}),r.a.createElement(ac,null))},rc=a("13md"),oc=function(e){var t=e.className,a=e.timeseries,n=e.hasMore,o=e.fetchMore,i=Object(ne.e)().t;return 0===(null==a?void 0:a.length)?r.a.createElement(kt.a,{className:"u-mt-2 u-p-2",variant:"h5",align:"center"},i("bikeGoal.empty.title")):r.a.createElement("div",{className:t},r.a.createElement(_n,{timeseries:a,noHeader:!0}),n&&r.a.createElement(rc.a,{label:i("loadMore"),fetchMore:o}))};oc.propTypes={className:Nt.a.string,timeseries:Nt.a.arrayOf(Nt.a.object).isRequired,hasMore:Nt.a.bool,fetchMore:Nt.a.func};var ic=oc,cc=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(ge.h)(),i=Object(ge.j)().year,c=pn(t,i);return r.a.createElement(Kr.a,{open:!0,onClose:function(){return o("/trips")},disableGutters:!0,componentsProps:{dialogTitle:{className:"u-p-0"}},title:r.a.createElement(nc,{timeseries:t}),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(wr,{display:"flex",paddingTop:"1.5rem",marginTop:"3rem",timeseries:c,sendToDACC:n}),r.a.createElement(Ni,{className:"u-flex u-flex-column u-flex-items-center",timeseries:c,sendToDACC:n}),r.a.createElement(ic,{className:"u-mt-2",timeseries:c,hasMore:a.hasMore,fetchMore:a.fetchMore}))})};cc.propTypes={timeseries:Nt.a.arrayOf(Nt.a.object),timeseriesQueryLeft:Nt.a.object.isRequired};var lc=cc,sc=function(e){var t=e.timeseries,a=e.timeseriesQueryLeft,n=e.sendToDACC,o=Object(ne.e)().t,i=Object(ge.h)(),c=Object(ge.j)().year,l=pn(t,c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Co,{label:o("bikeGoal.title"),subtitle:r.a.createElement(Ni,{timeseries:l,sendToDACC:n}),onBack:function(){return i("/trips")}}),r.a.createElement(nc,{timeseries:t}),r.a.createElement(wr,{display:"flex",position:"absolute",top:"2rem",right:"2rem",timeseries:l,sendToDACC:n}),r.a.createElement(ic,{className:"u-mt-3",timeseries:l,hasMore:a.hasMore,fetchMore:a.fetchMore}))};sc.propTypes={timeseries:Nt.a.arrayOf(Nt.a.object),timeseriesQueryLeft:Nt.a.object.isRequired};var uc=sc,dc=["data"],mc=["data"],pc=function(){var e,t=z(),a=t.account,n=t.isAccountLoading,o=Object(de.b)().isMobile,i=R(),l=Object(g.useQuery)(i.definition,i.options),s=l.data,u=c()(l,dc),d=Object(g.isQueryLoading)(u),m=N({accountId:null==a?void 0:a._id},Boolean(a)),p=Object(g.useQueryAll)(m.definition,m.options),f=p.data,b=c()(p,mc);if(m.options.enabled&&(Object(g.isQueryLoading)(b)||b.hasMore)||n||d)return r.a.createElement(pi.a,{count:8,hasSecondary:!0,divider:!0});var v=!(null==s||null===(e=s[0].bikeGoal)||void 0===e||!e.sendToDACC);return o?r.a.createElement(lc,{timeseries:f,timeseriesQueryLeft:b,sendToDACC:v}):r.a.createElement(uc,{timeseries:f,timeseriesQueryLeft:b,sendToDACC:v})},fc=function(){var e=Object(ne.e)().t,t=Object(ge.h)(),a={typography:{whiteSpace:"pre-line"}};return r.a.createElement(Kr.a,{open:!0,title:e("bikeGoal.about.title"),content:r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{className:"u-mb-1",variant:"h5"},e("bikeGoal.about.intro.title")),r.a.createElement(kt.a,{variant:"body1",style:a.typography},e("bikeGoal.about.intro.content")),r.a.createElement(kt.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.how_trips_detected.title")),r.a.createElement(kt.a,{variant:"body1",style:a.typography},e("bikeGoal.about.how_trips_detected.content")),r.a.createElement(kt.a,{className:"u-mt-1-half u-mb-1",variant:"h5"},e("bikeGoal.about.once_goal_reach.title")),r.a.createElement(kt.a,{variant:"body1",style:a.typography},e("bikeGoal.about.once_goal_reach.content"))),onClose:function(){return t("..")}})},bc=a("UuKj"),vc=function(e){var t=e.itemName,a=e.onClose,o=Object(ne.e)().t,i=Yi("bikeGoal.".concat(t)),c=i.isLoading,l=i.value,u=i.save,d=Object(n.useState)(l),m=s()(d,2),p=m[0],f=m[1],b=Object(n.useState)(!1),v=s()(b,2),g=v[0],y=v[1],h="daysToReach"===t,E=!p||h&&p<=0,C=!p||h&&p<=0,w=p?h&&C?o("bikeGoal.onboarding.steps.daysToReach.error"):" ":o("bikeGoal.edit.required"),x=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,u(p);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Wi.a,{open:!0,title:o("bikeGoal.edit.".concat(t)),content:c?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(bc.a,{variant:"outlined",marging:"normal",type:h?"number":void 0,inputProps:h?{min:"1",step:"1"}:void 0,defaultValue:p,required:!0,fullWidth:!0,error:C,helperText:w,onChange:function(e){return f(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(wn.a,{variant:"secondary",label:o("bikeGoal.edit.cancel"),onClick:a}),r.a.createElement(wn.a,{className:"u-miw-4",label:o("bikeGoal.edit.submit"),busy:g,disabled:E,onClick:x})),onClose:a})};vc.propTypes={itemName:Nt.a.string.isRequired,onClose:Nt.a.func.isRequired};var gc=vc,yc=a("uiSW"),hc=a("MzjA"),Ec=a("EMSc");function Oc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Cc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var jc=function(){var e=Object(ne.e)().t,t=Object(n.useState)(""),a=s()(t,2),o=a[0],i=a[1],c=Yi("bikeGoal"),l=c.isLoading,u=c.value,d=c.save,m=Xn().sourceName,p=function(){d(Cc(Cc({},u),{},{sendToDACC:!u.sendToDACC}))};return l?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,null,r.a.createElement(jt.b,{button:!0,onClick:function(){return i("lastname")}},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Ge.a})),r.a.createElement(xt.a,{primary:r.a.createElement(kt.a,{variant:"caption"},e("bikeGoal.edit.lastname")),secondary:r.a.createElement(kt.a,{variant:"body1"},u.lastname)})),r.a.createElement(Et.a,{component:"li",variant:"inset"}),r.a.createElement(jt.b,{button:!0,onClick:function(){return i("firstname")}},r.a.createElement(wt.a,null),r.a.createElement(xt.a,{primary:r.a.createElement(kt.a,{variant:"caption"},e("bikeGoal.edit.firstname")),secondary:r.a.createElement(kt.a,{variant:"body1"},u.firstname)})),r.a.createElement(Et.a,{component:"li",variant:"inset"}),r.a.createElement(jt.b,{button:!0,onClick:function(){return i("daysToReach")}},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Te.a})),r.a.createElement(xt.a,{primary:r.a.createElement(kt.a,{variant:"caption"},e("bikeGoal.edit.daysToReach")),secondary:r.a.createElement(kt.a,{variant:"body1"},u.daysToReach)})),r.a.createElement(Et.a,{component:"li",variant:"inset"}),r.a.createElement(jt.b,{ellipsis:!1,button:!0,onClick:p},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:yc.a})),r.a.createElement(xt.a,{primary:e(m?"bikeGoal.edit.compare_progress":"bikeGoal.edit.compare_progress_noValue")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{className:"u-w-auto",color:"primary",checked:u.sendToDACC,onChange:p})))),Boolean(o)&&r.a.createElement(gc,{itemName:o,onClose:function(){return i("")}}))},wc=function(){var e=Object(ne.e)().t,t=Object(ge.h)();return r.a.createElement(Kr.a,{open:!0,disableGutters:!0,title:e("bikeGoal.edit.title"),content:r.a.createElement(jc,null),onClose:function(){return t("..")}})},xc=new co.a({id:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d",use:"dacc-permissions_3573ba0684a43d6d3596ae2974a0613d-usage",viewBox:"0 0 106 106",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 106 106" id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d"><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a)"><path d="M16 48c0-19.882 16.118-36 36-36s36 16.118 36 36-16.118 36-36 36-36-16.118-36-36Z" fill="#fff" /></g><path d="M65.11 37.39C63.962 31.193 58.53 26.5 52 26.5c-6.53 0-11.962 4.693-13.11 10.89C32.693 38.538 28 43.97 28 50.5c0 7.364 5.97 13.333 13.333 13.333H62.667C70.03 63.833 76 57.863 76 50.5c0-6.53-4.693-11.962-10.89-13.11Z" fill="#B3D3FF" /><path d="M49.569 36c.837 0 1.528.63 1.622 1.443l.011.19v10.941a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-9.308l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v9.308a.49.49 0 0 0 .377.477l.113.013h.653c.27 0 .49-.22.49-.49v-6.042l.011-.19a1.633 1.633 0 0 1 3.244 0l.011.19v16.33a6.527 6.527 0 0 1-3 5.495V67a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2.615a6.69 6.69 0 0 1-1.022-.78l-8.425-7.824a1.73 1.73 0 0 1-.262-2.226 1.538 1.538 0 0 1 2.075-.463l4.67 2.827V40.9l.012-.19a1.633 1.633 0 0 1 3.244 0l.01.19v7.675a.49.49 0 0 0 .378.477l.112.013h.654c.27 0 .49-.22.49-.49V37.633l.01-.19A1.633 1.633 0 0 1 49.57 36Z" fill="#297EF2" /><g filter="url(#dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b)"><rect x="58" y="54" width="32" height="32" rx="8" fill="#fff" /><path d="M72.409 77.886c.2-.05.404.072.455.273l.375 1.5c.007.03.011.061.011.091h1.5c0-.03.004-.06.011-.091l.375-1.5a.375.375 0 1 1 .728.182l-.364 1.455v1.454a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-1.454l-.364-1.455a.375.375 0 0 1 .273-.455Z" fill="#F33136" /><path d="M72.5 78.25c-.414 0-.765-.351-.988-.7-.408-.64-1.3-1.334-2.346-2.147C66.746 73.523 63.5 71 63.5 67c0-4.97 4.701-9 10.5-9v20.25h-1.5Z" fill="#F33136" /><path d="M74 78.25h-1.286c0-.838-.654-1.73-1.476-2.847C69.855 73.523 68 71 68 67c0-4.97 2.686-9 6-9v20.25Z" fill="#FC7B0E" /><path d="M75.5 78.25c.414 0 .765-.351.988-.7.408-.64 1.3-1.334 2.346-2.147C81.254 73.523 84.5 71 84.5 67c0-4.97-4.701-9-10.5-9v20.25h1.5Z" fill="#FFD799" /><path d="M74 78.25h1.286c0-.838.654-1.73 1.476-2.847C78.145 73.523 80 71 80 67c0-4.97-2.686-9-6-9v20.25Z" fill="#FFB64F" /></g><defs><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_a" x="0" y="0" width="104" height="104" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter><filter id="dacc-permissions_3573ba0684a43d6d3596ae2974a0613d_b" x="42" y="42" width="64" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="8"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.06 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.0793047 0"></feColorMatrix><feBlend in2="effect1_dropShadow_754_48957" result="effect2_dropShadow_754_48957"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feMorphology radius=".5" operator="dilate" in="SourceAlpha" result="effect3_dropShadow_754_48957"></feMorphology><feOffset></feOffset><feColorMatrix values="0 0 0 0 0.113725 0 0 0 0 0.129412 0 0 0 0 0.164706 0 0 0 0.12 0"></feColorMatrix><feBlend in2="effect2_dropShadow_754_48957" result="effect3_dropShadow_754_48957"></feBlend><feBlend in="SourceGraphic" in2="effect3_dropShadow_754_48957" result="shape"></feBlend></filter></defs></symbol>'}),kc=(so.a.add(xc),xc),Dc=new co.a({id:"icon-anonymous_f9180197246a84316517b8157ef006c8",use:"icon-anonymous_f9180197246a84316517b8157ef006c8-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-anonymous_f9180197246a84316517b8157ef006c8"><path d="M4.36 1.24 3 6H1a1 1 0 1 0 0 2h14a1 1 0 1 0 0-2h-2l-1.36-4.76A1.7 1.7 0 0 0 9.062.291L8 1 6.938.292a1.7 1.7 0 0 0-2.578.947Z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M6.84 13.549A3.502 3.502 0 0 1 0 12.5a3.5 3.5 0 0 1 6.76-1.274A3.49 3.49 0 0 1 8 11c.436 0 .854.08 1.24.226a3.501 3.501 0 1 1-.08 2.323A1.495 1.495 0 0 0 8 13c-.467 0-.883.212-1.16.549ZM3.5 14a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm9 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" /></symbol>'}),_c=(so.a.add(Dc),Dc),Pc=new co.a({id:"icon-export_a08eff636b3b69e5d1cfc230029cdad8",use:"icon-export_a08eff636b3b69e5d1cfc230029cdad8-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-export_a08eff636b3b69e5d1cfc230029cdad8"><path d="M7.165 8.244C7.585 6.01 9.581 4.297 12 4.297s4.415 1.713 4.835 3.947l.143.76.76.14c2.295.418 4.012 2.396 4.012 4.748 0 .555-.096 1.089-.272 1.586l1.704 1.704a6.98 6.98 0 0 0 .818-3.29c0-3.222-2.173-5.925-5.131-6.79C17.984 4.17 15.236 2.047 12 2.047c-3.236 0-5.984 2.123-6.869 5.055C2.173 7.967 0 10.67 0 13.892c0 3.926 3.224 7.08 7.167 7.08H8.25v-2.25H7.167c-2.731 0-4.917-2.177-4.917-4.83 0-2.352 1.717-4.33 4.012-4.749l.76-.139.143-.76Z" fill="#1D212A" fill-opacity=".72" /><path d="M19.499 19.567a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1 0-3h2.368l-4.993-4.993a1.508 1.508 0 0 1 2.018-2.236l.114.104 4.993 4.992v-2.367a1.5 1.5 0 1 1 3 0v6Z" fill="#EA3F3F" /></symbol>'}),Tc=(so.a.add(Pc),Pc),Sc=function(e){var t=e.sharedDataLabel,a=e.open,n=e.onClose,o=e.onRefuse,i=e.onAccept,c=e.showDaccReasonsDialog,l=Object(ne.e)().t;return r.a.createElement(me.a,{variant:"inverted"},r.a.createElement(Wi.a,{open:a,onClose:n,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(Ot.a,{icon:kc,size:106}),r.a.createElement(kt.a,{variant:"h4"},l("dacc.permissionsDialog.title")),r.a.createElement(kt.a,{className:"u-mt-1"},l("dacc.permissionsDialog.primaryText")),r.a.createElement(me.a,{variant:"normal"},r.a.createElement(kn.a,{className:"u-mt-1-half",elevation:0},r.a.createElement(xn.a,null,r.a.createElement(jt.b,{divider:!0},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Tc,size:24})),r.a.createElement(xt.a,{primary:r.a.createElement(kt.a,{variant:"h6"},l("dacc.permissionsDialog.export_outside"))})),r.a.createElement(jt.b,{dense:!0},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:_c,color:"var(--iconTextColor)"})),r.a.createElement(xt.a,{primary:r.a.createElement(kt.a,{variant:"body2"},t)}))))),r.a.createElement(kt.a,{className:"u-mt-1-half",style:{textDecoration:"underline"},onClick:c},l("dacc.permissionsDialog.why_asking")),r.a.createElement(kt.a,{className:"u-mt-1-half",variant:"caption",color:"textPrimary"},l("dacc.permissionsDialog.secondaryText"))),actionsLayout:"column",actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(wn.a,{label:l("dacc.permissionsDialog.refuse"),onClick:o}),r.a.createElement(wn.a,{label:l("dacc.permissionsDialog.accept"),onClick:i}))}))};Sc.propTypes={sharedDataLabel:Nt.a.string.isRequired,open:Nt.a.bool.isRequired,onClose:Nt.a.func.isRequired,onRefuse:Nt.a.func.isRequired,onAccept:Nt.a.func.isRequired,showDaccReasonsDialog:Nt.a.func.isRequired};var Ac=Sc,Mc=function(e){var t=e.open,a=e.onClose,n=Object(ne.e)().t;return r.a.createElement(Wi.a,{open:t,onClose:a,title:n("dacc.reasonsDialog.title"),content:n("dacc.reasonsDialog.content")})};Mc.propTypes={open:Nt.a.bool.isRequired,onClose:Nt.a.func.isRequired};var Nc=Mc,Lc=function(e){var t=e.onClose,a=e.onRefuse,o=e.onAccept,i=e.componentProps,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ac,Hn()({open:!0,onClose:t,onRefuse:a,onAccept:o,showDaccReasonsDialog:function(){return d(!0)}},i.DaccPermissionsDialog)),u&&r.a.createElement(Nc,{open:!0,onClose:function(){return d(!1)}}))};Lc.propTypes={onClose:Nt.a.func.isRequired,onRefuse:Nt.a.func.isRequired,onAccept:Nt.a.func.isRequired,componentProps:Nt.a.shape({DaccPermissionsDialog:Nt.a.shape({sharedDataLabel:Nt.a.string.isRequired}).isRequired}).isRequired};var Rc=Lc,Ic=function(e){var t=e.onClose,a=e.onRefuse,n=e.onAccept,o=Object(ne.e)().t;return r.a.createElement(Rc,{onClose:t,onRefuse:a,onAccept:n,componentProps:{DaccPermissionsDialog:{sharedDataLabel:o("dacc.permissionsDialog.anonymized_bikegoal_progression")}}})};Ic.propTypes={onClose:Nt.a.func.isRequired,onRefuse:Nt.a.func.isRequired,onAccept:Nt.a.func.isRequired};var Fc=Ic,Gc=a("VXtb"),zc=a("gHOe"),Bc=a("5Q3L"),qc=a("7EAA"),Zc=a("lwqu"),Qc=a("BxMJ");function Vc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Uc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Hc=Object(n.forwardRef)((function(e,t){var a=Object(ne.e)().t,o=Object(n.useState)(!1),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useReducer)((function(e){return!e}),!1),d=s()(u,2),m=d[0],p=d[1],f=Yi("bikeGoal"),b=f.isLoading,v=f.value,g=void 0===v?{}:v,y=f.save,h=g.onboardingStep,E=void 0===h?0:h,C=g.sendToDACC,w=void 0===C?null:C,x=Object(n.useState)(w),k=s()(x,2),D=k[0],_=k[1],P=Xn().sourceName,T={typography:{whiteSpace:"pre-line"}},S=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,y(Uc(Uc({},g),{},{onboardingStep:E-1}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,y(Uc(Uc({},g),{},{onboardingStep:E+1,sendToDACC:D}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zc.a,Hn()({},e,{ref:t}),r.a.createElement(Qc.a,null,a(P?"bikeGoal.edit.compare_progress":"bikeGoal.edit.compare_progress_noValue")),r.a.createElement(qc.a,null,b?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{style:T.typography},P?a("bikeGoal.onboarding.steps.comparison.comparisonLegend",{sourceName:P}):a("bikeGoal.onboarding.steps.comparison.comparisonLegend_noValue")),r.a.createElement(zc.a,{className:"u-mt-1"},r.a.createElement(Gc.a,{control:r.a.createElement(Bc.a,{checked:!0===D,onClick:function(){return l(!0)}}),label:a("bikeGoal.onboarding.steps.comparison.compare"),className:"u-m-0"}),r.a.createElement(Gc.a,{control:r.a.createElement(Bc.a,{checked:!1===D,onClick:function(){return _(!1)}}),label:a("bikeGoal.onboarding.steps.comparison.doNotCompare"),className:"u-m-0"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(wn.a,{onClick:A,label:a("bikeGoal.onboarding.actions.next"),disabled:m||null==D}),r.a.createElement(wn.a,{onClick:S,label:a("bikeGoal.onboarding.actions.previous"),disabled:m,variant:"text",className:"u-ml-half"}),m&&r.a.createElement(Xr.b,{className:"u-ml-half"}))))),c&&r.a.createElement(Fc,{onClose:function(){return l(!1)},onRefuse:function(){l(!1),_(!1)},onAccept:function(){l(!1),_(!0)}}))}));Hc.displayName="BikeGoalOnboardingComparison";var Yc=Hc;function Wc(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Jc(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Wc(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wc(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Kc=Object(n.forwardRef)((function(e,t){var a=Object(ne.e)().t,o=Object(ge.h)(),i=Object(n.useReducer)((function(e){return!e}),!1),c=s()(i,2),l=c[0],u=c[1],d=Yi("bikeGoal"),m=d.isLoading,p=d.value,f=void 0===p?{}:p,b=d.save,v=f.onboardingStep,g=void 0===v?0:v,y={typography:{whiteSpace:"pre-line"}},h=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,b(Jc(Jc({},f),{},{onboardingStep:g-1}));case 3:u();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=O()(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,b(Jc(Jc({},f),{},{onboarded:!0,activated:!0,showAlert:!1}));case 3:u(),t=(new Date).getFullYear().toString(),o("/bikegoal/".concat(t,"/trips"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Zc.a,Hn()({},e,{ref:t}),r.a.createElement(Qc.a,{optional:r.a.createElement(kt.a,{variant:"caption"},a("bikeGoal.about.once_goal_reach.optional"))},a("bikeGoal.about.once_goal_reach.title")),r.a.createElement(qc.a,null,m?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{style:y.typography},a("bikeGoal.about.once_goal_reach.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(wn.a,{onClick:E,label:a("bikeGoal.onboarding.actions.finish"),disabled:l}),r.a.createElement(wn.a,{onClick:h,label:a("bikeGoal.onboarding.actions.previous"),disabled:l,variant:"text",className:"u-ml-half"}),l&&r.a.createElement(Xr.b,{className:"u-ml-half"})))))}));Kc.displayName="BikeGoalOnboardingConclusion";var Xc=Kc,$c=a("0JGJ");function el(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function tl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?el(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):el(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var al=Object(n.forwardRef)((function(e,t){var a=Object(ne.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=Yi("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=p.daysToReach,y=void 0===g?100:g,h=Object(n.useState)(y),E=s()(h,2),C=E[0],w=E[1],x={typography:{whiteSpace:"pre-line"}},k=""===C||C<=0,D=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(tl(tl({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(tl(tl({},p),{},{onboardingStep:v+1,daysToReach:C}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Zc.a,Hn()({},e,{ref:t}),r.a.createElement(Qc.a,null,a("bikeGoal.onboarding.steps.daysToReach.title")),r.a.createElement(qc.a,null,d?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{style:x.typography},a("bikeGoal.onboarding.steps.daysToReach.legend")),r.a.createElement("div",null,r.a.createElement(bc.a,{className:"u-w-5 u-mt-1",variant:"outlined",type:"number",label:a("bikeGoal.goal"),defaultValue:C,error:k,helperText:k?a("bikeGoal.onboarding.steps.daysToReach.error"):" ",inputProps:{min:"1",step:"1"},InputProps:{endAdornment:r.a.createElement($c.a,{position:"end"},a("bikeGoal.days"))},onChange:function(e){return w(e.target.value)}})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(wn.a,{onClick:_,label:a("bikeGoal.onboarding.actions.next"),disabled:c||!!k}),r.a.createElement(wn.a,{onClick:D,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Xr.b,{className:"u-ml-half"})))))}));al.displayName="BikeGoalOnboardingDaysToReach";var nl=al;function rl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ol(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var il=Object(n.forwardRef)((function(e,t){var a=Object(ne.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=Yi("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g={typography:{whiteSpace:"pre-line"}},y=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(ol(ol({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(ol(ol({},p),{},{onboardingStep:v+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Zc.a,Hn()({},e,{ref:t}),r.a.createElement(Qc.a,null,a("bikeGoal.about.how_trips_detected.title")),r.a.createElement(qc.a,null,d?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{style:g.typography},a("bikeGoal.about.how_trips_detected.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(wn.a,{onClick:h,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),r.a.createElement(wn.a,{onClick:y,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Xr.b,{className:"u-ml-half"})))))}));il.displayName="BikeGoalOnboardingDetection";var cl=il;function ll(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function sl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ll(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ll(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ul=Object(n.forwardRef)((function(e,t){var a=Object(ne.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=Yi("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g={typography:{whiteSpace:"pre-line"}},y=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(sl(sl({},p),{},{onboardingStep:v+1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Zc.a,Hn()({},e,{ref:t}),r.a.createElement(Qc.a,null,a("bikeGoal.about.intro.title")),r.a.createElement(qc.a,null,d?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{style:g.typography},a("bikeGoal.about.intro.content")),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(wn.a,{onClick:y,label:a("bikeGoal.onboarding.actions.next"),disabled:c}),c&&r.a.createElement(Xr.b,{className:"u-ml-half"})))))}));ul.displayName="BikeGoalOnboardingIntroduction";var dl=ul;function ml(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ml(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ml(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fl=Object(n.forwardRef)((function(e,t){var a=Object(ne.e)().t,o=Object(n.useReducer)((function(e){return!e}),!1),i=s()(o,2),c=i[0],l=i[1],u=Yi("bikeGoal"),d=u.isLoading,m=u.value,p=void 0===m?{}:m,f=u.save,b=p.onboardingStep,v=void 0===b?0:b,g=p.lastname,y=void 0===g?"":g,h=p.firstname,E=void 0===h?"":h,C=Object(n.useState)(y),w=s()(C,2),x=w[0],k=w[1],D=Object(n.useState)(E),_=s()(D,2),P=_[0],T=_[1],S=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(pl(pl({},p),{},{onboardingStep:v-1}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.next=3,f(pl(pl({},p),{},{onboardingStep:v+1,lastname:x,firstname:P}));case 3:l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Zc.a,Hn()({},e,{ref:t}),r.a.createElement(Qc.a,null,a("bikeGoal.onboarding.steps.naming.title")),r.a.createElement(qc.a,null,d?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,null,a("bikeGoal.onboarding.steps.naming.nameLegend")),r.a.createElement("div",null,r.a.createElement(bc.a,{variant:"outlined",label:a("bikeGoal.edit.lastname"),defaultValue:x,onChange:function(e){return k(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",null,r.a.createElement(bc.a,{variant:"outlined",label:a("bikeGoal.edit.firstname"),defaultValue:P,onChange:function(e){return T(e.target.value)},className:"u-w-5 u-mt-1"})),r.a.createElement("div",{className:"u-mt-1"},r.a.createElement(wn.a,{onClick:A,label:a("bikeGoal.onboarding.actions.next"),disabled:c||""===P||""===x}),r.a.createElement(wn.a,{onClick:S,label:a("bikeGoal.onboarding.actions.previous"),disabled:c,variant:"text",className:"u-ml-half"}),c&&r.a.createElement(Xr.b,{className:"u-ml-half"})))))}));fl.displayName="BikeGoalOnboardingNaming";var bl=fl,vl=a("pFWb"),gl=function(){var e=Object(ne.e)().t,t=Object(ge.h)(),a=Yi("bikeGoal.onboardingStep"),n=a.isLoading,o=a.value,i=void 0===o?0:o;return r.a.createElement(Kr.a,{open:!0,disableGutters:!0,title:e("bikeGoal.onboarding.title"),content:r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-m-1"}),!n&&r.a.createElement(vl.a,{activeStep:i,orientation:"vertical"},r.a.createElement(dl,null),r.a.createElement(nl,null),r.a.createElement(bl,null),r.a.createElement(cl,null),r.a.createElement(Yc,null),r.a.createElement(Xc,null))),onClose:function(){t("..")}})},yl=a("bS3/"),hl=function(){var e=Object(ne.e)().t,t=z(),a=t.accounts,n=t.account,o=t.setAccount,i=a.map((function(e){return{label:B(e),value:e._id}})),c={label:B(n),value:null==n?void 0:n._id};return r.a.createElement(yl.a,{fullwidth:!0,className:"u-w-100",options:i,value:c,label:e("devices.label"),placeholder:e("devices.select"),onChange:function(e){var t=e.value;return o(a.find((function(e){return e._id===t})))}})},El=a("5z4W"),Ol=a.n(El),Cl=function(){var e=Object(de.b)().isMobile;return r.a.createElement(Pn.a,Hn()({color:"var(--infoColor)",style:{zIndex:"var(--zindex-alert)"},position:"fixed"},e?{top:"0.5rem",right:"1rem"}:{bottom:"1rem",right:"2rem"}),El.version)},jl=a("N0Ji"),wl={ListItemText:{color:"var(--infoColor)"}},xl=function(){var e=Object(ne.e)().t,t=Yi("CO2Emission.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:jl.a,color:"var(--infoColor)"})),r.a.createElement(xt.a,{style:wl.ListItemText,primary:e("dacc.settings.showAlerter")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{checked:o,onChange:c})))},kl=a("gDzS"),Dl=function(){var e=Object(ne.e)().t,t=Yi("centreValDeLoireExpe.sendToDACC"),a=t.isLoading,n=t.value,o=void 0!==n&&n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:kl.a})),r.a.createElement(xt.a,{primary:e("centreValDeLoireExpe.settings.sendToDACC")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{color:"primary",checked:o,onChange:c})))},_l=function(){var e=Object(ne.e)().t,t=Yi("CO2Emission.sendToDACC"),a=t.isLoading,n=t.value,o=void 0!==n&&n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Rn.a})),r.a.createElement(xt.a,{primary:e("dacc.settings.anonymous_participation")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{color:"primary",checked:o,onChange:c})))};function Pl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Tl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pl(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Sl=we()("exportTripsToCSV"),Al=g.models.file.uploadFileWithConflictStrategy,Ml=function(e,t){return t("export.filename",{today:Object(nr.a)(new Date,"yyyy MM dd"),accountLabel:e})},Nl=function(e){return[Object.keys(e[0])].concat(Rt()(e)).map((function(e){return Object.values(e).map((function(e){return e?'"'.concat(e,'"'):" "})).toString()})).join("\n")},Ll=function(){var e=O()(j.a.mark((function e(t,a){var n,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchQueryAndGetFromState(R());case 2:return n=e.sent,r=n.data,o=(null==r?void 0:r[0])||{},i=a.flatMap((function(e){return Aa(e,o).map((function(t){var a,n,r=(a={},d()(a,P.x.sectionStartDate,t.startDate),d()(a,P.x.sectionEndDate,t.endDate),d()(a,P.x.sectionDuration,t.duration),d()(a,P.x.sectionDistance,t.distance),d()(a,P.x.sectionMode,t.mode),d()(a,P.x.sectionCoordinates,t.coordinates),d()(a,P.x.sectionDistances,t.distances),d()(a,P.x.sectionTimestamps,t.timestamps),d()(a,P.x.sectionSpeeds,t.speeds),a);return Tl(Tl({},(n={},d()(n,P.x.tripId,e.id),d()(n,P.x.tripStartDate,Ma(e)),d()(n,P.x.tripEndDate,Na(e)),d()(n,P.x.tripStartDisplayName,Pa(e)),d()(n,P.x.tripArrivalDisplayName,Ta(e)),d()(n,P.x.tripPurpose,Da(e)),n)),r)}))})),e.abrupt("return",Kt()(i,P.x.tripId));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Rl=function(){var e=O()(j.a.mark((function e(t){var a,n,r,o,i,c,l,s,u,d,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.t,r=t.timeseries,o=t.accountName,e.prev=1,i=Ga(r),e.next=5,Ll(a,i);case 5:return c=e.sent,l=Nl(c),s=Ml(o,n),e.next=10,Qr(a,n);case 10:return u=e.sent,e.next=13,Al(a,l,{name:s,contentType:"text/csv",dirId:u._id,conflictStrategy:"rename"});case 13:return d=e.sent,m=d.data,e.abrupt("return",{appDir:u,fileCreated:m,isLoading:!1});case 18:return e.prev=18,e.t0=e.catch(1),Sl.error(e.t0),e.abrupt("return",{appDir:null,fileCreated:null,isLoading:!0});case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),Il=["data"],Fl=function(){var e,t,a,r,o=Object(ne.e)().t,i=Object(g.useClient)(),l=z().account,u=Object(n.useState)(!1),d=s()(u,2),p=d[0],f=d[1],b=Object(n.useState)({appDir:null,fileCreated:null,isLoading:!0}),v=s()(b,2),h=v[0],E=h.appDir,C=h.fileCreated,w=h.isLoading,x=v[1],k=(e={accountId:null==l?void 0:l._id,limitBy:1e3},t=e.accountId,a=e.date,r=void 0===a?null:a,{definition:Object(g.Q)(m.i).where({"cozyMetadata.sourceAccount":t,startDate:{$gt:r}}).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"desc"},{startDate:"desc"}]).limitBy(1e3),options:{as:"".concat(m.i,"/sourceAccount/").concat(t),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}),D=Object(g.useQueryAll)(k.definition,k.options),_=D.data,P=c()(D,Il),T=Object(g.isQueryLoading)(P)||P.hasMore;return Object(n.useEffect)((function(){T||p||E||function(){var e=O()(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,Rl({client:i,t:o,timeseries:_,accountName:B(l)});case 3:t=e.sent,x(t),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l,E,i,p,T,o,_]),{isLoading:w,appDir:E,file:C}},Gl=function(e){var t=e.onClose,a=Object(ne.e)().t,n=Object(g.useClient)(),o=Fl(),i=o.file,c=o.appDir;if(o.isLoading)return r.a.createElement(Wi.a,{open:!0,title:a("export.modal.title"),content:r.a.createElement(kt.a,{color:"textPrimary"},a("export.modal.content.progress"))});var l=Object(g.generateWebLink)({slug:"drive",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(c._id)});return r.a.createElement(Wi.a,{open:!0,title:a("export.modal.title"),content:r.a.createElement(kt.a,{color:"textPrimary"},a("export.modal.content.done",{filename:i.name,pathAppDir:c.path})),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(wn.a,{variant:"secondary",onClick:t,label:a("export.modal.button.close")}),r.a.createElement(wn.a,{href:l,target:"_blank",label:a("export.modal.button.viewInDrive")})),onClose:t})},zl=a("MPPK"),Bl=function(e){var t=e.accountName,a=Object(ne.e)().t,o=Object(n.useState)(!1),i=s()(o,2),c=i[0],l=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(jt.b,{button:!0,ellipsis:!1,disabled:c,onClick:function(){return l(!0)}},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:zl.a})),r.a.createElement(xt.a,{primary:a("export.button")})),c&&r.a.createElement(Gl,{accountName:t,onClose:function(){l(!1)}}))},ql=Object(n.memo)(Bl),Zl=a("6td7"),Ql=function(){var e=Object(ne.e)().t;return r.a.createElement(jt.b,{button:!0,ellipsis:!1,component:"a",target:"_blank",href:"https://support.cozy.io/tag/cozy-coach-co2/"},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Zl.a})),r.a.createElement(xt.a,{primary:e("support.consult.link")}),r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:fo.a})))},Vl=a("SIS9"),Ul=function(){var e=Object(ne.e)().t,t=Object(te.useWebviewIntent)();return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call("sendGeolocationTrackingLogs");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Vl.a})),r.a.createElement(xt.a,{primary:e("geolocationTracking.settings.sendLogs")}))},Hl=a("MN1e"),Yl=function(){var e=oe().getGeolocationTrackingId,t=Object(ne.e)().t,a=Object(te.useWebviewIntent)(),n=function(){var t=O()(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:(a=t.sent)&&Object(Hl.a)(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"u-m-1"},r.a.createElement(wn.a,{fullWidth:!0,label:t("geolocationTracking.settings.forceUploadData"),variant:"secondary",onClick:O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.call("forceUploadGeolocationTrackingData");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:"u-mb-1"}),r.a.createElement(wn.a,{fullWidth:!0,label:t("geolocationTracking.settings.copyIdentifier"),variant:"secondary",onClick:n,className:"u-mb-1"}))},Wl=a("LFaT"),Jl=a("vSUP"),Kl=function(){var e=oe(),t=e.disableGeolocationTracking,a=e.checkPermissionsAndEnableTrackingOrShowDialog,o=e.isGeolocationTrackingEnabled,i=e.isGeolocationQuotaExceeded,c=Object(ne.e)().t,l=Object(n.useState)(!1),u=s()(l,2),d=u[0],m=u[1],p=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=4;break}return e.next=3,t();case 3:return e.abrupt("return",e.sent);case 4:if(!i){e.next=7;break}return m(!0),e.abrupt("return");case 7:return e.next=9,a();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:p},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Wl.a})),r.a.createElement(xt.a,{primary:c("geolocationTracking.settings.enable")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{color:"primary",checked:o,onChange:p}))),d?r.a.createElement(Jl.a,{days:V()("coachco2.max-days-to-capture"),onClose:function(){m(!1)}}):null)},Xl=a("yPUo"),$l={ListItemText:{color:"var(--infoColor)"}},es=function(){var e=Object(ne.e)().t,t=Yi("bikeGoal.showAlertSuccess"),a=t.isLoading,n=t.value,o=t.save,i=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;o(n)};return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return i(!n)},disabled:a},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Xl.a,color:"var(--infoColor)"})),r.a.createElement(xt.a,{style:$l.ListItemText,primary:e("bikeGoal.settings.showAlerterSuccess")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{checked:n,onChange:i})))},ts={ListItemText:{color:"var(--infoColor)"}},as=function(){var e=Object(ne.e)().t,t=Yi("bikeGoal.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save,c=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;i(n)};return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return c(!o)},disabled:a},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:jl.a,color:"var(--infoColor)"})),r.a.createElement(xt.a,{style:ts.ListItemText,primary:e("bikeGoal.settings.showAlerter")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{checked:o,onChange:c})))},ns={ListItemText:{color:"var(--infoColor)"}},rs=function(){var e=Object(ne.e)().t,t=Yi("bikeGoal.sendToDACC"),a=t.isLoading,n=t.value,o=t.save,i=function(e){var t,a,n=null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.checked)&&void 0!==t?t:e;o(n)};return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return i(!n)},disabled:a},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Rn.a,color:"var(--infoColor)"})),r.a.createElement(xt.a,{style:ns.ListItemText,primary:e("bikeGoal.settings.sendToDACC")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{checked:n,onChange:i})))},os=a("fYln"),is={ListItemText:{color:"var(--infoColor)"}},cs=function(){var e=Object(ne.e)().t,t=Yi("bikeGoal.onboarded"),a=t.isLoading,n=t.value,o=void 0!==n&&n,i=t.save,c=Yi("bikeGoal.activated"),l=c.isLoading,s=c.value,u=void 0!==s&&s,d=c.save,m=o||u,p=a||l,f=function(){var e=O()(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null!==(a=null==t||null===(n=t.target)||void 0===n?void 0:n.checked)&&void 0!==a?a:t,!u){e.next=4;break}return e.next=4,d(r);case 4:return e.next=6,i(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return f(!m)},disabled:p},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:os.a,color:"var(--infoColor)"})),r.a.createElement(xt.a,{style:is.ListItemText,primary:e("bikeGoal.settings.hideOnboarding")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{checked:m,onChange:f})))},ls=function(){var e=Object(ne.e)().t,t=Object(ge.h)(),a=Yi("bikeGoal.onboarded"),n=a.isLoading,o=a.value,i=void 0!==o&&o,c=Yi("bikeGoal.activated"),l=c.isLoading,s=c.value,u=void 0!==s&&s,d=c.save,m=i&&u,p=n||l,f=function(){var e=O()(j.a.mark((function e(a){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null!==(n=null==a||null===(r=a.target)||void 0===r?void 0:r.checked)&&void 0!==n?n:a,!i){e.next=6;break}return e.next=4,d(o);case 4:e.next=7;break;case 6:t("bikegoalonboarding");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return f(!m)},disabled:p},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:xe.a})),r.a.createElement(xt.a,{primary:e("bikeGoal.settings.participation")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{color:"primary",checked:m,onChange:f})))},ss={width:"fit-content"},us=function(){var e=Object(ne.e)().t,t=Object(de.b)().isMobile,a=oe(),n=a.isGeolocationTrackingAvailable,o=a.isGeolocationTrackingEnabled,i=z(),c=i.isAccountLoading,l=i.accounts,s=i.account,u=Xn().sourceName;if(c)return r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"});if(0===l.length){if(!n)return r.a.createElement(So,null);if(!o)return r.a.createElement(Io,null)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Co,{label:e("nav.settings")}),r.a.createElement("div",Hn()({className:"u-mb-1"},!t&&{style:ss}),r.a.createElement(xn.a,{subheader:r.a.createElement(vn.a,null,e("devices.label"))},r.a.createElement(jt.b,null,r.a.createElement(hl,null)),n&&r.a.createElement(Kl,null)),r.a.createElement(xn.a,{subheader:r.a.createElement(vn.a,null,e("settings.services"))},r.a.createElement(_l,null),V()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{variant:"inset",component:"li"}),r.a.createElement(ls,null)),u===P.z.CVL&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{variant:"inset",component:"li"}),r.a.createElement(Dl,null)),r.a.createElement(Et.a,{variant:"inset",component:"li"}),r.a.createElement(ql,{accountName:B(s)})),s&&r.a.createElement(xn.a,{subheader:r.a.createElement(vn.a,null,e("support.label"))},r.a.createElement(Ql,null),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{variant:"inset",component:"li"}),r.a.createElement(Ul,null)):null),V()("coachco2.admin-mode")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{subheader:r.a.createElement(vn.a,null,e("settings.debug"))},r.a.createElement(xl,null),V()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{component:"li",variant:"inset"}),r.a.createElement(as,{className:"u-mt-1-half-s"}),r.a.createElement(Et.a,{component:"li",variant:"inset"}),r.a.createElement(cs,{className:"u-mt-1-half-s"}),r.a.createElement(Et.a,{component:"li",variant:"inset"}),r.a.createElement(es,{className:"u-mt-1-half-s"}),r.a.createElement(Et.a,{component:"li",variant:"inset"}),r.a.createElement(rs,{className:"u-mt-1-half-s"}))),n&&r.a.createElement(Yl,null),r.a.createElement(Cl,null))))},ds=a("13ub"),ms=a.n(ds),ps=r.a.createContext(),fs=function(){var e=Object(n.useContext)(ps);if(!e)throw new Error("useTrip must be used within a TripProvider");return e},bs=function(e){var t=e.timeserie,a=e.children,o=Object(n.useMemo)((function(){return{timeserie:v(t)}}),[t]);return r.a.createElement(ps.Provider,{value:o},a)},vs=r.a.memo(bs),gs=a("JaZj"),ys=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=eu(),c=i.type,l=i.isSameContact,u=i.contact,d=i.setContact,m=i.setType,p=i.label,f=i.category,b=Object(ne.e)().t,v=fs().timeserie,y=Object(g.useClient)(),h=Object(ue.b)().showAlert,E=function(){return m()},C=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return",o(!0));case 2:return d(null),h(b("contactToPlace.addSuccess"),"success"),"start"!==c||va(v,"end")?E():m("end"),e.next=7,Ca({client:y,type:c,timeserie:v,contact:u,label:p,isSameContact:l,category:f,t:b});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){return o(!1)},x=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(b("contactToPlace.removeSuccess"),"success"),d(null),E(),e.next=5,ya({client:y,timeserie:v,type:c,t:b,contact:u});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,l?r.a.createElement(wn.a,{variant:"secondary",label:b("contactToPlace.delete"),color:"error",onClick:x}):r.a.createElement(wn.a,{variant:"secondary",label:b("contactToPlace.dismiss"),onClick:E}),r.a.createElement(wn.a,{label:b("contactToPlace.submit"),onClick:C}),r.a.createElement(gs.a,{open:a,onClose:w},r.a.createElement(Cn.a,{variant:"filled",elevation:6,severity:"error",onClose:w},b("contactToPlace.error"))))},hs=a("DPrj"),Es=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(ne.e)().t,c=eu(),l=c.contact,u=c.setContact,d=c.setLabel,m=c.setCategory;return r.a.createElement(r.a.Fragment,null,r.a.createElement(jt.b,{button:!0,gutters:"disabled",onClick:function(){return o(!0)}},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Ge.a})),r.a.createElement(xt.a,Hn()({primary:l?Object(la.getDisplayName)(l):i("contactToPlace.contact")},!l&&{primaryTypographyProps:{color:"textSecondary"}})),r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:zo.a}))),a&&r.a.createElement(hs.a,{dismissAction:function(){return o(!1)},onItemClick:function(e){u(e),d(i("contactToPlace.home")),m(P.Q)}}))},Os=(a("2nE9"),a("SdDE")),Cs=a("MWqS"),js=a("/rN/"),ws=a("vZHb"),xs=new co.a({id:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35",use:"location_5cb8a90cd75b6b5e8e203a5e2d5f9e35-usage",viewBox:"0 0 32 33",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 33" id="location_5cb8a90cd75b6b5e8e203a5e2d5f9e35"><path fill="#97ECA1" d="M26 10c0 5.764-6.78 17.628-9.174 21.64a.955.955 0 0 1-1.652 0C12.78 27.628 6 15.763 6 10 6 4.477 10.477 0 16 0s10 4.477 10 10Z" /><circle cx="16" cy="10" r="4" fill="#09AE1C" /></symbol>'}),ks=(so.a.add(xs),xs),Ds=[51.505,-.09],_s={height:128,borderRadius:8},Ps=Object(Bo.a)({icon:{filter:"drop-shadow(0 5px 8px rgba(29,33,42,0.12))"}}),Ts=function(){var e=Object(n.useState)(),t=s()(e,2),a=t[0],o=t[1],i=Object(n.useState)({x:0,y:0}),c=s()(i,2),l=c[0],u=c[1],d=fs().timeserie,m=eu().type,p=Object(Os.a)(),f=Ps();return Object(n.useEffect)((function(){!function(e){var t=e.map,a=e.timeserie,n=e.type,r=e.setBounds,o=e.setSVGPositions,i=Rt()(en(a).properties["".concat(n,"_loc")].coordinates).reverse();t.setView(i);var c=t.getBounds(),l=t.getSize(),s=l.x,u=l.y;r(c),o({x:s/2-24,y:u/2-48})}({map:p,timeserie:d,type:m,setBounds:o,setSVGPositions:u})}),[d,p,m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Cs.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),a&&r.a.createElement(js.a,{bounds:a},r.a.createElement(Ot.a,{className:f.icon,icon:ks,size:48,x:l.x,y:l.y})))},Ss=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ws.a,{style:_s,center:Ds,zoom:17,zoomControl:!1,doubleClickZoom:!1,boxZoom:!1,scrollWheelZoom:!1},r.a.createElement(Ts,null)))},As=function(e){var t=e.onClose,a=Object(n.useState)(),o=s()(a,2),i=o[0],c=o[1],l=Object(ne.e)().t,u=eu(),d=u.setLabel,m=u.setCategory;return r.a.createElement(Wi.a,{open:!0,title:l("contactToPlace.customLabel"),content:r.a.createElement(bc.a,{className:"u-mt-half",variant:"outlined",fullWidth:!0,autoFocus:!0,onChange:function(e){return c(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(wn.a,{variant:"secondary",label:l("contactToPlace.cancel"),onClick:t}),r.a.createElement(wn.a,{label:l("contactToPlace.submit"),onClick:function(){d(i),m(),t()}})),onClose:t})},Ms=a("INxB"),Ns=function(e){var t=e.showCustomLabelModal,a=Object(n.forwardRef)((function(e,t){var a=Object(ne.e)().t,n=eu().label,o=![a("contactToPlace.work"),a("contactToPlace.home"),void 0].includes(n);return r.a.createElement(Ms.a,Hn()({},e,{ref:t}),r.a.createElement(wt.a,null,r.a.createElement(Bc.a,{checked:o})),r.a.createElement(xt.a,{primary:a("contactToPlace.custom")}))}));return a.displayName="CustomLabelActionComponent",{name:"customLabel",action:function(){t()},Component:a}},Ls=["onClick"],Rs=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,Ls),o=Object(ne.e)().t,i=eu(),l=i.label,s=i.setLabel,u=i.setCategory,d=o("contactToPlace.home");return r.a.createElement(Ms.a,Hn()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:s,setCategory:u})}}),r.a.createElement(wt.a,null,r.a.createElement(Bc.a,{checked:l===d})),r.a.createElement(xt.a,{primary:d}))}));return e.displayName="HomeComponent",{name:P.Q,action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r(P.Q)},Component:e}},Is=["onClick"],Fs=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,Is),o=Object(ne.e)().t,i=eu(),l=i.label,s=i.setLabel,u=i.setCategory;return r.a.createElement(Ms.a,Hn()({},n,{ref:t,onClick:function(){return a({setLabel:s,setCategory:u})}}),r.a.createElement(wt.a,null,r.a.createElement(Bc.a,{checked:void 0===l})),r.a.createElement(xt.a,{primary:o("contactToPlace.noLabel")}))}));return e.displayName="NoLabelActionComponent",{name:"noLabel",action:function(e,t){var a=t.setLabel,n=t.setCategory;a(),n()},Component:e}},Gs=["onClick"],zs=function(){var e=Object(n.forwardRef)((function(e,t){var a=e.onClick,n=c()(e,Gs),o=Object(ne.e)().t,i=eu(),l=i.label,s=i.setLabel,u=i.setCategory,d=o("contactToPlace.work");return r.a.createElement(Ms.a,Hn()({},n,{ref:t,onClick:function(){return a({compLabel:d,setLabel:s,setCategory:u})}}),r.a.createElement(wt.a,null,r.a.createElement(Bc.a,{checked:l===d})),r.a.createElement(xt.a,{primary:d}))}));return e.displayName="WorkActionComponent",{name:P.Ob,action:function(e,t){var a=t.compLabel,n=t.setLabel,r=t.setCategory;n(a),r(P.Ob)},Component:e}},Bs=a("zLZg"),qs=a("ZpM7"),Zs=a("4aAG"),Qs=a("Nvei"),Vs=function(){var e=Object(n.useState)(!1),t=s()(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=s()(i,2),l=c[0],u=c[1],d=Object(n.useRef)(null),m=Object(ne.e)().t,p=eu().label,f=Object(qs.c)([Fs,Rs,zs,Ns],{showCustomLabelModal:function(){return o(!0)}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(jt.b,{ref:d,"aria-controls":"simple-menu","aria-haspopup":"true",button:!0,gutters:"disabled",onClick:function(){return u(!0)}},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Qs.a})),r.a.createElement(xt.a,{primary:p||m("contactToPlace.noLabel")}),r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:zo.a}))),r.a.createElement(Bs.a,{ref:d,open:l,actions:f,onClose:function(){return u(!1)}},r.a.createElement(Zs.a,null,r.a.createElement(xt.a,{primary:m("contactToPlace.label"),primaryTypographyProps:{variant:"h6",align:"center"}}))),a&&r.a.createElement(As,{onClose:function(){return o(!1)}}))},Us=a("nUfk"),Hs=function(){var e=fs().timeserie,t=eu(),a=t.type,n=t.contact,o=Object(Us.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ss,null),r.a.createElement(xn.a,null,r.a.createElement(jt.b,{gutters:"disabled"},r.a.createElement(wt.a,null,r.a.createElement(Ot.a,{icon:Wl.a})),r.a.createElement(xt.a,{primary:Ka({timeserie:e,type:a,t:o}),secondary:$a({timeserie:e,type:a,t:o})})),r.a.createElement(Et.a,{className:"u-ml-3"}),r.a.createElement(Es,null),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{className:"u-ml-3"}),r.a.createElement(Vs,null))))},Ys=a("uol1"),Ws=a("0pj4"),Js=a("aoYa"),Ks=function(e){var t=e.isLoading,a=Object(n.useState)(!1),o=s()(a,2),i=o[0],c=o[1],l=eu(),u=l.type,d=l.setType,m=l.setContact,p=Object(ne.e)().t;return r.a.createElement(Wi.a,{open:!0,title:r.a.createElement(r.a.Fragment,null,p("contactToPlace.save".concat(ms()(u),"Place")),r.a.createElement(Ys.a,{onClickAway:function(){return c(!1)}},r.a.createElement(Js.a,{onClose:function(){return c(!1)},open:i,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:p("contactToPlace.tooltip"),placement:"top-end",arrow:!0},r.a.createElement(wt.a,null,r.a.createElement(po.a,{onClick:function(){return c((function(e){return!e}))}},r.a.createElement(Ot.a,{icon:Ws.a})))))),content:t?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(Hs,null),actions:r.a.createElement(ys,null),onClose:function(){m(null),d()}})},Xs=["data"],$s=r.a.createContext(),eu=function(){var e=Object(n.useContext)($s);if(!e)throw new Error("useContactToPlace must be used within a ContactToPlaceProvider");return e},tu=function(e){var t,a,o=e.children,i=Object(n.useState)(),l=s()(i,2),u=l[0],d=l[1],p=Object(n.useState)(),f=s()(p,2),b=f[0],v=f[1],h=Object(n.useState)(),E=s()(h,2),O=E[0],C=E[1],j=Object(n.useState)(),w=s()(j,2),x=w[0],k=w[1],D=fs().timeserie,_=function(e){return{definition:Object(g.Q)(m.d).getById(e),options:{as:"".concat(m.d,"/").concat(e),fetchPolicy:y.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}((null===(t=ba(D,u))||void 0===t||null===(a=t.data)||void 0===a?void 0:a._id)||(null==b?void 0:b._id)||" "),P=Object(g.useQuery)(_.definition,_.options),T=P.data,S=c()(P,Xs),A=Object(g.isQueryLoading)(S),M=Object(n.useMemo)((function(){return T&&T._id===(null==b?void 0:b._id)}),[b,T]),N=Object(n.useMemo)((function(){return{type:u,setType:d,contact:b,setContact:v,label:O,setLabel:C,isSameContact:M,category:x,setCategory:k}}),[u,b,O,M,x]);return Object(n.useEffect)((function(){v(T),C(fa({contact:T,timeserie:D,type:u})),k(pa({contact:T,timeserie:D,type:u}))}),[u,null==T?void 0:T._rev,null==T?void 0:T._id,null==D?void 0:D._id]),r.a.createElement($s.Provider,{value:N},o,!!u&&r.a.createElement(Ks,{isLoading:A}))},au=r.a.memo(tu),nu=a("IW7p"),ru=a.n(nu),ou=function(e){var t=e.timeserie,a=e.selectedPurpose,n=e.setContactToPlaceType,r=e.onClose;a===P.y&&(va(t,"start")?va(t,"end")||n("end"):n("start")),r()};function iu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function cu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var lu=function(){var e=O()(j.a.mark((function e(){var t,a,n,r,o,i,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.isRecurringTrip,i=cu({},n),o&&(i=ln(i,r)),i=sn(i,r,{isRecurringTrip:o}),e.next=6,a.save(i);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),su=function(){var e=O()(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.timeserie,r=t.purpose,e.next=3,lu({client:a,timeserie:n,purpose:r,isRecurringTrip:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uu=function(){var e=O()(j.a.mark((function e(){var t,a,n,r,o,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.client,n=t.timeserie,r=t.purpose,o=t.oldPurpose,e.next=3,lu({client:a,timeserie:n,purpose:r,isRecurringTrip:!0});case 3:Object(or.a)(a,P.sb,{fields:{docId:n._id,oldPurpose:o}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),du=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.icon,r=a.withDescription,o=a.withInfo,i=a.action,c=a.children,l=a.defaultModes,s=void 0===l?{}:l,u=Object.values(s).some((function(e){return e===t})),d=u?"".concat(e("trips.modes.".concat(t))," (").concat(e("trips.modes.default"),")"):e("trips.modes.".concat(t));return cu(cu(cu(cu({id:t,title:d,isChecked:!1,icon:mt({attribute:n||t,defaultColor:!0})},r&&{description:ot(t)}),o&&{info:ot(t)}),i&&{action:i}),c&&{children:c})},mu=a("IW7r"),pu=function(e){return{children:et.map((function(t){return{id:t,title:e("trips.purposes.".concat(t)),icon:r.a.createElement(dt,{attribute:t})}}))}},fu=function(e){var t=e.onClose,a=Object(ne.e)().t,o=Object(g.useClient)(),i=fs().timeserie,c=eu(),l=c.type,s=c.setType,u=function(){var e=O()(j.a.mark((function e(a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Qa(i))===P.lb){e.next=6;break}return e.next=4,su({client:o,timeserie:i,purpose:a.id});case 4:e.next=8;break;case 6:return e.next=8,uu({client:o,timeserie:i,purpose:a.id,oldPurpose:n});case 8:ou({timeserie:i,selectedPurpose:a.id,setContactToPlaceType:s,onClose:t});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=Object(n.useMemo)((function(){return function(e){var t=Qa(i);return t?e.id===t:e.id===P.lb}}),[i]);return l?r.a.createElement(Ks,{onClose:t}):r.a.createElement(mu.a,{title:a("tripEdit.selectPurpose"),onClose:t,onSelect:u,isSelected:d,options:pu(a)})},bu=r.a.memo(fu),vu=a("bnOl"),gu=a("ee3C"),yu=a("Vc4F"),hu=a("ksij"),Eu=a("86gN"),Ou=Object(Bo.a)((function(e){return{dotStart:{marginTop:"9px"},dot:{marginBottom:"-1px"},connector:{width:"6px",backgroundColor:e.palette.primary.main},item:{marginTop:"-9px",paddingLeft:"11px","&::before":{padding:0,flexGrow:0},cursor:"pointer"},contentWrapper:{display:"flex",marginLeft:"11px"},endLabel:{fontWeight:700}}})),Cu=function(e){var t,a=e.type,o=Object(ne.e)(),i=o.t,c=o.f,l=o.lang,s=eu().setType,u=fs().timeserie,m=Ou(),p=Object(n.useMemo)((function(){return"end"!==a}),[a]),f=Object(n.useMemo)((function(){return"start"===a}),[a]),b=ga({timeserie:u,type:a,t:i}),v=b||Ka({timeserie:u,type:a,t:i}),g=b?Ka({timeserie:u,type:a,t:i}):null;return r.a.createElement(hu.a,{className:m.item,onClick:function(){return s(a)}},r.a.createElement(Eu.a,null,r.a.createElement(yu.a,{className:Ee()((t={},d()(t,m.dot,p),d()(t,m.dotStart,f),t)),color:"primary",variant:"outlined"}),p&&r.a.createElement(vu.a,{className:m.connector})),r.a.createElement(gu.a,null,r.a.createElement("div",{className:m.contentWrapper},r.a.createElement("div",{className:"u-flex-grow-1"},r.a.createElement(kt.a,null,v),g&&r.a.createElement(kt.a,{variant:"caption"},g)),r.a.createElement(kt.a,{className:m.endLabel,variant:"body2",component:"div"},yt({f:c,lang:l,date:Ya(u,a)})))))},ju=r.a.memo(Cu),wu=a("2Kpg");function xu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ku(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Du=function(e){var t,a=e.item,o=e.onClose,i=e.onConfirm,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],m=l[1],p=Object(n.useState)(!1),f=s()(p,2),b=f[0],v=f[1],y=Object(n.useState)(!1),h=s()(y,2),E=h[0],C=h[1],w=Object(de.b)().isDesktop,x=Object(ne.e)().t,k=Object(g.useClient)(),D=R(),_=Object(g.useQuery)(D.definition,D.options).data,P=null===(t=_[0])||void 0===t?void 0:t.defaultTransportModeByGroup,T=null==P?void 0:P[ct(a.id)];Object(n.useEffect)((function(){m(T===a.id)}),[P,T,a.id]),Object(n.useEffect)((function(){var e=T&&T===a.id;v(u===!e)}),[T,u,a.id]);var S=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,k.save(ku(ku({},_[0]),{},{defaultTransportModeByGroup:ku(ku({},P),{},d()({},ct(a.id),u?a.id:""))}));case 3:i();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Kr.a,{open:!0,title:a.title,size:"large",disableGutters:!0,content:r.a.createElement(xn.a,null,r.a.createElement(jt.b,{ellipsis:!1,button:!0,onClick:function(){m((function(e){return!e}))}},r.a.createElement(wt.a,null,r.a.createElement(wu.a,{checked:u})),r.a.createElement(xt.a,{primary:x("Modes.DefaultDialog.primary"),secondary:x("Modes.DefaultDialog.secondary")}))),onClose:o,actions:r.a.createElement("div",{className:Ee()("u-flex",{"u-w-100 u-ph-1":!w,"u-p-1":w}),style:{gap:"1rem"}},r.a.createElement(wn.a,{label:x("Modes.DefaultDialog.actions.cancel"),variant:"secondary",onClick:o}),r.a.createElement(wn.a,{label:x("Modes.DefaultDialog.actions.save"),busy:E,onClick:S,disabled:!b}))})},_u=function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=e.t,o=t.series.flatMap((function(e,t){return e.features.flatMap((function(e,n){if(e.features)return e.features.flatMap((function(e,r){if(e.id===a)return{feature:e,serieIndex:t,firstIndex:n,secondIndex:r}}))}))})).find((function(e){return e}));if(o){var i=o.feature,c=o.serieIndex,l=o.firstIndex,s=o.secondIndex,u=Wt()(ru()(i),"properties.manual_mode",n);return function(e){var t=e.timeseries,a=e.makeSections,n=e.t;return t.map((function(e){if(!e.series)throw new Error("The timeserie with id ".concat(e._id,' must have a "series" attributes to make computeAggregatedTimeseries() working properly'));var t=e.series[0],r=0,o=0,i=0,c=0,l=[],s=a(e).map((function(e){var t={startDate:e.startDate,endDate:e.endDate,CO2:ja(e),calories:wa(e),avgSpeed:e.avgSpeed,duration:e.duration,distance:e.distance,mode:e.mode,id:e.id};return r+=t.CO2,o+=t.distance,i+=t.duration,c+=t.calories,l.push(t.mode),t}));return Ra(Ra({},e),{},{aggregation:{automaticTitle:za(e,n),totalCO2:r,totalDistance:o,totalDuration:i,totalCalories:c,startPlaceDisplayName:Wa(e,n),endPlaceDisplayName:Ja(e,n),coordinates:{startPoint:fn(e),endPoint:bn(e)},purpose:Da(t)||_a(t),modes:l,sections:s}})}))}({timeseries:[Wt()(ru()(t),"series[".concat(c,"].features[").concat(l,"].features[").concat(s,"]"),u)],makeSections:function(e){return function(e){var t=e.timeserie,a=e.sectionId,n=e.mode,r=t.aggregation.sections,o=r.find((function(e){return e.id===a})),i=Object.assign({},o,{mode:n});return r.map((function(e){return e.id===a?i:e}))}({timeserie:e,sectionId:a,mode:n})},t:r})[0]}return t},Pu=function(e){var t=e.item,a=e.onClick;return r.a.createElement(hc.a,null,r.a.createElement(po.a,{onClick:function(){return a({item:t})}},r.a.createElement(Ot.a,{icon:In.a})))},Tu=function(e){var t=e.section,a=e.onClose,o=Object(n.useState)(null),i=s()(o,2),c=i[0],l=i[1],u=Object(n.useState)(!1),d=s()(u,2),m=d[0],p=d[1],f=Object(ne.e)().t,b=Object(g.useClient)(),v=fs().timeserie,y=R(),h=Object(g.useQuery)(y.definition,y.options).data,E=Object(n.useMemo)((function(){return(null==h?void 0:h[0])||{}}),[h]),C=null==E?void 0:E.defaultTransportModeByGroup,w=Object(n.useCallback)(function(){var e=O()(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_u({timeserie:v,sectionId:t.id,mode:n.id,t:f}),e.next=3,b.save(r);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b,v,a,t.id,f]),x=Object(n.useMemo)((function(){return function(e){return e.id===t.mode}}),[t.mode]),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.defaultModes,n=t.action;return{children:[du(e,P.Nb,{withInfo:!0}),du(e,"categories.".concat(P.h.name),{icon:P.k,children:P.h.modes.map((function(t){return du(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),du(e,"categories.".concat(P.t.name),{icon:P.w,children:P.t.modes.map((function(t){return du(e,t,{withDescription:!0,action:n,defaultModes:a})}))}),du(e,"categories.".concat(P.rb.name),{icon:P.n,children:P.rb.modes.map((function(t){return du(e,t,{withDescription:!0})}))}),du(e,P.a,{withInfo:!0}),du(e,P.Lb,{withInfo:!0})]}}(f,{defaultModes:C,action:{Component:Pu,props:{onClick:function(e){var t=e.item;l(t)}}}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(mu.a,{title:r.a.createElement(r.a.Fragment,null,f("tripEdit.selectMode"),r.a.createElement(Ys.a,{onClickAway:function(){return p(!1)}},r.a.createElement(Js.a,{open:m,title:f("tripEdit.modeTooltip"),disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,placement:"top-end",arrow:!0,onClose:function(){return p(!1)}},r.a.createElement(po.a,{onClick:function(){return p((function(e){return!e}))}},r.a.createElement(Ot.a,{icon:Ws.a}))))),onClose:a,onSelect:w,isSelected:x,options:k,ellipsis:!1}),!!c&&r.a.createElement(Du,{item:c,onClose:function(){return l(null)},onConfirm:a}))},Su=r.a.memo(Tu),Au=Object(Bo.a)((function(e){return{iconItem:{marginTop:"-14px",cursor:"pointer","&::before":{padding:0,flexGrow:0}},iconDot:{backgroundColor:e.palette.background.paper,borderWidth:"1px",borderColor:e.palette.border.main,margin:0,padding:0,boxShadow:"none"},icon:{color:e.palette.primary.main,backgroundColor:e.palette.background.paper},connector:{width:"6px",backgroundColor:e.palette.primary.main}}})),Mu=function(e){var t=e.icon,a=e.label,n=e.endLabel,o=e.onClick,i=Au();return r.a.createElement(hu.a,{className:i.iconItem,onClick:o},r.a.createElement(Eu.a,null,r.a.createElement(yu.a,{className:i.iconDot},r.a.createElement(lt.b,{icon:t,className:i.icon,size:32})),r.a.createElement(vu.a,{className:i.connector})),r.a.createElement(gu.a,{className:"u-flex"},r.a.createElement(kt.a,{className:"u-flex-grow-1",variant:"body2",color:"textSecondary"},a),r.a.createElement(kt.a,{className:i.endLabel,variant:"body2",component:"div"},n)))},Nu=r.a.memo(Mu),Lu=function(){var e=fs().timeserie,t=Object(ne.e)(),a=t.t,o=t.f,i=t.lang,c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=Object(n.useState)(null),p=s()(m,2),f=p[0],b=p[1],v=Object(n.useCallback)((function(e){return function(){b(e),d(!0)}}),[]),g=Object(n.useCallback)((function(){return d(!1)}),[]);return r.a.createElement(r.a.Fragment,null,e.aggregation.sections.map((function(e,t){return r.a.createElement(Nu,{key:t,label:"".concat(a("trips.modes.".concat(e.mode))," - ").concat(gt(e.duration)," - ").concat(bt(e.distance)," - ").concat((n=e.avgSpeed,"".concat(Math.round(n)," km/h"))),endLabel:yt({f:o,lang:i,date:new Date(e.endDate)}),icon:Xe(e.mode),onClick:v(e)});var n})),u&&r.a.createElement(Su,{section:f,onClose:g}))},Ru=r.a.memo(Lu),Iu=function(e){var t=e.purpose,a=e.onClick,n=Object(ne.e)().t;return r.a.createElement(jt.b,{button:!0,onClick:a},r.a.createElement(wt.a,null,r.a.createElement(dt,{attribute:t})),r.a.createElement(xt.a,{primary:n("purpose"),primaryTypographyProps:{variant:"caption"},secondary:n("trips.purposes.".concat(t)),secondaryTypographyProps:{variant:"body1",color:"textPrimary"}}))};Iu.defaultProps={purpose:P.lb};var Fu=r.a.memo(Iu),Gu=a("epof"),zu=a("JKPP"),Bu=function(e){var t,a,n=e.purpose,o=Object(ne.e)().t,i=fs().timeserie,c=Object(g.useClient)(),l=null!==(t=null==i||null===(a=i.aggregation)||void 0===a?void 0:a.recurring)&&void 0!==t&&t,s=function(){var e=O()(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==(a=null==t||null===(r=t.target)||void 0===r?void 0:r.checked)&&void 0!==a?a:t)){e.next=6;break}return e.next=4,uu({client:c,timeserie:i,purpose:n,oldPurpose:n});case 4:e.next=8;break;case 6:return e.next=8,su({client:c,timeserie:i,purpose:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n===P.lb?null:r.a.createElement(jt.b,{button:!0,ellipsis:!1,onClick:function(){return s(!l)},style:{paddingLeft:64}},r.a.createElement(xt.a,{primary:o("recurring.text")}),r.a.createElement(hc.a,null,r.a.createElement(Ec.a,{color:"primary",edge:"end",checked:l,onChange:s})))},qu={divider:{margin:"-10px -32px 10px"}},Zu=function(){var e=fs().timeserie,t=Object(de.b)().isDesktop,a=Object(n.useState)(!1),o=s()(a,2),i=o[0],c=o[1],l=Qa(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gu.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(zu.a,{className:"u-pb-0 u-mb-0"},r.a.createElement(ju,{type:"start"}),r.a.createElement(Ru,null),r.a.createElement(ju,{type:"end"}))),t&&r.a.createElement(Et.a,{style:qu.divider}),r.a.createElement(Gu.a,{disableGutters:!0,disableElevation:!0},r.a.createElement(xn.a,{className:"u-pv-half"},r.a.createElement(Fu,{purpose:l,onClick:function(){return c(!0)}}),i&&r.a.createElement(bu,{onClose:function(){return c(!1)}}),r.a.createElement(Et.a,{variant:"inset",component:"li"}),r.a.createElement(Bu,{purpose:l}))))},Qu=r.a.memo(Zu);function Vu(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Uu(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vu(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Hu=function(e){var t=e.title,a=e.value,o=e.highlighted,i=Object(n.useMemo)((function(){return function(e){var t=e.highlighted;return{infoBlock:{backgroundColor:t?"var(--primaryColor)":"none",flex:"1 1 0"},typography:Uu({},t&&{color:"var(--primaryContrastTextColor)"})}}({highlighted:o})}),[o]);return r.a.createElement("div",{style:i.infoBlock,className:"u-h-100 u-flex u-flex-column u-flex-items-center u-flex-justify-center u-ta-center u-bdrs-4"},r.a.createElement(kt.a,{style:i.typography,variant:"caption"},t),r.a.createElement(kt.a,{style:i.typography,variant:o?"h6":"body1"},a))},Yu=r.a.memo(Hu),Wu=function(){var e=fs().timeserie,t=Object(ne.e)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yu,{title:t("trips.duration"),value:an(e)}),r.a.createElement(Yu,{title:t("trips.distance"),value:nn(e)}),r.a.createElement(Yu,{title:t("trips.calories"),value:on(e)}),r.a.createElement(Yu,{title:t("trips.co2"),value:rn(e),highlighted:!0}))},Ju=r.a.memo(Wu),Ku=a("bOJc"),Xu=a("/h+6"),$u=a("l149"),ed={mediumHeightRatio:.66},td=Object(Bo.a)({mapContainer:{height:function(e){var t=e.toolbarHeight;return"calc(100vh - ".concat(t,"px - var(--sidebarHeight) - env(safe-area-inset-bottom))")}},bottomSheetHeader:{gap:"0.5rem"}}),ad=function(e){var t=e.titleRef,a=Object(n.useState)(0),o=s()(a,2),i=o[0],c=o[1],l=td({toolbarHeight:i}),u=Object(n.useMemo)((function(){return{height:i}}),[i]);return Object(n.useEffect)((function(){null!=t&&t.current&&c(t.current.offsetHeight)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"u-w-100 u-pos-fixed ".concat(l.mapContainer)},r.a.createElement(sd,null)),r.a.createElement(Xu.a,{settings:ed,toolbarProps:u},r.a.createElement($u.a,{className:"u-h-3 u-pb-half u-ph-half ".concat(l.bottomSheetHeader)},r.a.createElement(Ju,null)),r.a.createElement(Qu,null)))},nd=r.a.memo(ad),rd=a("CUq/"),od=a("8IOV"),id=a.n(od),cd=function(){var e=Object(n.useRef)(),t=Object(de.b)().isMobile,a=Object(st.a)(),o=fs().timeserie,i=Object(Os.a)(),c=Object(n.useMemo)((function(){return function(e){return{style:function(t){return{weight:"section"===t.properties.feature_type?5:2,color:e.palette.primary.main}},pointToLayer:function(e,t){return rd.f.marker(t,{icon:rd.f.divIcon({html:"<div></div>",iconSize:[12,12],className:"".concat(id.a["cozy-leaflet-markers"]," ").concat("end_place"===e.properties.feature_type?"".concat(id.a["cozy-leaflet-markers-end"]):"".concat(id.a["cozy-leaflet-markers-start"]))})})},markerIcon:function(e,t){return rd.f.marker(e,{icon:rd.f.divIcon({html:"".concat(t())})})}}}(a)}),[a]),l=c.pointToLayer,s=c.style,u=Object(n.useMemo)((function(){return t?ed.mediumHeightRatio:0}),[t]);return Object(n.useEffect)((function(){var t=e.current.getBounds(),a=[16,16],n=[16,16+i.getSize().y*u];i.fitBounds(t,{paddingTopLeft:a,paddingBottomRight:n})}),[i,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Cs.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(Ku.a,{ref:e,data:en(o),pointToLayer:l,style:s}))},ld=[51.505,-.09],sd=function(){return r.a.createElement(ws.a,{className:"u-h-100",center:ld,zoom:13},r.a.createElement(cd,null))},ud={map:{height:"400px",margin:"-24px -32px 0"},divider:{margin:"10px -32px 25px"},bottomSheetHeader:{gap:"0.5rem"}},dd=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:ud.map},r.a.createElement(sd,null)),r.a.createElement("div",{style:ud.bottomSheetHeader,className:"u-mt-1 u-h-3 u-flex u-flex-items-center u-pb-half"},r.a.createElement(Ju,null)),r.a.createElement(Et.a,{style:ud.divider}),r.a.createElement(Qu,null))};function md(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?md(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):md(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fd=function(e){var t=e.onClose,a=Object(ne.e)().t,o=fs().timeserie,i=Object(g.useClient)(),c=Object(n.useState)(o.title),l=s()(c,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=s()(m,2),f=p[0],b=p[1],v=function(){var e=O()(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,i.save(pd(pd({},o),{},{title:u}));case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Wi.a,{open:!0,title:a("trips.customLabel"),content:r.a.createElement(bc.a,{className:"u-mt-half",variant:"outlined",defaultValue:u,fullWidth:!0,autoFocus:!0,onChange:function(e){return d(e.target.value)}}),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(wn.a,{variant:"secondary",label:a("trips.cancel"),onClick:t}),r.a.createElement(wn.a,{label:a("trips.submit"),busy:f,onClick:v})),onClose:t})},bd=function(){var e=Object(ne.e)(),t=e.t,a=e.f,o=Object(de.c)().isMobile,i=Object(ge.j)().timeserieId,c=fs().timeserie,l=Object(ge.g)().pathname,u=Object(ge.h)(),d=Object(n.useRef)(null),m=Object(n.useState)(!1),p=s()(m,2),f=p[0],b=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr.a,{open:!0,size:o?void 0:"large",transitionDuration:o?0:void 0,disableGutters:o,title:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"u-c-pointer",onClick:function(){return b(!0)}},tn(c,o)||Ja(c,t)),r.a.createElement(kt.a,{className:"u-mt-half",variant:"caption",align:o?"center":void 0},cn(c,a))),titleRef:d,content:o?r.a.createElement(nd,{titleRef:d}):r.a.createElement(dd,null),onClose:function(){return u(l.split("/".concat(i))[0])}}),f&&r.a.createElement(fd,{onClose:function(){return b(!1)}}))},vd=r.a.memo(bd),gd=["data"],yd=function(){var e=Object(ge.g)().pathname,t=function(e){return{definition:Object(g.Q)(m.i).getById(e).include(["startPlaceContact","endPlaceContact"]),options:{as:"".concat(m.i,"/").concat(e),fetchPolicy:y.a.fetchPolicies.olderThan(3e4),singleDocData:!0}}}(Object(n.useMemo)((function(){return e.split("/").pop()}),[e])),a=Object(g.useQuery)(t.definition,t.options),o=a.data,i=c()(a,gd);return Object(g.isQueryLoading)(i)?r.a.createElement(Xr.b,{size:"xxlarge",className:"u-flex u-flex-justify-center u-mt-1"}):r.a.createElement(vs,{timeserie:o},r.a.createElement(au,null,r.a.createElement(vd,null)))},hd=r.a.memo(yd),Ed=a("PKog"),Od={minHeight:"48px",display:"flex",alignItems:"center"},Cd=function(){var e=Object(ne.e)().t,t=Object(st.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,null),r.a.createElement(kn.a,{style:Od,className:"u-ph-1-s u-ph-2",square:!0,elevation:0},r.a.createElement(Ot.a,{className:"u-mr-half",icon:gi.a,color:"var(--primaryColor)",size:8}),r.a.createElement(kt.a,{className:"u-mr-1",display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.yours")),r.a.createElement(Ot.a,{className:"u-mr-half",icon:gi.a,color:Object(Ed.a)(t.palette.primary.main,.24),size:8}),r.a.createElement(kt.a,{display:"inline",variant:"caption",color:"textPrimary"},e("vericalBarChart.legend.average"))))},jd=a("HO4k"),wd=a("DmLS");jd.f.register(jd.e,jd.i,jd.c,jd.n),jd.f.defaults.font={family:"Lato, sans-serif",size:"11",weight:"700"};var xd=function(e){var t=e.className,a=e.title,n=e.data,o=e.options,i=e.width,c=e.height,l=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{className:"u-mt-1 u-ml-1",variant:"h5"},a),r.a.createElement("div",{style:{width:i,height:c}},r.a.createElement(wd.a,{className:t,width:i,height:c,options:o,data:n})),l)},kd=function(e){var t=e.theme,a=e.isMobile,n=e.oneYearOldTimeseries,r=e.sendToDACC,o=e.globalAverages,i=e.f,c=e.t,l=function(e,t){var a=new Date,n=Array.from({length:12},(function(e,t){return Object(k.a)(Object(Gt.a)(a,t))})).reverse();return{months:n.map((function(e){return t(e,"MMM").toUpperCase()})),CO2s:n.map((function(t,a){var r=a===n.length-1,o=e.filter((function(e){return new Date(e.startDate)>=t&&(!!r||new Date(e.startDate)<n[a+1])})),i=$t()(o,"aggregation.totalCO2");return Math.round(100*i)/100}))}}(n,i),s=l.months,u=l.CO2s,d={labels:s,datasets:[{label:c("vericalBarChart.legend.yours"),backgroundColor:t.palette.primary.main,borderRadius:a?8:4,barThickness:a?r?6:8:24,data:u}]};return r&&d.datasets.push({label:c("vericalBarChart.legend.average"),backgroundColor:Object(Ed.a)(t.palette.primary.main,.24),borderRadius:a?8:4,barPercentage:a?.55:.85,data:V()("coachco2.fake-dacc-datas.enabled")?u:o}),d},Dd=["data"];function _d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Pd=function(){var e,t,a=Object(ne.e)(),n=a.t,o=a.f,i=Object(st.a)(),l=Object(de.b)().isMobile,s=z().account,u=Yi("CO2Emission.sendToDACC"),p=u.isLoading,f=u.value,b=void 0!==f&&f,v=(e=s._id,t=Object(k.a)(Object(_.a)(new Date,1)),{definition:Object(g.Q)(m.i).where({"cozyMetadata.sourceAccount":e,startDate:{$gte:t.toISOString()}}).partialIndex({aggregation:{$exists:!0}}).select(["startDate","endDate","aggregation","title","cozyMetadata.sourceAccount"]).indexFields(["cozyMetadata.sourceAccount","startDate"]).sortBy([{"cozyMetadata.sourceAccount":"asc"},{startDate:"asc"}]).limitBy(1e3),options:{as:"".concat(m.i,"/sourceAccount/").concat(e,"/withAggregation/fromDate/").concat(t.getFullYear(),"-").concat(t.getMonth()),fetchPolicy:y.a.fetchPolicies.olderThan(3e4)}}),h=Object(g.useQueryAll)(v.definition,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_d(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},v.options)),E=h.data,O=c()(h,Dd),C=hr({hasConsent:b,measureName:P.D}).data;if(Object(g.isQueryLoading)(O)||O.hasMore)return r.a.createElement("div",{className:"u-mt-1 u-ph-half-s u-ph-2",style:{minHeight:"190px"}});var j=!p&&b,w=function(e){return{maintainAspectRatio:!1,scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{color:e.palette.text.secondary}},y:{grid:{color:e.palette.border.main,drawBorder:!1},ticks:{color:e.palette.text.secondary,callback:function(e,t){return t%2==0?"".concat(e," kg"):""}}}},plugins:{tooltip:{displayColors:!1}}}}(i),x=kd({theme:i,isMobile:l,oneYearOldTimeseries:E,sendToDACC:b,globalAverages:C,f:o,t:n});return r.a.createElement(xd,{className:"u-mt-1 u-ph-half-s u-ph-2",title:n("vericalBarChart.title"),height:"190px",data:x,options:w},j&&r.a.createElement(Cd,null))},Td=a("33AU"),Sd=function(e){var t=e.onDiscard,a=e.onAccept,n=Object(ne.e)().t;return r.a.createElement(Td.a,{className:"u-mh-half-s u-mh-2 u-mb-half-s u-mb-1 u-mt-0-s u-mt-1 u-bdrs-4 u-pv-half u-pr-half",text:n("dacc.tripsCard.label"),icon:r.a.createElement(Ot.a,{className:"u-ml-1",style:{marginTop:12,color:"var(--primaryColor)"},icon:jl.a,size:16}),buttonOne:r.a.createElement(wn.a,{variant:"text",label:n("dacc.tripsCard.discard"),onClick:t}),buttonTwo:r.a.createElement(wn.a,{variant:"text",label:n("dacc.tripsCard.accept"),onClick:a}),bgcolor:"#EAF3FF",disableIconStyles:!0})};Sd.propTypes={onDiscard:Nt.a.func.isRequired,onAccept:Nt.a.func.isRequired};var Ad=Sd,Md=new co.a({id:"dacc-compare_095afa7eb600270496978dbb605e6b2d",use:"dacc-compare_095afa7eb600270496978dbb605e6b2d-usage",viewBox:"0 0 200 136",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 136" id="dacc-compare_095afa7eb600270496978dbb605e6b2d"><path fill="#fff" d="M0 0h200v136H0z" /><path d="M161 14.592c-1.888.222-7.568-.664-15.182-5.982-9.518-6.647-13.847-8.724-22.434-4.183C115 8.86 115.227 23.012 115 27M165.844 92c5.431-3.51 16.097-12.334 15.315-19.554-.977-9.025-12.708-11.282-22.81-10.78-10.101.501-17.596 4.512-28.349 1.504M23.495 72c-.329 4.729-2.425 21.765 5.479 27.308 9.88 6.928 23.668-1.244 30.831-5.203C66.97 90.146 79.072 83.217 85 85.527" stroke="#B2D3FF" stroke-width="4" stroke-linecap="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M62 118a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.899c1.777.371 3.182 1.857 3.472 3.649a4.507 4.507 0 0 1-2.828 4.953l-.112.039V117h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L62 113a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.399Z" fill="#38D1D3" /><circle cx="100" cy="64" fill="#297EF2" r="48" /><path fill-rule="evenodd" clip-rule="evenodd" d="M120.91 37.605a2.166 2.166 0 0 1 .235 3.055l-13 15.167a2.166 2.166 0 0 1-2.33.645L93.96 52.52 81.887 62.581a2.167 2.167 0 0 1-2.774-3.329l13-10.833a2.167 2.167 0 0 1 2.072-.391l11.618 3.873 12.052-14.061a2.166 2.166 0 0 1 3.055-.235Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M119.5 42.5a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-26 10.833a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm-13 10.834a3.25 3.25 0 1 0 0-6.5 3.25 3.25 0 0 0 0 6.5Zm29.25-9.75a3.25 3.25 0 1 1-6.5 0 3.25 3.25 0 0 1 6.5 0ZM117.167 53.333a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V55.333a2 2 0 0 0-2-2h-4.666Zm-26 10.834a2 2 0 0 0-2 2V86a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2V66.167a2 2 0 0 0-2-2h-4.666ZM78.167 75a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h4.666a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-4.666Zm24-4.5a2 2 0 0 1 2-2h4.666a2 2 0 0 1 2 2V86a2 2 0 0 1-2 2h-4.666a2 2 0 0 1-2-2V70.5Z" fill="#fff" /><path fill-rule="evenodd" clip-rule="evenodd" d="M43 21a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5Zm1.452-16.349c2.666.557 4.773 2.786 5.208 5.474a6.76 6.76 0 0 1-4.242 7.43l-.168.058V19.5h-4.5v-3.75c0-1.17.893-2.13 2.034-2.24L43 13.5a2.25 2.25 0 1 0-2.24-2.468l-.01.218h-4.5a6.758 6.758 0 0 1 8.202-6.599Z" fill="#72E7E9" /><path fill-rule="evenodd" clip-rule="evenodd" d="M69 19a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L69 16.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 42a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 39.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2ZM20 14a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L20 11.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M26 33a1.125 1.125 0 1 1 0 2.25A1.125 1.125 0 0 1 26 33Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.12 3.715l-.085.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12L26 29.25a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M39 116.5a.938.938 0 1 1 0 1.876.938.938 0 0 1 0-1.876Zm.605-6.812a2.811 2.811 0 0 1 2.17 2.281 2.816 2.816 0 0 1-1.767 3.095l-.07.025v.786h-1.875v-1.563c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M46 90a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.249 2.249 0 0 1 1.736 1.825 2.253 2.253 0 0 1-1.414 2.476l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L46 87.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M184 99a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V98h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L184 94a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#9EEEF0" /><path fill-rule="evenodd" clip-rule="evenodd" d="M191 64a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.584.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M134 18a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25Zm.726-8.174c1.333.278 2.387 1.392 2.604 2.736a3.38 3.38 0 0 1-2.121 3.715l-.084.03v.943h-2.25v-1.875c0-.585.447-1.065 1.017-1.12l.108-.005a1.125 1.125 0 1 0-1.12-1.234l-.005.109h-2.25a3.38 3.38 0 0 1 4.101-3.3Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M118 119a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2ZM153 55a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L153 52.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M81 118a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.25 2.25 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L81 115.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M177 124a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.252 2.252 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747l.072-.003a.75.75 0 1 0-.746-.823l-.004.073h-1.5a2.253 2.253 0 0 1 2.734-2.2Z" fill="#D3FEFF" /><path fill-rule="evenodd" clip-rule="evenodd" d="M164 75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm.484-5.45a2.253 2.253 0 0 1 .322 4.301l-.056.02v.629h-1.5v-1.25c0-.39.298-.71.678-.747L164 72.5a.75.75 0 1 0-.746-.823l-.004.073h-1.5c0-1.4 1.28-2.503 2.734-2.2Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M92 8.5a.937.937 0 1 1 0 1.875.937.937 0 0 1 0-1.875Zm.605-6.812a2.81 2.81 0 0 1 2.17 2.28 2.817 2.817 0 0 1-1.767 3.096l-.07.025v.786h-1.875V6.312c0-.487.372-.887.847-.933l.09-.004a.937.937 0 1 0-.933-1.028l-.004.09h-1.875c0-1.75 1.6-3.128 3.417-2.749Z" fill="#72E7E9" /><circle cx="148" cy="104" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 106c-4.418 0-8-4.029-8-9 0-4.97 3.582-9 8-9s8 4.03 8 9c0 4.971-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M148 101a1.5 1.5 0 1 1-.001 3.001A1.5 1.5 0 0 1 148 101Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V100h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L148 96a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="148" cy="104" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="24" cy="65" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 67c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9ZM8 77c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4H10c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 62a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V61h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L24 57a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="24" cy="65" r="20" stroke="#B9F6F7" stroke-width="8" /><circle cx="172" cy="28" r="24" fill="#B9F6F7" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 30c-4.418 0-8-4.03-8-9s3.582-9 8-9 8 4.03 8 9-3.582 9-8 9Zm-16 10c0-2 4-8 8-8s2 2 8 2 4-2 8-2 8 6 8 8 0 4-2 4h-28c-2 0-2-2-2-4Z" fill="#38D1D3" /><path fill-rule="evenodd" clip-rule="evenodd" d="M172 25a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm.968-10.9c1.777.372 3.182 1.858 3.472 3.65a4.507 4.507 0 0 1-2.828 4.953l-.112.039V24h-3v-2.5a1.5 1.5 0 0 1 1.356-1.493L172 20a1.5 1.5 0 1 0-1.493-1.645l-.007.145h-3a4.506 4.506 0 0 1 5.468-4.4Z" fill="#fff" /><circle cx="172" cy="28" r="20" stroke="#B9F6F7" stroke-width="8" /><path d="M66.418 133.29a81.818 81.818 0 0 0 16.142 2.244c16.166.948 38.758.424 48.325-1.346 9.567-1.771 10.083-4.465-14.448-5.812-20.925-1.147-45.26.474-50.362 2.894-1.52.648-1.447 1.371.343 2.02Z" fill="#BBD9FD" /></symbol>'}),Nd=(so.a.add(Md),Md),Ld=function(e){var t=e.open,a=e.onClose,n=e.showDaccPermissionsDialog,o=Object(ne.e)().t;return r.a.createElement(Wi.a,{open:t,onClose:a,content:r.a.createElement("div",{className:"u-ta-center"},r.a.createElement(Ot.a,{className:"u-mv-1",icon:Nd,width:200,height:136}),r.a.createElement(kt.a,{variant:"h3"},o("dacc.compareDialog.title")),r.a.createElement(kt.a,{className:"u-mt-1"},o("dacc.compareDialog.primaryText")),r.a.createElement(kt.a,{className:"u-mt-1"},o("dacc.compareDialog.secondaryText"))),actions:r.a.createElement(wn.a,{label:o("dacc.compareDialog.action"),onClick:n})})};Ld.propTypes={open:Nt.a.bool.isRequired,onClose:Nt.a.func.isRequired,showDaccPermissionsDialog:Nt.a.func.isRequired};var Rd=Ld;function Id(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Fd(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Id(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Gd=function(){var e=Object(ne.e)().t,t=Object(n.useState)(!1),a=s()(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=s()(c,2),u=l[0],d=l[1],m=Yi("CO2Emission"),p=m.isLoading,f=m.value,b=void 0===f?{}:f,v=m.save;if(p)return null;var g=b.showAlert,y=void 0===g||g,h=b.sendToDACC,E=void 0!==h&&h;return r.a.createElement(r.a.Fragment,null,y&&!E&&r.a.createElement(Ad,{onDiscard:function(){v(Fd(Fd({},b),{},{showAlert:!1}))},onAccept:function(){return i(!0)}}),r.a.createElement(Rd,{open:o,onClose:function(){return i(!1)},showDaccPermissionsDialog:function(){i(!1),d(!0)}}),u&&r.a.createElement(Rc,{onClose:function(){return d(!1)},onRefuse:function(){return d(!1)},onAccept:function(){v(Fd(Fd({},b),{},{showAlert:!1,sendToDACC:!0})),d(!1)},componentProps:{DaccPermissionsDialog:{sharedDataLabel:e("dacc.permissionsDialog.anonymized_emissions")}}}))};Gd.propTypes={};var zd=Gd,Bd=function(e){var t=e.onDiscard,a=e.onParticipate,n=Object(ne.e)().t;return r.a.createElement(Cn.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,icon:r.a.createElement(Ot.a,{icon:jl.a}),action:r.a.createElement(r.a.Fragment,null,r.a.createElement(wn.a,{variant:"text",label:n("bikeGoal.alert.actions.discard"),onClick:t}),r.a.createElement(wn.a,{variant:"text",label:n("bikeGoal.alert.actions.participate"),onClick:a}))},r.a.createElement(jn.a,null,n("bikeGoal.alert.title")),n("bikeGoal.alert.text"))};Bd.propTypes={onDiscard:Nt.a.func,onParticipate:Nt.a.func};var qd=Bd,Zd=function(){var e=Object(ge.h)(),t=Yi("bikeGoal.showAlert"),a=t.isLoading,n=t.value,o=void 0===n||n,i=t.save;return a||o?r.a.createElement(qd,{onParticipate:function(){e("bikegoalonboarding")},onDiscard:function(){i(!1)}}):null},Qd=function(){var e=Object(ne.e)().t,t=Object(ge.h)(),a=Yi("bikeGoal.showAlertSuccess").save;return r.a.createElement(Cn.a,{className:"u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start",block:!0,severity:"success",action:r.a.createElement(wn.a,{variant:"text",color:"success",label:e("bikeGoal.alert.success.action",{smart_count:Kn()||-1}),onClick:function(){a(!1);var e=(new Date).getFullYear().toString();t("".concat(e,"/certificate/generate"))}})},e("bikeGoal.alert.success.text"))},Vd=["data"],Ud=["data"],Hd={paper:{gap:"1rem"},div:{height:65}},Yd=function(){var e,t=Object(ne.e)().t,a=Object(ge.h)(),n=z(),o=n.account,i=n.isAccountLoading,l=R(),s=Object(g.useQuery)(l.definition,l.options),u=s.data,d=c()(s,Vd),m=Object(g.isQueryLoading)(d),p=N({accountId:null==o?void 0:o._id},Boolean(o)),f=Object(g.useQueryAll)(p.definition,p.options),b=f.data,v=c()(f,Ud),y=Object(g.isQueryLoading)(v)||v.hasMore;if(i||y||m)return r.a.createElement(kn.a,{elevation:2,className:"u-flex u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-flex-items-start"},r.a.createElement(Xr.b,{size:"xlarge",className:"u-m-1"}));var h=(new Date).getFullYear().toString(),E=pn(b,h),O=!(null==u||null===(e=u[0].bikeGoal)||void 0===e||!e.sendToDACC);return r.a.createElement(r.a.Fragment,null,r.a.createElement(kn.a,{elevation:2,className:"u-flex u-flex-items-start-s u-flex-items-center u-mh-1-s u-mh-2 u-mb-1 u-p-1 u-c-pointer",style:Hd.paper,onClick:function(){return a("/bikegoal/".concat(h,"/trips"))}},r.a.createElement("div",{style:Hd.div},r.a.createElement(wr,{timeseries:E,sendToDACC:O,size:"small"})),r.a.createElement("div",null,r.a.createElement(kt.a,{variant:"h6"},t("bikeGoal.title")),O?r.a.createElement(xi,{timeseries:E}):r.a.createElement(_i,{timeseriesByYear:E,variant:"caption",preLine:!0}))))},Wd=["data"],Jd=["data"],Kd=["data"],Xd={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},$d=function(){var e,t,a,n,o,i=Object(ne.e)().t,l=Object(de.b)().isMobile,s=z(),u=s.account,d=s.isAccountLoading,p=Object(g.useClient)().getStackClient().uri,f={definition:Object(g.Q)(m.l).getById("context"),options:{as:"".concat(m.l,"/context"),fetchPolicy:y.a.fetchPolicies.olderThan(1e8),singleDocData:!0}},b=Object(g.useQuery)(f.definition,f.options),v=b.data,h=c()(b,Wd),E=R(),O=Object(g.useQuery)(E.definition,E.options),C=O.data,j=c()(O,Jd),w=N({accountId:null==u?void 0:u._id},Boolean(u)),x=Object(g.useQueryAll)(w.definition,w.options),k=x.data,D=c()(x,Kd),_=Object(g.isQueryLoading)(D)||D.hasMore,P=Object(g.isQueryLoading)(j),T=Object(g.isQueryLoading)(h);if(P||(d||_)||T)return null;var S=null==v||null===(e=v.logos)||void 0===e||null===(t=e.coachco2)||void 0===t||null===(a=t.light)||void 0===a?void 0:a[0],A=(new Date).getFullYear().toString(),M=pn(k,A),L=null!==(n=null==C||null===(o=C[0])||void 0===o?void 0:o.bikeGoal)&&void 0!==n?n:{},I=L.activated,F=void 0!==I&&I,G=L.showAlert,B=void 0===G||G,q=L.showAlertSuccess,Z=void 0===q?$n(M,C):q;return F||B?r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.a,{className:"u-mb-1-s u-mt-1 u-mb-1-s u-mb-2 u-mh-1 u-flex u-flex-justify-between",variant:"h5"},i("bikeGoal.goals"),S&&r.a.createElement("img",{src:"".concat(p,"/assets").concat(S.src),alt:S.alt})),B&&r.a.createElement(Zd,null),F&&r.a.createElement(r.a.Fragment,null,Z&&r.a.createElement(Qd,null),r.a.createElement(Yd,null)),l&&r.a.createElement(Et.a,{style:Xd.divider})):null},em=["data"];function tm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function am(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tm(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var nm={divider:{height:"12px",backgroundColor:"var(--defaultBackgroundColor)"}},rm=function(){var e=z(),t=e.account,a=e.isAccountLoading,n=Object(ne.e)().t,o=Object(de.b)().isMobile,i=A({accountId:null==t?void 0:t._id,limitBy:50}),l=Object(g.useQuery)(i.definition,am(am({},i.options),{},{enabled:Boolean(t)})),s=l.data,u=c()(l,em);return a||t&&Object(g.isQueryLoading)(u)&&!Object(g.hasQueryBeenLoaded)(u)?r.a.createElement(pi.a,{count:8,hasSecondary:!0,divider:!0}):t&&s&&0!==(null==s?void 0:s.length)?r.a.createElement(r.a.Fragment,null,r.a.createElement(Co,{label:n("trips.from")+" "+B(t)}),V()("coachco2.bikegoal.enabled")&&r.a.createElement($d,null),r.a.createElement(Pd,null),r.a.createElement(zd,null),o&&r.a.createElement(Et.a,{style:nm.divider}),r.a.createElement(_n,{timeseries:s}),u.hasMore&&r.a.createElement(rc.a,{label:n("loadMore"),fetchMore:u.fetchMore})):r.a.createElement(Fo,null)},om=a("mJLf"),im=(a("cRRo"),a("R34t")),cm=a("Qy9h"),lm=a("BkYy"),sm=a("hXCt"),um=a("yKoJ"),dm=a("pJCX"),mm=function(){var e=Object(ge.j)().fileId,t=Object(ge.h)(),a=Object(g.useClient)(),n=function(e){return{definition:function(){return Object(g.Q)(m.h).getById(e)},options:{as:"".concat(m.h,"/").concat(e),fetchPolicy:y.a.fetchPolicies.olderThan(1e8)}}}(null!=e?e:null),o=Object(g.useQuery)(n.definition,n.options);return Object(g.hasQueryBeenLoaded)(o)?r.a.createElement(om.a,{client:a,doctype:m.h,documentType:"Files"},r.a.createElement(lm.a,{files:o.data,currentIndex:0,onCloseRequest:function(){return t("..")}},r.a.createElement(sm.a,null,r.a.createElement(dm.a,null),r.a.createElement(um.a,null)))):r.a.createElement(cm.a,{open:!0},r.a.createElement(im.a,{open:!0},r.a.createElement(Xr.b,{size:"xxlarge",middle:!0,noMargin:!0,color:"var(--primaryContrastTextColor)"})))},pm=function(e){var t=e.Component;return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,null),r.a.createElement(ge.b,null))},fm=function(){var e=(new Date).getFullYear();return r.a.createElement(ye.a,null,r.a.createElement(ge.e,null,r.a.createElement(ge.c,{path:"/",element:r.a.createElement(Vn,null)},r.a.createElement(ge.c,{path:"trips",element:r.a.createElement(pm,{Component:rm})},r.a.createElement(ge.c,{path:"certificate/:fileId",element:r.a.createElement(mm,null)}),r.a.createElement(ge.c,{path:":year/certificate/generate",element:r.a.createElement(eo,null)}),r.a.createElement(ge.c,{path:":timeserieId",element:r.a.createElement(hd,null)}),V()("coachco2.bikegoal.enabled")&&r.a.createElement(ge.c,{path:"bikegoalonboarding",element:r.a.createElement(gl,null)})),r.a.createElement(ge.c,{path:"settings",element:r.a.createElement(pm,{Component:us})},V()("coachco2.bikegoal.enabled")&&r.a.createElement(ge.c,{path:"bikegoalonboarding",element:r.a.createElement(gl,null)})),r.a.createElement(ge.c,{path:"analysis/",element:r.a.createElement(bi,null)},r.a.createElement(ge.c,{path:"modes",element:r.a.createElement(pm,{Component:An})}),r.a.createElement(ge.c,{path:"modes/:mode",element:r.a.createElement(pm,{Component:An})},r.a.createElement(ge.c,{path:":timeserieId",element:r.a.createElement(hd,null)})),r.a.createElement(ge.c,{path:"purposes",element:r.a.createElement(pm,{Component:Nn})}),r.a.createElement(ge.c,{path:"purposes/:purpose",element:r.a.createElement(pm,{Component:Nn})},r.a.createElement(ge.c,{path:":timeserieId",element:r.a.createElement(hd,null)}))),V()("coachco2.bikegoal.enabled")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.c,{path:"bikegoal/:year/trips",element:r.a.createElement(pm,{Component:pc})},r.a.createElement(ge.c,{path:"certificate/:fileId",element:r.a.createElement(mm,null)}),r.a.createElement(ge.c,{path:":timeserieId",element:r.a.createElement(hd,null)}),r.a.createElement(ge.c,{path:"edit",element:r.a.createElement(wc,null)}),r.a.createElement(ge.c,{path:"about",element:r.a.createElement(fc,null)}),r.a.createElement(ge.c,{path:"certificate/generate",element:r.a.createElement(eo,null)}))),V()("coachco2.bikegoal.enabled")&&r.a.createElement(ge.c,{path:"bikegoal",element:r.a.createElement(ge.a,{replace:!0,to:"/bikegoal/".concat(e,"/trips")})}),r.a.createElement(ge.c,{path:"/",element:r.a.createElement(ge.a,{replace:!0,to:"/trips"})}),r.a.createElement(ge.c,{path:"*",element:r.a.createElement(ge.a,{replace:!0,to:"/trips"})}))))},bm=a("8Bbg"),vm=a("cyLt"),gm=a("f2KQ"),ym=a("/jyu"),hm=function(e,t){return/^\{\{\..*\}\}$/.test(e)?t:e},Em=function(e){var t=e.app,n=e.locale,r={appIconDefault:a("J3iu"),appNamePrefixDefault:Ol.a.name_prefix,appNameDefault:Ol.a.name,appLocaleDefault:"en"};return{appName:hm(t.name,r.appNameDefault),appNamePrefix:hm(t.prefix,r.appNamePrefixDefault),iconPath:hm(t.icon,r.appIconDefault),lang:hm(n,r.appLocaleDefault)}},Om=a("+s1f"),Cm=a("8XZk"),jm=ka()((function(){var e,t,n,r,o=document.querySelector("[role=application]"),i=Em(JSON.parse(o.dataset.cozy)),c=i.lang,l=i.appName,s=Object(Cm.a)(c,(function(e){return a("eUFy")("./".concat(e))})),u=(e=document.querySelector("[role=application]"),t=JSON.parse(e.dataset.cozy),n=window.location.protocol,r="".concat(n,"//").concat(t.domain),new y.a({uri:r,token:t.token,appMetadata:{slug:Ol.a.name,version:Ol.a.version},schema:m.m,store:!1}));return u.registerPlugin(V.a.plugin),u.registerPlugin(Om.RealtimePlugin),gm.a({dsn:"https://9f18ae40b7a3ec801af8fcee845bca53@errors.cozycloud.cc/67",environment:"production",release:Ol.a.version,integrations:[new vm.a({levels:["error"]}),new ym.a],tracesSampleRate:1,ignoreErrors:[/^Warning: /]}),function(e){var t=e.client,a=e.container,n=e.lang,r=e.appName,o=Em(JSON.parse(a.dataset.cozy)),i=o.appNamePrefix,c=o.iconPath;cozy.bar.init({appName:r,appNamePrefix:i,cozyClient:t,iconPath:c,lang:n,replaceTitleOnMobile:!1})}({client:u,container:o,lang:c,appName:l}),{container:o,client:u,lang:c,polyglot:s}}));Object(bm.a)(),document.addEventListener("DOMContentLoaded",(function(){var e,t,a,n,i;e=jm(),t=e.container,a=e.client,n=e.lang,i=e.polyglot,Object(o.createRoot)(t).render(r.a.createElement(ve,{client:a,lang:n,polyglot:i},r.a.createElement(fm,null)))}))},"v5t+":function(e,t,a){e.exports=a.p+"PlusJakartaSans.ttf"},vVt6:function(e,t,a){e.exports=a.p+"Lato.ttf"}});