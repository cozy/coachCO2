webpackHotUpdate("app",{

/***/ "./src/lib/daccCentreValDeLoireExpe.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GROUP_ID\", function() { return GROUP_ID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sendCentreValDeLoireMeasuresToDACC\", function() { return sendCentreValDeLoireMeasuresToDACC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getMainModeFromSections\", function() { return getMainModeFromSections; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"computeRawMeasures\", function() { return computeRawMeasures; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var date_fns_endOfMonth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/date-fns/esm/endOfMonth/index.js\");\n/* harmony import */ var date_fns_startOfMonth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/date-fns/esm/startOfMonth/index.js\");\n/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./src/constants.js\");\n/* harmony import */ var src_doctypes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./src/doctypes/index.js\");\n/* harmony import */ var src_queries_queries__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./src/queries/queries.js\");\n/* harmony import */ var cozy_logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./node_modules/cozy-logger/dist/index.js\");\n/* harmony import */ var cozy_logger__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(cozy_logger__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _dacc__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./src/lib/dacc.js\");\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\n\n\n\n\n\n\n\n\n\n/**\n * @typedef {import(\"cozy-client/dist/index\").CozyClient} CozyClient\n * @typedef {import(\"cozy-client/types/types\").IoCozyAccount} IoCozyAccount\n * @typedef {import('./types').ContactGroup} ContactGroup\n * @typedef {import('./types').TimeseriesGeoJSON} TimeseriesGeoJSON\n * @typedef {import('./types').Section} Section\n * @typedef {import('./types').DACCMeasure} DACCMeasure\n */\n\n/**\n * @typedef {Object} MeasuresDict\n * @property {{ count: number }}\n * @property {{ CO2: number }}\n * @property {{ distance: number }}\n * @property {{ duration: number }}\n *\n */\n\nvar GROUP_ID = '0c91da19b72444d01cbd93b49b2ba18c';\nvar logService = cozy_logger__WEBPACK_IMPORTED_MODULE_8___default.a.namespace('services/centreValDeLoireExpe');\n\n/**\n * Send bike goal measures\n *\n * @param {CozyClient} client - The cozy-client instance\n * @param {IoCozyAccount} account - The trips account to measure\n */\nvar sendCentreValDeLoireMeasuresToDACC = /*#__PURE__*/function () {\n  var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee(client, account) {\n    var startAggDate, userType, consentMeasure, timeseries, measures, daccMeasures, daccTripMeasures, daccSectionMeasures, _i, _daccMeasures, measure;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            startAggDate = Object(date_fns_startOfMonth__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(new Date());\n            logService('info', \"Compute DACC measures for account \".concat(account._id));\n            _context.next = 4;\n            return findUserType(client);\n          case 4:\n            userType = _context.sent;\n            consentMeasure = buildConsentMeasure(userType);\n            _context.next = 8;\n            return Object(_dacc__WEBPACK_IMPORTED_MODULE_9__[\"sendMeasureToDACCWithRemoteDoctype\"])(client, consentMeasure);\n          case 8:\n            _context.next = 10;\n            return findMonthTimeseries(client, account, startAggDate);\n          case 10:\n            timeseries = _context.sent;\n            if (!(timeseries.length < 1)) {\n              _context.next = 14;\n              break;\n            }\n            logService('info', \"No trips to compute\");\n            // No trips, abort\n            return _context.abrupt(\"return\", null);\n          case 14:\n            logService('info', \"Compute measures for \".concat(timeseries.length, \" timeseries\"));\n            measures = computeRawMeasures(timeseries);\n            if (!(!measures || !measures.sectionMeasures && !measures.tripMeasures)) {\n              _context.next = 19;\n              break;\n            }\n            logService('info', 'No measure to send');\n            return _context.abrupt(\"return\");\n          case 19:\n            daccMeasures = [];\n            if (!(measures.tripMeasures && Object.keys(measures.tripMeasures).length > 0)) {\n              _context.next = 26;\n              break;\n            }\n            logService('info', \"Build \".concat(Object.keys(measures.tripMeasures).length, \" measures with user type:  \").concat(userType));\n            _context.next = 24;\n            return buildDACCMeasures({\n              measures: measures.tripMeasures,\n              userType: userType,\n              isSectionLevel: false\n            });\n          case 24:\n            daccTripMeasures = _context.sent;\n            daccMeasures.push.apply(daccMeasures, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(daccTripMeasures));\n          case 26:\n            if (!(measures.sectionMeasures && Object.keys(measures.sectionMeasures).length > 0)) {\n              _context.next = 32;\n              break;\n            }\n            logService('info', \"Build \".concat(Object.keys(measures.sectionMeasures).length, \" measures with user type:  \").concat(userType));\n            _context.next = 30;\n            return buildDACCMeasures({\n              measures: measures.sectionMeasures,\n              userType: userType,\n              isSectionLevel: true\n            });\n          case 30:\n            daccSectionMeasures = _context.sent;\n            daccMeasures.push.apply(daccMeasures, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(daccSectionMeasures));\n          case 32:\n            _i = 0, _daccMeasures = daccMeasures;\n          case 33:\n            if (!(_i < _daccMeasures.length)) {\n              _context.next = 41;\n              break;\n            }\n            measure = _daccMeasures[_i];\n            logService('info', \"Send measure \".concat(JSON.stringify(measure), \" to DACC...\"));\n            _context.next = 38;\n            return Object(_dacc__WEBPACK_IMPORTED_MODULE_9__[\"sendMeasureToDACCWithRemoteDoctype\"])(client, measure);\n          case 38:\n            _i++;\n            _context.next = 33;\n            break;\n          case 41:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return function sendCentreValDeLoireMeasuresToDACC(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n/**\n * Find user type, as defined in settings\n *\n * @param {CozyClient} client - The cozy-client instance\n * @returns {string} the user type: 'highSchoolStudent' | 'nationalEducationStaff' | 'centreValDeLoireStaff' | 'other'\n */\nvar findUserType = /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2(client) {\n    var _resp$data, _settings$centreValDe;\n    var settingsQueryDef, resp, settings, userType;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            settingsQueryDef = Object(src_queries_queries__WEBPACK_IMPORTED_MODULE_7__[\"buildSettingsQuery\"])();\n            _context2.next = 3;\n            return client.query(settingsQueryDef.definition, settingsQueryDef.options);\n          case 3:\n            resp = _context2.sent;\n            if (resp) {\n              _context2.next = 6;\n              break;\n            }\n            return _context2.abrupt(\"return\", 'unknown');\n          case 6:\n            settings = (_resp$data = resp.data) === null || _resp$data === void 0 ? void 0 : _resp$data[0];\n            userType = settings === null || settings === void 0 ? void 0 : (_settings$centreValDe = settings.centreValDeLoireExpe) === null || _settings$centreValDe === void 0 ? void 0 : _settings$centreValDe.userType;\n            return _context2.abrupt(\"return\", userType || 'unknown');\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return function findUserType(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n/**\n * Find the timeseries for the current month\n *\n * @param {CozyClient} client - The cozy-client instance\n * @param {IoCozyAccount} account - The trips account\n * @param {Date} startDate - The month starting date\n * @returns {Array<TimeSeries>} the month timeseries\n */\nvar findMonthTimeseries = /*#__PURE__*/function () {\n  var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3(client, account, startDate) {\n    var endDate, queryDef, timeseries, _iterator, _step, _ts$relationships, _ts$relationships$sta, _ts$relationships$sta2, _ts$relationships2, _ts$relationships2$en, _ts$relationships2$en2, ts, startPlaceId, endPlaceId, startPlaceContact, endPlaceContact;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            endDate = Object(date_fns_endOfMonth__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(startDate);\n            logService('info', \"Query timeseries from \".concat(startDate.toISOString(), \" to \").concat(endDate.toISOString()));\n            queryDef = Object(src_queries_queries__WEBPACK_IMPORTED_MODULE_7__[\"buildTimeseriesByDateRange\"])({\n              firstDate: startDate.toISOString(),\n              lastDate: endDate.toISOString(),\n              accountId: account._id,\n              withRelationships: true,\n              limit: 1000\n            });\n            _context3.next = 5;\n            return client.queryAll(queryDef.definition, queryDef.options);\n          case 5:\n            timeseries = _context3.sent;\n            // FIXME: hydration seems not working? Both startPlaceContact and endPlaceContact\n            // appear in document after hydratation as HasOne, but with no content, even though the documents\n            // are in the store, and appear in the .include response of client.query\n            _iterator = _createForOfIteratorHelper(timeseries);\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                ts = _step.value;\n                startPlaceId = (_ts$relationships = ts.relationships) === null || _ts$relationships === void 0 ? void 0 : (_ts$relationships$sta = _ts$relationships.startPlaceContact) === null || _ts$relationships$sta === void 0 ? void 0 : (_ts$relationships$sta2 = _ts$relationships$sta.data) === null || _ts$relationships$sta2 === void 0 ? void 0 : _ts$relationships$sta2._id;\n                endPlaceId = (_ts$relationships2 = ts.relationships) === null || _ts$relationships2 === void 0 ? void 0 : (_ts$relationships2$en = _ts$relationships2.endPlaceContact) === null || _ts$relationships2$en === void 0 ? void 0 : (_ts$relationships2$en2 = _ts$relationships2$en.data) === null || _ts$relationships2$en2 === void 0 ? void 0 : _ts$relationships2$en2._id;\n                if (startPlaceId) {\n                  startPlaceContact = client.getDocumentFromState(src_doctypes__WEBPACK_IMPORTED_MODULE_6__[\"CONTACTS_DOCTYPE\"], startPlaceId);\n                  ts.startPlaceContact = startPlaceContact;\n                }\n                if (endPlaceId) {\n                  endPlaceContact = client.getDocumentFromState(src_doctypes__WEBPACK_IMPORTED_MODULE_6__[\"CONTACTS_DOCTYPE\"], endPlaceId);\n                  ts.endPlaceContact = endPlaceContact;\n                }\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n            return _context3.abrupt(\"return\", timeseries);\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return function findMonthTimeseries(_x4, _x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n/**\n * Get the main transporation mode from the sections, i.e.\n * the mode with the longest distance.\n *\n * @param {Array<Section>} sections - The sections to extract the main mode\n * @returns {string} the main mode\n */\nvar getMainModeFromSections = function getMainModeFromSections(sections) {\n  if (!sections) {\n    return 'unknown';\n  }\n  var modeDistances = sections.reduce(function (acc, section) {\n    if (acc[section.mode]) {\n      acc[section.mode] += section.distance;\n    } else {\n      acc[section.mode] = section.distance;\n    }\n    return acc;\n  }, {});\n  var mainMode = null;\n  var maxDistance = 0;\n  for (var mode in modeDistances) {\n    if (modeDistances[mode] > maxDistance) {\n      mainMode = mode;\n      maxDistance = modeDistances[mode];\n    }\n  }\n  return mainMode;\n};\n\n/**\n * Compute raw measures from timeseries documents.\n * It returns measures with this dict format:\n * ```\n * sections: '<mode>/<school>/<schoolTripDirection>/<isMainMode>': {count, CO2, duration, distance}\n * trips: '<modes>/<school>/<schoolTripDirection>/<mainMode>': {count, CO2, duration, distance}\n * ```\n * @param {Array<TimeseriesGeoJSON>} - The timeseries to compute\n * @returns {{MeasuresDict, MeasuresDict}} two set of measures grouped by key\n */\nvar computeRawMeasures = function computeRawMeasures(timeseries) {\n  if (!timeseries || timeseries.length < 1) {\n    return null;\n  }\n  var sectionMeasures = {};\n  var tripMeasures = {};\n  var _iterator2 = _createForOfIteratorHelper(timeseries),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _startPlace$relations, _startPlace$relations2, _endPlace$relationshi, _endPlace$relationshi2;\n      var ts = _step2.value;\n      if (!ts.aggregation) {\n        continue;\n      }\n\n      // If the trip starts or ends with a registered highschool, use its name as group\n      var startPlace = ts.startPlaceContact;\n      var endPlace = ts.endPlaceContact;\n      var hasExpeStartPlace = startPlace && ((_startPlace$relations = startPlace.relationships) === null || _startPlace$relations === void 0 ? void 0 : (_startPlace$relations2 = _startPlace$relations.groups) === null || _startPlace$relations2 === void 0 ? void 0 : _startPlace$relations2.data.some(function (data) {\n        return data._id === GROUP_ID;\n      }));\n      var hasExpeEndPlace = endPlace && ((_endPlace$relationshi = endPlace.relationships) === null || _endPlace$relationshi === void 0 ? void 0 : (_endPlace$relationshi2 = _endPlace$relationshi.groups) === null || _endPlace$relationshi2 === void 0 ? void 0 : _endPlace$relationshi2.data.some(function (data) {\n        return data._id === GROUP_ID;\n      }));\n      var school = '';\n      var schoolTripDirection = 'none';\n      if (hasExpeStartPlace && hasExpeEndPlace) {\n        school = startPlace.displayName;\n        schoolTripDirection = 'round';\n      } else if (hasExpeStartPlace) {\n        school = startPlace.displayName;\n        schoolTripDirection = 'return';\n      } else if (hasExpeEndPlace) {\n        school = endPlace.displayName;\n        schoolTripDirection = 'outward';\n      }\n      var mainMode = getMainModeFromSections(ts.aggregation.sections);\n      // Compute section measures\n      if (ts.aggregation.sections) {\n        var _iterator3 = _createForOfIteratorHelper(ts.aggregation.sections),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var section = _step3.value;\n            var isMainMode = section.mode === mainMode ? 1 : 0;\n            var keyMeasure = \"\".concat(section.mode, \"/\").concat(school, \"/\").concat(schoolTripDirection, \"/\").concat(isMainMode);\n            var _measure = sectionMeasures[keyMeasure];\n            if (!_measure) {\n              sectionMeasures[keyMeasure] = {\n                count: 1,\n                sumCO2: section.CO2,\n                sumDuration: section.duration,\n                sumDistance: section.distance\n              };\n            } else {\n              var newCount = _measure.count + 1;\n              var newCO2 = _measure.sumCO2 + section.CO2;\n              var newDuration = _measure.sumDuration + section.duration;\n              var newDistance = _measure.sumDistance + section.distance;\n              sectionMeasures[keyMeasure] = {\n                count: newCount,\n                sumCO2: newCO2,\n                sumDuration: newDuration,\n                sumDistance: newDistance\n              };\n            }\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n\n      // Compute trip measure\n      var uniqueSortedModes = Array.from(new Set(ts.aggregation.modes)).sort();\n      var joinModes = uniqueSortedModes.join(':');\n      var keyTripMeasure = \"\".concat(joinModes, \"/\").concat(school, \"/\").concat(schoolTripDirection, \"/\").concat(mainMode);\n      var measure = tripMeasures[keyTripMeasure];\n      if (!measure) {\n        tripMeasures[keyTripMeasure] = {\n          count: 1,\n          sumCO2: ts.aggregation.totalCO2,\n          sumDuration: ts.aggregation.totalDuration,\n          sumDistance: ts.aggregation.totalDistance\n        };\n      } else {\n        var _newCount = measure.count + 1;\n        var _newCO = measure.sumCO2 + ts.aggregation.totalCO2;\n        var _newDuration = measure.sumDuration + ts.aggregation.totalDuration;\n        var _newDistance = measure.sumDistance + ts.aggregation.totalDistance;\n        tripMeasures[keyTripMeasure] = {\n          count: _newCount,\n          sumCO2: _newCO,\n          sumDuration: _newDuration,\n          sumDistance: _newDistance\n        };\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return {\n    sectionMeasures: sectionMeasures,\n    tripMeasures: tripMeasures\n  };\n};\nvar buildConsentMeasure = function buildConsentMeasure(userType) {\n  var startDate = new Date();\n  var groups = [{\n    userType: userType\n  }];\n  var consentMeasure = Object(_dacc__WEBPACK_IMPORTED_MODULE_9__[\"createMeasureForDACC\"])({\n    measureName: src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_EXPE_CONSENT_MEASURE\"],\n    startDate: startDate,\n    value: 1,\n    groups: groups\n  });\n  return consentMeasure;\n};\nvar buildMeasureGroups = function buildMeasureGroups(_ref4) {\n  var keyTokens = _ref4.keyTokens,\n    userType = _ref4.userType,\n    isSectionLevel = _ref4.isSectionLevel;\n  if (isSectionLevel) {\n    var mode = keyTokens[0];\n    var school = keyTokens.length > 1 ? keyTokens[1] : '';\n    var schoolTripDirection = keyTokens.length > 2 ? keyTokens[2] : 'none';\n    var isMainMode = keyTokens.length > 3 ? keyTokens[3] : '0';\n    return [{\n      mode: mode\n    }, {\n      school: school\n    }, {\n      userType: userType\n    }, {\n      schoolTripDirection: schoolTripDirection\n    }, {\n      isMainMode: isMainMode\n    }];\n  } else {\n    var modes = keyTokens[0];\n    var _school = keyTokens.length > 1 ? keyTokens[1] : '';\n    var _schoolTripDirection = keyTokens.length > 2 ? keyTokens[2] : 'none';\n    var mainMode = keyTokens.length > 3 ? keyTokens[3] : '';\n    return [{\n      modes: modes\n    }, {\n      school: _school\n    }, {\n      userType: userType\n    }, {\n      schoolTripDirection: _schoolTripDirection\n    }, {\n      mainMode: mainMode\n    }];\n  }\n};\n\n/**\n * Build actual DACC measures from raw measures dict\n *\n * @typedef BuildMeasuresParams\n * @property {MeasuresDict} measures - The measures to build from\n * @property {string} userType - The user type\n * @property {boolean} isSectionLevel - Whether or not the measure is aggregated on the sections\n *\n * @param {BuildMeasuresParams} - The params\n * @returns {Array<DACCMeasure>} the DACC measures\n */\nvar buildDACCMeasures = function buildDACCMeasures(_ref5) {\n  var measures = _ref5.measures,\n    userType = _ref5.userType,\n    isSectionLevel = _ref5.isSectionLevel;\n  var daccMeasures = [];\n  for (var _i2 = 0, _Object$keys = Object.keys(measures); _i2 < _Object$keys.length; _i2++) {\n    var key = _Object$keys[_i2];\n    var keyTokens = key.split('/');\n    if (keyTokens.length < 1) {\n      logService('error', \"Wrong measure key: \".concat(key));\n      continue;\n    }\n    var groups = buildMeasureGroups({\n      keyTokens: keyTokens,\n      userType: userType,\n      isSectionLevel: isSectionLevel\n    });\n\n    // Note: normally we would use the aggregation starting date, i.e. the start\n    // of the month. But as we are using an incremental process (full month aggregation everyday),\n    // it's easier to use the daily date to differenciate measures on the DACC side.\n    var startDate = new Date();\n    var countMeasure = Object(_dacc__WEBPACK_IMPORTED_MODULE_9__[\"createMeasureForDACC\"])({\n      measureName: isSectionLevel ? src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_SECTIONS_COUNT\"] : src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_TRIPS_COUNT\"],\n      startDate: startDate,\n      value: measures[key].count,\n      groups: groups\n    });\n    var CO2Measure = Object(_dacc__WEBPACK_IMPORTED_MODULE_9__[\"createMeasureForDACC\"])({\n      measureName: isSectionLevel ? src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_SECTIONS_CO2\"] : src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_TRIPS_CO2\"],\n      startDate: startDate,\n      value: measures[key].sumCO2,\n      groups: groups\n    });\n\n    // Compute final avg duration\n    var avgDuration = Number((measures[key].sumDuration / measures[key].count).toFixed(2));\n    var durationMeasure = Object(_dacc__WEBPACK_IMPORTED_MODULE_9__[\"createMeasureForDACC\"])({\n      measureName: isSectionLevel ? src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_SECTIONS_DURATION\"] : src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_TRIPS_DURATION\"],\n      startDate: startDate,\n      value: avgDuration,\n      groups: groups\n    });\n\n    // Compute final avg distance\n    var avgDistance = Number((measures[key].sumDistance / measures[key].count).toFixed(2));\n    var distanceMeasure = Object(_dacc__WEBPACK_IMPORTED_MODULE_9__[\"createMeasureForDACC\"])({\n      measureName: isSectionLevel ? src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_SECTIONS_DISTANCE\"] : src_constants__WEBPACK_IMPORTED_MODULE_5__[\"DACC_MEASURE_NAME_TRIPS_DISTANCE\"],\n      startDate: startDate,\n      value: avgDistance,\n      groups: groups\n    });\n    daccMeasures.push(countMeasure, CO2Measure, durationMeasure, distanceMeasure);\n  }\n  return daccMeasures;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGliL2RhY2NDZW50cmVWYWxEZUxvaXJlRXhwZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9saWIvZGFjY0NlbnRyZVZhbERlTG9pcmVFeHBlLmpzPzcyNmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVuZE9mTW9udGggZnJvbSAnZGF0ZS1mbnMvZW5kT2ZNb250aCdcbmltcG9ydCBzdGFydE9mTW9udGggZnJvbSAnZGF0ZS1mbnMvc3RhcnRPZk1vbnRoJ1xuaW1wb3J0IHtcbiAgREFDQ19FWFBFX0NPTlNFTlRfTUVBU1VSRSxcbiAgREFDQ19NRUFTVVJFX05BTUVfU0VDVElPTlNfQ08yLFxuICBEQUNDX01FQVNVUkVfTkFNRV9TRUNUSU9OU19DT1VOVCxcbiAgREFDQ19NRUFTVVJFX05BTUVfU0VDVElPTlNfRElTVEFOQ0UsXG4gIERBQ0NfTUVBU1VSRV9OQU1FX1NFQ1RJT05TX0RVUkFUSU9OLFxuICBEQUNDX01FQVNVUkVfTkFNRV9UUklQU19DTzIsXG4gIERBQ0NfTUVBU1VSRV9OQU1FX1RSSVBTX0NPVU5ULFxuICBEQUNDX01FQVNVUkVfTkFNRV9UUklQU19ESVNUQU5DRSxcbiAgREFDQ19NRUFTVVJFX05BTUVfVFJJUFNfRFVSQVRJT05cbn0gZnJvbSAnc3JjL2NvbnN0YW50cydcbmltcG9ydCB7IENPTlRBQ1RTX0RPQ1RZUEUgfSBmcm9tICdzcmMvZG9jdHlwZXMnXG5pbXBvcnQge1xuICBidWlsZFNldHRpbmdzUXVlcnksXG4gIGJ1aWxkVGltZXNlcmllc0J5RGF0ZVJhbmdlXG59IGZyb20gJ3NyYy9xdWVyaWVzL3F1ZXJpZXMnXG5cbmltcG9ydCBsb2dnZXIgZnJvbSAnY296eS1sb2dnZXInXG5cbmltcG9ydCB7XG4gIGNyZWF0ZU1lYXN1cmVGb3JEQUNDLFxuICBzZW5kTWVhc3VyZVRvREFDQ1dpdGhSZW1vdGVEb2N0eXBlXG59IGZyb20gJy4vZGFjYydcblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiY296eS1jbGllbnQvZGlzdC9pbmRleFwiKS5Db3p5Q2xpZW50fSBDb3p5Q2xpZW50XG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiY296eS1jbGllbnQvdHlwZXMvdHlwZXNcIikuSW9Db3p5QWNjb3VudH0gSW9Db3p5QWNjb3VudFxuICogQHR5cGVkZWYge2ltcG9ydCgnLi90eXBlcycpLkNvbnRhY3RHcm91cH0gQ29udGFjdEdyb3VwXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3R5cGVzJykuVGltZXNlcmllc0dlb0pTT059IFRpbWVzZXJpZXNHZW9KU09OXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCcuL3R5cGVzJykuU2VjdGlvbn0gU2VjdGlvblxuICogQHR5cGVkZWYge2ltcG9ydCgnLi90eXBlcycpLkRBQ0NNZWFzdXJlfSBEQUNDTWVhc3VyZVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWVhc3VyZXNEaWN0XG4gKiBAcHJvcGVydHkge3sgY291bnQ6IG51bWJlciB9fVxuICogQHByb3BlcnR5IHt7IENPMjogbnVtYmVyIH19XG4gKiBAcHJvcGVydHkge3sgZGlzdGFuY2U6IG51bWJlciB9fVxuICogQHByb3BlcnR5IHt7IGR1cmF0aW9uOiBudW1iZXIgfX1cbiAqXG4gKi9cblxuZXhwb3J0IGNvbnN0IEdST1VQX0lEID0gJzBjOTFkYTE5YjcyNDQ0ZDAxY2JkOTNiNDliMmJhMThjJ1xuXG5jb25zdCBsb2dTZXJ2aWNlID0gbG9nZ2VyLm5hbWVzcGFjZSgnc2VydmljZXMvY2VudHJlVmFsRGVMb2lyZUV4cGUnKVxuXG4vKipcbiAqIFNlbmQgYmlrZSBnb2FsIG1lYXN1cmVzXG4gKlxuICogQHBhcmFtIHtDb3p5Q2xpZW50fSBjbGllbnQgLSBUaGUgY296eS1jbGllbnQgaW5zdGFuY2VcbiAqIEBwYXJhbSB7SW9Db3p5QWNjb3VudH0gYWNjb3VudCAtIFRoZSB0cmlwcyBhY2NvdW50IHRvIG1lYXN1cmVcbiAqL1xuZXhwb3J0IGNvbnN0IHNlbmRDZW50cmVWYWxEZUxvaXJlTWVhc3VyZXNUb0RBQ0MgPSBhc3luYyAoY2xpZW50LCBhY2NvdW50KSA9PiB7XG4gIGNvbnN0IHN0YXJ0QWdnRGF0ZSA9IHN0YXJ0T2ZNb250aChuZXcgRGF0ZSgpKVxuICBsb2dTZXJ2aWNlKCdpbmZvJywgYENvbXB1dGUgREFDQyBtZWFzdXJlcyBmb3IgYWNjb3VudCAke2FjY291bnQuX2lkfWApXG5cbiAgY29uc3QgdXNlclR5cGUgPSBhd2FpdCBmaW5kVXNlclR5cGUoY2xpZW50KVxuXG4gIGNvbnN0IGNvbnNlbnRNZWFzdXJlID0gYnVpbGRDb25zZW50TWVhc3VyZSh1c2VyVHlwZSlcbiAgYXdhaXQgc2VuZE1lYXN1cmVUb0RBQ0NXaXRoUmVtb3RlRG9jdHlwZShjbGllbnQsIGNvbnNlbnRNZWFzdXJlKVxuXG4gIGNvbnN0IHRpbWVzZXJpZXMgPSBhd2FpdCBmaW5kTW9udGhUaW1lc2VyaWVzKGNsaWVudCwgYWNjb3VudCwgc3RhcnRBZ2dEYXRlKVxuICBpZiAodGltZXNlcmllcy5sZW5ndGggPCAxKSB7XG4gICAgbG9nU2VydmljZSgnaW5mbycsIGBObyB0cmlwcyB0byBjb21wdXRlYClcbiAgICAvLyBObyB0cmlwcywgYWJvcnRcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGxvZ1NlcnZpY2UoJ2luZm8nLCBgQ29tcHV0ZSBtZWFzdXJlcyBmb3IgJHt0aW1lc2VyaWVzLmxlbmd0aH0gdGltZXNlcmllc2ApXG4gIGNvbnN0IG1lYXN1cmVzID0gY29tcHV0ZVJhd01lYXN1cmVzKHRpbWVzZXJpZXMpXG4gIGlmICghbWVhc3VyZXMgfHwgKCFtZWFzdXJlcy5zZWN0aW9uTWVhc3VyZXMgJiYgIW1lYXN1cmVzLnRyaXBNZWFzdXJlcykpIHtcbiAgICBsb2dTZXJ2aWNlKCdpbmZvJywgJ05vIG1lYXN1cmUgdG8gc2VuZCcpXG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3QgZGFjY01lYXN1cmVzID0gW11cbiAgaWYgKG1lYXN1cmVzLnRyaXBNZWFzdXJlcyAmJiBPYmplY3Qua2V5cyhtZWFzdXJlcy50cmlwTWVhc3VyZXMpLmxlbmd0aCA+IDApIHtcbiAgICBsb2dTZXJ2aWNlKFxuICAgICAgJ2luZm8nLFxuICAgICAgYEJ1aWxkICR7XG4gICAgICAgIE9iamVjdC5rZXlzKG1lYXN1cmVzLnRyaXBNZWFzdXJlcykubGVuZ3RoXG4gICAgICB9IG1lYXN1cmVzIHdpdGggdXNlciB0eXBlOiAgJHt1c2VyVHlwZX1gXG4gICAgKVxuICAgIGNvbnN0IGRhY2NUcmlwTWVhc3VyZXMgPSBhd2FpdCBidWlsZERBQ0NNZWFzdXJlcyh7XG4gICAgICBtZWFzdXJlczogbWVhc3VyZXMudHJpcE1lYXN1cmVzLFxuICAgICAgdXNlclR5cGUsXG4gICAgICBpc1NlY3Rpb25MZXZlbDogZmFsc2VcbiAgICB9KVxuICAgIGRhY2NNZWFzdXJlcy5wdXNoKC4uLmRhY2NUcmlwTWVhc3VyZXMpXG4gIH1cbiAgaWYgKFxuICAgIG1lYXN1cmVzLnNlY3Rpb25NZWFzdXJlcyAmJlxuICAgIE9iamVjdC5rZXlzKG1lYXN1cmVzLnNlY3Rpb25NZWFzdXJlcykubGVuZ3RoID4gMFxuICApIHtcbiAgICBsb2dTZXJ2aWNlKFxuICAgICAgJ2luZm8nLFxuICAgICAgYEJ1aWxkICR7XG4gICAgICAgIE9iamVjdC5rZXlzKG1lYXN1cmVzLnNlY3Rpb25NZWFzdXJlcykubGVuZ3RoXG4gICAgICB9IG1lYXN1cmVzIHdpdGggdXNlciB0eXBlOiAgJHt1c2VyVHlwZX1gXG4gICAgKVxuICAgIGNvbnN0IGRhY2NTZWN0aW9uTWVhc3VyZXMgPSBhd2FpdCBidWlsZERBQ0NNZWFzdXJlcyh7XG4gICAgICBtZWFzdXJlczogbWVhc3VyZXMuc2VjdGlvbk1lYXN1cmVzLFxuICAgICAgdXNlclR5cGUsXG4gICAgICBpc1NlY3Rpb25MZXZlbDogdHJ1ZVxuICAgIH0pXG4gICAgZGFjY01lYXN1cmVzLnB1c2goLi4uZGFjY1NlY3Rpb25NZWFzdXJlcylcbiAgfVxuXG4gIGZvciAoY29uc3QgbWVhc3VyZSBvZiBkYWNjTWVhc3VyZXMpIHtcbiAgICBsb2dTZXJ2aWNlKCdpbmZvJywgYFNlbmQgbWVhc3VyZSAke0pTT04uc3RyaW5naWZ5KG1lYXN1cmUpfSB0byBEQUNDLi4uYClcbiAgICBhd2FpdCBzZW5kTWVhc3VyZVRvREFDQ1dpdGhSZW1vdGVEb2N0eXBlKGNsaWVudCwgbWVhc3VyZSlcbiAgfVxufVxuXG4vKipcbiAqIEZpbmQgdXNlciB0eXBlLCBhcyBkZWZpbmVkIGluIHNldHRpbmdzXG4gKlxuICogQHBhcmFtIHtDb3p5Q2xpZW50fSBjbGllbnQgLSBUaGUgY296eS1jbGllbnQgaW5zdGFuY2VcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSB1c2VyIHR5cGU6ICdoaWdoU2Nob29sU3R1ZGVudCcgfCAnbmF0aW9uYWxFZHVjYXRpb25TdGFmZicgfCAnY2VudHJlVmFsRGVMb2lyZVN0YWZmJyB8ICdvdGhlcidcbiAqL1xuY29uc3QgZmluZFVzZXJUeXBlID0gYXN5bmMgY2xpZW50ID0+IHtcbiAgY29uc3Qgc2V0dGluZ3NRdWVyeURlZiA9IGJ1aWxkU2V0dGluZ3NRdWVyeSgpXG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBjbGllbnQucXVlcnkoXG4gICAgc2V0dGluZ3NRdWVyeURlZi5kZWZpbml0aW9uLFxuICAgIHNldHRpbmdzUXVlcnlEZWYub3B0aW9uc1xuICApXG4gIGlmICghcmVzcCkge1xuICAgIHJldHVybiAndW5rbm93bidcbiAgfVxuICBjb25zdCBzZXR0aW5ncyA9IHJlc3AuZGF0YT8uWzBdXG4gIGNvbnN0IHVzZXJUeXBlID0gc2V0dGluZ3M/LmNlbnRyZVZhbERlTG9pcmVFeHBlPy51c2VyVHlwZVxuICByZXR1cm4gdXNlclR5cGUgfHwgJ3Vua25vd24nXG59XG5cbi8qKlxuICogRmluZCB0aGUgdGltZXNlcmllcyBmb3IgdGhlIGN1cnJlbnQgbW9udGhcbiAqXG4gKiBAcGFyYW0ge0NvenlDbGllbnR9IGNsaWVudCAtIFRoZSBjb3p5LWNsaWVudCBpbnN0YW5jZVxuICogQHBhcmFtIHtJb0NvenlBY2NvdW50fSBhY2NvdW50IC0gVGhlIHRyaXBzIGFjY291bnRcbiAqIEBwYXJhbSB7RGF0ZX0gc3RhcnREYXRlIC0gVGhlIG1vbnRoIHN0YXJ0aW5nIGRhdGVcbiAqIEByZXR1cm5zIHtBcnJheTxUaW1lU2VyaWVzPn0gdGhlIG1vbnRoIHRpbWVzZXJpZXNcbiAqL1xuY29uc3QgZmluZE1vbnRoVGltZXNlcmllcyA9IGFzeW5jIChjbGllbnQsIGFjY291bnQsIHN0YXJ0RGF0ZSkgPT4ge1xuICBjb25zdCBlbmREYXRlID0gZW5kT2ZNb250aChzdGFydERhdGUpXG4gIGxvZ1NlcnZpY2UoXG4gICAgJ2luZm8nLFxuICAgIGBRdWVyeSB0aW1lc2VyaWVzIGZyb20gJHtzdGFydERhdGUudG9JU09TdHJpbmcoKX0gdG8gJHtlbmREYXRlLnRvSVNPU3RyaW5nKCl9YFxuICApXG4gIGNvbnN0IHF1ZXJ5RGVmID0gYnVpbGRUaW1lc2VyaWVzQnlEYXRlUmFuZ2Uoe1xuICAgIGZpcnN0RGF0ZTogc3RhcnREYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgbGFzdERhdGU6IGVuZERhdGUudG9JU09TdHJpbmcoKSxcbiAgICBhY2NvdW50SWQ6IGFjY291bnQuX2lkLFxuICAgIHdpdGhSZWxhdGlvbnNoaXBzOiB0cnVlLFxuICAgIGxpbWl0OiAxMDAwXG4gIH0pXG4gIGNvbnN0IHRpbWVzZXJpZXMgPSBhd2FpdCBjbGllbnQucXVlcnlBbGwoXG4gICAgcXVlcnlEZWYuZGVmaW5pdGlvbixcbiAgICBxdWVyeURlZi5vcHRpb25zXG4gIClcbiAgLy8gRklYTUU6IGh5ZHJhdGlvbiBzZWVtcyBub3Qgd29ya2luZz8gQm90aCBzdGFydFBsYWNlQ29udGFjdCBhbmQgZW5kUGxhY2VDb250YWN0XG4gIC8vIGFwcGVhciBpbiBkb2N1bWVudCBhZnRlciBoeWRyYXRhdGlvbiBhcyBIYXNPbmUsIGJ1dCB3aXRoIG5vIGNvbnRlbnQsIGV2ZW4gdGhvdWdoIHRoZSBkb2N1bWVudHNcbiAgLy8gYXJlIGluIHRoZSBzdG9yZSwgYW5kIGFwcGVhciBpbiB0aGUgLmluY2x1ZGUgcmVzcG9uc2Ugb2YgY2xpZW50LnF1ZXJ5XG4gIGZvciAoY29uc3QgdHMgb2YgdGltZXNlcmllcykge1xuICAgIGNvbnN0IHN0YXJ0UGxhY2VJZCA9IHRzLnJlbGF0aW9uc2hpcHM/LnN0YXJ0UGxhY2VDb250YWN0Py5kYXRhPy5faWRcbiAgICBjb25zdCBlbmRQbGFjZUlkID0gdHMucmVsYXRpb25zaGlwcz8uZW5kUGxhY2VDb250YWN0Py5kYXRhPy5faWRcbiAgICBpZiAoc3RhcnRQbGFjZUlkKSB7XG4gICAgICBjb25zdCBzdGFydFBsYWNlQ29udGFjdCA9IGNsaWVudC5nZXREb2N1bWVudEZyb21TdGF0ZShcbiAgICAgICAgQ09OVEFDVFNfRE9DVFlQRSxcbiAgICAgICAgc3RhcnRQbGFjZUlkXG4gICAgICApXG4gICAgICB0cy5zdGFydFBsYWNlQ29udGFjdCA9IHN0YXJ0UGxhY2VDb250YWN0XG4gICAgfVxuICAgIGlmIChlbmRQbGFjZUlkKSB7XG4gICAgICBjb25zdCBlbmRQbGFjZUNvbnRhY3QgPSBjbGllbnQuZ2V0RG9jdW1lbnRGcm9tU3RhdGUoXG4gICAgICAgIENPTlRBQ1RTX0RPQ1RZUEUsXG4gICAgICAgIGVuZFBsYWNlSWRcbiAgICAgIClcbiAgICAgIHRzLmVuZFBsYWNlQ29udGFjdCA9IGVuZFBsYWNlQ29udGFjdFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aW1lc2VyaWVzXG59XG5cbi8qKlxuICogR2V0IHRoZSBtYWluIHRyYW5zcG9yYXRpb24gbW9kZSBmcm9tIHRoZSBzZWN0aW9ucywgaS5lLlxuICogdGhlIG1vZGUgd2l0aCB0aGUgbG9uZ2VzdCBkaXN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFNlY3Rpb24+fSBzZWN0aW9ucyAtIFRoZSBzZWN0aW9ucyB0byBleHRyYWN0IHRoZSBtYWluIG1vZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBtYWluIG1vZGVcbiAqL1xuZXhwb3J0IGNvbnN0IGdldE1haW5Nb2RlRnJvbVNlY3Rpb25zID0gc2VjdGlvbnMgPT4ge1xuICBpZiAoIXNlY3Rpb25zKSB7XG4gICAgcmV0dXJuICd1bmtub3duJ1xuICB9XG4gIGxldCBtb2RlRGlzdGFuY2VzID0gc2VjdGlvbnMucmVkdWNlKChhY2MsIHNlY3Rpb24pID0+IHtcbiAgICBpZiAoYWNjW3NlY3Rpb24ubW9kZV0pIHtcbiAgICAgIGFjY1tzZWN0aW9uLm1vZGVdICs9IHNlY3Rpb24uZGlzdGFuY2VcbiAgICB9IGVsc2Uge1xuICAgICAgYWNjW3NlY3Rpb24ubW9kZV0gPSBzZWN0aW9uLmRpc3RhbmNlXG4gICAgfVxuICAgIHJldHVybiBhY2NcbiAgfSwge30pXG5cbiAgbGV0IG1haW5Nb2RlID0gbnVsbFxuICBsZXQgbWF4RGlzdGFuY2UgPSAwXG4gIGZvciAobGV0IG1vZGUgaW4gbW9kZURpc3RhbmNlcykge1xuICAgIGlmIChtb2RlRGlzdGFuY2VzW21vZGVdID4gbWF4RGlzdGFuY2UpIHtcbiAgICAgIG1haW5Nb2RlID0gbW9kZVxuICAgICAgbWF4RGlzdGFuY2UgPSBtb2RlRGlzdGFuY2VzW21vZGVdXG4gICAgfVxuICB9XG4gIHJldHVybiBtYWluTW9kZVxufVxuXG4vKipcbiAqIENvbXB1dGUgcmF3IG1lYXN1cmVzIGZyb20gdGltZXNlcmllcyBkb2N1bWVudHMuXG4gKiBJdCByZXR1cm5zIG1lYXN1cmVzIHdpdGggdGhpcyBkaWN0IGZvcm1hdDpcbiAqIGBgYFxuICogc2VjdGlvbnM6ICc8bW9kZT4vPHNjaG9vbD4vPHNjaG9vbFRyaXBEaXJlY3Rpb24+Lzxpc01haW5Nb2RlPic6IHtjb3VudCwgQ08yLCBkdXJhdGlvbiwgZGlzdGFuY2V9XG4gKiB0cmlwczogJzxtb2Rlcz4vPHNjaG9vbD4vPHNjaG9vbFRyaXBEaXJlY3Rpb24+LzxtYWluTW9kZT4nOiB7Y291bnQsIENPMiwgZHVyYXRpb24sIGRpc3RhbmNlfVxuICogYGBgXG4gKiBAcGFyYW0ge0FycmF5PFRpbWVzZXJpZXNHZW9KU09OPn0gLSBUaGUgdGltZXNlcmllcyB0byBjb21wdXRlXG4gKiBAcmV0dXJucyB7e01lYXN1cmVzRGljdCwgTWVhc3VyZXNEaWN0fX0gdHdvIHNldCBvZiBtZWFzdXJlcyBncm91cGVkIGJ5IGtleVxuICovXG5leHBvcnQgY29uc3QgY29tcHV0ZVJhd01lYXN1cmVzID0gdGltZXNlcmllcyA9PiB7XG4gIGlmICghdGltZXNlcmllcyB8fCB0aW1lc2VyaWVzLmxlbmd0aCA8IDEpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGNvbnN0IHNlY3Rpb25NZWFzdXJlcyA9IHt9XG4gIGNvbnN0IHRyaXBNZWFzdXJlcyA9IHt9XG5cbiAgZm9yIChjb25zdCB0cyBvZiB0aW1lc2VyaWVzKSB7XG4gICAgaWYgKCF0cy5hZ2dyZWdhdGlvbikge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdHJpcCBzdGFydHMgb3IgZW5kcyB3aXRoIGEgcmVnaXN0ZXJlZCBoaWdoc2Nob29sLCB1c2UgaXRzIG5hbWUgYXMgZ3JvdXBcbiAgICBjb25zdCBzdGFydFBsYWNlID0gdHMuc3RhcnRQbGFjZUNvbnRhY3RcbiAgICBjb25zdCBlbmRQbGFjZSA9IHRzLmVuZFBsYWNlQ29udGFjdFxuXG4gICAgY29uc3QgaGFzRXhwZVN0YXJ0UGxhY2UgPVxuICAgICAgc3RhcnRQbGFjZSAmJlxuICAgICAgc3RhcnRQbGFjZS5yZWxhdGlvbnNoaXBzPy5ncm91cHM/LmRhdGEuc29tZShkYXRhID0+IGRhdGEuX2lkID09PSBHUk9VUF9JRClcbiAgICBjb25zdCBoYXNFeHBlRW5kUGxhY2UgPVxuICAgICAgZW5kUGxhY2UgJiZcbiAgICAgIGVuZFBsYWNlLnJlbGF0aW9uc2hpcHM/Lmdyb3Vwcz8uZGF0YS5zb21lKGRhdGEgPT4gZGF0YS5faWQgPT09IEdST1VQX0lEKVxuXG4gICAgbGV0IHNjaG9vbCA9ICcnXG4gICAgbGV0IHNjaG9vbFRyaXBEaXJlY3Rpb24gPSAnbm9uZSdcbiAgICBpZiAoaGFzRXhwZVN0YXJ0UGxhY2UgJiYgaGFzRXhwZUVuZFBsYWNlKSB7XG4gICAgICBzY2hvb2wgPSBzdGFydFBsYWNlLmRpc3BsYXlOYW1lXG4gICAgICBzY2hvb2xUcmlwRGlyZWN0aW9uID0gJ3JvdW5kJ1xuICAgIH0gZWxzZSBpZiAoaGFzRXhwZVN0YXJ0UGxhY2UpIHtcbiAgICAgIHNjaG9vbCA9IHN0YXJ0UGxhY2UuZGlzcGxheU5hbWVcbiAgICAgIHNjaG9vbFRyaXBEaXJlY3Rpb24gPSAncmV0dXJuJ1xuICAgIH0gZWxzZSBpZiAoaGFzRXhwZUVuZFBsYWNlKSB7XG4gICAgICBzY2hvb2wgPSBlbmRQbGFjZS5kaXNwbGF5TmFtZVxuICAgICAgc2Nob29sVHJpcERpcmVjdGlvbiA9ICdvdXR3YXJkJ1xuICAgIH1cbiAgICBjb25zdCBtYWluTW9kZSA9IGdldE1haW5Nb2RlRnJvbVNlY3Rpb25zKHRzLmFnZ3JlZ2F0aW9uLnNlY3Rpb25zKVxuICAgIC8vIENvbXB1dGUgc2VjdGlvbiBtZWFzdXJlc1xuICAgIGlmICh0cy5hZ2dyZWdhdGlvbi5zZWN0aW9ucykge1xuICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHRzLmFnZ3JlZ2F0aW9uLnNlY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IGlzTWFpbk1vZGUgPSBzZWN0aW9uLm1vZGUgPT09IG1haW5Nb2RlID8gMSA6IDBcbiAgICAgICAgY29uc3Qga2V5TWVhc3VyZSA9IGAke3NlY3Rpb24ubW9kZX0vJHtzY2hvb2x9LyR7c2Nob29sVHJpcERpcmVjdGlvbn0vJHtpc01haW5Nb2RlfWBcbiAgICAgICAgY29uc3QgbWVhc3VyZSA9IHNlY3Rpb25NZWFzdXJlc1trZXlNZWFzdXJlXVxuICAgICAgICBpZiAoIW1lYXN1cmUpIHtcbiAgICAgICAgICBzZWN0aW9uTWVhc3VyZXNba2V5TWVhc3VyZV0gPSB7XG4gICAgICAgICAgICBjb3VudDogMSxcbiAgICAgICAgICAgIHN1bUNPMjogc2VjdGlvbi5DTzIsXG4gICAgICAgICAgICBzdW1EdXJhdGlvbjogc2VjdGlvbi5kdXJhdGlvbixcbiAgICAgICAgICAgIHN1bURpc3RhbmNlOiBzZWN0aW9uLmRpc3RhbmNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG5ld0NvdW50ID0gbWVhc3VyZS5jb3VudCArIDFcbiAgICAgICAgICBjb25zdCBuZXdDTzIgPSBtZWFzdXJlLnN1bUNPMiArIHNlY3Rpb24uQ08yXG4gICAgICAgICAgY29uc3QgbmV3RHVyYXRpb24gPSBtZWFzdXJlLnN1bUR1cmF0aW9uICsgc2VjdGlvbi5kdXJhdGlvblxuICAgICAgICAgIGNvbnN0IG5ld0Rpc3RhbmNlID0gbWVhc3VyZS5zdW1EaXN0YW5jZSArIHNlY3Rpb24uZGlzdGFuY2VcbiAgICAgICAgICBzZWN0aW9uTWVhc3VyZXNba2V5TWVhc3VyZV0gPSB7XG4gICAgICAgICAgICBjb3VudDogbmV3Q291bnQsXG4gICAgICAgICAgICBzdW1DTzI6IG5ld0NPMixcbiAgICAgICAgICAgIHN1bUR1cmF0aW9uOiBuZXdEdXJhdGlvbixcbiAgICAgICAgICAgIHN1bURpc3RhbmNlOiBuZXdEaXN0YW5jZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENvbXB1dGUgdHJpcCBtZWFzdXJlXG4gICAgY29uc3QgdW5pcXVlU29ydGVkTW9kZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQodHMuYWdncmVnYXRpb24ubW9kZXMpKS5zb3J0KClcbiAgICBjb25zdCBqb2luTW9kZXMgPSB1bmlxdWVTb3J0ZWRNb2Rlcy5qb2luKCc6JylcbiAgICBjb25zdCBrZXlUcmlwTWVhc3VyZSA9IGAke2pvaW5Nb2Rlc30vJHtzY2hvb2x9LyR7c2Nob29sVHJpcERpcmVjdGlvbn0vJHttYWluTW9kZX1gXG4gICAgY29uc3QgbWVhc3VyZSA9IHRyaXBNZWFzdXJlc1trZXlUcmlwTWVhc3VyZV1cbiAgICBpZiAoIW1lYXN1cmUpIHtcbiAgICAgIHRyaXBNZWFzdXJlc1trZXlUcmlwTWVhc3VyZV0gPSB7XG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgICBzdW1DTzI6IHRzLmFnZ3JlZ2F0aW9uLnRvdGFsQ08yLFxuICAgICAgICBzdW1EdXJhdGlvbjogdHMuYWdncmVnYXRpb24udG90YWxEdXJhdGlvbixcbiAgICAgICAgc3VtRGlzdGFuY2U6IHRzLmFnZ3JlZ2F0aW9uLnRvdGFsRGlzdGFuY2VcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3Q291bnQgPSBtZWFzdXJlLmNvdW50ICsgMVxuICAgICAgY29uc3QgbmV3Q08yID0gbWVhc3VyZS5zdW1DTzIgKyB0cy5hZ2dyZWdhdGlvbi50b3RhbENPMlxuICAgICAgY29uc3QgbmV3RHVyYXRpb24gPSBtZWFzdXJlLnN1bUR1cmF0aW9uICsgdHMuYWdncmVnYXRpb24udG90YWxEdXJhdGlvblxuICAgICAgY29uc3QgbmV3RGlzdGFuY2UgPSBtZWFzdXJlLnN1bURpc3RhbmNlICsgdHMuYWdncmVnYXRpb24udG90YWxEaXN0YW5jZVxuICAgICAgdHJpcE1lYXN1cmVzW2tleVRyaXBNZWFzdXJlXSA9IHtcbiAgICAgICAgY291bnQ6IG5ld0NvdW50LFxuICAgICAgICBzdW1DTzI6IG5ld0NPMixcbiAgICAgICAgc3VtRHVyYXRpb246IG5ld0R1cmF0aW9uLFxuICAgICAgICBzdW1EaXN0YW5jZTogbmV3RGlzdGFuY2VcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgc2VjdGlvbk1lYXN1cmVzLCB0cmlwTWVhc3VyZXMgfVxufVxuXG5jb25zdCBidWlsZENvbnNlbnRNZWFzdXJlID0gdXNlclR5cGUgPT4ge1xuICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpXG4gIGNvbnN0IGdyb3VwcyA9IFt7IHVzZXJUeXBlIH1dXG4gIGNvbnN0IGNvbnNlbnRNZWFzdXJlID0gY3JlYXRlTWVhc3VyZUZvckRBQ0Moe1xuICAgIG1lYXN1cmVOYW1lOiBEQUNDX0VYUEVfQ09OU0VOVF9NRUFTVVJFLFxuICAgIHN0YXJ0RGF0ZSxcbiAgICB2YWx1ZTogMSxcbiAgICBncm91cHNcbiAgfSlcbiAgcmV0dXJuIGNvbnNlbnRNZWFzdXJlXG59XG5cbmNvbnN0IGJ1aWxkTWVhc3VyZUdyb3VwcyA9ICh7IGtleVRva2VucywgdXNlclR5cGUsIGlzU2VjdGlvbkxldmVsIH0pID0+IHtcbiAgaWYgKGlzU2VjdGlvbkxldmVsKSB7XG4gICAgY29uc3QgbW9kZSA9IGtleVRva2Vuc1swXVxuICAgIGNvbnN0IHNjaG9vbCA9IGtleVRva2Vucy5sZW5ndGggPiAxID8ga2V5VG9rZW5zWzFdIDogJydcbiAgICBjb25zdCBzY2hvb2xUcmlwRGlyZWN0aW9uID0ga2V5VG9rZW5zLmxlbmd0aCA+IDIgPyBrZXlUb2tlbnNbMl0gOiAnbm9uZSdcbiAgICBjb25zdCBpc01haW5Nb2RlID0ga2V5VG9rZW5zLmxlbmd0aCA+IDMgPyBrZXlUb2tlbnNbM10gOiAnMCdcbiAgICByZXR1cm4gW1xuICAgICAgeyBtb2RlIH0sXG4gICAgICB7IHNjaG9vbCB9LFxuICAgICAgeyB1c2VyVHlwZSB9LFxuICAgICAgeyBzY2hvb2xUcmlwRGlyZWN0aW9uIH0sXG4gICAgICB7IGlzTWFpbk1vZGUgfVxuICAgIF1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBtb2RlcyA9IGtleVRva2Vuc1swXVxuICAgIGNvbnN0IHNjaG9vbCA9IGtleVRva2Vucy5sZW5ndGggPiAxID8ga2V5VG9rZW5zWzFdIDogJydcbiAgICBjb25zdCBzY2hvb2xUcmlwRGlyZWN0aW9uID0ga2V5VG9rZW5zLmxlbmd0aCA+IDIgPyBrZXlUb2tlbnNbMl0gOiAnbm9uZSdcbiAgICBjb25zdCBtYWluTW9kZSA9IGtleVRva2Vucy5sZW5ndGggPiAzID8ga2V5VG9rZW5zWzNdIDogJydcbiAgICByZXR1cm4gW1xuICAgICAgeyBtb2RlcyB9LFxuICAgICAgeyBzY2hvb2wgfSxcbiAgICAgIHsgdXNlclR5cGUgfSxcbiAgICAgIHsgc2Nob29sVHJpcERpcmVjdGlvbiB9LFxuICAgICAgeyBtYWluTW9kZSB9XG4gICAgXVxuICB9XG59XG5cbi8qKlxuICogQnVpbGQgYWN0dWFsIERBQ0MgbWVhc3VyZXMgZnJvbSByYXcgbWVhc3VyZXMgZGljdFxuICpcbiAqIEB0eXBlZGVmIEJ1aWxkTWVhc3VyZXNQYXJhbXNcbiAqIEBwcm9wZXJ0eSB7TWVhc3VyZXNEaWN0fSBtZWFzdXJlcyAtIFRoZSBtZWFzdXJlcyB0byBidWlsZCBmcm9tXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdXNlclR5cGUgLSBUaGUgdXNlciB0eXBlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGlzU2VjdGlvbkxldmVsIC0gV2hldGhlciBvciBub3QgdGhlIG1lYXN1cmUgaXMgYWdncmVnYXRlZCBvbiB0aGUgc2VjdGlvbnNcbiAqXG4gKiBAcGFyYW0ge0J1aWxkTWVhc3VyZXNQYXJhbXN9IC0gVGhlIHBhcmFtc1xuICogQHJldHVybnMge0FycmF5PERBQ0NNZWFzdXJlPn0gdGhlIERBQ0MgbWVhc3VyZXNcbiAqL1xuY29uc3QgYnVpbGREQUNDTWVhc3VyZXMgPSAoeyBtZWFzdXJlcywgdXNlclR5cGUsIGlzU2VjdGlvbkxldmVsIH0pID0+IHtcbiAgY29uc3QgZGFjY01lYXN1cmVzID0gW11cblxuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhtZWFzdXJlcykpIHtcbiAgICBjb25zdCBrZXlUb2tlbnMgPSBrZXkuc3BsaXQoJy8nKVxuICAgIGlmIChrZXlUb2tlbnMubGVuZ3RoIDwgMSkge1xuICAgICAgbG9nU2VydmljZSgnZXJyb3InLCBgV3JvbmcgbWVhc3VyZSBrZXk6ICR7a2V5fWApXG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBjb25zdCBncm91cHMgPSBidWlsZE1lYXN1cmVHcm91cHMoeyBrZXlUb2tlbnMsIHVzZXJUeXBlLCBpc1NlY3Rpb25MZXZlbCB9KVxuXG4gICAgLy8gTm90ZTogbm9ybWFsbHkgd2Ugd291bGQgdXNlIHRoZSBhZ2dyZWdhdGlvbiBzdGFydGluZyBkYXRlLCBpLmUuIHRoZSBzdGFydFxuICAgIC8vIG9mIHRoZSBtb250aC4gQnV0IGFzIHdlIGFyZSB1c2luZyBhbiBpbmNyZW1lbnRhbCBwcm9jZXNzIChmdWxsIG1vbnRoIGFnZ3JlZ2F0aW9uIGV2ZXJ5ZGF5KSxcbiAgICAvLyBpdCdzIGVhc2llciB0byB1c2UgdGhlIGRhaWx5IGRhdGUgdG8gZGlmZmVyZW5jaWF0ZSBtZWFzdXJlcyBvbiB0aGUgREFDQyBzaWRlLlxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKClcbiAgICBjb25zdCBjb3VudE1lYXN1cmUgPSBjcmVhdGVNZWFzdXJlRm9yREFDQyh7XG4gICAgICBtZWFzdXJlTmFtZTogaXNTZWN0aW9uTGV2ZWxcbiAgICAgICAgPyBEQUNDX01FQVNVUkVfTkFNRV9TRUNUSU9OU19DT1VOVFxuICAgICAgICA6IERBQ0NfTUVBU1VSRV9OQU1FX1RSSVBTX0NPVU5ULFxuICAgICAgc3RhcnREYXRlLFxuICAgICAgdmFsdWU6IG1lYXN1cmVzW2tleV0uY291bnQsXG4gICAgICBncm91cHNcbiAgICB9KVxuXG4gICAgY29uc3QgQ08yTWVhc3VyZSA9IGNyZWF0ZU1lYXN1cmVGb3JEQUNDKHtcbiAgICAgIG1lYXN1cmVOYW1lOiBpc1NlY3Rpb25MZXZlbFxuICAgICAgICA/IERBQ0NfTUVBU1VSRV9OQU1FX1NFQ1RJT05TX0NPMlxuICAgICAgICA6IERBQ0NfTUVBU1VSRV9OQU1FX1RSSVBTX0NPMixcbiAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgIHZhbHVlOiBtZWFzdXJlc1trZXldLnN1bUNPMixcbiAgICAgIGdyb3Vwc1xuICAgIH0pXG5cbiAgICAvLyBDb21wdXRlIGZpbmFsIGF2ZyBkdXJhdGlvblxuICAgIGNvbnN0IGF2Z0R1cmF0aW9uID0gTnVtYmVyKFxuICAgICAgKG1lYXN1cmVzW2tleV0uc3VtRHVyYXRpb24gLyBtZWFzdXJlc1trZXldLmNvdW50KS50b0ZpeGVkKDIpXG4gICAgKVxuXG4gICAgY29uc3QgZHVyYXRpb25NZWFzdXJlID0gY3JlYXRlTWVhc3VyZUZvckRBQ0Moe1xuICAgICAgbWVhc3VyZU5hbWU6IGlzU2VjdGlvbkxldmVsXG4gICAgICAgID8gREFDQ19NRUFTVVJFX05BTUVfU0VDVElPTlNfRFVSQVRJT05cbiAgICAgICAgOiBEQUNDX01FQVNVUkVfTkFNRV9UUklQU19EVVJBVElPTixcbiAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgIHZhbHVlOiBhdmdEdXJhdGlvbixcbiAgICAgIGdyb3Vwc1xuICAgIH0pXG5cbiAgICAvLyBDb21wdXRlIGZpbmFsIGF2ZyBkaXN0YW5jZVxuICAgIGNvbnN0IGF2Z0Rpc3RhbmNlID0gTnVtYmVyKFxuICAgICAgKG1lYXN1cmVzW2tleV0uc3VtRGlzdGFuY2UgLyBtZWFzdXJlc1trZXldLmNvdW50KS50b0ZpeGVkKDIpXG4gICAgKVxuXG4gICAgY29uc3QgZGlzdGFuY2VNZWFzdXJlID0gY3JlYXRlTWVhc3VyZUZvckRBQ0Moe1xuICAgICAgbWVhc3VyZU5hbWU6IGlzU2VjdGlvbkxldmVsXG4gICAgICAgID8gREFDQ19NRUFTVVJFX05BTUVfU0VDVElPTlNfRElTVEFOQ0VcbiAgICAgICAgOiBEQUNDX01FQVNVUkVfTkFNRV9UUklQU19ESVNUQU5DRSxcbiAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgIHZhbHVlOiBhdmdEaXN0YW5jZSxcbiAgICAgIGdyb3Vwc1xuICAgIH0pXG4gICAgZGFjY01lYXN1cmVzLnB1c2goXG4gICAgICBjb3VudE1lYXN1cmUsXG4gICAgICBDTzJNZWFzdXJlLFxuICAgICAgZHVyYXRpb25NZWFzdXJlLFxuICAgICAgZGlzdGFuY2VNZWFzdXJlXG4gICAgKVxuICB9XG4gIHJldHVybiBkYWNjTWVhc3VyZXNcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFKQTtBQUtBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUVBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFKQTtBQUtBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQTFEQTtBQUFBO0FBQUE7QUFDQTtBQTJEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFIQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFaQTtBQUFBO0FBQUE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUhBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXhDQTtBQUFBO0FBQUE7QUFDQTtBQXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/lib/daccCentreValDeLoireExpe.js\n");

/***/ })

})